{"ast":null,"code":"var _jsxFileName = \"C:\\\\Scriptify\\\\ai-content-studio\\\\frontend\\\\src\\\\components\\\\VideoEditor\\\\VideoEditor.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useRef, useEffect, useCallback } from \"react\";\nimport { Upload, Play, Pause, Volume2, Video, Music, SkipBack, SkipForward, VolumeX, Copy, Trash2, Scissors, Image, Film, Plus, Layers, ZoomIn, ZoomOut, RotateCcw, HelpCircle, X } from \"lucide-react\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst VideoEditor = () => {\n  _s();\n  const [mediaLibrary, setMediaLibrary] = useState({\n    videos: [],\n    audios: [],\n    images: []\n  });\n  const [timelineItems, setTimelineItems] = useState([]);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [videoDuration, setVideoDuration] = useState(60);\n  const [selectedTimelineItem, setSelectedTimelineItem] = useState(null);\n  const [timelineZoom, setTimelineZoom] = useState(1);\n  const [activeTab, setActiveTab] = useState(\"videos\");\n  const [volume, setVolume] = useState(1);\n  const [isMuted, setIsMuted] = useState(false);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [currentVideoSource, setCurrentVideoSource] = useState(null);\n  const [draggedItem, setDraggedItem] = useState(null);\n  const [draggedTimelineItem, setDraggedTimelineItem] = useState(null);\n  const [dropPreview, setDropPreview] = useState(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [isTimelineDragging, setIsTimelineDragging] = useState(false);\n  const [dragOffset, setDragOffset] = useState(0);\n  const [copiedItem, setCopiedItem] = useState(null);\n\n  // Новые состояния для resize\n  const [isResizing, setIsResizing] = useState(false);\n  const [resizeHandle, setResizeHandle] = useState(null); // 'left' | 'right'\n  const [resizeItem, setResizeItem] = useState(null);\n  const [originalItemData, setOriginalItemData] = useState(null);\n\n  // Состояния для управления overlays на видео\n  const [selectedOverlay, setSelectedOverlay] = useState(null);\n  const [overlayTransforms, setOverlayTransforms] = useState({}); // { overlayId: { x, y, scale, opacity } }\n  const [isDraggingOverlay, setIsDraggingOverlay] = useState(false);\n  const [isResizingOverlay, setIsResizingOverlay] = useState(false);\n  const [overlayDragStart, setOverlayDragStart] = useState({\n    x: 0,\n    y: 0\n  });\n  const [resizeOverlayHandle, setResizeOverlayHandle] = useState(null);\n  const [initialOverlayTransform, setInitialOverlayTransform] = useState(null);\n\n  // Модальное окно помощи\n  const [showHelp, setShowHelp] = useState(false);\n\n  // Треки как в CapCut\n  const [tracks, setTracks] = useState({\n    overlays: [{\n      id: \"overlay-1\",\n      name: \"Overlay 1\",\n      type: \"overlay\"\n    }, {\n      id: \"overlay-2\",\n      name: \"Overlay 2\",\n      type: \"overlay\"\n    }],\n    main: [{\n      id: \"main-video\",\n      name: \"Main Video\",\n      type: \"main\"\n    }],\n    audio: [{\n      id: \"audio-1\",\n      name: \"Audio 1\",\n      type: \"audio\"\n    }, {\n      id: \"audio-2\",\n      name: \"Audio 2\",\n      type: \"audio\"\n    }]\n  });\n  const timelineRef = useRef(null);\n  const timelineScrollRef = useRef(null);\n  const trackLabelsRef = useRef(null);\n  const intervalRef = useRef(null);\n  const audioElementsRef = useRef(new Map());\n  const videoRef = useRef(null);\n  const autoScrollIntervalRef = useRef(null);\n  const videoContainerRef = useRef(null);\n\n  // Базовые функции\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = Math.floor(seconds % 60);\n    const ms = Math.floor(seconds % 1 * 100);\n    return timelineZoom > 5 ? `${mins}:${secs.toString().padStart(2, \"0\")}.${ms.toString().padStart(2, \"0\")}` : `${mins}:${secs.toString().padStart(2, \"0\")}`;\n  };\n  const handlePlayPause = () => {\n    setIsPlaying(!isPlaying);\n  };\n  const seekTo = time => {\n    const newTime = Math.max(0, Math.min(videoDuration, time));\n    setCurrentTime(newTime);\n    const content = getCurrentTimelineContent();\n    content.audio.forEach(audioItem => {\n      const audioElement = audioElementsRef.current.get(audioItem.id);\n      if (audioElement) {\n        const relativeTime = newTime - audioItem.startTime;\n        audioElement.currentTime = Math.max(0, relativeTime);\n      }\n    });\n  };\n  const getCurrentTimelineContent = useCallback(() => {\n    const currentItems = timelineItems.filter(item => currentTime >= item.startTime && currentTime < item.startTime + item.duration);\n    return {\n      mainVideo: currentItems.find(item => item.trackType === \"main\" && item.type === \"video\"),\n      overlays: currentItems.filter(item => item.trackType === \"overlay\"),\n      audio: currentItems.filter(item => item.trackType === \"audio\")\n    };\n  }, [currentTime, timelineItems]);\n  const createAudioElement = useCallback(audioItem => {\n    if (!audioElementsRef.current.has(audioItem.id)) {\n      const audio = document.createElement(\"audio\");\n      audio.src = audioItem.url;\n      audio.volume = (audioItem.volume || 1) * volume;\n      audio.muted = isMuted;\n      audio.preload = \"metadata\";\n      audioElementsRef.current.set(audioItem.id, audio);\n    }\n    return audioElementsRef.current.get(audioItem.id);\n  }, [volume, isMuted]);\n  const syncAudioTime = useCallback((audioItem, relativeTime) => {\n    const audioElement = audioElementsRef.current.get(audioItem.id);\n    if (audioElement) {\n      const timeDiff = Math.abs(audioElement.currentTime - relativeTime);\n      if (timeDiff > 0.2) {\n        audioElement.currentTime = Math.max(0, relativeTime);\n      }\n    }\n  }, []);\n  const checkCollision = useCallback((newItem, excludeId = null) => {\n    return timelineItems.some(item => {\n      if (item.id === excludeId) return false;\n      if (item.trackId !== newItem.trackId) return false;\n      const itemStart = item.startTime;\n      const itemEnd = item.startTime + item.duration;\n      const newStart = newItem.startTime;\n      const newEnd = newItem.startTime + newItem.duration;\n      return newStart < itemEnd && newEnd > itemStart;\n    });\n  }, [timelineItems]);\n\n  // Функция для вставки с автоматическим сдвигом блоков (как в CapCut)\n  const insertWithRipple = useCallback((trackId, insertTime, duration, excludeId = null) => {\n    const trackItems = timelineItems.filter(item => item.trackId === trackId && item.id !== excludeId).sort((a, b) => a.startTime - b.startTime);\n\n    // Если трек пустой\n    if (trackItems.length === 0) {\n      return {\n        time: Math.max(0, insertTime),\n        shouldRipple: false,\n        affectedItems: []\n      };\n    }\n\n    // Ищем где вставить\n    let insertPosition = insertTime;\n    let shouldRipple = false;\n    let affectedItems = [];\n\n    // Проверяем есть ли точно в этом месте блок\n    const blockAtPosition = trackItems.find(item => insertTime >= item.startTime && insertTime < item.startTime + item.duration);\n    if (blockAtPosition) {\n      // Вставляем в начало этого блока и сдвигаем все что справа\n      insertPosition = blockAtPosition.startTime;\n      shouldRipple = true;\n      affectedItems = trackItems.filter(item => item.startTime >= insertPosition);\n    } else {\n      // Ищем блоки которые нужно сдвинуть\n      const blocksToShift = trackItems.filter(item => item.startTime >= insertTime);\n      if (blocksToShift.length > 0) {\n        // Проверяем, есть ли место без сдвига\n        const nextBlock = blocksToShift[0];\n        const availableSpace = nextBlock.startTime - insertTime;\n        if (availableSpace >= duration) {\n          // Помещается без сдвига\n          insertPosition = insertTime;\n          shouldRipple = false;\n        } else {\n          // Нужно сдвинуть\n          insertPosition = insertTime;\n          shouldRipple = true;\n          affectedItems = blocksToShift;\n        }\n      } else {\n        // Вставляем в конец\n        insertPosition = insertTime;\n        shouldRipple = false;\n      }\n    }\n    return {\n      time: Math.max(0, insertPosition),\n      shouldRipple,\n      affectedItems,\n      shiftAmount: shouldRipple ? duration : 0\n    };\n  }, [timelineItems]);\n\n  // Функция для поиска ближайшего свободного места (обратная совместимость)\n  const findNearestValidPosition = useCallback((trackId, dropTime, duration, excludeId = null) => {\n    const result = insertWithRipple(trackId, dropTime, duration, excludeId);\n    return {\n      time: result.time,\n      isExact: !result.shouldRipple\n    };\n  }, [insertWithRipple]);\n\n  // Функция для применения ripple effect\n  const applyRippleEffect = useCallback((affectedItems, shiftAmount) => {\n    if (!affectedItems.length || shiftAmount <= 0) return;\n    console.log(\"Applying ripple effect:\", {\n      affectedCount: affectedItems.length,\n      shiftAmount,\n      affectedItems: affectedItems.map(item => ({\n        name: item.name,\n        oldStart: item.startTime\n      }))\n    });\n    setTimelineItems(prev => prev.map(item => {\n      const affectedItem = affectedItems.find(affected => affected.id === item.id);\n      if (affectedItem) {\n        console.log(`Shifting ${item.name} from ${item.startTime} to ${item.startTime + shiftAmount}`);\n        return {\n          ...item,\n          startTime: item.startTime + shiftAmount\n        };\n      }\n      return item;\n    }));\n\n    // Обновляем общую длительность если нужно\n    if (affectedItems.length > 0) {\n      const maxEndTime = Math.max(...affectedItems.map(item => item.startTime + item.duration + shiftAmount));\n      if (maxEndTime > videoDuration) {\n        setVideoDuration(maxEndTime + 10);\n      }\n    }\n  }, [videoDuration]);\n  const findNextAvailablePosition = useCallback((trackId, duration, preferredStart = 0) => {\n    const trackItems = timelineItems.filter(item => item.trackId === trackId).sort((a, b) => a.startTime - b.startTime);\n    if (preferredStart >= 0) {\n      const testItem = {\n        trackId,\n        startTime: preferredStart,\n        duration\n      };\n      if (!checkCollision(testItem)) {\n        return preferredStart;\n      }\n    }\n    for (let i = 0; i < trackItems.length; i++) {\n      const currentItem = trackItems[i];\n      const nextItem = trackItems[i + 1];\n      if (i === 0 && currentItem.startTime >= duration) {\n        return 0;\n      }\n      if (nextItem) {\n        const gapStart = currentItem.startTime + currentItem.duration;\n        const gapEnd = nextItem.startTime;\n        const gapSize = gapEnd - gapStart;\n        if (gapSize >= duration) {\n          return gapStart;\n        }\n      }\n    }\n    if (trackItems.length === 0) return 0;\n    const lastItem = trackItems[trackItems.length - 1];\n    return lastItem.startTime + lastItem.duration;\n  }, [timelineItems, checkCollision]);\n  const removeFromTimeline = itemId => {\n    const audioElement = audioElementsRef.current.get(itemId);\n    if (audioElement) {\n      audioElement.pause();\n      audioElement.src = \"\";\n      audioElementsRef.current.delete(itemId);\n    }\n    setTimelineItems(prev => prev.filter(item => item.id !== itemId));\n    setSelectedTimelineItem(null);\n  };\n\n  // Функции для управления overlays на видео\n  const getOverlayTransform = useCallback(overlayId => {\n    return overlayTransforms[overlayId] || {\n      x: 0,\n      y: 0,\n      scale: 1,\n      opacity: 1\n    };\n  }, [overlayTransforms]);\n  const updateOverlayTransform = useCallback((overlayId, updates) => {\n    setOverlayTransforms(prev => ({\n      ...prev,\n      [overlayId]: {\n        ...getOverlayTransform(overlayId),\n        ...updates\n      }\n    }));\n  }, [getOverlayTransform]);\n  const handleOverlayMouseDown = useCallback((e, overlay) => {\n    if (e.target.closest(\".resize-handle\")) return; // Не начинаем drag если кликнули на resize handle\n\n    e.preventDefault();\n    e.stopPropagation();\n    setSelectedOverlay(overlay);\n    setIsDraggingOverlay(true);\n    const container = videoContainerRef.current;\n    if (!container) return;\n    const containerRect = container.getBoundingClientRect();\n    const overlayElement = e.currentTarget;\n    const overlayRect = overlayElement.getBoundingClientRect();\n    const transform = getOverlayTransform(overlay.id);\n\n    // Запоминаем точный offset от позиции мыши до текущей позиции элемента\n    setOverlayDragStart({\n      x: e.clientX - overlayRect.left,\n      y: e.clientY - overlayRect.top,\n      containerX: containerRect.left,\n      containerY: containerRect.top\n    });\n  }, [getOverlayTransform]);\n  const handleOverlayResizeStart = useCallback((e, overlay, handle) => {\n    e.preventDefault();\n    e.stopPropagation();\n    console.log(\"Starting resize:\", handle); // Для отладки\n\n    setSelectedOverlay(overlay);\n    setIsResizingOverlay(true);\n    setResizeOverlayHandle(handle);\n    const currentTransform = getOverlayTransform(overlay.id);\n    setInitialOverlayTransform(currentTransform);\n    setOverlayDragStart({\n      x: e.clientX,\n      y: e.clientY,\n      startScale: currentTransform.scale,\n      startX: currentTransform.x,\n      startY: currentTransform.y\n    });\n  }, [getOverlayTransform]);\n  const handleOverlayMouseMove = useCallback(e => {\n    if (!selectedOverlay) return;\n    if (isDraggingOverlay) {\n      // Перетаскивание с максимальной плавностью\n      const container = videoContainerRef.current;\n      if (!container) return;\n      const rect = container.getBoundingClientRect();\n      const overlaySize = 128 * getOverlayTransform(selectedOverlay.id).scale;\n\n      // Вычисляем новую позицию с учетом начального offset\n      const newX = e.clientX - overlayDragStart.containerX - overlayDragStart.x;\n      const newY = e.clientY - overlayDragStart.containerY - overlayDragStart.y;\n\n      // Ограничиваем движение границами контейнера с учетом размера overlay\n      const padding = 5; // Минимальный отступ\n      const limitedX = Math.max(padding, Math.min(rect.width - overlaySize - padding, newX));\n      const limitedY = Math.max(padding, Math.min(rect.height - overlaySize - padding, newY));\n\n      // Обновляем позицию относительно базовой позиции\n      const baseX = 200;\n      const baseY = 50 + selectedOverlay.index * 120;\n\n      // Мгновенное обновление без debounce для плавности\n      updateOverlayTransform(selectedOverlay.id, {\n        x: limitedX - baseX,\n        y: limitedY - baseY\n      });\n    } else if (isResizingOverlay && overlayDragStart.startScale !== undefined && resizeOverlayHandle) {\n      console.log(\"Resizing...\", resizeOverlayHandle); // Для отладки\n\n      // Простая логика resize\n      const deltaX = e.clientX - overlayDragStart.x;\n      const deltaY = e.clientY - overlayDragStart.y;\n\n      // Определяем направление и чувствительность\n      let scaleFactor = 1;\n      const sensitivity = 0.005; // Базовая чувствительность\n\n      switch (resizeOverlayHandle) {\n        case \"nw\":\n          // Северо-запад: тянем влево-вверх = уменьшаем\n          scaleFactor = 1 - (deltaX + deltaY) * sensitivity;\n          break;\n        case \"ne\":\n          // Северо-восток: тянем вправо-вверх = увеличиваем вправо, уменьшаем вверх\n          scaleFactor = 1 + (deltaX - deltaY) * sensitivity;\n          break;\n        case \"sw\":\n          // Юго-запад: тянем влево-вниз = уменьшаем влево, увеличиваем вниз\n          scaleFactor = 1 + (-deltaX + deltaY) * sensitivity;\n          break;\n        case \"se\":\n          // Юго-восток: тянем вправо-вниз = увеличиваем\n          scaleFactor = 1 + (deltaX + deltaY) * sensitivity;\n          break;\n      }\n\n      // Применяем новый масштаб\n      const newScale = Math.max(0.2, Math.min(4, overlayDragStart.startScale * scaleFactor));\n\n      // Простое обновление без сложной компенсации позиции\n      updateOverlayTransform(selectedOverlay.id, {\n        scale: newScale\n      });\n    }\n  }, [selectedOverlay, isDraggingOverlay, isResizingOverlay, overlayDragStart, initialOverlayTransform, updateOverlayTransform, getOverlayTransform, resizeOverlayHandle]);\n  const handleOverlayMouseUp = useCallback(() => {\n    console.log(\"Mouse up - stopping drag/resize\"); // Для отладки\n    setIsDraggingOverlay(false);\n    setIsResizingOverlay(false);\n    setResizeOverlayHandle(null);\n    setInitialOverlayTransform(null);\n  }, []);\n  const handleOverlayWheel = useCallback((e, overlayId) => {\n    if (!e.ctrlKey) return;\n    e.preventDefault();\n    e.stopPropagation();\n    const transform = getOverlayTransform(overlayId);\n    const scaleDelta = e.deltaY > 0 ? -0.05 : 0.05; // Более плавное масштабирование\n    const newScale = Math.max(0.2, Math.min(4, transform.scale + scaleDelta));\n    updateOverlayTransform(overlayId, {\n      scale: newScale\n    });\n  }, [getOverlayTransform, updateOverlayTransform]);\n\n  // Функции для работы с элементами таймлайна\n  const splitTimelineItem = useCallback(() => {\n    if (!selectedTimelineItem) return;\n    const item = selectedTimelineItem;\n    const splitTime = currentTime;\n    if (splitTime <= item.startTime || splitTime >= item.startTime + item.duration) {\n      return;\n    }\n    const firstPartDuration = splitTime - item.startTime;\n    const secondPartStart = splitTime;\n    const secondPartDuration = item.duration - firstPartDuration;\n    const secondPart = {\n      ...item,\n      id: Date.now() + Math.random(),\n      startTime: secondPartStart,\n      duration: secondPartDuration\n    };\n    const updatedFirstPart = {\n      ...item,\n      duration: firstPartDuration\n    };\n    setTimelineItems(prev => prev.map(timelineItem => timelineItem.id === item.id ? updatedFirstPart : timelineItem).concat(secondPart));\n    setSelectedTimelineItem(null);\n  }, [selectedTimelineItem, currentTime]);\n  const copyTimelineItem = useCallback(() => {\n    if (!selectedTimelineItem) return;\n    setCopiedItem(selectedTimelineItem);\n  }, [selectedTimelineItem]);\n  const pasteTimelineItem = useCallback(() => {\n    var _insertResult$affecte;\n    if (!copiedItem) return;\n    const targetTrackId = copiedItem.trackId;\n    const insertResult = insertWithRipple(targetTrackId, currentTime, copiedItem.duration);\n\n    // Применяем ripple effect если нужно\n    if (insertResult.shouldRipple && ((_insertResult$affecte = insertResult.affectedItems) === null || _insertResult$affecte === void 0 ? void 0 : _insertResult$affecte.length) > 0) {\n      applyRippleEffect(insertResult.affectedItems, copiedItem.duration);\n    }\n    const newItem = {\n      ...copiedItem,\n      id: Date.now() + Math.random(),\n      startTime: insertResult.time\n    };\n    setTimelineItems(prev => [...prev, newItem]);\n    const newEndTime = newItem.startTime + newItem.duration;\n    if (newEndTime > videoDuration) {\n      setVideoDuration(newEndTime + 10);\n    }\n    setSelectedTimelineItem(newItem);\n  }, [copiedItem, currentTime, insertWithRipple, applyRippleEffect, videoDuration]);\n  const deleteSelectedItem = useCallback(() => {\n    if (!selectedTimelineItem) return;\n    removeFromTimeline(selectedTimelineItem.id);\n  }, [selectedTimelineItem]);\n\n  // Автопрокрутка и зум\n  const stopAutoScroll = useCallback(() => {\n    if (autoScrollIntervalRef.current) {\n      clearInterval(autoScrollIntervalRef.current);\n      autoScrollIntervalRef.current = null;\n    }\n  }, []);\n  const startAutoScroll = useCallback((direction, speed = 1) => {\n    stopAutoScroll();\n    autoScrollIntervalRef.current = setInterval(() => {\n      if (timelineScrollRef.current) {\n        const scrollAmount = 15 * speed;\n        const currentScrollLeft = timelineScrollRef.current.scrollLeft;\n        const maxScroll = timelineScrollRef.current.scrollWidth - timelineScrollRef.current.clientWidth;\n        if (direction === \"left\" && currentScrollLeft > 0) {\n          timelineScrollRef.current.scrollLeft = Math.max(0, currentScrollLeft - scrollAmount);\n        } else if (direction === \"right\" && currentScrollLeft < maxScroll) {\n          timelineScrollRef.current.scrollLeft = Math.min(maxScroll, currentScrollLeft + scrollAmount);\n        }\n      }\n    }, 16); // 60fps для плавности\n  }, [stopAutoScroll]);\n  const checkAutoScroll = useCallback(clientX => {\n    if (!timelineScrollRef.current) return;\n    const rect = timelineScrollRef.current.getBoundingClientRect();\n    const scrollZoneWidth = 120;\n    const relativeX = clientX - rect.left;\n    if (relativeX < scrollZoneWidth && timelineScrollRef.current.scrollLeft > 0) {\n      const speed = (scrollZoneWidth - relativeX) / scrollZoneWidth * 3;\n      startAutoScroll(\"left\", speed);\n    } else if (relativeX > rect.width - scrollZoneWidth) {\n      const maxScroll = timelineScrollRef.current.scrollWidth - timelineScrollRef.current.clientWidth;\n      if (timelineScrollRef.current.scrollLeft < maxScroll) {\n        const speed = (relativeX - (rect.width - scrollZoneWidth)) / scrollZoneWidth * 3;\n        startAutoScroll(\"right\", speed);\n      }\n    } else {\n      stopAutoScroll();\n    }\n  }, [startAutoScroll, stopAutoScroll]);\n\n  // Функции зума\n  const zoomIn = () => {\n    setTimelineZoom(prev => Math.min(20, prev * 1.5));\n  };\n  const zoomOut = () => {\n    setTimelineZoom(prev => Math.max(0.1, prev / 1.5));\n  };\n  const resetZoom = () => {\n    setTimelineZoom(1);\n  };\n\n  // Функции для resize\n  const handleResizeStart = useCallback((e, item, handle) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsResizing(true);\n    setResizeHandle(handle);\n    setResizeItem(item);\n    setOriginalItemData({\n      startTime: item.startTime,\n      duration: item.duration\n    });\n\n    // Предотвращаем drag\n    setIsTimelineDragging(false);\n    setDraggedTimelineItem(null);\n  }, []);\n  const handleResizeEnd = useCallback(() => {\n    setIsResizing(false);\n    setResizeHandle(null);\n    setResizeItem(null);\n    setOriginalItemData(null);\n    stopAutoScroll();\n  }, [stopAutoScroll]);\n\n  // Синхронизация скролла\n  const handleTrackAreaScroll = e => {\n    if (trackLabelsRef.current) {\n      trackLabelsRef.current.scrollTop = e.target.scrollTop;\n    }\n  };\n  const handleTrackLabelsScroll = e => {\n    if (timelineScrollRef.current) {\n      timelineScrollRef.current.scrollTop = e.target.scrollTop;\n    }\n  };\n  const getTimelineWidth = () => {\n    const baseWidth = videoDuration * 50 * timelineZoom;\n    return Math.max(baseWidth, 2000);\n  };\n  const getPixelsPerSecond = () => {\n    return 50 * timelineZoom;\n  };\n\n  // Эффекты для управления overlays\n  useEffect(() => {\n    if (isDraggingOverlay || isResizingOverlay) {\n      document.addEventListener(\"mousemove\", handleOverlayMouseMove);\n      document.addEventListener(\"mouseup\", handleOverlayMouseUp);\n      document.body.style.cursor = isDraggingOverlay ? \"grabbing\" : \"nw-resize\";\n      return () => {\n        document.removeEventListener(\"mousemove\", handleOverlayMouseMove);\n        document.removeEventListener(\"mouseup\", handleOverlayMouseUp);\n        document.body.style.cursor = \"\";\n      };\n    }\n  }, [isDraggingOverlay, isResizingOverlay, handleOverlayMouseMove, handleOverlayMouseUp]);\n\n  // Обработка resize во время движения мыши\n  useEffect(() => {\n    const handleMouseMove = e => {\n      if (!isResizing || !resizeItem || !timelineScrollRef.current) return;\n      checkAutoScroll(e.clientX);\n      const rect = timelineScrollRef.current.getBoundingClientRect();\n      const mouseX = e.clientX - rect.left + timelineScrollRef.current.scrollLeft;\n      const pixelsPerSecond = getPixelsPerSecond();\n      const newTime = mouseX / pixelsPerSecond;\n      setTimelineItems(prev => prev.map(item => {\n        if (item.id !== resizeItem.id) return item;\n        const minDuration = 0.1;\n        if (resizeHandle === \"left\") {\n          const rightEdge = originalItemData.startTime + originalItemData.duration;\n          const newStartTime = Math.max(0, Math.min(rightEdge - minDuration, newTime));\n          const newDuration = rightEdge - newStartTime;\n          return {\n            ...item,\n            startTime: newStartTime,\n            duration: newDuration\n          };\n        } else if (resizeHandle === \"right\") {\n          const leftEdge = originalItemData.startTime;\n          const newEndTime = Math.max(leftEdge + minDuration, newTime);\n          const newDuration = newEndTime - leftEdge;\n          return {\n            ...item,\n            duration: newDuration\n          };\n        }\n        return item;\n      }));\n    };\n    const handleMouseUp = () => {\n      if (isResizing) {\n        handleResizeEnd();\n      }\n    };\n    if (isResizing) {\n      document.addEventListener(\"mousemove\", handleMouseMove);\n      document.addEventListener(\"mouseup\", handleMouseUp);\n    }\n    return () => {\n      document.removeEventListener(\"mousemove\", handleMouseMove);\n      document.removeEventListener(\"mouseup\", handleMouseUp);\n    };\n  }, [isResizing, resizeItem, resizeHandle, originalItemData, getPixelsPerSecond, checkAutoScroll, handleResizeEnd]);\n\n  // Основные эффекты\n  useEffect(() => {\n    const content = getCurrentTimelineContent();\n    if (content.mainVideo && content.mainVideo.url !== currentVideoSource) {\n      setCurrentVideoSource(content.mainVideo.url);\n      if (videoRef.current) {\n        const relativeTime = currentTime - content.mainVideo.startTime;\n        videoRef.current.currentTime = Math.max(0, relativeTime);\n      }\n    } else if (!content.mainVideo && content.overlays.find(o => o.type === \"image\")) {\n      const firstImage = content.overlays.find(o => o.type === \"image\");\n      setCurrentVideoSource(firstImage.url);\n    } else if (!content.mainVideo && !content.overlays.find(o => o.type === \"image\")) {\n      setCurrentVideoSource(null);\n    }\n    const currentAudioIds = new Set(content.audio.map(item => item.id));\n    audioElementsRef.current.forEach((audioElement, id) => {\n      if (!currentAudioIds.has(id)) {\n        if (!audioElement.paused) {\n          audioElement.pause();\n        }\n      }\n    });\n    content.audio.forEach(audioItem => {\n      const audioElement = createAudioElement(audioItem);\n      const relativeTime = currentTime - audioItem.startTime;\n      audioElement.volume = (audioItem.volume || 1) * volume;\n      audioElement.muted = isMuted;\n      if (isPlaying && relativeTime >= 0) {\n        syncAudioTime(audioItem, relativeTime);\n        if (audioElement.paused) {\n          audioElement.play().catch(console.error);\n        }\n      } else {\n        if (!audioElement.paused) {\n          audioElement.pause();\n        }\n      }\n    });\n  }, [currentTime, timelineItems, getCurrentTimelineContent, isPlaying, volume, isMuted, createAudioElement, syncAudioTime, currentVideoSource]);\n  useEffect(() => {\n    if (isPlaying) {\n      intervalRef.current = setInterval(() => {\n        setCurrentTime(prev => {\n          const newTime = prev + 0.1;\n          if (newTime >= videoDuration) {\n            setIsPlaying(false);\n            return videoDuration;\n          }\n          return newTime;\n        });\n      }, 100);\n    } else {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    }\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, [isPlaying, videoDuration]);\n  useEffect(() => {\n    if (videoRef.current && currentVideoSource) {\n      const content = getCurrentTimelineContent();\n      if (content.mainVideo) {\n        const relativeTime = currentTime - content.mainVideo.startTime;\n        const timeDiff = Math.abs(videoRef.current.currentTime - relativeTime);\n        if (timeDiff > 0.5) {\n          videoRef.current.currentTime = Math.max(0, relativeTime);\n        }\n        if (isPlaying && videoRef.current.paused) {\n          videoRef.current.play().catch(console.error);\n        } else if (!isPlaying && !videoRef.current.paused) {\n          videoRef.current.pause();\n        }\n      }\n    }\n  }, [currentTime, currentVideoSource, getCurrentTimelineContent, isPlaying]);\n  useEffect(() => {\n    const currentAudioIds = new Set(timelineItems.filter(item => item.type === \"audio\").map(item => item.id));\n    audioElementsRef.current.forEach((audioElement, id) => {\n      if (!currentAudioIds.has(id)) {\n        audioElement.pause();\n        audioElement.src = \"\";\n        audioElementsRef.current.delete(id);\n      }\n    });\n  }, [timelineItems]);\n\n  // Очистка при размонтировании\n  useEffect(() => {\n    return () => {\n      stopAutoScroll();\n    };\n  }, [stopAutoScroll]);\n\n  // Обработка клавиатурных шорткатов\n  useEffect(() => {\n    const handleKeyDown = e => {\n      if (e.target.tagName === \"INPUT\" || e.target.tagName === \"TEXTAREA\") {\n        return;\n      }\n      if (e.key === \"Delete\" || e.key === \"Backspace\") {\n        e.preventDefault();\n        deleteSelectedItem();\n      }\n      if (e.ctrlKey && e.key === \"b\") {\n        e.preventDefault();\n        splitTimelineItem();\n      }\n      if (e.ctrlKey && e.key === \"c\") {\n        e.preventDefault();\n        copyTimelineItem();\n      }\n      if (e.ctrlKey && e.key === \"v\") {\n        e.preventDefault();\n        pasteTimelineItem();\n      }\n      if (e.key === \" \" || e.code === \"Space\") {\n        e.preventDefault();\n        setIsPlaying(prev => !prev);\n      }\n      if (e.key === \"ArrowLeft\") {\n        e.preventDefault();\n        const step = e.ctrlKey ? 5 : e.shiftKey ? 1 : 0.1;\n        seekTo(Math.max(0, currentTime - step));\n      }\n      if (e.key === \"ArrowRight\") {\n        e.preventDefault();\n        const step = e.ctrlKey ? 5 : e.shiftKey ? 1 : 0.1;\n        seekTo(Math.min(videoDuration, currentTime + step));\n      }\n      if (e.key === \"=\" || e.key === \"+\") {\n        e.preventDefault();\n        zoomIn();\n      }\n      if (e.key === \"-\") {\n        e.preventDefault();\n        zoomOut();\n      }\n      if (e.key === \"0\") {\n        e.preventDefault();\n        resetZoom();\n      }\n      if (e.key === \"?\" || e.shiftKey && e.key === \"/\") {\n        e.preventDefault();\n        setShowHelp(true);\n      }\n      if (e.key === \"Escape\") {\n        e.preventDefault();\n        if (showHelp) {\n          setShowHelp(false);\n        } else if (selectedOverlay) {\n          setSelectedOverlay(null);\n        }\n      }\n    };\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  }, [selectedTimelineItem, copiedItem, currentTime, videoDuration, showHelp, selectedOverlay, deleteSelectedItem, splitTimelineItem, copyTimelineItem, pasteTimelineItem]);\n\n  // Обработка колесика мыши для зума\n  useEffect(() => {\n    const handleWheel = e => {\n      var _timelineRef$current;\n      if (e.ctrlKey && (_timelineRef$current = timelineRef.current) !== null && _timelineRef$current !== void 0 && _timelineRef$current.contains(e.target)) {\n        e.preventDefault();\n        if (e.deltaY < 0) {\n          zoomIn();\n        } else {\n          zoomOut();\n        }\n      }\n    };\n    document.addEventListener(\"wheel\", handleWheel, {\n      passive: false\n    });\n    return () => document.removeEventListener(\"wheel\", handleWheel);\n  }, []);\n  const addToTimeline = (mediaItem, startTime = null, targetTrackId = null) => {\n    let trackType, trackId;\n    if (mediaItem.type === \"video\") {\n      trackType = targetTrackId && targetTrackId.startsWith(\"overlay\") ? \"overlay\" : \"main\";\n      trackId = targetTrackId || \"main-video\";\n    } else if (mediaItem.type === \"image\") {\n      trackType = \"overlay\";\n      trackId = targetTrackId || \"overlay-1\";\n    } else if (mediaItem.type === \"audio\") {\n      trackType = \"audio\";\n      trackId = targetTrackId || \"audio-1\";\n    }\n    const duration = mediaItem.duration || (mediaItem.type === \"image\" ? 5 : 10);\n    const finalStartTime = startTime !== null ? startTime : findNextAvailablePosition(trackId, duration);\n    const newTimelineItem = {\n      id: Date.now() + Math.random(),\n      mediaId: mediaItem.id,\n      type: mediaItem.type,\n      name: mediaItem.name,\n      url: mediaItem.url,\n      startTime: finalStartTime,\n      duration: duration,\n      trackId: trackId,\n      trackType: trackType,\n      volume: 1,\n      opacity: 1\n    };\n    setTimelineItems(prev => [...prev, newTimelineItem]);\n    const newEndTime = newTimelineItem.startTime + newTimelineItem.duration;\n    if (newEndTime > videoDuration) {\n      setVideoDuration(newEndTime + 10);\n    }\n  };\n  const addOverlayTrack = () => {\n    const newTrackId = `overlay-${Date.now()}`;\n    setTracks(prev => ({\n      ...prev,\n      overlays: [...prev.overlays, {\n        id: newTrackId,\n        name: `Overlay ${prev.overlays.length + 1}`,\n        type: \"overlay\"\n      }]\n    }));\n  };\n  const addAudioTrack = () => {\n    const newTrackId = `audio-${Date.now()}`;\n    setTracks(prev => ({\n      ...prev,\n      audio: [...prev.audio, {\n        id: newTrackId,\n        name: `Audio ${prev.audio.length + 1}`,\n        type: \"audio\"\n      }]\n    }));\n  };\n  const handleTimelineClick = e => {\n    if (isDragging || isTimelineDragging || isResizing) return;\n    const rect = timelineScrollRef.current.getBoundingClientRect();\n    const clickX = e.clientX - rect.left + timelineScrollRef.current.scrollLeft;\n    const pixelsPerSecond = getPixelsPerSecond();\n    const clickTime = clickX / pixelsPerSecond;\n    seekTo(clickTime);\n  };\n  const handleTimelineItemDragStart = (e, timelineItem) => {\n    if (isResizing) {\n      e.preventDefault();\n      return;\n    }\n    e.stopPropagation();\n    setDraggedTimelineItem(timelineItem);\n    setIsTimelineDragging(true);\n    const rect = timelineScrollRef.current.getBoundingClientRect();\n    const itemRect = e.target.getBoundingClientRect();\n    setDragOffset(e.clientX - itemRect.left + timelineScrollRef.current.scrollLeft);\n    e.dataTransfer.effectAllowed = \"move\";\n    e.dataTransfer.setData(\"text/plain\", \"\");\n  };\n  const handleTimelineItemDragEnd = () => {\n    setDraggedTimelineItem(null);\n    setDropPreview(null);\n    setIsTimelineDragging(false);\n    setDragOffset(0);\n    stopAutoScroll();\n  };\n  const handleDragOver = e => {\n    if (!draggedItem && !draggedTimelineItem) return;\n    e.preventDefault();\n    e.dataTransfer.dropEffect = draggedItem ? \"copy\" : \"move\";\n    if (draggedTimelineItem || isResizing) {\n      checkAutoScroll(e.clientX);\n    }\n    const timelineRect = timelineScrollRef.current.getBoundingClientRect();\n    const dragX = e.clientX - timelineRect.left + timelineScrollRef.current.scrollLeft - (draggedTimelineItem ? dragOffset : 0);\n    const pixelsPerSecond = getPixelsPerSecond();\n    const dropTime = Math.max(0, dragX / pixelsPerSecond);\n    const dragY = e.clientY - timelineRect.top + timelineScrollRef.current.scrollTop;\n    const trackHeight = 60;\n    const timeRulerHeight = 48;\n    const relativeY = dragY - timeRulerHeight;\n    const trackIndex = Math.floor(relativeY / trackHeight);\n    const allTracks = [...tracks.overlays, ...tracks.main, ...tracks.audio];\n    const targetTrack = allTracks[trackIndex];\n    if (draggedItem && targetTrack) {\n      // Новый элемент из библиотеки\n      const duration = draggedItem.duration || (draggedItem.type === \"image\" ? 5 : 10);\n      const insertResult = insertWithRipple(targetTrack.id, dropTime, duration);\n      setDropPreview({\n        time: insertResult.time,\n        duration: duration,\n        trackId: targetTrack.id,\n        trackType: targetTrack.type,\n        isValid: true,\n        shouldRipple: insertResult.shouldRipple,\n        affectedItems: insertResult.affectedItems || []\n      });\n    } else if (draggedTimelineItem && targetTrack) {\n      // Существующий элемент\n      const insertResult = insertWithRipple(targetTrack.id, dropTime, draggedTimelineItem.duration, draggedTimelineItem.id);\n      setDropPreview({\n        time: insertResult.time,\n        duration: draggedTimelineItem.duration,\n        trackId: targetTrack.id,\n        trackType: targetTrack.type,\n        isValid: true,\n        shouldRipple: insertResult.shouldRipple,\n        affectedItems: insertResult.affectedItems || []\n      });\n    }\n  };\n  const handleDrop = e => {\n    var _dropPreview$affected;\n    if (!draggedItem && !draggedTimelineItem || !dropPreview) return;\n    e.preventDefault();\n    stopAutoScroll();\n    console.log(\"Dropping with ripple:\", {\n      dropPreview,\n      shouldRipple: dropPreview.shouldRipple,\n      affectedItems: ((_dropPreview$affected = dropPreview.affectedItems) === null || _dropPreview$affected === void 0 ? void 0 : _dropPreview$affected.length) || 0\n    });\n    if (dropPreview.isValid) {\n      if (draggedItem) {\n        var _dropPreview$affected2;\n        // Новый элемент из библиотеки\n        if (dropPreview.shouldRipple && ((_dropPreview$affected2 = dropPreview.affectedItems) === null || _dropPreview$affected2 === void 0 ? void 0 : _dropPreview$affected2.length) > 0) {\n          // Сначала сдвигаем существующие блоки\n          applyRippleEffect(dropPreview.affectedItems, dropPreview.duration);\n        }\n\n        // Добавляем новый элемент\n        addToTimeline(draggedItem, dropPreview.time, dropPreview.trackId);\n        console.log(\"Added with ripple effect:\", dropPreview.shouldRipple);\n      } else if (draggedTimelineItem) {\n        var _dropPreview$affected3;\n        // Перемещение существующего элемента\n        if (dropPreview.shouldRipple && ((_dropPreview$affected3 = dropPreview.affectedItems) === null || _dropPreview$affected3 === void 0 ? void 0 : _dropPreview$affected3.length) > 0) {\n          // Сначала сдвигаем блоки, которые нужно освободить место\n          applyRippleEffect(dropPreview.affectedItems, draggedTimelineItem.duration);\n        }\n\n        // Перемещаем элемент\n        setTimelineItems(prev => prev.map(item => item.id === draggedTimelineItem.id ? {\n          ...item,\n          startTime: dropPreview.time,\n          trackId: dropPreview.trackId,\n          trackType: dropPreview.trackType\n        } : item));\n        console.log(\"Moved with ripple effect:\", dropPreview.shouldRipple);\n        const newEndTime = dropPreview.time + draggedTimelineItem.duration;\n        if (newEndTime > videoDuration) {\n          setVideoDuration(newEndTime + 10);\n        }\n      }\n    }\n    setDropPreview(null);\n    setDraggedItem(null);\n    setDraggedTimelineItem(null);\n    setIsDragging(false);\n    setIsTimelineDragging(false);\n  };\n  const handleDragLeave = e => {\n    var _timelineRef$current2;\n    if (!((_timelineRef$current2 = timelineRef.current) !== null && _timelineRef$current2 !== void 0 && _timelineRef$current2.contains(e.relatedTarget))) {\n      setDropPreview(null);\n      stopAutoScroll();\n    }\n  };\n  const getTimelineItemStyle = item => {\n    const allTracks = [...tracks.overlays, ...tracks.main, ...tracks.audio];\n    const trackIndex = allTracks.findIndex(track => track.id === item.trackId);\n    const pixelsPerSecond = getPixelsPerSecond();\n    return {\n      left: `${item.startTime * pixelsPerSecond}px`,\n      width: `${item.duration * pixelsPerSecond}px`,\n      top: `${trackIndex * 60 + 10}px`\n    };\n  };\n  const getDropPreviewStyle = () => {\n    if (!dropPreview) return {};\n    const allTracks = [...tracks.overlays, ...tracks.main, ...tracks.audio];\n    const trackIndex = allTracks.findIndex(track => track.id === dropPreview.trackId);\n    const pixelsPerSecond = getPixelsPerSecond();\n    return {\n      left: `${dropPreview.time * pixelsPerSecond}px`,\n      width: `${dropPreview.duration * pixelsPerSecond}px`,\n      top: `${trackIndex * 60 + 10}px`\n    };\n  };\n  const getTrackColor = trackType => {\n    switch (trackType) {\n      case \"overlay\":\n        return \"bg-purple-500 border-purple-400\";\n      case \"main\":\n        return \"bg-blue-500 border-blue-400\";\n      case \"audio\":\n        return \"bg-green-500 border-green-400\";\n      default:\n        return \"bg-gray-500 border-gray-400\";\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex h-screen w-full gap-4 p-4 bg-gray-100 overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(MediaLibrary, {\n      mediaLibrary: mediaLibrary,\n      setMediaLibrary: setMediaLibrary,\n      activeTab: activeTab,\n      setActiveTab: setActiveTab,\n      draggedItem: draggedItem,\n      setDraggedItem: setDraggedItem,\n      isDragging: isDragging,\n      setIsDragging: setIsDragging,\n      addToTimeline: addToTimeline,\n      formatTime: formatTime\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1394,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex flex-col gap-4 min-w-0 overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        ref: videoContainerRef,\n        className: \"flex-1 bg-black rounded-2xl relative overflow-hidden shadow-sm min-h-0\",\n        title: \"Video Preview - Click overlays to select, drag to move, Ctrl+scroll to resize, use opacity slider\",\n        children: [currentVideoSource ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative w-full h-full\",\n          onClick: e => {\n            // Снимаем выделение overlay при клике на пустое место\n            if (e.target === e.currentTarget) {\n              setSelectedOverlay(null);\n            }\n          },\n          children: [getCurrentTimelineContent().mainVideo ? /*#__PURE__*/_jsxDEV(\"video\", {\n            ref: videoRef,\n            src: currentVideoSource,\n            className: \"w-full h-full object-contain rounded-2xl\",\n            muted: isMuted\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1426,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n            src: currentVideoSource,\n            alt: \"Timeline content\",\n            className: \"w-full h-full object-contain rounded-2xl\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1433,\n            columnNumber: 17\n          }, this), getCurrentTimelineContent().overlays.map((item, index) => {\n            const transform = getOverlayTransform(item.id);\n            const isSelected = (selectedOverlay === null || selectedOverlay === void 0 ? void 0 : selectedOverlay.id) === item.id;\n            const isDraggingThis = isDraggingOverlay && isSelected;\n            const isResizingThis = isResizingOverlay && isSelected;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `absolute select-none ${isSelected ? \"ring-2 ring-blue-400 ring-opacity-75 shadow-xl\" : \"hover:ring-2 hover:ring-blue-300 hover:ring-opacity-50\"} ${isDraggingThis ? \"cursor-grabbing z-50\" : isResizingThis ? \"cursor-nw-resize\" : \"cursor-grab hover:shadow-lg\"}`,\n              style: {\n                left: `${200 + transform.x}px`,\n                top: `${50 + index * 120 + transform.y}px`,\n                width: `${128 * transform.scale}px`,\n                height: `${96 * transform.scale}px`,\n                opacity: transform.opacity,\n                zIndex: isSelected ? 1000 : 10 + index,\n                transform: isDraggingThis ? \"scale(1.02)\" : \"scale(1)\",\n                transition: isDraggingThis || isResizingThis ? \"none\" : \"transform 0.2s ease, box-shadow 0.2s ease\"\n              },\n              onMouseDown: e => handleOverlayMouseDown(e, {\n                ...item,\n                index\n              }),\n              onWheel: e => handleOverlayWheel(e, item.id),\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `relative w-full h-full border-2 rounded-lg overflow-hidden shadow-lg group ${isSelected ? \"border-blue-400\" : \"border-white hover:border-blue-300\"}`,\n                style: {\n                  transition: isDraggingThis || isResizingThis ? \"none\" : \"border-color 0.2s ease\"\n                },\n                children: [item.type === \"video\" ? /*#__PURE__*/_jsxDEV(\"video\", {\n                  src: item.url,\n                  className: \"w-full h-full object-cover pointer-events-none\",\n                  muted: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1492,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: item.url,\n                  alt: item.name,\n                  className: \"w-full h-full object-cover pointer-events-none\",\n                  draggable: false\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1498,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `absolute inset-0 bg-blue-500 bg-opacity-0 hover:bg-opacity-10 ${isSelected ? \"bg-opacity-10\" : \"\"}`,\n                  style: {\n                    transition: isDraggingThis || isResizingThis ? \"none\" : \"background-color 0.2s ease\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1507,\n                  columnNumber: 23\n                }, this), isSelected && /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `resize-handle absolute -top-2 -left-2 w-4 h-4 bg-blue-500 rounded-full cursor-nw-resize opacity-90 hover:opacity-100 hover:scale-125 shadow-md border-2 border-white ${isResizingThis && resizeOverlayHandle === \"nw\" ? \"scale-150 bg-red-500\" : \"\"}`,\n                    onMouseDown: e => handleOverlayResizeStart(e, item, \"nw\"),\n                    style: {\n                      transition: isDraggingThis || isResizingThis ? \"none\" : \"all 0.2s ease\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1522,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `resize-handle absolute -top-2 -right-2 w-4 h-4 bg-blue-500 rounded-full cursor-ne-resize opacity-90 hover:opacity-100 hover:scale-125 shadow-md border-2 border-white ${isResizingThis && resizeOverlayHandle === \"ne\" ? \"scale-150 bg-red-500\" : \"\"}`,\n                    onMouseDown: e => handleOverlayResizeStart(e, item, \"ne\"),\n                    style: {\n                      transition: isDraggingThis || isResizingThis ? \"none\" : \"all 0.2s ease\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1538,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `resize-handle absolute -bottom-2 -left-2 w-4 h-4 bg-blue-500 rounded-full cursor-sw-resize opacity-90 hover:opacity-100 hover:scale-125 shadow-md border-2 border-white ${isResizingThis && resizeOverlayHandle === \"sw\" ? \"scale-150 bg-red-500\" : \"\"}`,\n                    onMouseDown: e => handleOverlayResizeStart(e, item, \"sw\"),\n                    style: {\n                      transition: isDraggingThis || isResizingThis ? \"none\" : \"all 0.2s ease\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1554,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `resize-handle absolute -bottom-2 -right-2 w-4 h-4 bg-blue-500 rounded-full cursor-se-resize opacity-90 hover:opacity-100 hover:scale-125 shadow-md border-2 border-white ${isResizingThis && resizeOverlayHandle === \"se\" ? \"scale-150 bg-red-500\" : \"\"}`,\n                    onMouseDown: e => handleOverlayResizeStart(e, item, \"se\"),\n                    style: {\n                      transition: isDraggingThis || isResizingThis ? \"none\" : \"all 0.2s ease\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1570,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-2 h-2 bg-blue-500 rounded-full opacity-60 pointer-events-none\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1588,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"absolute -bottom-12 left-0 right-0 bg-black/80 backdrop-blur-sm rounded-lg px-3 py-2 border border-white/20 shadow-lg\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center space-x-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-white text-xs font-medium min-w-fit\",\n                        children: \"Opacity:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1593,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"range\",\n                        min: \"0.1\",\n                        max: \"1\",\n                        step: \"0.05\",\n                        value: transform.opacity,\n                        onChange: e => updateOverlayTransform(item.id, {\n                          opacity: parseFloat(e.target.value)\n                        }),\n                        className: \"flex-1 h-2 accent-blue-500 cursor-pointer\",\n                        onMouseDown: e => e.stopPropagation()\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1596,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-white text-xs min-w-8 text-right font-mono\",\n                        children: [Math.round(transform.opacity * 100), \"%\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1610,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1592,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1591,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `absolute top-1 left-1 bg-black/70 text-white text-xs px-2 py-1 rounded pointer-events-none ${isSelected ? \"opacity-100\" : \"opacity-0 group-hover:opacity-100\"}`,\n                  style: {\n                    transition: isDraggingThis || isResizingThis ? \"none\" : \"opacity 0.2s ease\"\n                  },\n                  children: [item.name, \" \\u2022 \", Math.round(transform.scale * 100), \"% \\u2022\", \" \", Math.round(transform.opacity * 100), \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1619,\n                  columnNumber: 23\n                }, this), isSelected && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"absolute -top-0.5 -left-0.5 -right-0.5 -bottom-0.5 border-2 border-blue-400 rounded-lg pointer-events-none animate-pulse\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1638,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1478,\n                columnNumber: 21\n              }, this)\n            }, item.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1447,\n              columnNumber: 19\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1416,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full h-full flex items-center justify-center text-white\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-20 h-20 bg-gray-800 rounded-2xl flex items-center justify-center mx-auto mb-4\",\n              children: /*#__PURE__*/_jsxDEV(Film, {\n                size: 40,\n                className: \"opacity-50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1649,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1648,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xl opacity-75 font-medium\",\n              children: \"No content at current time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1651,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm opacity-50 mb-4\",\n              children: \"Drag media to timeline tracks to start editing\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1654,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs opacity-40 space-y-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\uD83D\\uDCA1 Overlays are interactive \\u2022 Ripple mode enabled\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1658,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Press\", \" \", /*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-1 py-0.5 bg-gray-700 rounded text-xs\",\n                  children: \"?\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1661,\n                  columnNumber: 21\n                }, this), \" \", \"for help & shortcuts\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1659,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1657,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1647,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1646,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute bottom-6 left-1/2 transform -translate-x-1/2 bg-black/60 backdrop-blur-md rounded-2xl p-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => seekTo(Math.max(0, currentTime - 10)),\n              className: \"text-white hover:text-blue-400 transition-colors p-1 rounded-lg hover:bg-white/10\",\n              title: \"Skip back 10 seconds\",\n              children: /*#__PURE__*/_jsxDEV(SkipBack, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1678,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1673,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handlePlayPause,\n              className: \"w-12 h-12 bg-white/20 hover:bg-white/30 rounded-2xl flex items-center justify-center text-white transition-all hover:scale-105\",\n              title: \"Play/Pause (Space)\",\n              children: isPlaying ? /*#__PURE__*/_jsxDEV(Pause, {\n                size: 24\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1685,\n                columnNumber: 30\n              }, this) : /*#__PURE__*/_jsxDEV(Play, {\n                size: 24\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1685,\n                columnNumber: 52\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1680,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => seekTo(Math.min(videoDuration, currentTime + 10)),\n              className: \"text-white hover:text-blue-400 transition-colors p-1 rounded-lg hover:bg-white/10\",\n              title: \"Skip forward 10 seconds\",\n              children: /*#__PURE__*/_jsxDEV(SkipForward, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1694,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1687,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setIsMuted(!isMuted),\n                className: \"text-white hover:text-blue-400 transition-colors p-1 rounded-lg hover:bg-white/10\",\n                title: \"Toggle mute\",\n                children: isMuted ? /*#__PURE__*/_jsxDEV(VolumeX, {\n                  size: 20\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1702,\n                  columnNumber: 30\n                }, this) : /*#__PURE__*/_jsxDEV(Volume2, {\n                  size: 20\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1702,\n                  columnNumber: 54\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1697,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"range\",\n                min: \"0\",\n                max: \"1\",\n                step: \"0.1\",\n                value: volume,\n                onChange: e => setVolume(parseFloat(e.target.value)),\n                className: \"w-24 accent-blue-500\",\n                title: \"Volume control\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1704,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1696,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-white text-sm font-medium min-w-0\",\n              title: \"Current time / Total duration\",\n              children: [formatTime(currentTime), \" / \", formatTime(videoDuration)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1715,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1672,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1671,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1410,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `h-80 bg-white rounded-2xl shadow-sm border-2 transition-all duration-200 overflow-hidden flex flex-col flex-shrink-0 ${isDragging || isTimelineDragging || isResizing ? \"border-blue-400 bg-blue-50/20\" : \"border-gray-200\"}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-50 p-4 border-b border-gray-200 space-y-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"text-gray-800 font-semibold flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(Film, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1736,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Timeline Pro\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1737,\n                columnNumber: 17\n              }, this), isDragging && dropPreview && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-green-600\",\n                children: [\"- Adding \\\"\", draggedItem === null || draggedItem === void 0 ? void 0 : draggedItem.name, \"\\\"\", \" \", dropPreview.shouldRipple ? \"⚡ ripple\" : \"📍 exact\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1739,\n                columnNumber: 19\n              }, this), isTimelineDragging && dropPreview && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-blue-600\",\n                children: [\"- Moving \\\"\", draggedTimelineItem === null || draggedTimelineItem === void 0 ? void 0 : draggedTimelineItem.name, \"\\\"\", \" \", dropPreview.shouldRipple ? \"⚡ push blocks\" : \"📍 exact\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1745,\n                columnNumber: 19\n              }, this), isResizing && resizeItem && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-orange-600\",\n                children: [\"- Trimming \\\"\", resizeItem.name, \"\\\" (\", resizeHandle, \" edge)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1751,\n                columnNumber: 19\n              }, this), copiedItem && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-blue-600 text-sm\",\n                children: [\"- \\\"\", copiedItem.name, \"\\\" copied (Ctrl+V to paste)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1756,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1735,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setShowHelp(true),\n                className: \"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-xl transition-all duration-200\",\n                title: \"\\uD83D\\uDCD6 Help & Shortcuts Guide - Learn all controls and hotkeys (Press ? key)\",\n                children: /*#__PURE__*/_jsxDEV(HelpCircle, {\n                  size: 18\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1768,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1763,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2 bg-white rounded-xl p-2 border border-gray-200\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: zoomOut,\n                  className: \"p-1 text-gray-600 hover:text-blue-600 transition-colors\",\n                  title: \"Zoom Out (-)\",\n                  children: /*#__PURE__*/_jsxDEV(ZoomOut, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1777,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1772,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs text-gray-500 min-w-12 text-center\",\n                  children: [(timelineZoom * 100).toFixed(0), \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1779,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: zoomIn,\n                  className: \"p-1 text-gray-600 hover:text-blue-600 transition-colors\",\n                  title: \"Zoom In (+), or Ctrl+Wheel\",\n                  children: /*#__PURE__*/_jsxDEV(ZoomIn, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1787,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1782,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: resetZoom,\n                  className: \"p-1 text-gray-600 hover:text-blue-600 transition-colors\",\n                  title: \"Reset Zoom (0)\",\n                  children: /*#__PURE__*/_jsxDEV(RotateCcw, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1794,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1789,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1771,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1762,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1734,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-6\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: addOverlayTrack,\n                  className: \"p-2 text-purple-600 hover:text-purple-800 hover:bg-purple-50 rounded-xl transition-all duration-200\",\n                  title: \"Add Overlay Track\",\n                  children: /*#__PURE__*/_jsxDEV(Plus, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1808,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1803,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: addAudioTrack,\n                  className: \"p-2 text-green-600 hover:text-green-800 hover:bg-green-50 rounded-xl transition-all duration-200\",\n                  title: \"Add Audio Track\",\n                  children: /*#__PURE__*/_jsxDEV(Music, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1815,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1810,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: splitTimelineItem,\n                  disabled: !selectedTimelineItem,\n                  className: `p-2 rounded-xl transition-all duration-200 ${selectedTimelineItem ? \"text-red-600 hover:text-red-800 hover:bg-red-50\" : \"text-gray-400 cursor-not-allowed\"}`,\n                  title: \"Split Selected Item (Ctrl+B) - Cuts item at current time\",\n                  children: /*#__PURE__*/_jsxDEV(Scissors, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1827,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1817,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: copyTimelineItem,\n                  disabled: !selectedTimelineItem,\n                  className: `p-2 rounded-xl transition-all duration-200 ${selectedTimelineItem ? \"text-blue-600 hover:text-blue-800 hover:bg-blue-50\" : \"text-gray-400 cursor-not-allowed\"}`,\n                  title: \"Copy Selected Item (Ctrl+C) - Copy item to clipboard\",\n                  children: /*#__PURE__*/_jsxDEV(Copy, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1839,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1829,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: deleteSelectedItem,\n                  disabled: !selectedTimelineItem,\n                  className: `p-2 rounded-xl transition-all duration-200 ${selectedTimelineItem ? \"text-red-600 hover:text-red-800 hover:bg-red-50\" : \"text-gray-400 cursor-not-allowed\"}`,\n                  title: \"Delete Selected Item (Del/Backspace) - Remove from timeline\",\n                  children: /*#__PURE__*/_jsxDEV(Trash2, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1851,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1841,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1802,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1801,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1800,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1733,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 flex min-h-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-48 bg-gray-50 border-r border-gray-200 flex-shrink-0 flex flex-col\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-12 border-b border-gray-200 flex-shrink-0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1860,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: trackLabelsRef,\n              className: \"flex-1 overflow-y-auto overflow-x-hidden\",\n              onScroll: handleTrackLabelsScroll,\n              children: [tracks.overlays.map(track => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"h-15 flex items-center px-4 border-b border-gray-100 text-sm font-medium text-purple-700 bg-purple-50 flex-shrink-0\",\n                style: {\n                  height: \"60px\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(Layers, {\n                  size: 16,\n                  className: \"mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1873,\n                  columnNumber: 21\n                }, this), track.name]\n              }, track.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1868,\n                columnNumber: 19\n              }, this)), tracks.main.map(track => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"h-15 flex items-center px-4 border-b border-gray-100 text-sm font-medium text-blue-700 bg-blue-50 flex-shrink-0\",\n                style: {\n                  height: \"60px\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(Video, {\n                  size: 16,\n                  className: \"mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1884,\n                  columnNumber: 21\n                }, this), track.name]\n              }, track.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1879,\n                columnNumber: 19\n              }, this)), tracks.audio.map(track => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"h-15 flex items-center px-4 border-b border-gray-100 text-sm font-medium text-green-700 bg-green-50 flex-shrink-0\",\n                style: {\n                  height: \"60px\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(Music, {\n                  size: 16,\n                  className: \"mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1895,\n                  columnNumber: 21\n                }, this), track.name]\n              }, track.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1890,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1862,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1859,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: el => {\n              timelineRef.current = el;\n              timelineScrollRef.current = el;\n            },\n            className: \"flex-1 relative overflow-auto bg-white\",\n            onScroll: handleTrackAreaScroll,\n            onDragOver: handleDragOver,\n            onDrop: handleDrop,\n            onDragLeave: handleDragLeave,\n            style: {\n              overflowX: \"auto\",\n              overflowY: \"auto\",\n              scrollbarWidth: \"thin\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: `${getTimelineWidth()}px`,\n                minHeight: \"100%\",\n                position: \"relative\"\n              },\n              onClick: handleTimelineClick,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"h-12 bg-gray-50 border-b border-gray-200 relative flex-shrink-0\",\n                children: [Array.from({\n                  length: Math.ceil(videoDuration * timelineZoom / 5) + 1\n                }, (_, i) => {\n                  const timeValue = i * 5 / timelineZoom;\n                  const pixelsPerSecond = getPixelsPerSecond();\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"absolute top-0 h-full border-l border-gray-300\",\n                    style: {\n                      left: `${timeValue * pixelsPerSecond}px`\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-xs text-gray-600 ml-2 mt-2 inline-block font-medium\",\n                      children: formatTime(timeValue)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1940,\n                      columnNumber: 27\n                    }, this)\n                  }, i, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1935,\n                    columnNumber: 25\n                  }, this);\n                }), timelineZoom > 2 && Array.from({\n                  length: Math.ceil(videoDuration * timelineZoom) + 1\n                }, (_, i) => {\n                  const timeValue = i / timelineZoom;\n                  const pixelsPerSecond = getPixelsPerSecond();\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"absolute top-8 w-0 h-4 border-l border-gray-200\",\n                    style: {\n                      left: `${timeValue * pixelsPerSecond}px`\n                    }\n                  }, `sub-${i}`, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1955,\n                    columnNumber: 27\n                  }, this);\n                }), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"absolute top-0 w-0.5 h-full bg-red-500 z-20 shadow-sm\",\n                  style: {\n                    left: `${currentTime * getPixelsPerSecond()}px`\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1964,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1926,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative flex-1\",\n                style: {\n                  height: `${(tracks.overlays.length + tracks.main.length + tracks.audio.length) * 60}px`,\n                  minHeight: \"100%\"\n                },\n                children: [timelineItems.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `absolute h-10 rounded-lg border-2 cursor-grab active:cursor-grabbing transition-all shadow-sm hover:shadow-md group ${getTrackColor(item.trackType)} ${(selectedTimelineItem === null || selectedTimelineItem === void 0 ? void 0 : selectedTimelineItem.id) === item.id ? \"ring-2 ring-blue-300\" : \"\"} ${(draggedTimelineItem === null || draggedTimelineItem === void 0 ? void 0 : draggedTimelineItem.id) === item.id ? \"opacity-50 z-30\" : \"\"} ${(copiedItem === null || copiedItem === void 0 ? void 0 : copiedItem.id) === item.id ? \"ring-2 ring-green-300 ring-dashed\" : \"\"}`,\n                  style: getTimelineItemStyle(item),\n                  onClick: e => {\n                    e.stopPropagation();\n                    setSelectedTimelineItem(item);\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"absolute left-0 top-0 w-3 h-full cursor-ew-resize opacity-0 group-hover:opacity-100 bg-white/50 rounded-l-lg z-10 flex items-center justify-center\",\n                    onMouseDown: e => handleResizeStart(e, item, \"left\"),\n                    title: \"Trim start - Drag to adjust start time\",\n                    style: {\n                      background: \"linear-gradient(to right, rgba(255,255,255,0.8), transparent)\"\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-0.5 h-6 bg-white rounded-full opacity-80\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2017,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2008,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    draggable: \"true\",\n                    onDragStart: e => handleTimelineItemDragStart(e, item),\n                    onDragEnd: handleTimelineItemDragEnd,\n                    className: \"p-2 text-white text-xs truncate font-medium flex items-center h-full mx-3 cursor-grab active:cursor-grabbing\",\n                    title: \"Drag to move item on timeline - Ripple mode: pushes other blocks\",\n                    children: [item.name, (copiedItem === null || copiedItem === void 0 ? void 0 : copiedItem.id) === item.id && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"ml-2 text-green-200\",\n                      children: \"\\uD83D\\uDCCB\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2031,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2020,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"absolute right-0 top-0 w-3 h-full cursor-ew-resize opacity-0 group-hover:opacity-100 bg-white/50 rounded-r-lg z-10 flex items-center justify-center\",\n                    onMouseDown: e => handleResizeStart(e, item, \"right\"),\n                    title: \"Trim end - Drag to adjust duration\",\n                    style: {\n                      background: \"linear-gradient(to left, rgba(255,255,255,0.8), transparent)\"\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-0.5 h-6 bg-white rounded-full opacity-80\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2044,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2035,\n                    columnNumber: 23\n                  }, this)]\n                }, item.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1985,\n                  columnNumber: 21\n                }, this)), dropPreview && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `absolute h-10 rounded-lg border-2 transition-all ${dropPreview.isValid ? dropPreview.isExact ? `${getTrackColor(dropPreview.trackType)} bg-opacity-60 border-solid` : `${getTrackColor(dropPreview.trackType)} bg-opacity-40 border-dashed animate-pulse` : \"bg-red-300 border-red-500 border-dashed\"}`,\n                  style: getDropPreviewStyle(),\n                  children: dropPreview.isValid && !dropPreview.isExact && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-center h-full text-white text-xs font-bold\",\n                    children: \"\\uD83E\\uDDF2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2065,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2050,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1972,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1918,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1902,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1858,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1726,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1408,\n      columnNumber: 7\n    }, this), showHelp && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-y-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 border-b border-gray-200 flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl font-bold text-gray-800 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(HelpCircle, {\n              size: 24,\n              className: \"mr-3 text-blue-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2084,\n              columnNumber: 17\n            }, this), \"CapCut Pro - Help & Shortcuts\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2083,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowHelp(false),\n            className: \"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-xl transition-all\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2091,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2087,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2082,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-semibold text-gray-800 mb-3 flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(Film, {\n                size: 18,\n                className: \"mr-2 text-blue-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2099,\n                columnNumber: 19\n              }, this), \"Timeline Controls\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2098,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 gap-3 text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Drag center:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2104,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Move item\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2105,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2103,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Drag edges:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2108,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Trim duration\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2109,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2107,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Auto ripple:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2112,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Push other blocks\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2113,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2111,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Ctrl + Wheel:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2116,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Zoom timeline\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2117,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2115,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2102,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2097,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-semibold text-gray-800 mb-3 flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(Layers, {\n                size: 18,\n                className: \"mr-2 text-purple-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2125,\n                columnNumber: 19\n              }, this), \"Video Overlays (CapCut Style)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2124,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 gap-3 text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Click overlay:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2130,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Select & show controls\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2131,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2129,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Drag anywhere:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2134,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Move position\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2135,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2133,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Drag corner dots:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2138,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Resize overlay\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2139,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2137,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Ctrl + Scroll:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2142,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Smooth zoom\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2143,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2141,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Opacity slider:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2146,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"0-100% transparency\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2147,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2145,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Auto bounds:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2150,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Stays in view area\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2151,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2149,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2128,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2123,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-semibold text-gray-800 mb-3 flex items-center\",\n              children: \"\\u2328\\uFE0F Keyboard Shortcuts\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2158,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 gap-3 text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-2 py-1 bg-gray-100 rounded text-xs font-mono\",\n                  children: \"Space\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2163,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Play / Pause\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2166,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2162,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-2 py-1 bg-gray-100 rounded text-xs font-mono\",\n                  children: \"\\u2190 \\u2192\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2169,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Seek (0.1s)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2172,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2168,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-2 py-1 bg-gray-100 rounded text-xs font-mono\",\n                  children: \"Shift + \\u2190 \\u2192\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2175,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Seek (1s)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2178,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2174,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-2 py-1 bg-gray-100 rounded text-xs font-mono\",\n                  children: \"Ctrl + \\u2190 \\u2192\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2181,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Seek (5s)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2184,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2180,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-2 py-1 bg-gray-100 rounded text-xs font-mono\",\n                  children: \"Ctrl + B\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2187,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Split item\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2190,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2186,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-2 py-1 bg-gray-100 rounded text-xs font-mono\",\n                  children: \"Ctrl + C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2193,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Copy item\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2196,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2192,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-2 py-1 bg-gray-100 rounded text-xs font-mono\",\n                  children: \"Ctrl + V\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2199,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Paste item\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2202,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2198,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-2 py-1 bg-gray-100 rounded text-xs font-mono\",\n                  children: \"Del\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2205,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Delete item\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2208,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2204,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-2 py-1 bg-gray-100 rounded text-xs font-mono\",\n                  children: \"+ -\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2211,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Zoom in/out\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2214,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2210,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-2 py-1 bg-gray-100 rounded text-xs font-mono\",\n                  children: \"0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2217,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Reset zoom\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2220,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2216,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2161,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2157,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-semibold text-gray-800 mb-3 flex items-center\",\n              children: \"\\uD83D\\uDCA1 Pro Tips\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2227,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"space-y-2 text-sm text-gray-600\",\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"flex items-start\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"inline-block w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3 flex-shrink-0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2232,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Drag media from library directly to timeline tracks for quick editing\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2233,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2231,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"flex items-start\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"inline-block w-2 h-2 bg-purple-500 rounded-full mt-2 mr-3 flex-shrink-0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2239,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Overlays can be dragged anywhere on video area - they auto-fit within bounds\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2240,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2238,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"flex items-start\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"inline-block w-2 h-2 bg-orange-500 rounded-full mt-2 mr-3 flex-shrink-0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2246,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Resize handles appear when overlay selected - drag corners for proportional scaling\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2247,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2245,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"flex items-start\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"inline-block w-2 h-2 bg-green-500 rounded-full mt-2 mr-3 flex-shrink-0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2253,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Ripple mode automatically pushes blocks when inserting new content\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2254,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2252,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"flex items-start\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"inline-block w-2 h-2 bg-red-500 rounded-full mt-2 mr-3 flex-shrink-0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2260,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Use Ctrl+scroll over overlays for precise size control like in CapCut\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2261,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2259,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2230,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2226,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2095,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 border-t border-gray-200 bg-gray-50 rounded-b-2xl\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-center text-sm text-gray-500\",\n            children: [\"\\uD83C\\uDFAC Made with CapCut Pro styling \\u2022 Press\", \" \", /*#__PURE__*/_jsxDEV(\"kbd\", {\n              className: \"px-1 py-0.5 bg-white rounded text-xs font-mono border\",\n              children: \"?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2273,\n              columnNumber: 17\n            }, this), \" \", \"or click help icon anytime\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2271,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2270,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2081,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2080,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1392,\n    columnNumber: 5\n  }, this);\n};\n_s(VideoEditor, \"jMtPix4Z2mKYqYm0sDSZI3IKzYQ=\");\n_c = VideoEditor;\nexport default VideoEditor;\nvar _c;\n$RefreshReg$(_c, \"VideoEditor\");","map":{"version":3,"names":["useState","useRef","useEffect","useCallback","Upload","Play","Pause","Volume2","Video","Music","SkipBack","SkipForward","VolumeX","Copy","Trash2","Scissors","Image","Film","Plus","Layers","ZoomIn","ZoomOut","RotateCcw","HelpCircle","X","jsxDEV","_jsxDEV","Fragment","_Fragment","VideoEditor","_s","mediaLibrary","setMediaLibrary","videos","audios","images","timelineItems","setTimelineItems","currentTime","setCurrentTime","videoDuration","setVideoDuration","selectedTimelineItem","setSelectedTimelineItem","timelineZoom","setTimelineZoom","activeTab","setActiveTab","volume","setVolume","isMuted","setIsMuted","isPlaying","setIsPlaying","currentVideoSource","setCurrentVideoSource","draggedItem","setDraggedItem","draggedTimelineItem","setDraggedTimelineItem","dropPreview","setDropPreview","isDragging","setIsDragging","isTimelineDragging","setIsTimelineDragging","dragOffset","setDragOffset","copiedItem","setCopiedItem","isResizing","setIsResizing","resizeHandle","setResizeHandle","resizeItem","setResizeItem","originalItemData","setOriginalItemData","selectedOverlay","setSelectedOverlay","overlayTransforms","setOverlayTransforms","isDraggingOverlay","setIsDraggingOverlay","isResizingOverlay","setIsResizingOverlay","overlayDragStart","setOverlayDragStart","x","y","resizeOverlayHandle","setResizeOverlayHandle","initialOverlayTransform","setInitialOverlayTransform","showHelp","setShowHelp","tracks","setTracks","overlays","id","name","type","main","audio","timelineRef","timelineScrollRef","trackLabelsRef","intervalRef","audioElementsRef","Map","videoRef","autoScrollIntervalRef","videoContainerRef","formatTime","seconds","mins","Math","floor","secs","ms","toString","padStart","handlePlayPause","seekTo","time","newTime","max","min","content","getCurrentTimelineContent","forEach","audioItem","audioElement","current","get","relativeTime","startTime","currentItems","filter","item","duration","mainVideo","find","trackType","createAudioElement","has","document","createElement","src","url","muted","preload","set","syncAudioTime","timeDiff","abs","checkCollision","newItem","excludeId","some","trackId","itemStart","itemEnd","newStart","newEnd","insertWithRipple","insertTime","trackItems","sort","a","b","length","shouldRipple","affectedItems","insertPosition","blockAtPosition","blocksToShift","nextBlock","availableSpace","shiftAmount","findNearestValidPosition","dropTime","result","isExact","applyRippleEffect","console","log","affectedCount","map","oldStart","prev","affectedItem","affected","maxEndTime","findNextAvailablePosition","preferredStart","testItem","i","currentItem","nextItem","gapStart","gapEnd","gapSize","lastItem","removeFromTimeline","itemId","pause","delete","getOverlayTransform","overlayId","scale","opacity","updateOverlayTransform","updates","handleOverlayMouseDown","e","overlay","target","closest","preventDefault","stopPropagation","container","containerRect","getBoundingClientRect","overlayElement","currentTarget","overlayRect","transform","clientX","left","clientY","top","containerX","containerY","handleOverlayResizeStart","handle","currentTransform","startScale","startX","startY","handleOverlayMouseMove","rect","overlaySize","newX","newY","padding","limitedX","width","limitedY","height","baseX","baseY","index","undefined","deltaX","deltaY","scaleFactor","sensitivity","newScale","handleOverlayMouseUp","handleOverlayWheel","ctrlKey","scaleDelta","splitTimelineItem","splitTime","firstPartDuration","secondPartStart","secondPartDuration","secondPart","Date","now","random","updatedFirstPart","timelineItem","concat","copyTimelineItem","pasteTimelineItem","_insertResult$affecte","targetTrackId","insertResult","newEndTime","deleteSelectedItem","stopAutoScroll","clearInterval","startAutoScroll","direction","speed","setInterval","scrollAmount","currentScrollLeft","scrollLeft","maxScroll","scrollWidth","clientWidth","checkAutoScroll","scrollZoneWidth","relativeX","zoomIn","zoomOut","resetZoom","handleResizeStart","handleResizeEnd","handleTrackAreaScroll","scrollTop","handleTrackLabelsScroll","getTimelineWidth","baseWidth","getPixelsPerSecond","addEventListener","body","style","cursor","removeEventListener","handleMouseMove","mouseX","pixelsPerSecond","minDuration","rightEdge","newStartTime","newDuration","leftEdge","handleMouseUp","o","firstImage","currentAudioIds","Set","paused","play","catch","error","handleKeyDown","tagName","key","code","step","shiftKey","window","handleWheel","_timelineRef$current","contains","passive","addToTimeline","mediaItem","startsWith","finalStartTime","newTimelineItem","mediaId","addOverlayTrack","newTrackId","addAudioTrack","handleTimelineClick","clickX","clickTime","handleTimelineItemDragStart","itemRect","dataTransfer","effectAllowed","setData","handleTimelineItemDragEnd","handleDragOver","dropEffect","timelineRect","dragX","dragY","trackHeight","timeRulerHeight","relativeY","trackIndex","allTracks","targetTrack","isValid","handleDrop","_dropPreview$affected","_dropPreview$affected2","_dropPreview$affected3","handleDragLeave","_timelineRef$current2","relatedTarget","getTimelineItemStyle","findIndex","track","getDropPreviewStyle","getTrackColor","className","children","MediaLibrary","fileName","_jsxFileName","lineNumber","columnNumber","ref","title","onClick","alt","isSelected","isDraggingThis","isResizingThis","zIndex","transition","onMouseDown","onWheel","draggable","value","onChange","parseFloat","round","size","toFixed","disabled","onScroll","el","onDragOver","onDrop","onDragLeave","overflowX","overflowY","scrollbarWidth","minHeight","position","Array","from","ceil","_","timeValue","background","onDragStart","onDragEnd","_c","$RefreshReg$"],"sources":["C:/Scriptify/ai-content-studio/frontend/src/components/VideoEditor/VideoEditor.jsx"],"sourcesContent":["import { useState, useRef, useEffect, useCallback } from \"react\";\r\nimport {\r\n  Upload,\r\n  Play,\r\n  Pause,\r\n  Volume2,\r\n  Video,\r\n  Music,\r\n  SkipBack,\r\n  SkipForward,\r\n  VolumeX,\r\n  Copy,\r\n  Trash2,\r\n  Scissors,\r\n  Image,\r\n  Film,\r\n  Plus,\r\n  Layers,\r\n  ZoomIn,\r\n  ZoomOut,\r\n  RotateCcw,\r\n  HelpCircle,\r\n  X,\r\n} from \"lucide-react\";\r\n\r\nconst VideoEditor = () => {\r\n  const [mediaLibrary, setMediaLibrary] = useState({\r\n    videos: [],\r\n    audios: [],\r\n    images: [],\r\n  });\r\n  const [timelineItems, setTimelineItems] = useState([]);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [videoDuration, setVideoDuration] = useState(60);\r\n  const [selectedTimelineItem, setSelectedTimelineItem] = useState(null);\r\n  const [timelineZoom, setTimelineZoom] = useState(1);\r\n  const [activeTab, setActiveTab] = useState(\"videos\");\r\n  const [volume, setVolume] = useState(1);\r\n  const [isMuted, setIsMuted] = useState(false);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [currentVideoSource, setCurrentVideoSource] = useState(null);\r\n  const [draggedItem, setDraggedItem] = useState(null);\r\n  const [draggedTimelineItem, setDraggedTimelineItem] = useState(null);\r\n  const [dropPreview, setDropPreview] = useState(null);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [isTimelineDragging, setIsTimelineDragging] = useState(false);\r\n  const [dragOffset, setDragOffset] = useState(0);\r\n  const [copiedItem, setCopiedItem] = useState(null);\r\n\r\n  // Новые состояния для resize\r\n  const [isResizing, setIsResizing] = useState(false);\r\n  const [resizeHandle, setResizeHandle] = useState(null); // 'left' | 'right'\r\n  const [resizeItem, setResizeItem] = useState(null);\r\n  const [originalItemData, setOriginalItemData] = useState(null);\r\n\r\n  // Состояния для управления overlays на видео\r\n  const [selectedOverlay, setSelectedOverlay] = useState(null);\r\n  const [overlayTransforms, setOverlayTransforms] = useState({}); // { overlayId: { x, y, scale, opacity } }\r\n  const [isDraggingOverlay, setIsDraggingOverlay] = useState(false);\r\n  const [isResizingOverlay, setIsResizingOverlay] = useState(false);\r\n  const [overlayDragStart, setOverlayDragStart] = useState({ x: 0, y: 0 });\r\n  const [resizeOverlayHandle, setResizeOverlayHandle] = useState(null);\r\n  const [initialOverlayTransform, setInitialOverlayTransform] = useState(null);\r\n\r\n  // Модальное окно помощи\r\n  const [showHelp, setShowHelp] = useState(false);\r\n\r\n  // Треки как в CapCut\r\n  const [tracks, setTracks] = useState({\r\n    overlays: [\r\n      { id: \"overlay-1\", name: \"Overlay 1\", type: \"overlay\" },\r\n      { id: \"overlay-2\", name: \"Overlay 2\", type: \"overlay\" },\r\n    ],\r\n    main: [{ id: \"main-video\", name: \"Main Video\", type: \"main\" }],\r\n    audio: [\r\n      { id: \"audio-1\", name: \"Audio 1\", type: \"audio\" },\r\n      { id: \"audio-2\", name: \"Audio 2\", type: \"audio\" },\r\n    ],\r\n  });\r\n\r\n  const timelineRef = useRef(null);\r\n  const timelineScrollRef = useRef(null);\r\n  const trackLabelsRef = useRef(null);\r\n  const intervalRef = useRef(null);\r\n  const audioElementsRef = useRef(new Map());\r\n  const videoRef = useRef(null);\r\n  const autoScrollIntervalRef = useRef(null);\r\n  const videoContainerRef = useRef(null);\r\n\r\n  // Базовые функции\r\n  const formatTime = (seconds) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = Math.floor(seconds % 60);\r\n    const ms = Math.floor((seconds % 1) * 100);\r\n    return timelineZoom > 5\r\n      ? `${mins}:${secs.toString().padStart(2, \"0\")}.${ms\r\n          .toString()\r\n          .padStart(2, \"0\")}`\r\n      : `${mins}:${secs.toString().padStart(2, \"0\")}`;\r\n  };\r\n\r\n  const handlePlayPause = () => {\r\n    setIsPlaying(!isPlaying);\r\n  };\r\n\r\n  const seekTo = (time) => {\r\n    const newTime = Math.max(0, Math.min(videoDuration, time));\r\n    setCurrentTime(newTime);\r\n\r\n    const content = getCurrentTimelineContent();\r\n    content.audio.forEach((audioItem) => {\r\n      const audioElement = audioElementsRef.current.get(audioItem.id);\r\n      if (audioElement) {\r\n        const relativeTime = newTime - audioItem.startTime;\r\n        audioElement.currentTime = Math.max(0, relativeTime);\r\n      }\r\n    });\r\n  };\r\n\r\n  const getCurrentTimelineContent = useCallback(() => {\r\n    const currentItems = timelineItems.filter(\r\n      (item) =>\r\n        currentTime >= item.startTime &&\r\n        currentTime < item.startTime + item.duration\r\n    );\r\n\r\n    return {\r\n      mainVideo: currentItems.find(\r\n        (item) => item.trackType === \"main\" && item.type === \"video\"\r\n      ),\r\n      overlays: currentItems.filter((item) => item.trackType === \"overlay\"),\r\n      audio: currentItems.filter((item) => item.trackType === \"audio\"),\r\n    };\r\n  }, [currentTime, timelineItems]);\r\n\r\n  const createAudioElement = useCallback(\r\n    (audioItem) => {\r\n      if (!audioElementsRef.current.has(audioItem.id)) {\r\n        const audio = document.createElement(\"audio\");\r\n        audio.src = audioItem.url;\r\n        audio.volume = (audioItem.volume || 1) * volume;\r\n        audio.muted = isMuted;\r\n        audio.preload = \"metadata\";\r\n        audioElementsRef.current.set(audioItem.id, audio);\r\n      }\r\n      return audioElementsRef.current.get(audioItem.id);\r\n    },\r\n    [volume, isMuted]\r\n  );\r\n\r\n  const syncAudioTime = useCallback((audioItem, relativeTime) => {\r\n    const audioElement = audioElementsRef.current.get(audioItem.id);\r\n    if (audioElement) {\r\n      const timeDiff = Math.abs(audioElement.currentTime - relativeTime);\r\n      if (timeDiff > 0.2) {\r\n        audioElement.currentTime = Math.max(0, relativeTime);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  const checkCollision = useCallback(\r\n    (newItem, excludeId = null) => {\r\n      return timelineItems.some((item) => {\r\n        if (item.id === excludeId) return false;\r\n        if (item.trackId !== newItem.trackId) return false;\r\n\r\n        const itemStart = item.startTime;\r\n        const itemEnd = item.startTime + item.duration;\r\n        const newStart = newItem.startTime;\r\n        const newEnd = newItem.startTime + newItem.duration;\r\n\r\n        return newStart < itemEnd && newEnd > itemStart;\r\n      });\r\n    },\r\n    [timelineItems]\r\n  );\r\n\r\n  // Функция для вставки с автоматическим сдвигом блоков (как в CapCut)\r\n  const insertWithRipple = useCallback(\r\n    (trackId, insertTime, duration, excludeId = null) => {\r\n      const trackItems = timelineItems\r\n        .filter((item) => item.trackId === trackId && item.id !== excludeId)\r\n        .sort((a, b) => a.startTime - b.startTime);\r\n\r\n      // Если трек пустой\r\n      if (trackItems.length === 0) {\r\n        return {\r\n          time: Math.max(0, insertTime),\r\n          shouldRipple: false,\r\n          affectedItems: [],\r\n        };\r\n      }\r\n\r\n      // Ищем где вставить\r\n      let insertPosition = insertTime;\r\n      let shouldRipple = false;\r\n      let affectedItems = [];\r\n\r\n      // Проверяем есть ли точно в этом месте блок\r\n      const blockAtPosition = trackItems.find(\r\n        (item) =>\r\n          insertTime >= item.startTime &&\r\n          insertTime < item.startTime + item.duration\r\n      );\r\n\r\n      if (blockAtPosition) {\r\n        // Вставляем в начало этого блока и сдвигаем все что справа\r\n        insertPosition = blockAtPosition.startTime;\r\n        shouldRipple = true;\r\n        affectedItems = trackItems.filter(\r\n          (item) => item.startTime >= insertPosition\r\n        );\r\n      } else {\r\n        // Ищем блоки которые нужно сдвинуть\r\n        const blocksToShift = trackItems.filter(\r\n          (item) => item.startTime >= insertTime\r\n        );\r\n\r\n        if (blocksToShift.length > 0) {\r\n          // Проверяем, есть ли место без сдвига\r\n          const nextBlock = blocksToShift[0];\r\n          const availableSpace = nextBlock.startTime - insertTime;\r\n\r\n          if (availableSpace >= duration) {\r\n            // Помещается без сдвига\r\n            insertPosition = insertTime;\r\n            shouldRipple = false;\r\n          } else {\r\n            // Нужно сдвинуть\r\n            insertPosition = insertTime;\r\n            shouldRipple = true;\r\n            affectedItems = blocksToShift;\r\n          }\r\n        } else {\r\n          // Вставляем в конец\r\n          insertPosition = insertTime;\r\n          shouldRipple = false;\r\n        }\r\n      }\r\n\r\n      return {\r\n        time: Math.max(0, insertPosition),\r\n        shouldRipple,\r\n        affectedItems,\r\n        shiftAmount: shouldRipple ? duration : 0,\r\n      };\r\n    },\r\n    [timelineItems]\r\n  );\r\n\r\n  // Функция для поиска ближайшего свободного места (обратная совместимость)\r\n  const findNearestValidPosition = useCallback(\r\n    (trackId, dropTime, duration, excludeId = null) => {\r\n      const result = insertWithRipple(trackId, dropTime, duration, excludeId);\r\n      return {\r\n        time: result.time,\r\n        isExact: !result.shouldRipple,\r\n      };\r\n    },\r\n    [insertWithRipple]\r\n  );\r\n\r\n  // Функция для применения ripple effect\r\n  const applyRippleEffect = useCallback(\r\n    (affectedItems, shiftAmount) => {\r\n      if (!affectedItems.length || shiftAmount <= 0) return;\r\n\r\n      console.log(\"Applying ripple effect:\", {\r\n        affectedCount: affectedItems.length,\r\n        shiftAmount,\r\n        affectedItems: affectedItems.map((item) => ({\r\n          name: item.name,\r\n          oldStart: item.startTime,\r\n        })),\r\n      });\r\n\r\n      setTimelineItems((prev) =>\r\n        prev.map((item) => {\r\n          const affectedItem = affectedItems.find(\r\n            (affected) => affected.id === item.id\r\n          );\r\n          if (affectedItem) {\r\n            console.log(\r\n              `Shifting ${item.name} from ${item.startTime} to ${\r\n                item.startTime + shiftAmount\r\n              }`\r\n            );\r\n            return {\r\n              ...item,\r\n              startTime: item.startTime + shiftAmount,\r\n            };\r\n          }\r\n          return item;\r\n        })\r\n      );\r\n\r\n      // Обновляем общую длительность если нужно\r\n      if (affectedItems.length > 0) {\r\n        const maxEndTime = Math.max(\r\n          ...affectedItems.map(\r\n            (item) => item.startTime + item.duration + shiftAmount\r\n          )\r\n        );\r\n        if (maxEndTime > videoDuration) {\r\n          setVideoDuration(maxEndTime + 10);\r\n        }\r\n      }\r\n    },\r\n    [videoDuration]\r\n  );\r\n\r\n  const findNextAvailablePosition = useCallback(\r\n    (trackId, duration, preferredStart = 0) => {\r\n      const trackItems = timelineItems\r\n        .filter((item) => item.trackId === trackId)\r\n        .sort((a, b) => a.startTime - b.startTime);\r\n\r\n      if (preferredStart >= 0) {\r\n        const testItem = { trackId, startTime: preferredStart, duration };\r\n        if (!checkCollision(testItem)) {\r\n          return preferredStart;\r\n        }\r\n      }\r\n\r\n      for (let i = 0; i < trackItems.length; i++) {\r\n        const currentItem = trackItems[i];\r\n        const nextItem = trackItems[i + 1];\r\n\r\n        if (i === 0 && currentItem.startTime >= duration) {\r\n          return 0;\r\n        }\r\n\r\n        if (nextItem) {\r\n          const gapStart = currentItem.startTime + currentItem.duration;\r\n          const gapEnd = nextItem.startTime;\r\n          const gapSize = gapEnd - gapStart;\r\n\r\n          if (gapSize >= duration) {\r\n            return gapStart;\r\n          }\r\n        }\r\n      }\r\n\r\n      if (trackItems.length === 0) return 0;\r\n      const lastItem = trackItems[trackItems.length - 1];\r\n      return lastItem.startTime + lastItem.duration;\r\n    },\r\n    [timelineItems, checkCollision]\r\n  );\r\n\r\n  const removeFromTimeline = (itemId) => {\r\n    const audioElement = audioElementsRef.current.get(itemId);\r\n    if (audioElement) {\r\n      audioElement.pause();\r\n      audioElement.src = \"\";\r\n      audioElementsRef.current.delete(itemId);\r\n    }\r\n\r\n    setTimelineItems((prev) => prev.filter((item) => item.id !== itemId));\r\n    setSelectedTimelineItem(null);\r\n  };\r\n\r\n  // Функции для управления overlays на видео\r\n  const getOverlayTransform = useCallback(\r\n    (overlayId) => {\r\n      return (\r\n        overlayTransforms[overlayId] || { x: 0, y: 0, scale: 1, opacity: 1 }\r\n      );\r\n    },\r\n    [overlayTransforms]\r\n  );\r\n\r\n  const updateOverlayTransform = useCallback(\r\n    (overlayId, updates) => {\r\n      setOverlayTransforms((prev) => ({\r\n        ...prev,\r\n        [overlayId]: { ...getOverlayTransform(overlayId), ...updates },\r\n      }));\r\n    },\r\n    [getOverlayTransform]\r\n  );\r\n\r\n  const handleOverlayMouseDown = useCallback(\r\n    (e, overlay) => {\r\n      if (e.target.closest(\".resize-handle\")) return; // Не начинаем drag если кликнули на resize handle\r\n\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      setSelectedOverlay(overlay);\r\n      setIsDraggingOverlay(true);\r\n\r\n      const container = videoContainerRef.current;\r\n      if (!container) return;\r\n\r\n      const containerRect = container.getBoundingClientRect();\r\n      const overlayElement = e.currentTarget;\r\n      const overlayRect = overlayElement.getBoundingClientRect();\r\n      const transform = getOverlayTransform(overlay.id);\r\n\r\n      // Запоминаем точный offset от позиции мыши до текущей позиции элемента\r\n      setOverlayDragStart({\r\n        x: e.clientX - overlayRect.left,\r\n        y: e.clientY - overlayRect.top,\r\n        containerX: containerRect.left,\r\n        containerY: containerRect.top,\r\n      });\r\n    },\r\n    [getOverlayTransform]\r\n  );\r\n\r\n  const handleOverlayResizeStart = useCallback(\r\n    (e, overlay, handle) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      console.log(\"Starting resize:\", handle); // Для отладки\r\n\r\n      setSelectedOverlay(overlay);\r\n      setIsResizingOverlay(true);\r\n      setResizeOverlayHandle(handle);\r\n\r\n      const currentTransform = getOverlayTransform(overlay.id);\r\n      setInitialOverlayTransform(currentTransform);\r\n\r\n      setOverlayDragStart({\r\n        x: e.clientX,\r\n        y: e.clientY,\r\n        startScale: currentTransform.scale,\r\n        startX: currentTransform.x,\r\n        startY: currentTransform.y,\r\n      });\r\n    },\r\n    [getOverlayTransform]\r\n  );\r\n\r\n  const handleOverlayMouseMove = useCallback(\r\n    (e) => {\r\n      if (!selectedOverlay) return;\r\n\r\n      if (isDraggingOverlay) {\r\n        // Перетаскивание с максимальной плавностью\r\n        const container = videoContainerRef.current;\r\n        if (!container) return;\r\n\r\n        const rect = container.getBoundingClientRect();\r\n        const overlaySize = 128 * getOverlayTransform(selectedOverlay.id).scale;\r\n\r\n        // Вычисляем новую позицию с учетом начального offset\r\n        const newX =\r\n          e.clientX - overlayDragStart.containerX - overlayDragStart.x;\r\n        const newY =\r\n          e.clientY - overlayDragStart.containerY - overlayDragStart.y;\r\n\r\n        // Ограничиваем движение границами контейнера с учетом размера overlay\r\n        const padding = 5; // Минимальный отступ\r\n        const limitedX = Math.max(\r\n          padding,\r\n          Math.min(rect.width - overlaySize - padding, newX)\r\n        );\r\n        const limitedY = Math.max(\r\n          padding,\r\n          Math.min(rect.height - overlaySize - padding, newY)\r\n        );\r\n\r\n        // Обновляем позицию относительно базовой позиции\r\n        const baseX = 200;\r\n        const baseY = 50 + selectedOverlay.index * 120;\r\n\r\n        // Мгновенное обновление без debounce для плавности\r\n        updateOverlayTransform(selectedOverlay.id, {\r\n          x: limitedX - baseX,\r\n          y: limitedY - baseY,\r\n        });\r\n      } else if (\r\n        isResizingOverlay &&\r\n        overlayDragStart.startScale !== undefined &&\r\n        resizeOverlayHandle\r\n      ) {\r\n        console.log(\"Resizing...\", resizeOverlayHandle); // Для отладки\r\n\r\n        // Простая логика resize\r\n        const deltaX = e.clientX - overlayDragStart.x;\r\n        const deltaY = e.clientY - overlayDragStart.y;\r\n\r\n        // Определяем направление и чувствительность\r\n        let scaleFactor = 1;\r\n        const sensitivity = 0.005; // Базовая чувствительность\r\n\r\n        switch (resizeOverlayHandle) {\r\n          case \"nw\": // Северо-запад: тянем влево-вверх = уменьшаем\r\n            scaleFactor = 1 - (deltaX + deltaY) * sensitivity;\r\n            break;\r\n          case \"ne\": // Северо-восток: тянем вправо-вверх = увеличиваем вправо, уменьшаем вверх\r\n            scaleFactor = 1 + (deltaX - deltaY) * sensitivity;\r\n            break;\r\n          case \"sw\": // Юго-запад: тянем влево-вниз = уменьшаем влево, увеличиваем вниз\r\n            scaleFactor = 1 + (-deltaX + deltaY) * sensitivity;\r\n            break;\r\n          case \"se\": // Юго-восток: тянем вправо-вниз = увеличиваем\r\n            scaleFactor = 1 + (deltaX + deltaY) * sensitivity;\r\n            break;\r\n        }\r\n\r\n        // Применяем новый масштаб\r\n        const newScale = Math.max(\r\n          0.2,\r\n          Math.min(4, overlayDragStart.startScale * scaleFactor)\r\n        );\r\n\r\n        // Простое обновление без сложной компенсации позиции\r\n        updateOverlayTransform(selectedOverlay.id, {\r\n          scale: newScale,\r\n        });\r\n      }\r\n    },\r\n    [\r\n      selectedOverlay,\r\n      isDraggingOverlay,\r\n      isResizingOverlay,\r\n      overlayDragStart,\r\n      initialOverlayTransform,\r\n      updateOverlayTransform,\r\n      getOverlayTransform,\r\n      resizeOverlayHandle,\r\n    ]\r\n  );\r\n\r\n  const handleOverlayMouseUp = useCallback(() => {\r\n    console.log(\"Mouse up - stopping drag/resize\"); // Для отладки\r\n    setIsDraggingOverlay(false);\r\n    setIsResizingOverlay(false);\r\n    setResizeOverlayHandle(null);\r\n    setInitialOverlayTransform(null);\r\n  }, []);\r\n\r\n  const handleOverlayWheel = useCallback(\r\n    (e, overlayId) => {\r\n      if (!e.ctrlKey) return;\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      const transform = getOverlayTransform(overlayId);\r\n      const scaleDelta = e.deltaY > 0 ? -0.05 : 0.05; // Более плавное масштабирование\r\n      const newScale = Math.max(0.2, Math.min(4, transform.scale + scaleDelta));\r\n\r\n      updateOverlayTransform(overlayId, { scale: newScale });\r\n    },\r\n    [getOverlayTransform, updateOverlayTransform]\r\n  );\r\n\r\n  // Функции для работы с элементами таймлайна\r\n  const splitTimelineItem = useCallback(() => {\r\n    if (!selectedTimelineItem) return;\r\n\r\n    const item = selectedTimelineItem;\r\n    const splitTime = currentTime;\r\n\r\n    if (\r\n      splitTime <= item.startTime ||\r\n      splitTime >= item.startTime + item.duration\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    const firstPartDuration = splitTime - item.startTime;\r\n    const secondPartStart = splitTime;\r\n    const secondPartDuration = item.duration - firstPartDuration;\r\n\r\n    const secondPart = {\r\n      ...item,\r\n      id: Date.now() + Math.random(),\r\n      startTime: secondPartStart,\r\n      duration: secondPartDuration,\r\n    };\r\n\r\n    const updatedFirstPart = {\r\n      ...item,\r\n      duration: firstPartDuration,\r\n    };\r\n\r\n    setTimelineItems((prev) =>\r\n      prev\r\n        .map((timelineItem) =>\r\n          timelineItem.id === item.id ? updatedFirstPart : timelineItem\r\n        )\r\n        .concat(secondPart)\r\n    );\r\n\r\n    setSelectedTimelineItem(null);\r\n  }, [selectedTimelineItem, currentTime]);\r\n\r\n  const copyTimelineItem = useCallback(() => {\r\n    if (!selectedTimelineItem) return;\r\n    setCopiedItem(selectedTimelineItem);\r\n  }, [selectedTimelineItem]);\r\n\r\n  const pasteTimelineItem = useCallback(() => {\r\n    if (!copiedItem) return;\r\n\r\n    const targetTrackId = copiedItem.trackId;\r\n    const insertResult = insertWithRipple(\r\n      targetTrackId,\r\n      currentTime,\r\n      copiedItem.duration\r\n    );\r\n\r\n    // Применяем ripple effect если нужно\r\n    if (insertResult.shouldRipple && insertResult.affectedItems?.length > 0) {\r\n      applyRippleEffect(insertResult.affectedItems, copiedItem.duration);\r\n    }\r\n\r\n    const newItem = {\r\n      ...copiedItem,\r\n      id: Date.now() + Math.random(),\r\n      startTime: insertResult.time,\r\n    };\r\n\r\n    setTimelineItems((prev) => [...prev, newItem]);\r\n\r\n    const newEndTime = newItem.startTime + newItem.duration;\r\n    if (newEndTime > videoDuration) {\r\n      setVideoDuration(newEndTime + 10);\r\n    }\r\n\r\n    setSelectedTimelineItem(newItem);\r\n  }, [\r\n    copiedItem,\r\n    currentTime,\r\n    insertWithRipple,\r\n    applyRippleEffect,\r\n    videoDuration,\r\n  ]);\r\n\r\n  const deleteSelectedItem = useCallback(() => {\r\n    if (!selectedTimelineItem) return;\r\n    removeFromTimeline(selectedTimelineItem.id);\r\n  }, [selectedTimelineItem]);\r\n\r\n  // Автопрокрутка и зум\r\n  const stopAutoScroll = useCallback(() => {\r\n    if (autoScrollIntervalRef.current) {\r\n      clearInterval(autoScrollIntervalRef.current);\r\n      autoScrollIntervalRef.current = null;\r\n    }\r\n  }, []);\r\n\r\n  const startAutoScroll = useCallback(\r\n    (direction, speed = 1) => {\r\n      stopAutoScroll();\r\n\r\n      autoScrollIntervalRef.current = setInterval(() => {\r\n        if (timelineScrollRef.current) {\r\n          const scrollAmount = 15 * speed;\r\n          const currentScrollLeft = timelineScrollRef.current.scrollLeft;\r\n          const maxScroll =\r\n            timelineScrollRef.current.scrollWidth -\r\n            timelineScrollRef.current.clientWidth;\r\n\r\n          if (direction === \"left\" && currentScrollLeft > 0) {\r\n            timelineScrollRef.current.scrollLeft = Math.max(\r\n              0,\r\n              currentScrollLeft - scrollAmount\r\n            );\r\n          } else if (direction === \"right\" && currentScrollLeft < maxScroll) {\r\n            timelineScrollRef.current.scrollLeft = Math.min(\r\n              maxScroll,\r\n              currentScrollLeft + scrollAmount\r\n            );\r\n          }\r\n        }\r\n      }, 16); // 60fps для плавности\r\n    },\r\n    [stopAutoScroll]\r\n  );\r\n\r\n  const checkAutoScroll = useCallback(\r\n    (clientX) => {\r\n      if (!timelineScrollRef.current) return;\r\n\r\n      const rect = timelineScrollRef.current.getBoundingClientRect();\r\n      const scrollZoneWidth = 120;\r\n      const relativeX = clientX - rect.left;\r\n\r\n      if (\r\n        relativeX < scrollZoneWidth &&\r\n        timelineScrollRef.current.scrollLeft > 0\r\n      ) {\r\n        const speed = ((scrollZoneWidth - relativeX) / scrollZoneWidth) * 3;\r\n        startAutoScroll(\"left\", speed);\r\n      } else if (relativeX > rect.width - scrollZoneWidth) {\r\n        const maxScroll =\r\n          timelineScrollRef.current.scrollWidth -\r\n          timelineScrollRef.current.clientWidth;\r\n        if (timelineScrollRef.current.scrollLeft < maxScroll) {\r\n          const speed =\r\n            ((relativeX - (rect.width - scrollZoneWidth)) / scrollZoneWidth) *\r\n            3;\r\n          startAutoScroll(\"right\", speed);\r\n        }\r\n      } else {\r\n        stopAutoScroll();\r\n      }\r\n    },\r\n    [startAutoScroll, stopAutoScroll]\r\n  );\r\n\r\n  // Функции зума\r\n  const zoomIn = () => {\r\n    setTimelineZoom((prev) => Math.min(20, prev * 1.5));\r\n  };\r\n\r\n  const zoomOut = () => {\r\n    setTimelineZoom((prev) => Math.max(0.1, prev / 1.5));\r\n  };\r\n\r\n  const resetZoom = () => {\r\n    setTimelineZoom(1);\r\n  };\r\n\r\n  // Функции для resize\r\n  const handleResizeStart = useCallback((e, item, handle) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setIsResizing(true);\r\n    setResizeHandle(handle);\r\n    setResizeItem(item);\r\n    setOriginalItemData({\r\n      startTime: item.startTime,\r\n      duration: item.duration,\r\n    });\r\n\r\n    // Предотвращаем drag\r\n    setIsTimelineDragging(false);\r\n    setDraggedTimelineItem(null);\r\n  }, []);\r\n\r\n  const handleResizeEnd = useCallback(() => {\r\n    setIsResizing(false);\r\n    setResizeHandle(null);\r\n    setResizeItem(null);\r\n    setOriginalItemData(null);\r\n    stopAutoScroll();\r\n  }, [stopAutoScroll]);\r\n\r\n  // Синхронизация скролла\r\n  const handleTrackAreaScroll = (e) => {\r\n    if (trackLabelsRef.current) {\r\n      trackLabelsRef.current.scrollTop = e.target.scrollTop;\r\n    }\r\n  };\r\n\r\n  const handleTrackLabelsScroll = (e) => {\r\n    if (timelineScrollRef.current) {\r\n      timelineScrollRef.current.scrollTop = e.target.scrollTop;\r\n    }\r\n  };\r\n\r\n  const getTimelineWidth = () => {\r\n    const baseWidth = videoDuration * 50 * timelineZoom;\r\n    return Math.max(baseWidth, 2000);\r\n  };\r\n\r\n  const getPixelsPerSecond = () => {\r\n    return 50 * timelineZoom;\r\n  };\r\n\r\n  // Эффекты для управления overlays\r\n  useEffect(() => {\r\n    if (isDraggingOverlay || isResizingOverlay) {\r\n      document.addEventListener(\"mousemove\", handleOverlayMouseMove);\r\n      document.addEventListener(\"mouseup\", handleOverlayMouseUp);\r\n      document.body.style.cursor = isDraggingOverlay ? \"grabbing\" : \"nw-resize\";\r\n\r\n      return () => {\r\n        document.removeEventListener(\"mousemove\", handleOverlayMouseMove);\r\n        document.removeEventListener(\"mouseup\", handleOverlayMouseUp);\r\n        document.body.style.cursor = \"\";\r\n      };\r\n    }\r\n  }, [\r\n    isDraggingOverlay,\r\n    isResizingOverlay,\r\n    handleOverlayMouseMove,\r\n    handleOverlayMouseUp,\r\n  ]);\r\n\r\n  // Обработка resize во время движения мыши\r\n  useEffect(() => {\r\n    const handleMouseMove = (e) => {\r\n      if (!isResizing || !resizeItem || !timelineScrollRef.current) return;\r\n\r\n      checkAutoScroll(e.clientX);\r\n\r\n      const rect = timelineScrollRef.current.getBoundingClientRect();\r\n      const mouseX =\r\n        e.clientX - rect.left + timelineScrollRef.current.scrollLeft;\r\n      const pixelsPerSecond = getPixelsPerSecond();\r\n      const newTime = mouseX / pixelsPerSecond;\r\n\r\n      setTimelineItems((prev) =>\r\n        prev.map((item) => {\r\n          if (item.id !== resizeItem.id) return item;\r\n\r\n          const minDuration = 0.1;\r\n\r\n          if (resizeHandle === \"left\") {\r\n            const rightEdge =\r\n              originalItemData.startTime + originalItemData.duration;\r\n            const newStartTime = Math.max(\r\n              0,\r\n              Math.min(rightEdge - minDuration, newTime)\r\n            );\r\n            const newDuration = rightEdge - newStartTime;\r\n\r\n            return {\r\n              ...item,\r\n              startTime: newStartTime,\r\n              duration: newDuration,\r\n            };\r\n          } else if (resizeHandle === \"right\") {\r\n            const leftEdge = originalItemData.startTime;\r\n            const newEndTime = Math.max(leftEdge + minDuration, newTime);\r\n            const newDuration = newEndTime - leftEdge;\r\n\r\n            return {\r\n              ...item,\r\n              duration: newDuration,\r\n            };\r\n          }\r\n\r\n          return item;\r\n        })\r\n      );\r\n    };\r\n\r\n    const handleMouseUp = () => {\r\n      if (isResizing) {\r\n        handleResizeEnd();\r\n      }\r\n    };\r\n\r\n    if (isResizing) {\r\n      document.addEventListener(\"mousemove\", handleMouseMove);\r\n      document.addEventListener(\"mouseup\", handleMouseUp);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener(\"mousemove\", handleMouseMove);\r\n      document.removeEventListener(\"mouseup\", handleMouseUp);\r\n    };\r\n  }, [\r\n    isResizing,\r\n    resizeItem,\r\n    resizeHandle,\r\n    originalItemData,\r\n    getPixelsPerSecond,\r\n    checkAutoScroll,\r\n    handleResizeEnd,\r\n  ]);\r\n\r\n  // Основные эффекты\r\n  useEffect(() => {\r\n    const content = getCurrentTimelineContent();\r\n\r\n    if (content.mainVideo && content.mainVideo.url !== currentVideoSource) {\r\n      setCurrentVideoSource(content.mainVideo.url);\r\n      if (videoRef.current) {\r\n        const relativeTime = currentTime - content.mainVideo.startTime;\r\n        videoRef.current.currentTime = Math.max(0, relativeTime);\r\n      }\r\n    } else if (\r\n      !content.mainVideo &&\r\n      content.overlays.find((o) => o.type === \"image\")\r\n    ) {\r\n      const firstImage = content.overlays.find((o) => o.type === \"image\");\r\n      setCurrentVideoSource(firstImage.url);\r\n    } else if (\r\n      !content.mainVideo &&\r\n      !content.overlays.find((o) => o.type === \"image\")\r\n    ) {\r\n      setCurrentVideoSource(null);\r\n    }\r\n\r\n    const currentAudioIds = new Set(content.audio.map((item) => item.id));\r\n\r\n    audioElementsRef.current.forEach((audioElement, id) => {\r\n      if (!currentAudioIds.has(id)) {\r\n        if (!audioElement.paused) {\r\n          audioElement.pause();\r\n        }\r\n      }\r\n    });\r\n\r\n    content.audio.forEach((audioItem) => {\r\n      const audioElement = createAudioElement(audioItem);\r\n      const relativeTime = currentTime - audioItem.startTime;\r\n\r\n      audioElement.volume = (audioItem.volume || 1) * volume;\r\n      audioElement.muted = isMuted;\r\n\r\n      if (isPlaying && relativeTime >= 0) {\r\n        syncAudioTime(audioItem, relativeTime);\r\n        if (audioElement.paused) {\r\n          audioElement.play().catch(console.error);\r\n        }\r\n      } else {\r\n        if (!audioElement.paused) {\r\n          audioElement.pause();\r\n        }\r\n      }\r\n    });\r\n  }, [\r\n    currentTime,\r\n    timelineItems,\r\n    getCurrentTimelineContent,\r\n    isPlaying,\r\n    volume,\r\n    isMuted,\r\n    createAudioElement,\r\n    syncAudioTime,\r\n    currentVideoSource,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (isPlaying) {\r\n      intervalRef.current = setInterval(() => {\r\n        setCurrentTime((prev) => {\r\n          const newTime = prev + 0.1;\r\n          if (newTime >= videoDuration) {\r\n            setIsPlaying(false);\r\n            return videoDuration;\r\n          }\r\n          return newTime;\r\n        });\r\n      }, 100);\r\n    } else {\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n      }\r\n    }\r\n\r\n    return () => {\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n      }\r\n    };\r\n  }, [isPlaying, videoDuration]);\r\n\r\n  useEffect(() => {\r\n    if (videoRef.current && currentVideoSource) {\r\n      const content = getCurrentTimelineContent();\r\n      if (content.mainVideo) {\r\n        const relativeTime = currentTime - content.mainVideo.startTime;\r\n        const timeDiff = Math.abs(videoRef.current.currentTime - relativeTime);\r\n\r\n        if (timeDiff > 0.5) {\r\n          videoRef.current.currentTime = Math.max(0, relativeTime);\r\n        }\r\n\r\n        if (isPlaying && videoRef.current.paused) {\r\n          videoRef.current.play().catch(console.error);\r\n        } else if (!isPlaying && !videoRef.current.paused) {\r\n          videoRef.current.pause();\r\n        }\r\n      }\r\n    }\r\n  }, [currentTime, currentVideoSource, getCurrentTimelineContent, isPlaying]);\r\n\r\n  useEffect(() => {\r\n    const currentAudioIds = new Set(\r\n      timelineItems\r\n        .filter((item) => item.type === \"audio\")\r\n        .map((item) => item.id)\r\n    );\r\n\r\n    audioElementsRef.current.forEach((audioElement, id) => {\r\n      if (!currentAudioIds.has(id)) {\r\n        audioElement.pause();\r\n        audioElement.src = \"\";\r\n        audioElementsRef.current.delete(id);\r\n      }\r\n    });\r\n  }, [timelineItems]);\r\n\r\n  // Очистка при размонтировании\r\n  useEffect(() => {\r\n    return () => {\r\n      stopAutoScroll();\r\n    };\r\n  }, [stopAutoScroll]);\r\n\r\n  // Обработка клавиатурных шорткатов\r\n  useEffect(() => {\r\n    const handleKeyDown = (e) => {\r\n      if (e.target.tagName === \"INPUT\" || e.target.tagName === \"TEXTAREA\") {\r\n        return;\r\n      }\r\n\r\n      if (e.key === \"Delete\" || e.key === \"Backspace\") {\r\n        e.preventDefault();\r\n        deleteSelectedItem();\r\n      }\r\n\r\n      if (e.ctrlKey && e.key === \"b\") {\r\n        e.preventDefault();\r\n        splitTimelineItem();\r\n      }\r\n\r\n      if (e.ctrlKey && e.key === \"c\") {\r\n        e.preventDefault();\r\n        copyTimelineItem();\r\n      }\r\n\r\n      if (e.ctrlKey && e.key === \"v\") {\r\n        e.preventDefault();\r\n        pasteTimelineItem();\r\n      }\r\n\r\n      if (e.key === \" \" || e.code === \"Space\") {\r\n        e.preventDefault();\r\n        setIsPlaying((prev) => !prev);\r\n      }\r\n\r\n      if (e.key === \"ArrowLeft\") {\r\n        e.preventDefault();\r\n        const step = e.ctrlKey ? 5 : e.shiftKey ? 1 : 0.1;\r\n        seekTo(Math.max(0, currentTime - step));\r\n      }\r\n      if (e.key === \"ArrowRight\") {\r\n        e.preventDefault();\r\n        const step = e.ctrlKey ? 5 : e.shiftKey ? 1 : 0.1;\r\n        seekTo(Math.min(videoDuration, currentTime + step));\r\n      }\r\n\r\n      if (e.key === \"=\" || e.key === \"+\") {\r\n        e.preventDefault();\r\n        zoomIn();\r\n      }\r\n      if (e.key === \"-\") {\r\n        e.preventDefault();\r\n        zoomOut();\r\n      }\r\n      if (e.key === \"0\") {\r\n        e.preventDefault();\r\n        resetZoom();\r\n      }\r\n\r\n      if (e.key === \"?\" || (e.shiftKey && e.key === \"/\")) {\r\n        e.preventDefault();\r\n        setShowHelp(true);\r\n      }\r\n\r\n      if (e.key === \"Escape\") {\r\n        e.preventDefault();\r\n        if (showHelp) {\r\n          setShowHelp(false);\r\n        } else if (selectedOverlay) {\r\n          setSelectedOverlay(null);\r\n        }\r\n      }\r\n    };\r\n\r\n    window.addEventListener(\"keydown\", handleKeyDown);\r\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\r\n  }, [\r\n    selectedTimelineItem,\r\n    copiedItem,\r\n    currentTime,\r\n    videoDuration,\r\n    showHelp,\r\n    selectedOverlay,\r\n    deleteSelectedItem,\r\n    splitTimelineItem,\r\n    copyTimelineItem,\r\n    pasteTimelineItem,\r\n  ]);\r\n\r\n  // Обработка колесика мыши для зума\r\n  useEffect(() => {\r\n    const handleWheel = (e) => {\r\n      if (e.ctrlKey && timelineRef.current?.contains(e.target)) {\r\n        e.preventDefault();\r\n        if (e.deltaY < 0) {\r\n          zoomIn();\r\n        } else {\r\n          zoomOut();\r\n        }\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"wheel\", handleWheel, { passive: false });\r\n    return () => document.removeEventListener(\"wheel\", handleWheel);\r\n  }, []);\r\n\r\n  const addToTimeline = (mediaItem, startTime = null, targetTrackId = null) => {\r\n    let trackType, trackId;\r\n\r\n    if (mediaItem.type === \"video\") {\r\n      trackType =\r\n        targetTrackId && targetTrackId.startsWith(\"overlay\")\r\n          ? \"overlay\"\r\n          : \"main\";\r\n      trackId = targetTrackId || \"main-video\";\r\n    } else if (mediaItem.type === \"image\") {\r\n      trackType = \"overlay\";\r\n      trackId = targetTrackId || \"overlay-1\";\r\n    } else if (mediaItem.type === \"audio\") {\r\n      trackType = \"audio\";\r\n      trackId = targetTrackId || \"audio-1\";\r\n    }\r\n\r\n    const duration =\r\n      mediaItem.duration || (mediaItem.type === \"image\" ? 5 : 10);\r\n\r\n    const finalStartTime =\r\n      startTime !== null\r\n        ? startTime\r\n        : findNextAvailablePosition(trackId, duration);\r\n\r\n    const newTimelineItem = {\r\n      id: Date.now() + Math.random(),\r\n      mediaId: mediaItem.id,\r\n      type: mediaItem.type,\r\n      name: mediaItem.name,\r\n      url: mediaItem.url,\r\n      startTime: finalStartTime,\r\n      duration: duration,\r\n      trackId: trackId,\r\n      trackType: trackType,\r\n      volume: 1,\r\n      opacity: 1,\r\n    };\r\n\r\n    setTimelineItems((prev) => [...prev, newTimelineItem]);\r\n\r\n    const newEndTime = newTimelineItem.startTime + newTimelineItem.duration;\r\n    if (newEndTime > videoDuration) {\r\n      setVideoDuration(newEndTime + 10);\r\n    }\r\n  };\r\n\r\n  const addOverlayTrack = () => {\r\n    const newTrackId = `overlay-${Date.now()}`;\r\n    setTracks((prev) => ({\r\n      ...prev,\r\n      overlays: [\r\n        ...prev.overlays,\r\n        {\r\n          id: newTrackId,\r\n          name: `Overlay ${prev.overlays.length + 1}`,\r\n          type: \"overlay\",\r\n        },\r\n      ],\r\n    }));\r\n  };\r\n\r\n  const addAudioTrack = () => {\r\n    const newTrackId = `audio-${Date.now()}`;\r\n    setTracks((prev) => ({\r\n      ...prev,\r\n      audio: [\r\n        ...prev.audio,\r\n        {\r\n          id: newTrackId,\r\n          name: `Audio ${prev.audio.length + 1}`,\r\n          type: \"audio\",\r\n        },\r\n      ],\r\n    }));\r\n  };\r\n\r\n  const handleTimelineClick = (e) => {\r\n    if (isDragging || isTimelineDragging || isResizing) return;\r\n\r\n    const rect = timelineScrollRef.current.getBoundingClientRect();\r\n    const clickX = e.clientX - rect.left + timelineScrollRef.current.scrollLeft;\r\n    const pixelsPerSecond = getPixelsPerSecond();\r\n    const clickTime = clickX / pixelsPerSecond;\r\n    seekTo(clickTime);\r\n  };\r\n\r\n  const handleTimelineItemDragStart = (e, timelineItem) => {\r\n    if (isResizing) {\r\n      e.preventDefault();\r\n      return;\r\n    }\r\n\r\n    e.stopPropagation();\r\n    setDraggedTimelineItem(timelineItem);\r\n    setIsTimelineDragging(true);\r\n\r\n    const rect = timelineScrollRef.current.getBoundingClientRect();\r\n    const itemRect = e.target.getBoundingClientRect();\r\n    setDragOffset(\r\n      e.clientX - itemRect.left + timelineScrollRef.current.scrollLeft\r\n    );\r\n\r\n    e.dataTransfer.effectAllowed = \"move\";\r\n    e.dataTransfer.setData(\"text/plain\", \"\");\r\n  };\r\n\r\n  const handleTimelineItemDragEnd = () => {\r\n    setDraggedTimelineItem(null);\r\n    setDropPreview(null);\r\n    setIsTimelineDragging(false);\r\n    setDragOffset(0);\r\n    stopAutoScroll();\r\n  };\r\n\r\n  const handleDragOver = (e) => {\r\n    if (!draggedItem && !draggedTimelineItem) return;\r\n\r\n    e.preventDefault();\r\n    e.dataTransfer.dropEffect = draggedItem ? \"copy\" : \"move\";\r\n\r\n    if (draggedTimelineItem || isResizing) {\r\n      checkAutoScroll(e.clientX);\r\n    }\r\n\r\n    const timelineRect = timelineScrollRef.current.getBoundingClientRect();\r\n    const dragX =\r\n      e.clientX -\r\n      timelineRect.left +\r\n      timelineScrollRef.current.scrollLeft -\r\n      (draggedTimelineItem ? dragOffset : 0);\r\n    const pixelsPerSecond = getPixelsPerSecond();\r\n    const dropTime = Math.max(0, dragX / pixelsPerSecond);\r\n\r\n    const dragY =\r\n      e.clientY - timelineRect.top + timelineScrollRef.current.scrollTop;\r\n    const trackHeight = 60;\r\n    const timeRulerHeight = 48;\r\n\r\n    const relativeY = dragY - timeRulerHeight;\r\n    const trackIndex = Math.floor(relativeY / trackHeight);\r\n\r\n    const allTracks = [...tracks.overlays, ...tracks.main, ...tracks.audio];\r\n    const targetTrack = allTracks[trackIndex];\r\n\r\n    if (draggedItem && targetTrack) {\r\n      // Новый элемент из библиотеки\r\n      const duration =\r\n        draggedItem.duration || (draggedItem.type === \"image\" ? 5 : 10);\r\n      const insertResult = insertWithRipple(targetTrack.id, dropTime, duration);\r\n\r\n      setDropPreview({\r\n        time: insertResult.time,\r\n        duration: duration,\r\n        trackId: targetTrack.id,\r\n        trackType: targetTrack.type,\r\n        isValid: true,\r\n        shouldRipple: insertResult.shouldRipple,\r\n        affectedItems: insertResult.affectedItems || [],\r\n      });\r\n    } else if (draggedTimelineItem && targetTrack) {\r\n      // Существующий элемент\r\n      const insertResult = insertWithRipple(\r\n        targetTrack.id,\r\n        dropTime,\r\n        draggedTimelineItem.duration,\r\n        draggedTimelineItem.id\r\n      );\r\n\r\n      setDropPreview({\r\n        time: insertResult.time,\r\n        duration: draggedTimelineItem.duration,\r\n        trackId: targetTrack.id,\r\n        trackType: targetTrack.type,\r\n        isValid: true,\r\n        shouldRipple: insertResult.shouldRipple,\r\n        affectedItems: insertResult.affectedItems || [],\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleDrop = (e) => {\r\n    if ((!draggedItem && !draggedTimelineItem) || !dropPreview) return;\r\n\r\n    e.preventDefault();\r\n    stopAutoScroll();\r\n\r\n    console.log(\"Dropping with ripple:\", {\r\n      dropPreview,\r\n      shouldRipple: dropPreview.shouldRipple,\r\n      affectedItems: dropPreview.affectedItems?.length || 0,\r\n    });\r\n\r\n    if (dropPreview.isValid) {\r\n      if (draggedItem) {\r\n        // Новый элемент из библиотеки\r\n        if (dropPreview.shouldRipple && dropPreview.affectedItems?.length > 0) {\r\n          // Сначала сдвигаем существующие блоки\r\n          applyRippleEffect(dropPreview.affectedItems, dropPreview.duration);\r\n        }\r\n\r\n        // Добавляем новый элемент\r\n        addToTimeline(draggedItem, dropPreview.time, dropPreview.trackId);\r\n\r\n        console.log(\"Added with ripple effect:\", dropPreview.shouldRipple);\r\n      } else if (draggedTimelineItem) {\r\n        // Перемещение существующего элемента\r\n        if (dropPreview.shouldRipple && dropPreview.affectedItems?.length > 0) {\r\n          // Сначала сдвигаем блоки, которые нужно освободить место\r\n          applyRippleEffect(\r\n            dropPreview.affectedItems,\r\n            draggedTimelineItem.duration\r\n          );\r\n        }\r\n\r\n        // Перемещаем элемент\r\n        setTimelineItems((prev) =>\r\n          prev.map((item) =>\r\n            item.id === draggedTimelineItem.id\r\n              ? {\r\n                  ...item,\r\n                  startTime: dropPreview.time,\r\n                  trackId: dropPreview.trackId,\r\n                  trackType: dropPreview.trackType,\r\n                }\r\n              : item\r\n          )\r\n        );\r\n\r\n        console.log(\"Moved with ripple effect:\", dropPreview.shouldRipple);\r\n\r\n        const newEndTime = dropPreview.time + draggedTimelineItem.duration;\r\n        if (newEndTime > videoDuration) {\r\n          setVideoDuration(newEndTime + 10);\r\n        }\r\n      }\r\n    }\r\n\r\n    setDropPreview(null);\r\n    setDraggedItem(null);\r\n    setDraggedTimelineItem(null);\r\n    setIsDragging(false);\r\n    setIsTimelineDragging(false);\r\n  };\r\n\r\n  const handleDragLeave = (e) => {\r\n    if (!timelineRef.current?.contains(e.relatedTarget)) {\r\n      setDropPreview(null);\r\n      stopAutoScroll();\r\n    }\r\n  };\r\n\r\n  const getTimelineItemStyle = (item) => {\r\n    const allTracks = [...tracks.overlays, ...tracks.main, ...tracks.audio];\r\n    const trackIndex = allTracks.findIndex(\r\n      (track) => track.id === item.trackId\r\n    );\r\n    const pixelsPerSecond = getPixelsPerSecond();\r\n\r\n    return {\r\n      left: `${item.startTime * pixelsPerSecond}px`,\r\n      width: `${item.duration * pixelsPerSecond}px`,\r\n      top: `${trackIndex * 60 + 10}px`,\r\n    };\r\n  };\r\n\r\n  const getDropPreviewStyle = () => {\r\n    if (!dropPreview) return {};\r\n\r\n    const allTracks = [...tracks.overlays, ...tracks.main, ...tracks.audio];\r\n    const trackIndex = allTracks.findIndex(\r\n      (track) => track.id === dropPreview.trackId\r\n    );\r\n    const pixelsPerSecond = getPixelsPerSecond();\r\n\r\n    return {\r\n      left: `${dropPreview.time * pixelsPerSecond}px`,\r\n      width: `${dropPreview.duration * pixelsPerSecond}px`,\r\n      top: `${trackIndex * 60 + 10}px`,\r\n    };\r\n  };\r\n\r\n  const getTrackColor = (trackType) => {\r\n    switch (trackType) {\r\n      case \"overlay\":\r\n        return \"bg-purple-500 border-purple-400\";\r\n      case \"main\":\r\n        return \"bg-blue-500 border-blue-400\";\r\n      case \"audio\":\r\n        return \"bg-green-500 border-green-400\";\r\n      default:\r\n        return \"bg-gray-500 border-gray-400\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen w-full gap-4 p-4 bg-gray-100 overflow-hidden\">\r\n      {/* Media Library Component */}\r\n      <MediaLibrary\r\n        mediaLibrary={mediaLibrary}\r\n        setMediaLibrary={setMediaLibrary}\r\n        activeTab={activeTab}\r\n        setActiveTab={setActiveTab}\r\n        draggedItem={draggedItem}\r\n        setDraggedItem={setDraggedItem}\r\n        isDragging={isDragging}\r\n        setIsDragging={setIsDragging}\r\n        addToTimeline={addToTimeline}\r\n        formatTime={formatTime}\r\n      />\r\n\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 flex flex-col gap-4 min-w-0 overflow-hidden\">\r\n        {/* Video Preview */}\r\n        <div\r\n          ref={videoContainerRef}\r\n          className=\"flex-1 bg-black rounded-2xl relative overflow-hidden shadow-sm min-h-0\"\r\n          title=\"Video Preview - Click overlays to select, drag to move, Ctrl+scroll to resize, use opacity slider\"\r\n        >\r\n          {currentVideoSource ? (\r\n            <div\r\n              className=\"relative w-full h-full\"\r\n              onClick={(e) => {\r\n                // Снимаем выделение overlay при клике на пустое место\r\n                if (e.target === e.currentTarget) {\r\n                  setSelectedOverlay(null);\r\n                }\r\n              }}\r\n            >\r\n              {getCurrentTimelineContent().mainVideo ? (\r\n                <video\r\n                  ref={videoRef}\r\n                  src={currentVideoSource}\r\n                  className=\"w-full h-full object-contain rounded-2xl\"\r\n                  muted={isMuted}\r\n                />\r\n              ) : (\r\n                <img\r\n                  src={currentVideoSource}\r\n                  alt=\"Timeline content\"\r\n                  className=\"w-full h-full object-contain rounded-2xl\"\r\n                />\r\n              )}\r\n\r\n              {getCurrentTimelineContent().overlays.map((item, index) => {\r\n                const transform = getOverlayTransform(item.id);\r\n                const isSelected = selectedOverlay?.id === item.id;\r\n                const isDraggingThis = isDraggingOverlay && isSelected;\r\n                const isResizingThis = isResizingOverlay && isSelected;\r\n\r\n                return (\r\n                  <div\r\n                    key={item.id}\r\n                    className={`absolute select-none ${\r\n                      isSelected\r\n                        ? \"ring-2 ring-blue-400 ring-opacity-75 shadow-xl\"\r\n                        : \"hover:ring-2 hover:ring-blue-300 hover:ring-opacity-50\"\r\n                    } ${\r\n                      isDraggingThis\r\n                        ? \"cursor-grabbing z-50\"\r\n                        : isResizingThis\r\n                        ? \"cursor-nw-resize\"\r\n                        : \"cursor-grab hover:shadow-lg\"\r\n                    }`}\r\n                    style={{\r\n                      left: `${200 + transform.x}px`,\r\n                      top: `${50 + index * 120 + transform.y}px`,\r\n                      width: `${128 * transform.scale}px`,\r\n                      height: `${96 * transform.scale}px`,\r\n                      opacity: transform.opacity,\r\n                      zIndex: isSelected ? 1000 : 10 + index,\r\n                      transform: isDraggingThis ? \"scale(1.02)\" : \"scale(1)\",\r\n                      transition:\r\n                        isDraggingThis || isResizingThis\r\n                          ? \"none\"\r\n                          : \"transform 0.2s ease, box-shadow 0.2s ease\",\r\n                    }}\r\n                    onMouseDown={(e) =>\r\n                      handleOverlayMouseDown(e, { ...item, index })\r\n                    }\r\n                    onWheel={(e) => handleOverlayWheel(e, item.id)}\r\n                  >\r\n                    <div\r\n                      className={`relative w-full h-full border-2 rounded-lg overflow-hidden shadow-lg group ${\r\n                        isSelected\r\n                          ? \"border-blue-400\"\r\n                          : \"border-white hover:border-blue-300\"\r\n                      }`}\r\n                      style={{\r\n                        transition:\r\n                          isDraggingThis || isResizingThis\r\n                            ? \"none\"\r\n                            : \"border-color 0.2s ease\",\r\n                      }}\r\n                    >\r\n                      {item.type === \"video\" ? (\r\n                        <video\r\n                          src={item.url}\r\n                          className=\"w-full h-full object-cover pointer-events-none\"\r\n                          muted\r\n                        />\r\n                      ) : (\r\n                        <img\r\n                          src={item.url}\r\n                          alt={item.name}\r\n                          className=\"w-full h-full object-cover pointer-events-none\"\r\n                          draggable={false}\r\n                        />\r\n                      )}\r\n\r\n                      {/* Overlay hover effect */}\r\n                      <div\r\n                        className={`absolute inset-0 bg-blue-500 bg-opacity-0 hover:bg-opacity-10 ${\r\n                          isSelected ? \"bg-opacity-10\" : \"\"\r\n                        }`}\r\n                        style={{\r\n                          transition:\r\n                            isDraggingThis || isResizingThis\r\n                              ? \"none\"\r\n                              : \"background-color 0.2s ease\",\r\n                        }}\r\n                      ></div>\r\n\r\n                      {isSelected && (\r\n                        <>\r\n                          {/* Resize handles - с визуальной обратной связью */}\r\n                          <div\r\n                            className={`resize-handle absolute -top-2 -left-2 w-4 h-4 bg-blue-500 rounded-full cursor-nw-resize opacity-90 hover:opacity-100 hover:scale-125 shadow-md border-2 border-white ${\r\n                              isResizingThis && resizeOverlayHandle === \"nw\"\r\n                                ? \"scale-150 bg-red-500\"\r\n                                : \"\"\r\n                            }`}\r\n                            onMouseDown={(e) =>\r\n                              handleOverlayResizeStart(e, item, \"nw\")\r\n                            }\r\n                            style={{\r\n                              transition:\r\n                                isDraggingThis || isResizingThis\r\n                                  ? \"none\"\r\n                                  : \"all 0.2s ease\",\r\n                            }}\r\n                          ></div>\r\n                          <div\r\n                            className={`resize-handle absolute -top-2 -right-2 w-4 h-4 bg-blue-500 rounded-full cursor-ne-resize opacity-90 hover:opacity-100 hover:scale-125 shadow-md border-2 border-white ${\r\n                              isResizingThis && resizeOverlayHandle === \"ne\"\r\n                                ? \"scale-150 bg-red-500\"\r\n                                : \"\"\r\n                            }`}\r\n                            onMouseDown={(e) =>\r\n                              handleOverlayResizeStart(e, item, \"ne\")\r\n                            }\r\n                            style={{\r\n                              transition:\r\n                                isDraggingThis || isResizingThis\r\n                                  ? \"none\"\r\n                                  : \"all 0.2s ease\",\r\n                            }}\r\n                          ></div>\r\n                          <div\r\n                            className={`resize-handle absolute -bottom-2 -left-2 w-4 h-4 bg-blue-500 rounded-full cursor-sw-resize opacity-90 hover:opacity-100 hover:scale-125 shadow-md border-2 border-white ${\r\n                              isResizingThis && resizeOverlayHandle === \"sw\"\r\n                                ? \"scale-150 bg-red-500\"\r\n                                : \"\"\r\n                            }`}\r\n                            onMouseDown={(e) =>\r\n                              handleOverlayResizeStart(e, item, \"sw\")\r\n                            }\r\n                            style={{\r\n                              transition:\r\n                                isDraggingThis || isResizingThis\r\n                                  ? \"none\"\r\n                                  : \"all 0.2s ease\",\r\n                            }}\r\n                          ></div>\r\n                          <div\r\n                            className={`resize-handle absolute -bottom-2 -right-2 w-4 h-4 bg-blue-500 rounded-full cursor-se-resize opacity-90 hover:opacity-100 hover:scale-125 shadow-md border-2 border-white ${\r\n                              isResizingThis && resizeOverlayHandle === \"se\"\r\n                                ? \"scale-150 bg-red-500\"\r\n                                : \"\"\r\n                            }`}\r\n                            onMouseDown={(e) =>\r\n                              handleOverlayResizeStart(e, item, \"se\")\r\n                            }\r\n                            style={{\r\n                              transition:\r\n                                isDraggingThis || isResizingThis\r\n                                  ? \"none\"\r\n                                  : \"all 0.2s ease\",\r\n                            }}\r\n                          ></div>\r\n\r\n                          {/* Центральная точка для перетаскивания */}\r\n                          <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-2 h-2 bg-blue-500 rounded-full opacity-60 pointer-events-none\"></div>\r\n\r\n                          {/* Opacity slider - улучшенный */}\r\n                          <div className=\"absolute -bottom-12 left-0 right-0 bg-black/80 backdrop-blur-sm rounded-lg px-3 py-2 border border-white/20 shadow-lg\">\r\n                            <div className=\"flex items-center space-x-2\">\r\n                              <span className=\"text-white text-xs font-medium min-w-fit\">\r\n                                Opacity:\r\n                              </span>\r\n                              <input\r\n                                type=\"range\"\r\n                                min=\"0.1\"\r\n                                max=\"1\"\r\n                                step=\"0.05\"\r\n                                value={transform.opacity}\r\n                                onChange={(e) =>\r\n                                  updateOverlayTransform(item.id, {\r\n                                    opacity: parseFloat(e.target.value),\r\n                                  })\r\n                                }\r\n                                className=\"flex-1 h-2 accent-blue-500 cursor-pointer\"\r\n                                onMouseDown={(e) => e.stopPropagation()}\r\n                              />\r\n                              <span className=\"text-white text-xs min-w-8 text-right font-mono\">\r\n                                {Math.round(transform.opacity * 100)}%\r\n                              </span>\r\n                            </div>\r\n                          </div>\r\n                        </>\r\n                      )}\r\n\r\n                      {/* Layer info - улучшенная */}\r\n                      <div\r\n                        className={`absolute top-1 left-1 bg-black/70 text-white text-xs px-2 py-1 rounded pointer-events-none ${\r\n                          isSelected\r\n                            ? \"opacity-100\"\r\n                            : \"opacity-0 group-hover:opacity-100\"\r\n                        }`}\r\n                        style={{\r\n                          transition:\r\n                            isDraggingThis || isResizingThis\r\n                              ? \"none\"\r\n                              : \"opacity 0.2s ease\",\r\n                        }}\r\n                      >\r\n                        {item.name} • {Math.round(transform.scale * 100)}% •{\" \"}\r\n                        {Math.round(transform.opacity * 100)}%\r\n                      </div>\r\n\r\n                      {/* Индикатор выделения */}\r\n                      {isSelected && (\r\n                        <div className=\"absolute -top-0.5 -left-0.5 -right-0.5 -bottom-0.5 border-2 border-blue-400 rounded-lg pointer-events-none animate-pulse\"></div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          ) : (\r\n            <div className=\"w-full h-full flex items-center justify-center text-white\">\r\n              <div className=\"text-center\">\r\n                <div className=\"w-20 h-20 bg-gray-800 rounded-2xl flex items-center justify-center mx-auto mb-4\">\r\n                  <Film size={40} className=\"opacity-50\" />\r\n                </div>\r\n                <p className=\"text-xl opacity-75 font-medium\">\r\n                  No content at current time\r\n                </p>\r\n                <p className=\"text-sm opacity-50 mb-4\">\r\n                  Drag media to timeline tracks to start editing\r\n                </p>\r\n                <div className=\"text-xs opacity-40 space-y-1\">\r\n                  <p>💡 Overlays are interactive • Ripple mode enabled</p>\r\n                  <p>\r\n                    Press{\" \"}\r\n                    <kbd className=\"px-1 py-0.5 bg-gray-700 rounded text-xs\">\r\n                      ?\r\n                    </kbd>{\" \"}\r\n                    for help & shortcuts\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"absolute bottom-6 left-1/2 transform -translate-x-1/2 bg-black/60 backdrop-blur-md rounded-2xl p-4\">\r\n            <div className=\"flex items-center space-x-6\">\r\n              <button\r\n                onClick={() => seekTo(Math.max(0, currentTime - 10))}\r\n                className=\"text-white hover:text-blue-400 transition-colors p-1 rounded-lg hover:bg-white/10\"\r\n                title=\"Skip back 10 seconds\"\r\n              >\r\n                <SkipBack size={20} />\r\n              </button>\r\n              <button\r\n                onClick={handlePlayPause}\r\n                className=\"w-12 h-12 bg-white/20 hover:bg-white/30 rounded-2xl flex items-center justify-center text-white transition-all hover:scale-105\"\r\n                title=\"Play/Pause (Space)\"\r\n              >\r\n                {isPlaying ? <Pause size={24} /> : <Play size={24} />}\r\n              </button>\r\n              <button\r\n                onClick={() =>\r\n                  seekTo(Math.min(videoDuration, currentTime + 10))\r\n                }\r\n                className=\"text-white hover:text-blue-400 transition-colors p-1 rounded-lg hover:bg-white/10\"\r\n                title=\"Skip forward 10 seconds\"\r\n              >\r\n                <SkipForward size={20} />\r\n              </button>\r\n              <div className=\"flex items-center space-x-3\">\r\n                <button\r\n                  onClick={() => setIsMuted(!isMuted)}\r\n                  className=\"text-white hover:text-blue-400 transition-colors p-1 rounded-lg hover:bg-white/10\"\r\n                  title=\"Toggle mute\"\r\n                >\r\n                  {isMuted ? <VolumeX size={20} /> : <Volume2 size={20} />}\r\n                </button>\r\n                <input\r\n                  type=\"range\"\r\n                  min=\"0\"\r\n                  max=\"1\"\r\n                  step=\"0.1\"\r\n                  value={volume}\r\n                  onChange={(e) => setVolume(parseFloat(e.target.value))}\r\n                  className=\"w-24 accent-blue-500\"\r\n                  title=\"Volume control\"\r\n                />\r\n              </div>\r\n              <span\r\n                className=\"text-white text-sm font-medium min-w-0\"\r\n                title=\"Current time / Total duration\"\r\n              >\r\n                {formatTime(currentTime)} / {formatTime(videoDuration)}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Timeline */}\r\n        <div\r\n          className={`h-80 bg-white rounded-2xl shadow-sm border-2 transition-all duration-200 overflow-hidden flex flex-col flex-shrink-0 ${\r\n            isDragging || isTimelineDragging || isResizing\r\n              ? \"border-blue-400 bg-blue-50/20\"\r\n              : \"border-gray-200\"\r\n          }`}\r\n        >\r\n          <div className=\"bg-gray-50 p-4 border-b border-gray-200 space-y-3\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h4 className=\"text-gray-800 font-semibold flex items-center space-x-2\">\r\n                <Film size={18} />\r\n                <span>Timeline Pro</span>\r\n                {isDragging && dropPreview && (\r\n                  <span className=\"text-green-600\">\r\n                    - Adding \"{draggedItem?.name}\"{\" \"}\r\n                    {dropPreview.shouldRipple ? \"⚡ ripple\" : \"📍 exact\"}\r\n                  </span>\r\n                )}\r\n                {isTimelineDragging && dropPreview && (\r\n                  <span className=\"text-blue-600\">\r\n                    - Moving \"{draggedTimelineItem?.name}\"{\" \"}\r\n                    {dropPreview.shouldRipple ? \"⚡ push blocks\" : \"📍 exact\"}\r\n                  </span>\r\n                )}\r\n                {isResizing && resizeItem && (\r\n                  <span className=\"text-orange-600\">\r\n                    - Trimming \"{resizeItem.name}\" ({resizeHandle} edge)\r\n                  </span>\r\n                )}\r\n                {copiedItem && (\r\n                  <span className=\"text-blue-600 text-sm\">\r\n                    - \"{copiedItem.name}\" copied (Ctrl+V to paste)\r\n                  </span>\r\n                )}\r\n              </h4>\r\n\r\n              <div className=\"flex items-center space-x-3\">\r\n                <button\r\n                  onClick={() => setShowHelp(true)}\r\n                  className=\"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-xl transition-all duration-200\"\r\n                  title=\"📖 Help & Shortcuts Guide - Learn all controls and hotkeys (Press ? key)\"\r\n                >\r\n                  <HelpCircle size={18} />\r\n                </button>\r\n\r\n                <div className=\"flex items-center space-x-2 bg-white rounded-xl p-2 border border-gray-200\">\r\n                  <button\r\n                    onClick={zoomOut}\r\n                    className=\"p-1 text-gray-600 hover:text-blue-600 transition-colors\"\r\n                    title=\"Zoom Out (-)\"\r\n                  >\r\n                    <ZoomOut size={16} />\r\n                  </button>\r\n                  <span className=\"text-xs text-gray-500 min-w-12 text-center\">\r\n                    {(timelineZoom * 100).toFixed(0)}%\r\n                  </span>\r\n                  <button\r\n                    onClick={zoomIn}\r\n                    className=\"p-1 text-gray-600 hover:text-blue-600 transition-colors\"\r\n                    title=\"Zoom In (+), or Ctrl+Wheel\"\r\n                  >\r\n                    <ZoomIn size={16} />\r\n                  </button>\r\n                  <button\r\n                    onClick={resetZoom}\r\n                    className=\"p-1 text-gray-600 hover:text-blue-600 transition-colors\"\r\n                    title=\"Reset Zoom (0)\"\r\n                  >\r\n                    <RotateCcw size={16} />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center space-x-6\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <button\r\n                    onClick={addOverlayTrack}\r\n                    className=\"p-2 text-purple-600 hover:text-purple-800 hover:bg-purple-50 rounded-xl transition-all duration-200\"\r\n                    title=\"Add Overlay Track\"\r\n                  >\r\n                    <Plus size={16} />\r\n                  </button>\r\n                  <button\r\n                    onClick={addAudioTrack}\r\n                    className=\"p-2 text-green-600 hover:text-green-800 hover:bg-green-50 rounded-xl transition-all duration-200\"\r\n                    title=\"Add Audio Track\"\r\n                  >\r\n                    <Music size={16} />\r\n                  </button>\r\n                  <button\r\n                    onClick={splitTimelineItem}\r\n                    disabled={!selectedTimelineItem}\r\n                    className={`p-2 rounded-xl transition-all duration-200 ${\r\n                      selectedTimelineItem\r\n                        ? \"text-red-600 hover:text-red-800 hover:bg-red-50\"\r\n                        : \"text-gray-400 cursor-not-allowed\"\r\n                    }`}\r\n                    title=\"Split Selected Item (Ctrl+B) - Cuts item at current time\"\r\n                  >\r\n                    <Scissors size={16} />\r\n                  </button>\r\n                  <button\r\n                    onClick={copyTimelineItem}\r\n                    disabled={!selectedTimelineItem}\r\n                    className={`p-2 rounded-xl transition-all duration-200 ${\r\n                      selectedTimelineItem\r\n                        ? \"text-blue-600 hover:text-blue-800 hover:bg-blue-50\"\r\n                        : \"text-gray-400 cursor-not-allowed\"\r\n                    }`}\r\n                    title=\"Copy Selected Item (Ctrl+C) - Copy item to clipboard\"\r\n                  >\r\n                    <Copy size={16} />\r\n                  </button>\r\n                  <button\r\n                    onClick={deleteSelectedItem}\r\n                    disabled={!selectedTimelineItem}\r\n                    className={`p-2 rounded-xl transition-all duration-200 ${\r\n                      selectedTimelineItem\r\n                        ? \"text-red-600 hover:text-red-800 hover:bg-red-50\"\r\n                        : \"text-gray-400 cursor-not-allowed\"\r\n                    }`}\r\n                    title=\"Delete Selected Item (Del/Backspace) - Remove from timeline\"\r\n                  >\r\n                    <Trash2 size={16} />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex-1 flex min-h-0\">\r\n            <div className=\"w-48 bg-gray-50 border-r border-gray-200 flex-shrink-0 flex flex-col\">\r\n              <div className=\"h-12 border-b border-gray-200 flex-shrink-0\"></div>\r\n\r\n              <div\r\n                ref={trackLabelsRef}\r\n                className=\"flex-1 overflow-y-auto overflow-x-hidden\"\r\n                onScroll={handleTrackLabelsScroll}\r\n              >\r\n                {tracks.overlays.map((track) => (\r\n                  <div\r\n                    key={track.id}\r\n                    className=\"h-15 flex items-center px-4 border-b border-gray-100 text-sm font-medium text-purple-700 bg-purple-50 flex-shrink-0\"\r\n                    style={{ height: \"60px\" }}\r\n                  >\r\n                    <Layers size={16} className=\"mr-2\" />\r\n                    {track.name}\r\n                  </div>\r\n                ))}\r\n\r\n                {tracks.main.map((track) => (\r\n                  <div\r\n                    key={track.id}\r\n                    className=\"h-15 flex items-center px-4 border-b border-gray-100 text-sm font-medium text-blue-700 bg-blue-50 flex-shrink-0\"\r\n                    style={{ height: \"60px\" }}\r\n                  >\r\n                    <Video size={16} className=\"mr-2\" />\r\n                    {track.name}\r\n                  </div>\r\n                ))}\r\n\r\n                {tracks.audio.map((track) => (\r\n                  <div\r\n                    key={track.id}\r\n                    className=\"h-15 flex items-center px-4 border-b border-gray-100 text-sm font-medium text-green-700 bg-green-50 flex-shrink-0\"\r\n                    style={{ height: \"60px\" }}\r\n                  >\r\n                    <Music size={16} className=\"mr-2\" />\r\n                    {track.name}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <div\r\n              ref={(el) => {\r\n                timelineRef.current = el;\r\n                timelineScrollRef.current = el;\r\n              }}\r\n              className=\"flex-1 relative overflow-auto bg-white\"\r\n              onScroll={handleTrackAreaScroll}\r\n              onDragOver={handleDragOver}\r\n              onDrop={handleDrop}\r\n              onDragLeave={handleDragLeave}\r\n              style={{\r\n                overflowX: \"auto\",\r\n                overflowY: \"auto\",\r\n                scrollbarWidth: \"thin\",\r\n              }}\r\n            >\r\n              <div\r\n                style={{\r\n                  width: `${getTimelineWidth()}px`,\r\n                  minHeight: \"100%\",\r\n                  position: \"relative\",\r\n                }}\r\n                onClick={handleTimelineClick}\r\n              >\r\n                <div className=\"h-12 bg-gray-50 border-b border-gray-200 relative flex-shrink-0\">\r\n                  {Array.from(\r\n                    {\r\n                      length: Math.ceil((videoDuration * timelineZoom) / 5) + 1,\r\n                    },\r\n                    (_, i) => {\r\n                      const timeValue = (i * 5) / timelineZoom;\r\n                      const pixelsPerSecond = getPixelsPerSecond();\r\n                      return (\r\n                        <div\r\n                          key={i}\r\n                          className=\"absolute top-0 h-full border-l border-gray-300\"\r\n                          style={{ left: `${timeValue * pixelsPerSecond}px` }}\r\n                        >\r\n                          <span className=\"text-xs text-gray-600 ml-2 mt-2 inline-block font-medium\">\r\n                            {formatTime(timeValue)}\r\n                          </span>\r\n                        </div>\r\n                      );\r\n                    }\r\n                  )}\r\n\r\n                  {timelineZoom > 2 &&\r\n                    Array.from(\r\n                      { length: Math.ceil(videoDuration * timelineZoom) + 1 },\r\n                      (_, i) => {\r\n                        const timeValue = i / timelineZoom;\r\n                        const pixelsPerSecond = getPixelsPerSecond();\r\n                        return (\r\n                          <div\r\n                            key={`sub-${i}`}\r\n                            className=\"absolute top-8 w-0 h-4 border-l border-gray-200\"\r\n                            style={{ left: `${timeValue * pixelsPerSecond}px` }}\r\n                          />\r\n                        );\r\n                      }\r\n                    )}\r\n\r\n                  <div\r\n                    className=\"absolute top-0 w-0.5 h-full bg-red-500 z-20 shadow-sm\"\r\n                    style={{\r\n                      left: `${currentTime * getPixelsPerSecond()}px`,\r\n                    }}\r\n                  />\r\n                </div>\r\n\r\n                <div\r\n                  className=\"relative flex-1\"\r\n                  style={{\r\n                    height: `${\r\n                      (tracks.overlays.length +\r\n                        tracks.main.length +\r\n                        tracks.audio.length) *\r\n                      60\r\n                    }px`,\r\n                    minHeight: \"100%\",\r\n                  }}\r\n                >\r\n                  {timelineItems.map((item) => (\r\n                    <div\r\n                      key={item.id}\r\n                      className={`absolute h-10 rounded-lg border-2 cursor-grab active:cursor-grabbing transition-all shadow-sm hover:shadow-md group ${getTrackColor(\r\n                        item.trackType\r\n                      )} ${\r\n                        selectedTimelineItem?.id === item.id\r\n                          ? \"ring-2 ring-blue-300\"\r\n                          : \"\"\r\n                      } ${\r\n                        draggedTimelineItem?.id === item.id\r\n                          ? \"opacity-50 z-30\"\r\n                          : \"\"\r\n                      } ${\r\n                        copiedItem?.id === item.id\r\n                          ? \"ring-2 ring-green-300 ring-dashed\"\r\n                          : \"\"\r\n                      }`}\r\n                      style={getTimelineItemStyle(item)}\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        setSelectedTimelineItem(item);\r\n                      }}\r\n                    >\r\n                      <div\r\n                        className=\"absolute left-0 top-0 w-3 h-full cursor-ew-resize opacity-0 group-hover:opacity-100 bg-white/50 rounded-l-lg z-10 flex items-center justify-center\"\r\n                        onMouseDown={(e) => handleResizeStart(e, item, \"left\")}\r\n                        title=\"Trim start - Drag to adjust start time\"\r\n                        style={{\r\n                          background:\r\n                            \"linear-gradient(to right, rgba(255,255,255,0.8), transparent)\",\r\n                        }}\r\n                      >\r\n                        <div className=\"w-0.5 h-6 bg-white rounded-full opacity-80\"></div>\r\n                      </div>\r\n\r\n                      <div\r\n                        draggable=\"true\"\r\n                        onDragStart={(e) =>\r\n                          handleTimelineItemDragStart(e, item)\r\n                        }\r\n                        onDragEnd={handleTimelineItemDragEnd}\r\n                        className=\"p-2 text-white text-xs truncate font-medium flex items-center h-full mx-3 cursor-grab active:cursor-grabbing\"\r\n                        title=\"Drag to move item on timeline - Ripple mode: pushes other blocks\"\r\n                      >\r\n                        {item.name}\r\n                        {copiedItem?.id === item.id && (\r\n                          <span className=\"ml-2 text-green-200\">📋</span>\r\n                        )}\r\n                      </div>\r\n\r\n                      <div\r\n                        className=\"absolute right-0 top-0 w-3 h-full cursor-ew-resize opacity-0 group-hover:opacity-100 bg-white/50 rounded-r-lg z-10 flex items-center justify-center\"\r\n                        onMouseDown={(e) => handleResizeStart(e, item, \"right\")}\r\n                        title=\"Trim end - Drag to adjust duration\"\r\n                        style={{\r\n                          background:\r\n                            \"linear-gradient(to left, rgba(255,255,255,0.8), transparent)\",\r\n                        }}\r\n                      >\r\n                        <div className=\"w-0.5 h-6 bg-white rounded-full opacity-80\"></div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n\r\n                  {dropPreview && (\r\n                    <div\r\n                      className={`absolute h-10 rounded-lg border-2 transition-all ${\r\n                        dropPreview.isValid\r\n                          ? dropPreview.isExact\r\n                            ? `${getTrackColor(\r\n                                dropPreview.trackType\r\n                              )} bg-opacity-60 border-solid`\r\n                            : `${getTrackColor(\r\n                                dropPreview.trackType\r\n                              )} bg-opacity-40 border-dashed animate-pulse`\r\n                          : \"bg-red-300 border-red-500 border-dashed\"\r\n                      }`}\r\n                      style={getDropPreviewStyle()}\r\n                    >\r\n                      {dropPreview.isValid && !dropPreview.isExact && (\r\n                        <div className=\"flex items-center justify-center h-full text-white text-xs font-bold\">\r\n                          🧲\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Help Modal */}\r\n      {showHelp && (\r\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n          <div className=\"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-y-auto\">\r\n            <div className=\"p-6 border-b border-gray-200 flex items-center justify-between\">\r\n              <h3 className=\"text-xl font-bold text-gray-800 flex items-center\">\r\n                <HelpCircle size={24} className=\"mr-3 text-blue-600\" />\r\n                CapCut Pro - Help & Shortcuts\r\n              </h3>\r\n              <button\r\n                onClick={() => setShowHelp(false)}\r\n                className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-xl transition-all\"\r\n              >\r\n                <X size={20} />\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"p-6 space-y-6\">\r\n              {/* Timeline Controls */}\r\n              <div>\r\n                <h4 className=\"font-semibold text-gray-800 mb-3 flex items-center\">\r\n                  <Film size={18} className=\"mr-2 text-blue-600\" />\r\n                  Timeline Controls\r\n                </h4>\r\n                <div className=\"grid grid-cols-2 gap-3 text-sm\">\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Drag center:</span>\r\n                    <span className=\"font-medium\">Move item</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Drag edges:</span>\r\n                    <span className=\"font-medium\">Trim duration</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Auto ripple:</span>\r\n                    <span className=\"font-medium\">Push other blocks</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Ctrl + Wheel:</span>\r\n                    <span className=\"font-medium\">Zoom timeline</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Video Overlays */}\r\n              <div>\r\n                <h4 className=\"font-semibold text-gray-800 mb-3 flex items-center\">\r\n                  <Layers size={18} className=\"mr-2 text-purple-600\" />\r\n                  Video Overlays (CapCut Style)\r\n                </h4>\r\n                <div className=\"grid grid-cols-2 gap-3 text-sm\">\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Click overlay:</span>\r\n                    <span className=\"font-medium\">Select & show controls</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Drag anywhere:</span>\r\n                    <span className=\"font-medium\">Move position</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Drag corner dots:</span>\r\n                    <span className=\"font-medium\">Resize overlay</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Ctrl + Scroll:</span>\r\n                    <span className=\"font-medium\">Smooth zoom</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Opacity slider:</span>\r\n                    <span className=\"font-medium\">0-100% transparency</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Auto bounds:</span>\r\n                    <span className=\"font-medium\">Stays in view area</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Keyboard Shortcuts */}\r\n              <div>\r\n                <h4 className=\"font-semibold text-gray-800 mb-3 flex items-center\">\r\n                  ⌨️ Keyboard Shortcuts\r\n                </h4>\r\n                <div className=\"grid grid-cols-2 gap-3 text-sm\">\r\n                  <div className=\"flex justify-between\">\r\n                    <kbd className=\"px-2 py-1 bg-gray-100 rounded text-xs font-mono\">\r\n                      Space\r\n                    </kbd>\r\n                    <span className=\"font-medium\">Play / Pause</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <kbd className=\"px-2 py-1 bg-gray-100 rounded text-xs font-mono\">\r\n                      ← →\r\n                    </kbd>\r\n                    <span className=\"font-medium\">Seek (0.1s)</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <kbd className=\"px-2 py-1 bg-gray-100 rounded text-xs font-mono\">\r\n                      Shift + ← →\r\n                    </kbd>\r\n                    <span className=\"font-medium\">Seek (1s)</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <kbd className=\"px-2 py-1 bg-gray-100 rounded text-xs font-mono\">\r\n                      Ctrl + ← →\r\n                    </kbd>\r\n                    <span className=\"font-medium\">Seek (5s)</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <kbd className=\"px-2 py-1 bg-gray-100 rounded text-xs font-mono\">\r\n                      Ctrl + B\r\n                    </kbd>\r\n                    <span className=\"font-medium\">Split item</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <kbd className=\"px-2 py-1 bg-gray-100 rounded text-xs font-mono\">\r\n                      Ctrl + C\r\n                    </kbd>\r\n                    <span className=\"font-medium\">Copy item</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <kbd className=\"px-2 py-1 bg-gray-100 rounded text-xs font-mono\">\r\n                      Ctrl + V\r\n                    </kbd>\r\n                    <span className=\"font-medium\">Paste item</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <kbd className=\"px-2 py-1 bg-gray-100 rounded text-xs font-mono\">\r\n                      Del\r\n                    </kbd>\r\n                    <span className=\"font-medium\">Delete item</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <kbd className=\"px-2 py-1 bg-gray-100 rounded text-xs font-mono\">\r\n                      + -\r\n                    </kbd>\r\n                    <span className=\"font-medium\">Zoom in/out</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <kbd className=\"px-2 py-1 bg-gray-100 rounded text-xs font-mono\">\r\n                      0\r\n                    </kbd>\r\n                    <span className=\"font-medium\">Reset zoom</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Tips & Tricks */}\r\n              <div>\r\n                <h4 className=\"font-semibold text-gray-800 mb-3 flex items-center\">\r\n                  💡 Pro Tips\r\n                </h4>\r\n                <ul className=\"space-y-2 text-sm text-gray-600\">\r\n                  <li className=\"flex items-start\">\r\n                    <span className=\"inline-block w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\r\n                    <span>\r\n                      Drag media from library directly to timeline tracks for\r\n                      quick editing\r\n                    </span>\r\n                  </li>\r\n                  <li className=\"flex items-start\">\r\n                    <span className=\"inline-block w-2 h-2 bg-purple-500 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\r\n                    <span>\r\n                      Overlays can be dragged anywhere on video area - they\r\n                      auto-fit within bounds\r\n                    </span>\r\n                  </li>\r\n                  <li className=\"flex items-start\">\r\n                    <span className=\"inline-block w-2 h-2 bg-orange-500 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\r\n                    <span>\r\n                      Resize handles appear when overlay selected - drag corners\r\n                      for proportional scaling\r\n                    </span>\r\n                  </li>\r\n                  <li className=\"flex items-start\">\r\n                    <span className=\"inline-block w-2 h-2 bg-green-500 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\r\n                    <span>\r\n                      Ripple mode automatically pushes blocks when inserting new\r\n                      content\r\n                    </span>\r\n                  </li>\r\n                  <li className=\"flex items-start\">\r\n                    <span className=\"inline-block w-2 h-2 bg-red-500 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\r\n                    <span>\r\n                      Use Ctrl+scroll over overlays for precise size control\r\n                      like in CapCut\r\n                    </span>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"p-6 border-t border-gray-200 bg-gray-50 rounded-b-2xl\">\r\n              <p className=\"text-center text-sm text-gray-500\">\r\n                🎬 Made with CapCut Pro styling • Press{\" \"}\r\n                <kbd className=\"px-1 py-0.5 bg-white rounded text-xs font-mono border\">\r\n                  ?\r\n                </kbd>{\" \"}\r\n                or click help icon anytime\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoEditor;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}