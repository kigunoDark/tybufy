{"ast":null,"code":"var _jsxFileName = \"C:\\\\Scriptify\\\\ai-content-studio\\\\frontend\\\\src\\\\components\\\\VideoEditor\\\\VideoEditor.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useRef, useEffect, useCallback } from \"react\";\nimport { Upload, Play, Pause, Volume2, Video, Music, SkipBack, SkipForward, VolumeX, Copy, Trash2, Scissors, Image, Film, Plus, Layers } from \"lucide-react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VideoEditor = () => {\n  _s();\n  const [mediaLibrary, setMediaLibrary] = useState({\n    videos: [],\n    audios: [],\n    images: []\n  });\n  const [timelineItems, setTimelineItems] = useState([]);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [videoDuration, setVideoDuration] = useState(60);\n  const [selectedTimelineItem, setSelectedTimelineItem] = useState(null);\n  const [timelineZoom, setTimelineZoom] = useState(1);\n  const [activeTab, setActiveTab] = useState(\"videos\");\n  const [volume, setVolume] = useState(1);\n  const [isMuted, setIsMuted] = useState(false);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [currentVideoSource, setCurrentVideoSource] = useState(null);\n  const [draggedItem, setDraggedItem] = useState(null);\n  const [draggedTimelineItem, setDraggedTimelineItem] = useState(null);\n  const [dropPreview, setDropPreview] = useState(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [isTimelineDragging, setIsTimelineDragging] = useState(false);\n  const [dragOffset, setDragOffset] = useState(0);\n\n  // Треки как в CapCut\n  const [tracks, setTracks] = useState({\n    overlays: [{\n      id: 'overlay-1',\n      name: 'Overlay 1',\n      type: 'overlay'\n    }, {\n      id: 'overlay-2',\n      name: 'Overlay 2',\n      type: 'overlay'\n    }],\n    main: [{\n      id: 'main-video',\n      name: 'Main Video',\n      type: 'main'\n    }],\n    audio: [{\n      id: 'audio-1',\n      name: 'Audio 1',\n      type: 'audio'\n    }, {\n      id: 'audio-2',\n      name: 'Audio 2',\n      type: 'audio'\n    }]\n  });\n  const videoRef = useRef(null);\n  const fileInputRef = useRef(null);\n  const audioInputRef = useRef(null);\n  const imageInputRef = useRef(null);\n  const timelineRef = useRef(null);\n  const intervalRef = useRef(null);\n  const audioElementsRef = useRef(new Map());\n  const getCurrentTimelineContent = useCallback(() => {\n    const currentItems = timelineItems.filter(item => currentTime >= item.startTime && currentTime < item.startTime + item.duration);\n    return {\n      mainVideo: currentItems.find(item => item.trackType === 'main' && item.type === 'video'),\n      overlays: currentItems.filter(item => item.trackType === 'overlay'),\n      audio: currentItems.filter(item => item.trackType === 'audio')\n    };\n  }, [currentTime, timelineItems]);\n  const createAudioElement = useCallback(audioItem => {\n    if (!audioElementsRef.current.has(audioItem.id)) {\n      const audio = document.createElement('audio');\n      audio.src = audioItem.url;\n      audio.volume = (audioItem.volume || 1) * volume;\n      audio.muted = isMuted;\n      audio.preload = \"metadata\";\n      audioElementsRef.current.set(audioItem.id, audio);\n    }\n    return audioElementsRef.current.get(audioItem.id);\n  }, [volume, isMuted]);\n  const syncAudioTime = useCallback((audioItem, relativeTime) => {\n    const audioElement = audioElementsRef.current.get(audioItem.id);\n    if (audioElement) {\n      const timeDiff = Math.abs(audioElement.currentTime - relativeTime);\n      if (timeDiff > 0.2) {\n        audioElement.currentTime = Math.max(0, relativeTime);\n      }\n    }\n  }, []);\n  const checkCollision = useCallback((newItem, excludeId = null) => {\n    return timelineItems.some(item => {\n      if (item.id === excludeId) return false;\n      if (item.trackId !== newItem.trackId) return false;\n      const itemStart = item.startTime;\n      const itemEnd = item.startTime + item.duration;\n      const newStart = newItem.startTime;\n      const newEnd = newItem.startTime + newItem.duration;\n      return newStart < itemEnd && newEnd > itemStart;\n    });\n  }, [timelineItems]);\n  const findNextAvailablePosition = useCallback((trackId, duration, preferredStart = 0) => {\n    const trackItems = timelineItems.filter(item => item.trackId === trackId).sort((a, b) => a.startTime - b.startTime);\n    if (preferredStart >= 0) {\n      const testItem = {\n        trackId,\n        startTime: preferredStart,\n        duration\n      };\n      if (!checkCollision(testItem)) {\n        return preferredStart;\n      }\n    }\n    for (let i = 0; i < trackItems.length; i++) {\n      const currentItem = trackItems[i];\n      const nextItem = trackItems[i + 1];\n      if (i === 0 && currentItem.startTime >= duration) {\n        return 0;\n      }\n      if (nextItem) {\n        const gapStart = currentItem.startTime + currentItem.duration;\n        const gapEnd = nextItem.startTime;\n        const gapSize = gapEnd - gapStart;\n        if (gapSize >= duration) {\n          return gapStart;\n        }\n      }\n    }\n    if (trackItems.length === 0) return 0;\n    const lastItem = trackItems[trackItems.length - 1];\n    return lastItem.startTime + lastItem.duration;\n  }, [timelineItems, checkCollision]);\n\n  // Функция разрезания элемента\n  const splitTimelineItem = useCallback(() => {\n    if (!selectedTimelineItem) return;\n    const item = selectedTimelineItem;\n    const splitTime = currentTime;\n\n    // Проверяем что время разреза находится внутри элемента\n    if (splitTime <= item.startTime || splitTime >= item.startTime + item.duration) {\n      return;\n    }\n    const firstPartDuration = splitTime - item.startTime;\n    const secondPartStart = splitTime;\n    const secondPartDuration = item.duration - firstPartDuration;\n\n    // Создаем вторую часть\n    const secondPart = {\n      ...item,\n      id: Date.now() + Math.random(),\n      startTime: secondPartStart,\n      duration: secondPartDuration\n    };\n\n    // Обновляем первую часть\n    const updatedFirstPart = {\n      ...item,\n      duration: firstPartDuration\n    };\n    setTimelineItems(prev => prev.map(timelineItem => timelineItem.id === item.id ? updatedFirstPart : timelineItem).concat(secondPart));\n    setSelectedTimelineItem(null);\n  }, [selectedTimelineItem, currentTime]);\n\n  // Основной effect для управления видео и аудио\n  useEffect(() => {\n    const content = getCurrentTimelineContent();\n\n    // Управление основным видео\n    if (content.mainVideo && content.mainVideo.url !== currentVideoSource) {\n      setCurrentVideoSource(content.mainVideo.url);\n      if (videoRef.current) {\n        const relativeTime = currentTime - content.mainVideo.startTime;\n        videoRef.current.currentTime = Math.max(0, relativeTime);\n      }\n    } else if (!content.mainVideo && content.overlays.find(o => o.type === 'image')) {\n      const firstImage = content.overlays.find(o => o.type === 'image');\n      setCurrentVideoSource(firstImage.url);\n    } else if (!content.mainVideo && !content.overlays.find(o => o.type === 'image')) {\n      setCurrentVideoSource(null);\n    }\n\n    // Управление аудио\n    const currentAudioIds = new Set(content.audio.map(item => item.id));\n    audioElementsRef.current.forEach((audioElement, id) => {\n      if (!currentAudioIds.has(id)) {\n        if (!audioElement.paused) {\n          audioElement.pause();\n        }\n      }\n    });\n    content.audio.forEach(audioItem => {\n      const audioElement = createAudioElement(audioItem);\n      const relativeTime = currentTime - audioItem.startTime;\n      audioElement.volume = (audioItem.volume || 1) * volume;\n      audioElement.muted = isMuted;\n      if (isPlaying && relativeTime >= 0) {\n        syncAudioTime(audioItem, relativeTime);\n        if (audioElement.paused) {\n          audioElement.play().catch(console.error);\n        }\n      } else {\n        if (!audioElement.paused) {\n          audioElement.pause();\n        }\n      }\n    });\n  }, [currentTime, timelineItems, getCurrentTimelineContent, isPlaying, volume, isMuted, createAudioElement, syncAudioTime, currentVideoSource]);\n  useEffect(() => {\n    if (isPlaying) {\n      intervalRef.current = setInterval(() => {\n        setCurrentTime(prev => {\n          const newTime = prev + 0.1;\n          if (newTime >= videoDuration) {\n            setIsPlaying(false);\n            return videoDuration;\n          }\n          return newTime;\n        });\n      }, 100);\n    } else {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    }\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, [isPlaying, videoDuration]);\n  useEffect(() => {\n    if (videoRef.current && currentVideoSource) {\n      const content = getCurrentTimelineContent();\n      if (content.mainVideo) {\n        const relativeTime = currentTime - content.mainVideo.startTime;\n        const timeDiff = Math.abs(videoRef.current.currentTime - relativeTime);\n        if (timeDiff > 0.5) {\n          videoRef.current.currentTime = Math.max(0, relativeTime);\n        }\n        if (isPlaying && videoRef.current.paused) {\n          videoRef.current.play().catch(console.error);\n        } else if (!isPlaying && !videoRef.current.paused) {\n          videoRef.current.pause();\n        }\n      }\n    }\n  }, [currentTime, currentVideoSource, getCurrentTimelineContent, isPlaying]);\n  useEffect(() => {\n    const currentAudioIds = new Set(timelineItems.filter(item => item.type === \"audio\").map(item => item.id));\n    audioElementsRef.current.forEach((audioElement, id) => {\n      if (!currentAudioIds.has(id)) {\n        audioElement.pause();\n        audioElement.src = '';\n        audioElementsRef.current.delete(id);\n      }\n    });\n  }, [timelineItems]);\n  const handleVideoUpload = event => {\n    const files = event.target.files ? Array.from(event.target.files) : [];\n    files.forEach(file => {\n      const url = URL.createObjectURL(file);\n      const newVideo = {\n        id: Date.now() + Math.random(),\n        name: file.name,\n        url: url,\n        file: file,\n        duration: 10,\n        type: \"video\"\n      };\n      setMediaLibrary(prev => ({\n        ...prev,\n        videos: [...prev.videos, newVideo]\n      }));\n    });\n  };\n  const handleAudioUpload = event => {\n    const files = event.target.files ? Array.from(event.target.files) : [];\n    files.forEach(file => {\n      const url = URL.createObjectURL(file);\n      const newAudio = {\n        id: Date.now() + Math.random(),\n        name: file.name,\n        url: url,\n        file: file,\n        duration: 10,\n        type: \"audio\"\n      };\n      setMediaLibrary(prev => ({\n        ...prev,\n        audios: [...prev.audios, newAudio]\n      }));\n    });\n  };\n  const handleImageUpload = event => {\n    const files = event.target.files ? Array.from(event.target.files) : [];\n    files.forEach(file => {\n      const url = URL.createObjectURL(file);\n      const newImage = {\n        id: Date.now() + Math.random(),\n        name: file.name,\n        url: url,\n        file: file,\n        type: \"image\"\n      };\n      setMediaLibrary(prev => ({\n        ...prev,\n        images: [...prev.images, newImage]\n      }));\n    });\n  };\n  const addToTimeline = (mediaItem, startTime = null, targetTrackId = null) => {\n    let trackType, trackId;\n\n    // Определяем тип трека\n    if (mediaItem.type === \"video\") {\n      trackType = targetTrackId && targetTrackId.startsWith('overlay') ? 'overlay' : 'main';\n      trackId = targetTrackId || 'main-video';\n    } else if (mediaItem.type === \"image\") {\n      trackType = 'overlay';\n      trackId = targetTrackId || 'overlay-1';\n    } else if (mediaItem.type === \"audio\") {\n      trackType = 'audio';\n      trackId = targetTrackId || 'audio-1';\n    }\n    const duration = mediaItem.duration || (mediaItem.type === \"image\" ? 5 : 10);\n    const finalStartTime = startTime !== null ? startTime : findNextAvailablePosition(trackId, duration);\n    const newTimelineItem = {\n      id: Date.now() + Math.random(),\n      mediaId: mediaItem.id,\n      type: mediaItem.type,\n      name: mediaItem.name,\n      url: mediaItem.url,\n      startTime: finalStartTime,\n      duration: duration,\n      trackId: trackId,\n      trackType: trackType,\n      volume: 1,\n      opacity: 1\n    };\n    if (!checkCollision(newTimelineItem)) {\n      setTimelineItems(prev => [...prev, newTimelineItem]);\n      const newEndTime = newTimelineItem.startTime + newTimelineItem.duration;\n      if (newEndTime > videoDuration) {\n        setVideoDuration(newEndTime);\n      }\n    }\n  };\n  const addOverlayTrack = () => {\n    const newTrackId = `overlay-${Date.now()}`;\n    setTracks(prev => ({\n      ...prev,\n      overlays: [...prev.overlays, {\n        id: newTrackId,\n        name: `Overlay ${prev.overlays.length + 1}`,\n        type: 'overlay'\n      }]\n    }));\n  };\n  const addAudioTrack = () => {\n    const newTrackId = `audio-${Date.now()}`;\n    setTracks(prev => ({\n      ...prev,\n      audio: [...prev.audio, {\n        id: newTrackId,\n        name: `Audio ${prev.audio.length + 1}`,\n        type: 'audio'\n      }]\n    }));\n  };\n  const handlePlayPause = () => {\n    setIsPlaying(!isPlaying);\n  };\n  const seekTo = time => {\n    const newTime = Math.max(0, Math.min(videoDuration, time));\n    setCurrentTime(newTime);\n    const content = getCurrentTimelineContent();\n    content.audio.forEach(audioItem => {\n      const audioElement = audioElementsRef.current.get(audioItem.id);\n      if (audioElement) {\n        const relativeTime = newTime - audioItem.startTime;\n        audioElement.currentTime = Math.max(0, relativeTime);\n      }\n    });\n  };\n  const removeFromLibrary = (itemId, type) => {\n    setMediaLibrary(prev => ({\n      ...prev,\n      [type]: prev[type].filter(item => item.id !== itemId)\n    }));\n  };\n  const removeFromTimeline = itemId => {\n    const audioElement = audioElementsRef.current.get(itemId);\n    if (audioElement) {\n      audioElement.pause();\n      audioElement.src = '';\n      audioElementsRef.current.delete(itemId);\n    }\n    setTimelineItems(prev => prev.filter(item => item.id !== itemId));\n    setSelectedTimelineItem(null);\n  };\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = Math.floor(seconds % 60);\n    return `${mins}:${secs.toString().padStart(2, \"0\")}`;\n  };\n  const handleTimelineClick = e => {\n    if (isDragging || isTimelineDragging) return;\n    const rect = timelineRef.current.getBoundingClientRect();\n    const clickX = e.clientX - rect.left;\n    const timePerPixel = videoDuration / (rect.width * timelineZoom);\n    const clickTime = clickX * timePerPixel;\n    seekTo(clickTime);\n  };\n  const handleDragStart = (e, mediaItem) => {\n    setDraggedItem(mediaItem);\n    setIsDragging(true);\n    e.dataTransfer.effectAllowed = \"copy\";\n    e.dataTransfer.setData(\"text/plain\", \"\");\n  };\n  const handleDragEnd = () => {\n    setDraggedItem(null);\n    setDropPreview(null);\n    setIsDragging(false);\n  };\n  const handleTimelineItemDragStart = (e, timelineItem) => {\n    e.stopPropagation();\n    setDraggedTimelineItem(timelineItem);\n    setIsTimelineDragging(true);\n    const rect = timelineRef.current.getBoundingClientRect();\n    const itemRect = e.target.getBoundingClientRect();\n    setDragOffset(e.clientX - itemRect.left);\n    e.dataTransfer.effectAllowed = \"move\";\n    e.dataTransfer.setData(\"text/plain\", \"\");\n  };\n  const handleTimelineItemDragEnd = () => {\n    setDraggedTimelineItem(null);\n    setDropPreview(null);\n    setIsTimelineDragging(false);\n    setDragOffset(0);\n  };\n  const handleDragOver = e => {\n    if (!draggedItem && !draggedTimelineItem) return;\n    e.preventDefault();\n    e.dataTransfer.dropEffect = draggedItem ? \"copy\" : \"move\";\n    const timelineRect = timelineRef.current.getBoundingClientRect();\n    const dragX = e.clientX - timelineRect.left - (draggedTimelineItem ? dragOffset : 0);\n    const timePerPixel = videoDuration / (timelineRect.width * timelineZoom);\n    const dropTime = Math.max(0, dragX * timePerPixel);\n\n    // Определяем на какой трек перетаскиваем\n    // Учитываем что теперь у нас есть заголовок временной линейки высотой 48px\n    const dragY = e.clientY - timelineRect.top;\n    const trackHeight = 60;\n    const timeRulerHeight = 48; // высота временной линейки\n\n    const relativeY = dragY - timeRulerHeight;\n    const trackIndex = Math.floor(relativeY / trackHeight);\n    const allTracks = [...tracks.overlays, ...tracks.main, ...tracks.audio];\n    const targetTrack = allTracks[trackIndex];\n    if (draggedItem && targetTrack) {\n      const duration = draggedItem.duration || (draggedItem.type === \"image\" ? 5 : 10);\n      const testItem = {\n        trackId: targetTrack.id,\n        startTime: dropTime,\n        duration\n      };\n      setDropPreview({\n        time: dropTime,\n        duration: duration,\n        trackId: targetTrack.id,\n        trackType: targetTrack.type,\n        isValid: !checkCollision(testItem)\n      });\n    } else if (draggedTimelineItem && targetTrack) {\n      const testItem = {\n        ...draggedTimelineItem,\n        startTime: dropTime,\n        trackId: targetTrack.id\n      };\n      setDropPreview({\n        time: dropTime,\n        duration: draggedTimelineItem.duration,\n        trackId: targetTrack.id,\n        trackType: targetTrack.type,\n        isValid: !checkCollision(testItem, draggedTimelineItem.id)\n      });\n    }\n  };\n  const handleDrop = e => {\n    if (!draggedItem && !draggedTimelineItem || !dropPreview) return;\n    e.preventDefault();\n    if (dropPreview.isValid) {\n      if (draggedItem) {\n        addToTimeline(draggedItem, dropPreview.time, dropPreview.trackId);\n      } else if (draggedTimelineItem) {\n        setTimelineItems(prev => prev.map(item => item.id === draggedTimelineItem.id ? {\n          ...item,\n          startTime: dropPreview.time,\n          trackId: dropPreview.trackId,\n          trackType: dropPreview.trackType\n        } : item));\n      }\n    }\n    setDropPreview(null);\n    setDraggedItem(null);\n    setDraggedTimelineItem(null);\n    setIsDragging(false);\n    setIsTimelineDragging(false);\n  };\n  const handleDragLeave = e => {\n    var _timelineRef$current;\n    if (!((_timelineRef$current = timelineRef.current) !== null && _timelineRef$current !== void 0 && _timelineRef$current.contains(e.relatedTarget))) {\n      setDropPreview(null);\n    }\n  };\n  const getTimelineItemStyle = item => {\n    const allTracks = [...tracks.overlays, ...tracks.main, ...tracks.audio];\n    const trackIndex = allTracks.findIndex(track => track.id === item.trackId);\n    return {\n      left: `${item.startTime / videoDuration * videoDuration * 20 * timelineZoom}px`,\n      width: `${item.duration / videoDuration * videoDuration * 20 * timelineZoom}px`,\n      top: `${trackIndex * 60 + 10}px`\n    };\n  };\n  const getDropPreviewStyle = () => {\n    if (!dropPreview) return {};\n    const allTracks = [...tracks.overlays, ...tracks.main, ...tracks.audio];\n    const trackIndex = allTracks.findIndex(track => track.id === dropPreview.trackId);\n    return {\n      left: `${dropPreview.time / videoDuration * videoDuration * 20 * timelineZoom}px`,\n      width: `${dropPreview.duration / videoDuration * videoDuration * 20 * timelineZoom}px`,\n      top: `${trackIndex * 60 + 10}px`\n    };\n  };\n  const getTrackColor = trackType => {\n    switch (trackType) {\n      case 'overlay':\n        return 'bg-purple-500 border-purple-400';\n      case 'main':\n        return 'bg-blue-500 border-blue-400';\n      case 'audio':\n        return 'bg-green-500 border-green-400';\n      default:\n        return 'bg-gray-500 border-gray-400';\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-1 h-screen gap-4 p-4 bg-gray-100\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex flex-col gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 bg-black rounded-2xl relative overflow-hidden shadow-sm\",\n        children: [currentVideoSource ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative w-full h-full\",\n          children: [getCurrentTimelineContent().mainVideo ? /*#__PURE__*/_jsxDEV(\"video\", {\n            ref: videoRef,\n            src: currentVideoSource,\n            className: \"w-full h-full object-contain rounded-2xl\",\n            muted: isMuted\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 659,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n            src: currentVideoSource,\n            alt: \"Timeline content\",\n            className: \"w-full h-full object-contain rounded-2xl\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 666,\n            columnNumber: 17\n          }, this), getCurrentTimelineContent().overlays.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute top-4 right-4 w-32 h-24 border-2 border-white rounded-lg overflow-hidden shadow-lg\",\n            style: {\n              top: `${4 + index * 100}px`,\n              opacity: item.opacity || 1\n            },\n            children: item.type === 'video' ? /*#__PURE__*/_jsxDEV(\"video\", {\n              src: item.url,\n              className: \"w-full h-full object-cover\",\n              muted: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 684,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n              src: item.url,\n              alt: item.name,\n              className: \"w-full h-full object-cover\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 690,\n              columnNumber: 21\n            }, this)\n          }, item.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 675,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 657,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full h-full flex items-center justify-center text-white\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-20 h-20 bg-gray-800 rounded-2xl flex items-center justify-center mx-auto mb-4\",\n              children: /*#__PURE__*/_jsxDEV(Film, {\n                size: 40,\n                className: \"opacity-50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 703,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 702,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xl opacity-75 font-medium\",\n              children: \"No content at current time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 705,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm opacity-50\",\n              children: \"Drag media to timeline tracks\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 708,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 701,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 700,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute bottom-6 left-1/2 transform -translate-x-1/2 bg-black/60 backdrop-blur-md rounded-2xl p-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => seekTo(Math.max(0, currentTime - 10)),\n              className: \"text-white hover:text-blue-400 transition-colors p-1 rounded-lg hover:bg-white/10\",\n              children: /*#__PURE__*/_jsxDEV(SkipBack, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 722,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 718,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handlePlayPause,\n              className: \"w-12 h-12 bg-white/20 hover:bg-white/30 rounded-2xl flex items-center justify-center text-white transition-all hover:scale-105\",\n              children: isPlaying ? /*#__PURE__*/_jsxDEV(Pause, {\n                size: 24\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 728,\n                columnNumber: 30\n              }, this) : /*#__PURE__*/_jsxDEV(Play, {\n                size: 24\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 728,\n                columnNumber: 52\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 724,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => seekTo(Math.min(videoDuration, currentTime + 10)),\n              className: \"text-white hover:text-blue-400 transition-colors p-1 rounded-lg hover:bg-white/10\",\n              children: /*#__PURE__*/_jsxDEV(SkipForward, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 736,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 730,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setIsMuted(!isMuted),\n                className: \"text-white hover:text-blue-400 transition-colors p-1 rounded-lg hover:bg-white/10\",\n                children: isMuted ? /*#__PURE__*/_jsxDEV(VolumeX, {\n                  size: 20\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 743,\n                  columnNumber: 30\n                }, this) : /*#__PURE__*/_jsxDEV(Volume2, {\n                  size: 20\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 743,\n                  columnNumber: 54\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 739,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"range\",\n                min: \"0\",\n                max: \"1\",\n                step: \"0.1\",\n                value: volume,\n                onChange: e => setVolume(parseFloat(e.target.value)),\n                className: \"w-24 accent-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 745,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 738,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-white text-sm font-medium min-w-0\",\n              children: [formatTime(currentTime), \" / \", formatTime(videoDuration)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 755,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 717,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 716,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 655,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `h-96 bg-white rounded-2xl shadow-sm border-2 transition-all duration-200 overflow-hidden ${isDragging || isTimelineDragging ? \"border-blue-400 bg-blue-50/20\" : \"border-gray-200\"}`,\n        onDragOver: handleDragOver,\n        onDrop: handleDrop,\n        onDragLeave: handleDragLeave,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-50 p-4 border-b border-gray-200\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"text-gray-800 font-semibold flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(Film, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 777,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Timeline\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 778,\n                columnNumber: 17\n              }, this), (isDragging || isTimelineDragging) && dropPreview && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: dropPreview.isValid ? \"text-green-600\" : \"text-red-600\",\n                children: [\"- \", dropPreview.isValid ? \"Drop to place\" : \"Position blocked\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 780,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 776,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600 text-sm font-medium\",\n                  children: \"Zoom:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 787,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bg-white rounded-xl p-2 border border-gray-200\",\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"range\",\n                    min: \"0.5\",\n                    max: \"3\",\n                    step: \"0.1\",\n                    value: timelineZoom,\n                    onChange: e => setTimelineZoom(parseFloat(e.target.value)),\n                    className: \"w-24 accent-blue-500\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 789,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 788,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 786,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: addOverlayTrack,\n                  className: \"p-2 text-purple-600 hover:text-purple-800 hover:bg-purple-50 rounded-xl transition-all duration-200\",\n                  title: \"Add Overlay Track\",\n                  children: /*#__PURE__*/_jsxDEV(Plus, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 806,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 801,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: addAudioTrack,\n                  className: \"p-2 text-green-600 hover:text-green-800 hover:bg-green-50 rounded-xl transition-all duration-200\",\n                  title: \"Add Audio Track\",\n                  children: /*#__PURE__*/_jsxDEV(Music, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 813,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 808,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: splitTimelineItem,\n                  disabled: !selectedTimelineItem,\n                  className: `p-2 rounded-xl transition-all duration-200 ${selectedTimelineItem ? \"text-red-600 hover:text-red-800 hover:bg-red-50\" : \"text-gray-400 cursor-not-allowed\"}`,\n                  title: \"Split Selected Item\",\n                  children: /*#__PURE__*/_jsxDEV(Scissors, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 825,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 815,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-xl transition-all duration-200\",\n                  children: /*#__PURE__*/_jsxDEV(Copy, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 828,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 827,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 800,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 785,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 775,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 774,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-48 bg-gray-50 border-r border-gray-200 flex-shrink-0\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-12 border-b border-gray-200\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 840,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [tracks.overlays.map((track, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"h-15 flex items-center px-4 border-b border-gray-100 text-sm font-medium text-purple-700 bg-purple-50\",\n                style: {\n                  height: '60px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(Layers, {\n                  size: 16,\n                  className: \"mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 851,\n                  columnNumber: 21\n                }, this), track.name]\n              }, track.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 846,\n                columnNumber: 19\n              }, this)), tracks.main.map((track, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"h-15 flex items-center px-4 border-b border-gray-100 text-sm font-medium text-blue-700 bg-blue-50\",\n                style: {\n                  height: '60px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(Video, {\n                  size: 16,\n                  className: \"mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 863,\n                  columnNumber: 21\n                }, this), track.name]\n              }, track.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 858,\n                columnNumber: 19\n              }, this)), tracks.audio.map((track, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"h-15 flex items-center px-4 border-b border-gray-100 text-sm font-medium text-green-700 bg-green-50\",\n                style: {\n                  height: '60px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(Music, {\n                  size: 16,\n                  className: \"mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 875,\n                  columnNumber: 21\n                }, this), track.name]\n              }, track.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 870,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 843,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 838,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 relative overflow-x-auto\",\n            ref: timelineRef,\n            onClick: handleTimelineClick,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-12 bg-gray-50 border-b border-gray-200 relative\",\n              children: [Array.from({\n                length: Math.ceil(videoDuration / 5) + 1\n              }, (_, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute top-0 h-full border-l border-gray-300\",\n                style: {\n                  left: `${i * 100 * timelineZoom}px`\n                },\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs text-gray-600 ml-2 mt-2 inline-block font-medium\",\n                  children: formatTime(i * 5)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 896,\n                  columnNumber: 21\n                }, this)\n              }, i, false, {\n                fileName: _jsxFileName,\n                lineNumber: 891,\n                columnNumber: 19\n              }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute top-0 w-0.5 h-full bg-red-500 z-20 shadow-sm\",\n                style: {\n                  left: `${currentTime / videoDuration * videoDuration * 20 * timelineZoom}px`\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 902,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 889,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative\",\n              style: {\n                height: `${(tracks.overlays.length + tracks.main.length + tracks.audio.length) * 60}px`\n              },\n              children: [timelineItems.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n                draggable: \"true\",\n                onDragStart: e => handleTimelineItemDragStart(e, item),\n                onDragEnd: handleTimelineItemDragEnd,\n                className: `absolute h-10 rounded-lg border-2 cursor-grab active:cursor-grabbing transition-all shadow-sm hover:shadow-md ${getTrackColor(item.trackType)} ${(selectedTimelineItem === null || selectedTimelineItem === void 0 ? void 0 : selectedTimelineItem.id) === item.id ? \"ring-2 ring-blue-300\" : \"\"} ${(draggedTimelineItem === null || draggedTimelineItem === void 0 ? void 0 : draggedTimelineItem.id) === item.id ? \"opacity-50 z-30\" : \"\"}`,\n                style: getTimelineItemStyle(item),\n                onClick: e => {\n                  e.stopPropagation();\n                  setSelectedTimelineItem(item);\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"p-2 text-white text-xs truncate font-medium\",\n                  children: item.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 932,\n                  columnNumber: 21\n                }, this)\n              }, item.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 914,\n                columnNumber: 19\n              }, this)), dropPreview && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `absolute h-10 rounded-lg border-2 border-dashed opacity-75 ${dropPreview.isValid ? `${getTrackColor(dropPreview.trackType)} bg-opacity-50` : \"bg-red-300 border-red-500\"}`,\n                style: getDropPreviewStyle()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 940,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 911,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 883,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 836,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 763,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 653,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 648,\n    columnNumber: 5\n  }, this);\n};\n_s(VideoEditor, \"zCyimtOgTxtjTgl2sGELUoZ+n2A=\");\n_c = VideoEditor;\nexport default VideoEditor;\nvar _c;\n$RefreshReg$(_c, \"VideoEditor\");","map":{"version":3,"names":["useState","useRef","useEffect","useCallback","Upload","Play","Pause","Volume2","Video","Music","SkipBack","SkipForward","VolumeX","Copy","Trash2","Scissors","Image","Film","Plus","Layers","jsxDEV","_jsxDEV","VideoEditor","_s","mediaLibrary","setMediaLibrary","videos","audios","images","timelineItems","setTimelineItems","currentTime","setCurrentTime","videoDuration","setVideoDuration","selectedTimelineItem","setSelectedTimelineItem","timelineZoom","setTimelineZoom","activeTab","setActiveTab","volume","setVolume","isMuted","setIsMuted","isPlaying","setIsPlaying","currentVideoSource","setCurrentVideoSource","draggedItem","setDraggedItem","draggedTimelineItem","setDraggedTimelineItem","dropPreview","setDropPreview","isDragging","setIsDragging","isTimelineDragging","setIsTimelineDragging","dragOffset","setDragOffset","tracks","setTracks","overlays","id","name","type","main","audio","videoRef","fileInputRef","audioInputRef","imageInputRef","timelineRef","intervalRef","audioElementsRef","Map","getCurrentTimelineContent","currentItems","filter","item","startTime","duration","mainVideo","find","trackType","createAudioElement","audioItem","current","has","document","createElement","src","url","muted","preload","set","get","syncAudioTime","relativeTime","audioElement","timeDiff","Math","abs","max","checkCollision","newItem","excludeId","some","trackId","itemStart","itemEnd","newStart","newEnd","findNextAvailablePosition","preferredStart","trackItems","sort","a","b","testItem","i","length","currentItem","nextItem","gapStart","gapEnd","gapSize","lastItem","splitTimelineItem","splitTime","firstPartDuration","secondPartStart","secondPartDuration","secondPart","Date","now","random","updatedFirstPart","prev","map","timelineItem","concat","content","o","firstImage","currentAudioIds","Set","forEach","paused","pause","play","catch","console","error","setInterval","newTime","clearInterval","delete","handleVideoUpload","event","files","target","Array","from","file","URL","createObjectURL","newVideo","handleAudioUpload","newAudio","handleImageUpload","newImage","addToTimeline","mediaItem","targetTrackId","startsWith","finalStartTime","newTimelineItem","mediaId","opacity","newEndTime","addOverlayTrack","newTrackId","addAudioTrack","handlePlayPause","seekTo","time","min","removeFromLibrary","itemId","removeFromTimeline","formatTime","seconds","mins","floor","secs","toString","padStart","handleTimelineClick","e","rect","getBoundingClientRect","clickX","clientX","left","timePerPixel","width","clickTime","handleDragStart","dataTransfer","effectAllowed","setData","handleDragEnd","handleTimelineItemDragStart","stopPropagation","itemRect","handleTimelineItemDragEnd","handleDragOver","preventDefault","dropEffect","timelineRect","dragX","dropTime","dragY","clientY","top","trackHeight","timeRulerHeight","relativeY","trackIndex","allTracks","targetTrack","isValid","handleDrop","handleDragLeave","_timelineRef$current","contains","relatedTarget","getTimelineItemStyle","findIndex","track","getDropPreviewStyle","getTrackColor","className","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","alt","index","style","size","onClick","step","value","onChange","parseFloat","onDragOver","onDrop","onDragLeave","title","disabled","height","ceil","_","draggable","onDragStart","onDragEnd","_c","$RefreshReg$"],"sources":["C:/Scriptify/ai-content-studio/frontend/src/components/VideoEditor/VideoEditor.jsx"],"sourcesContent":["import { useState, useRef, useEffect, useCallback } from \"react\";\r\nimport {\r\n  Upload,\r\n  Play,\r\n  Pause,\r\n  Volume2,\r\n  Video,\r\n  Music,\r\n  SkipBack,\r\n  SkipForward,\r\n  VolumeX,\r\n  Copy,\r\n  Trash2,\r\n  Scissors,\r\n  Image,\r\n  Film,\r\n  Plus,\r\n  Layers\r\n} from \"lucide-react\";\r\n\r\nconst VideoEditor = () => {\r\n  const [mediaLibrary, setMediaLibrary] = useState({\r\n    videos: [],\r\n    audios: [],\r\n    images: [],\r\n  });\r\n  const [timelineItems, setTimelineItems] = useState([]);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [videoDuration, setVideoDuration] = useState(60);\r\n  const [selectedTimelineItem, setSelectedTimelineItem] = useState(null);\r\n  const [timelineZoom, setTimelineZoom] = useState(1);\r\n  const [activeTab, setActiveTab] = useState(\"videos\");\r\n  const [volume, setVolume] = useState(1);\r\n  const [isMuted, setIsMuted] = useState(false);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [currentVideoSource, setCurrentVideoSource] = useState(null);\r\n  const [draggedItem, setDraggedItem] = useState(null);\r\n  const [draggedTimelineItem, setDraggedTimelineItem] = useState(null);\r\n  const [dropPreview, setDropPreview] = useState(null);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [isTimelineDragging, setIsTimelineDragging] = useState(false);\r\n  const [dragOffset, setDragOffset] = useState(0);\r\n  \r\n  // Треки как в CapCut\r\n  const [tracks, setTracks] = useState({\r\n    overlays: [\r\n      { id: 'overlay-1', name: 'Overlay 1', type: 'overlay' },\r\n      { id: 'overlay-2', name: 'Overlay 2', type: 'overlay' }\r\n    ],\r\n    main: [\r\n      { id: 'main-video', name: 'Main Video', type: 'main' }\r\n    ],\r\n    audio: [\r\n      { id: 'audio-1', name: 'Audio 1', type: 'audio' },\r\n      { id: 'audio-2', name: 'Audio 2', type: 'audio' }\r\n    ]\r\n  });\r\n\r\n  const videoRef = useRef(null);\r\n  const fileInputRef = useRef(null);\r\n  const audioInputRef = useRef(null);\r\n  const imageInputRef = useRef(null);\r\n  const timelineRef = useRef(null);\r\n  const intervalRef = useRef(null);\r\n  const audioElementsRef = useRef(new Map());\r\n\r\n  const getCurrentTimelineContent = useCallback(() => {\r\n    const currentItems = timelineItems.filter(\r\n      (item) =>\r\n        currentTime >= item.startTime &&\r\n        currentTime < item.startTime + item.duration\r\n    );\r\n\r\n    return {\r\n      mainVideo: currentItems.find(item => item.trackType === 'main' && item.type === 'video'),\r\n      overlays: currentItems.filter(item => item.trackType === 'overlay'),\r\n      audio: currentItems.filter(item => item.trackType === 'audio'),\r\n    };\r\n  }, [currentTime, timelineItems]);\r\n\r\n  const createAudioElement = useCallback((audioItem) => {\r\n    if (!audioElementsRef.current.has(audioItem.id)) {\r\n      const audio = document.createElement('audio');\r\n      audio.src = audioItem.url;\r\n      audio.volume = (audioItem.volume || 1) * volume;\r\n      audio.muted = isMuted;\r\n      audio.preload = \"metadata\";\r\n      audioElementsRef.current.set(audioItem.id, audio);\r\n    }\r\n    return audioElementsRef.current.get(audioItem.id);\r\n  }, [volume, isMuted]);\r\n\r\n  const syncAudioTime = useCallback((audioItem, relativeTime) => {\r\n    const audioElement = audioElementsRef.current.get(audioItem.id);\r\n    if (audioElement) {\r\n      const timeDiff = Math.abs(audioElement.currentTime - relativeTime);\r\n      if (timeDiff > 0.2) {\r\n        audioElement.currentTime = Math.max(0, relativeTime);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  const checkCollision = useCallback((newItem, excludeId = null) => {\r\n    return timelineItems.some(item => {\r\n      if (item.id === excludeId) return false;\r\n      if (item.trackId !== newItem.trackId) return false;\r\n      \r\n      const itemStart = item.startTime;\r\n      const itemEnd = item.startTime + item.duration;\r\n      const newStart = newItem.startTime;\r\n      const newEnd = newItem.startTime + newItem.duration;\r\n      \r\n      return (newStart < itemEnd && newEnd > itemStart);\r\n    });\r\n  }, [timelineItems]);\r\n\r\n  const findNextAvailablePosition = useCallback((trackId, duration, preferredStart = 0) => {\r\n    const trackItems = timelineItems\r\n      .filter(item => item.trackId === trackId)\r\n      .sort((a, b) => a.startTime - b.startTime);\r\n    \r\n    if (preferredStart >= 0) {\r\n      const testItem = { trackId, startTime: preferredStart, duration };\r\n      if (!checkCollision(testItem)) {\r\n        return preferredStart;\r\n      }\r\n    }\r\n    \r\n    for (let i = 0; i < trackItems.length; i++) {\r\n      const currentItem = trackItems[i];\r\n      const nextItem = trackItems[i + 1];\r\n      \r\n      if (i === 0 && currentItem.startTime >= duration) {\r\n        return 0;\r\n      }\r\n      \r\n      if (nextItem) {\r\n        const gapStart = currentItem.startTime + currentItem.duration;\r\n        const gapEnd = nextItem.startTime;\r\n        const gapSize = gapEnd - gapStart;\r\n        \r\n        if (gapSize >= duration) {\r\n          return gapStart;\r\n        }\r\n      }\r\n    }\r\n    \r\n    if (trackItems.length === 0) return 0;\r\n    const lastItem = trackItems[trackItems.length - 1];\r\n    return lastItem.startTime + lastItem.duration;\r\n  }, [timelineItems, checkCollision]);\r\n\r\n  // Функция разрезания элемента\r\n  const splitTimelineItem = useCallback(() => {\r\n    if (!selectedTimelineItem) return;\r\n    \r\n    const item = selectedTimelineItem;\r\n    const splitTime = currentTime;\r\n    \r\n    // Проверяем что время разреза находится внутри элемента\r\n    if (splitTime <= item.startTime || splitTime >= item.startTime + item.duration) {\r\n      return;\r\n    }\r\n    \r\n    const firstPartDuration = splitTime - item.startTime;\r\n    const secondPartStart = splitTime;\r\n    const secondPartDuration = item.duration - firstPartDuration;\r\n    \r\n    // Создаем вторую часть\r\n    const secondPart = {\r\n      ...item,\r\n      id: Date.now() + Math.random(),\r\n      startTime: secondPartStart,\r\n      duration: secondPartDuration,\r\n    };\r\n    \r\n    // Обновляем первую часть\r\n    const updatedFirstPart = {\r\n      ...item,\r\n      duration: firstPartDuration,\r\n    };\r\n    \r\n    setTimelineItems(prev => prev.map(timelineItem => \r\n      timelineItem.id === item.id ? updatedFirstPart : timelineItem\r\n    ).concat(secondPart));\r\n    \r\n    setSelectedTimelineItem(null);\r\n  }, [selectedTimelineItem, currentTime]);\r\n\r\n  // Основной effect для управления видео и аудио\r\n  useEffect(() => {\r\n    const content = getCurrentTimelineContent();\r\n\r\n    // Управление основным видео\r\n    if (content.mainVideo && content.mainVideo.url !== currentVideoSource) {\r\n      setCurrentVideoSource(content.mainVideo.url);\r\n      if (videoRef.current) {\r\n        const relativeTime = currentTime - content.mainVideo.startTime;\r\n        videoRef.current.currentTime = Math.max(0, relativeTime);\r\n      }\r\n    } else if (!content.mainVideo && content.overlays.find(o => o.type === 'image')) {\r\n      const firstImage = content.overlays.find(o => o.type === 'image');\r\n      setCurrentVideoSource(firstImage.url);\r\n    } else if (!content.mainVideo && !content.overlays.find(o => o.type === 'image')) {\r\n      setCurrentVideoSource(null);\r\n    }\r\n\r\n    // Управление аудио\r\n    const currentAudioIds = new Set(content.audio.map(item => item.id));\r\n    \r\n    audioElementsRef.current.forEach((audioElement, id) => {\r\n      if (!currentAudioIds.has(id)) {\r\n        if (!audioElement.paused) {\r\n          audioElement.pause();\r\n        }\r\n      }\r\n    });\r\n\r\n    content.audio.forEach(audioItem => {\r\n      const audioElement = createAudioElement(audioItem);\r\n      const relativeTime = currentTime - audioItem.startTime;\r\n      \r\n      audioElement.volume = (audioItem.volume || 1) * volume;\r\n      audioElement.muted = isMuted;\r\n      \r\n      if (isPlaying && relativeTime >= 0) {\r\n        syncAudioTime(audioItem, relativeTime);\r\n        if (audioElement.paused) {\r\n          audioElement.play().catch(console.error);\r\n        }\r\n      } else {\r\n        if (!audioElement.paused) {\r\n          audioElement.pause();\r\n        }\r\n      }\r\n    });\r\n\r\n  }, [currentTime, timelineItems, getCurrentTimelineContent, isPlaying, volume, isMuted, createAudioElement, syncAudioTime, currentVideoSource]);\r\n\r\n  useEffect(() => {\r\n    if (isPlaying) {\r\n      intervalRef.current = setInterval(() => {\r\n        setCurrentTime((prev) => {\r\n          const newTime = prev + 0.1;\r\n          if (newTime >= videoDuration) {\r\n            setIsPlaying(false);\r\n            return videoDuration;\r\n          }\r\n          return newTime;\r\n        });\r\n      }, 100);\r\n    } else {\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n      }\r\n    }\r\n\r\n    return () => {\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n      }\r\n    };\r\n  }, [isPlaying, videoDuration]);\r\n\r\n  useEffect(() => {\r\n    if (videoRef.current && currentVideoSource) {\r\n      const content = getCurrentTimelineContent();\r\n      if (content.mainVideo) {\r\n        const relativeTime = currentTime - content.mainVideo.startTime;\r\n        const timeDiff = Math.abs(videoRef.current.currentTime - relativeTime);\r\n\r\n        if (timeDiff > 0.5) {\r\n          videoRef.current.currentTime = Math.max(0, relativeTime);\r\n        }\r\n\r\n        if (isPlaying && videoRef.current.paused) {\r\n          videoRef.current.play().catch(console.error);\r\n        } else if (!isPlaying && !videoRef.current.paused) {\r\n          videoRef.current.pause();\r\n        }\r\n      }\r\n    }\r\n  }, [currentTime, currentVideoSource, getCurrentTimelineContent, isPlaying]);\r\n\r\n  useEffect(() => {\r\n    const currentAudioIds = new Set(\r\n      timelineItems\r\n        .filter(item => item.type === \"audio\")\r\n        .map(item => item.id)\r\n    );\r\n\r\n    audioElementsRef.current.forEach((audioElement, id) => {\r\n      if (!currentAudioIds.has(id)) {\r\n        audioElement.pause();\r\n        audioElement.src = '';\r\n        audioElementsRef.current.delete(id);\r\n      }\r\n    });\r\n  }, [timelineItems]);\r\n\r\n  const handleVideoUpload = (event) => {\r\n    const files = event.target.files ? Array.from(event.target.files) : [];\r\n    files.forEach((file) => {\r\n      const url = URL.createObjectURL(file);\r\n      const newVideo = {\r\n        id: Date.now() + Math.random(),\r\n        name: file.name,\r\n        url: url,\r\n        file: file,\r\n        duration: 10,\r\n        type: \"video\",\r\n      };\r\n\r\n      setMediaLibrary((prev) => ({\r\n        ...prev,\r\n        videos: [...prev.videos, newVideo],\r\n      }));\r\n    });\r\n  };\r\n\r\n  const handleAudioUpload = (event) => {\r\n    const files = event.target.files ? Array.from(event.target.files) : [];\r\n    files.forEach((file) => {\r\n      const url = URL.createObjectURL(file);\r\n      const newAudio = {\r\n        id: Date.now() + Math.random(),\r\n        name: file.name,\r\n        url: url,\r\n        file: file,\r\n        duration: 10,\r\n        type: \"audio\",\r\n      };\r\n\r\n      setMediaLibrary((prev) => ({\r\n        ...prev,\r\n        audios: [...prev.audios, newAudio],\r\n      }));\r\n    });\r\n  };\r\n\r\n  const handleImageUpload = (event) => {\r\n    const files = event.target.files ? Array.from(event.target.files) : [];\r\n    files.forEach((file) => {\r\n      const url = URL.createObjectURL(file);\r\n      const newImage = {\r\n        id: Date.now() + Math.random(),\r\n        name: file.name,\r\n        url: url,\r\n        file: file,\r\n        type: \"image\",\r\n      };\r\n\r\n      setMediaLibrary((prev) => ({\r\n        ...prev,\r\n        images: [...prev.images, newImage],\r\n      }));\r\n    });\r\n  };\r\n\r\n  const addToTimeline = (mediaItem, startTime = null, targetTrackId = null) => {\r\n    let trackType, trackId;\r\n    \r\n    // Определяем тип трека\r\n    if (mediaItem.type === \"video\") {\r\n      trackType = targetTrackId && targetTrackId.startsWith('overlay') ? 'overlay' : 'main';\r\n      trackId = targetTrackId || 'main-video';\r\n    } else if (mediaItem.type === \"image\") {\r\n      trackType = 'overlay';\r\n      trackId = targetTrackId || 'overlay-1';\r\n    } else if (mediaItem.type === \"audio\") {\r\n      trackType = 'audio';\r\n      trackId = targetTrackId || 'audio-1';\r\n    }\r\n    \r\n    const duration = mediaItem.duration || (mediaItem.type === \"image\" ? 5 : 10);\r\n    const finalStartTime = startTime !== null ? startTime : \r\n      findNextAvailablePosition(trackId, duration);\r\n\r\n    const newTimelineItem = {\r\n      id: Date.now() + Math.random(),\r\n      mediaId: mediaItem.id,\r\n      type: mediaItem.type,\r\n      name: mediaItem.name,\r\n      url: mediaItem.url,\r\n      startTime: finalStartTime,\r\n      duration: duration,\r\n      trackId: trackId,\r\n      trackType: trackType,\r\n      volume: 1,\r\n      opacity: 1,\r\n    };\r\n\r\n    if (!checkCollision(newTimelineItem)) {\r\n      setTimelineItems((prev) => [...prev, newTimelineItem]);\r\n\r\n      const newEndTime = newTimelineItem.startTime + newTimelineItem.duration;\r\n      if (newEndTime > videoDuration) {\r\n        setVideoDuration(newEndTime);\r\n      }\r\n    }\r\n  };\r\n\r\n  const addOverlayTrack = () => {\r\n    const newTrackId = `overlay-${Date.now()}`;\r\n    setTracks(prev => ({\r\n      ...prev,\r\n      overlays: [...prev.overlays, {\r\n        id: newTrackId,\r\n        name: `Overlay ${prev.overlays.length + 1}`,\r\n        type: 'overlay'\r\n      }]\r\n    }));\r\n  };\r\n\r\n  const addAudioTrack = () => {\r\n    const newTrackId = `audio-${Date.now()}`;\r\n    setTracks(prev => ({\r\n      ...prev,\r\n      audio: [...prev.audio, {\r\n        id: newTrackId,\r\n        name: `Audio ${prev.audio.length + 1}`,\r\n        type: 'audio'\r\n      }]\r\n    }));\r\n  };\r\n\r\n  const handlePlayPause = () => {\r\n    setIsPlaying(!isPlaying);\r\n  };\r\n\r\n  const seekTo = (time) => {\r\n    const newTime = Math.max(0, Math.min(videoDuration, time));\r\n    setCurrentTime(newTime);\r\n    \r\n    const content = getCurrentTimelineContent();\r\n    content.audio.forEach(audioItem => {\r\n      const audioElement = audioElementsRef.current.get(audioItem.id);\r\n      if (audioElement) {\r\n        const relativeTime = newTime - audioItem.startTime;\r\n        audioElement.currentTime = Math.max(0, relativeTime);\r\n      }\r\n    });\r\n  };\r\n\r\n  const removeFromLibrary = (itemId, type) => {\r\n    setMediaLibrary((prev) => ({\r\n      ...prev,\r\n      [type]: prev[type].filter((item) => item.id !== itemId),\r\n    }));\r\n  };\r\n\r\n  const removeFromTimeline = (itemId) => {\r\n    const audioElement = audioElementsRef.current.get(itemId);\r\n    if (audioElement) {\r\n      audioElement.pause();\r\n      audioElement.src = '';\r\n      audioElementsRef.current.delete(itemId);\r\n    }\r\n    \r\n    setTimelineItems((prev) => prev.filter((item) => item.id !== itemId));\r\n    setSelectedTimelineItem(null);\r\n  };\r\n\r\n  const formatTime = (seconds) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = Math.floor(seconds % 60);\r\n    return `${mins}:${secs.toString().padStart(2, \"0\")}`;\r\n  };\r\n\r\n  const handleTimelineClick = (e) => {\r\n    if (isDragging || isTimelineDragging) return;\r\n    \r\n    const rect = timelineRef.current.getBoundingClientRect();\r\n    const clickX = e.clientX - rect.left;\r\n    const timePerPixel = videoDuration / (rect.width * timelineZoom);\r\n    const clickTime = clickX * timePerPixel;\r\n    seekTo(clickTime);\r\n  };\r\n\r\n  const handleDragStart = (e, mediaItem) => {\r\n    setDraggedItem(mediaItem);\r\n    setIsDragging(true);\r\n    e.dataTransfer.effectAllowed = \"copy\";\r\n    e.dataTransfer.setData(\"text/plain\", \"\");\r\n  };\r\n\r\n  const handleDragEnd = () => {\r\n    setDraggedItem(null);\r\n    setDropPreview(null);\r\n    setIsDragging(false);\r\n  };\r\n\r\n  const handleTimelineItemDragStart = (e, timelineItem) => {\r\n    e.stopPropagation();\r\n    setDraggedTimelineItem(timelineItem);\r\n    setIsTimelineDragging(true);\r\n    \r\n    const rect = timelineRef.current.getBoundingClientRect();\r\n    const itemRect = e.target.getBoundingClientRect();\r\n    setDragOffset(e.clientX - itemRect.left);\r\n    \r\n    e.dataTransfer.effectAllowed = \"move\";\r\n    e.dataTransfer.setData(\"text/plain\", \"\");\r\n  };\r\n\r\n  const handleTimelineItemDragEnd = () => {\r\n    setDraggedTimelineItem(null);\r\n    setDropPreview(null);\r\n    setIsTimelineDragging(false);\r\n    setDragOffset(0);\r\n  };\r\n\r\n  const handleDragOver = (e) => {\r\n    if (!draggedItem && !draggedTimelineItem) return;\r\n    \r\n    e.preventDefault();\r\n    e.dataTransfer.dropEffect = draggedItem ? \"copy\" : \"move\";\r\n    \r\n    const timelineRect = timelineRef.current.getBoundingClientRect();\r\n    const dragX = e.clientX - timelineRect.left - (draggedTimelineItem ? dragOffset : 0);\r\n    const timePerPixel = videoDuration / (timelineRect.width * timelineZoom);\r\n    const dropTime = Math.max(0, dragX * timePerPixel);\r\n    \r\n    // Определяем на какой трек перетаскиваем\r\n    // Учитываем что теперь у нас есть заголовок временной линейки высотой 48px\r\n    const dragY = e.clientY - timelineRect.top;\r\n    const trackHeight = 60;\r\n    const timeRulerHeight = 48; // высота временной линейки\r\n    \r\n    const relativeY = dragY - timeRulerHeight;\r\n    const trackIndex = Math.floor(relativeY / trackHeight);\r\n    \r\n    const allTracks = [...tracks.overlays, ...tracks.main, ...tracks.audio];\r\n    const targetTrack = allTracks[trackIndex];\r\n    \r\n    if (draggedItem && targetTrack) {\r\n      const duration = draggedItem.duration || (draggedItem.type === \"image\" ? 5 : 10);\r\n      const testItem = { trackId: targetTrack.id, startTime: dropTime, duration };\r\n      \r\n      setDropPreview({\r\n        time: dropTime,\r\n        duration: duration,\r\n        trackId: targetTrack.id,\r\n        trackType: targetTrack.type,\r\n        isValid: !checkCollision(testItem)\r\n      });\r\n    } else if (draggedTimelineItem && targetTrack) {\r\n      const testItem = { \r\n        ...draggedTimelineItem, \r\n        startTime: dropTime,\r\n        trackId: targetTrack.id\r\n      };\r\n      \r\n      setDropPreview({\r\n        time: dropTime,\r\n        duration: draggedTimelineItem.duration,\r\n        trackId: targetTrack.id,\r\n        trackType: targetTrack.type,\r\n        isValid: !checkCollision(testItem, draggedTimelineItem.id)\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleDrop = (e) => {\r\n    if ((!draggedItem && !draggedTimelineItem) || !dropPreview) return;\r\n    \r\n    e.preventDefault();\r\n    \r\n    if (dropPreview.isValid) {\r\n      if (draggedItem) {\r\n        addToTimeline(draggedItem, dropPreview.time, dropPreview.trackId);\r\n      } else if (draggedTimelineItem) {\r\n        setTimelineItems(prev => prev.map(item => \r\n          item.id === draggedTimelineItem.id \r\n            ? { ...item, startTime: dropPreview.time, trackId: dropPreview.trackId, trackType: dropPreview.trackType }\r\n            : item\r\n        ));\r\n      }\r\n    }\r\n    \r\n    setDropPreview(null);\r\n    setDraggedItem(null);\r\n    setDraggedTimelineItem(null);\r\n    setIsDragging(false);\r\n    setIsTimelineDragging(false);\r\n  };\r\n\r\n  const handleDragLeave = (e) => {\r\n    if (!timelineRef.current?.contains(e.relatedTarget)) {\r\n      setDropPreview(null);\r\n    }\r\n  };\r\n\r\n  const getTimelineItemStyle = (item) => {\r\n    const allTracks = [...tracks.overlays, ...tracks.main, ...tracks.audio];\r\n    const trackIndex = allTracks.findIndex(track => track.id === item.trackId);\r\n    \r\n    return {\r\n      left: `${\r\n        (item.startTime / videoDuration) *\r\n        videoDuration *\r\n        20 *\r\n        timelineZoom\r\n      }px`,\r\n      width: `${\r\n        (item.duration / videoDuration) *\r\n        videoDuration *\r\n        20 *\r\n        timelineZoom\r\n      }px`,\r\n      top: `${trackIndex * 60 + 10}px`,\r\n    };\r\n  };\r\n\r\n  const getDropPreviewStyle = () => {\r\n    if (!dropPreview) return {};\r\n    \r\n    const allTracks = [...tracks.overlays, ...tracks.main, ...tracks.audio];\r\n    const trackIndex = allTracks.findIndex(track => track.id === dropPreview.trackId);\r\n    \r\n    return {\r\n      left: `${\r\n        (dropPreview.time / videoDuration) *\r\n        videoDuration *\r\n        20 *\r\n        timelineZoom\r\n      }px`,\r\n      width: `${\r\n        (dropPreview.duration / videoDuration) *\r\n        videoDuration *\r\n        20 *\r\n        timelineZoom\r\n      }px`,\r\n      top: `${trackIndex * 60 + 10}px`,\r\n    };\r\n  };\r\n\r\n  const getTrackColor = (trackType) => {\r\n    switch (trackType) {\r\n      case 'overlay': return 'bg-purple-500 border-purple-400';\r\n      case 'main': return 'bg-blue-500 border-blue-400';\r\n      case 'audio': return 'bg-green-500 border-green-400';\r\n      default: return 'bg-gray-500 border-gray-400';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-1 h-screen gap-4 p-4 bg-gray-100\">\r\n      {/* Media Library */}\r\n\r\n\r\n      {/* Main Content Area */}\r\n      <div className=\"flex-1 flex flex-col gap-4\">\r\n        {/* Video Preview */}\r\n        <div className=\"flex-1 bg-black rounded-2xl relative overflow-hidden shadow-sm\">\r\n          {currentVideoSource ? (\r\n            <div className=\"relative w-full h-full\">\r\n              {getCurrentTimelineContent().mainVideo ? (\r\n                <video\r\n                  ref={videoRef}\r\n                  src={currentVideoSource}\r\n                  className=\"w-full h-full object-contain rounded-2xl\"\r\n                  muted={isMuted}\r\n                />\r\n              ) : (\r\n                <img\r\n                  src={currentVideoSource}\r\n                  alt=\"Timeline content\"\r\n                  className=\"w-full h-full object-contain rounded-2xl\"\r\n                />\r\n              )}\r\n              \r\n              {/* Overlays */}\r\n              {getCurrentTimelineContent().overlays.map((item, index) => (\r\n                <div\r\n                  key={item.id}\r\n                  className=\"absolute top-4 right-4 w-32 h-24 border-2 border-white rounded-lg overflow-hidden shadow-lg\"\r\n                  style={{ \r\n                    top: `${4 + index * 100}px`,\r\n                    opacity: item.opacity || 1,\r\n                  }}\r\n                >\r\n                  {item.type === 'video' ? (\r\n                    <video\r\n                      src={item.url}\r\n                      className=\"w-full h-full object-cover\"\r\n                      muted\r\n                    />\r\n                  ) : (\r\n                    <img\r\n                      src={item.url}\r\n                      alt={item.name}\r\n                      className=\"w-full h-full object-cover\"\r\n                    />\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"w-full h-full flex items-center justify-center text-white\">\r\n              <div className=\"text-center\">\r\n                <div className=\"w-20 h-20 bg-gray-800 rounded-2xl flex items-center justify-center mx-auto mb-4\">\r\n                  <Film size={40} className=\"opacity-50\" />\r\n                </div>\r\n                <p className=\"text-xl opacity-75 font-medium\">\r\n                  No content at current time\r\n                </p>\r\n                <p className=\"text-sm opacity-50\">\r\n                  Drag media to timeline tracks\r\n                </p>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Player Controls */}\r\n          <div className=\"absolute bottom-6 left-1/2 transform -translate-x-1/2 bg-black/60 backdrop-blur-md rounded-2xl p-4\">\r\n            <div className=\"flex items-center space-x-6\">\r\n              <button\r\n                onClick={() => seekTo(Math.max(0, currentTime - 10))}\r\n                className=\"text-white hover:text-blue-400 transition-colors p-1 rounded-lg hover:bg-white/10\"\r\n              >\r\n                <SkipBack size={20} />\r\n              </button>\r\n              <button\r\n                onClick={handlePlayPause}\r\n                className=\"w-12 h-12 bg-white/20 hover:bg-white/30 rounded-2xl flex items-center justify-center text-white transition-all hover:scale-105\"\r\n              >\r\n                {isPlaying ? <Pause size={24} /> : <Play size={24} />}\r\n              </button>\r\n              <button\r\n                onClick={() =>\r\n                  seekTo(Math.min(videoDuration, currentTime + 10))\r\n                }\r\n                className=\"text-white hover:text-blue-400 transition-colors p-1 rounded-lg hover:bg-white/10\"\r\n              >\r\n                <SkipForward size={20} />\r\n              </button>\r\n              <div className=\"flex items-center space-x-3\">\r\n                <button\r\n                  onClick={() => setIsMuted(!isMuted)}\r\n                  className=\"text-white hover:text-blue-400 transition-colors p-1 rounded-lg hover:bg-white/10\"\r\n                >\r\n                  {isMuted ? <VolumeX size={20} /> : <Volume2 size={20} />}\r\n                </button>\r\n                <input\r\n                  type=\"range\"\r\n                  min=\"0\"\r\n                  max=\"1\"\r\n                  step=\"0.1\"\r\n                  value={volume}\r\n                  onChange={(e) => setVolume(parseFloat(e.target.value))}\r\n                  className=\"w-24 accent-blue-500\"\r\n                />\r\n              </div>\r\n              <span className=\"text-white text-sm font-medium min-w-0\">\r\n                {formatTime(currentTime)} / {formatTime(videoDuration)}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Timeline */}\r\n        <div \r\n          className={`h-96 bg-white rounded-2xl shadow-sm border-2 transition-all duration-200 overflow-hidden ${\r\n            isDragging || isTimelineDragging \r\n              ? \"border-blue-400 bg-blue-50/20\" \r\n              : \"border-gray-200\"\r\n          }`}\r\n          onDragOver={handleDragOver}\r\n          onDrop={handleDrop}\r\n          onDragLeave={handleDragLeave}\r\n        >\r\n          {/* Timeline Header */}\r\n          <div className=\"bg-gray-50 p-4 border-b border-gray-200\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h4 className=\"text-gray-800 font-semibold flex items-center space-x-2\">\r\n                <Film size={18} />\r\n                <span>Timeline</span>\r\n                {(isDragging || isTimelineDragging) && dropPreview && (\r\n                  <span className={dropPreview.isValid ? \"text-green-600\" : \"text-red-600\"}>\r\n                    - {dropPreview.isValid ? \"Drop to place\" : \"Position blocked\"}\r\n                  </span>\r\n                )}\r\n              </h4>\r\n              <div className=\"flex items-center space-x-6\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <span className=\"text-gray-600 text-sm font-medium\">Zoom:</span>\r\n                  <div className=\"bg-white rounded-xl p-2 border border-gray-200\">\r\n                    <input\r\n                      type=\"range\"\r\n                      min=\"0.5\"\r\n                      max=\"3\"\r\n                      step=\"0.1\"\r\n                      value={timelineZoom}\r\n                      onChange={(e) => setTimelineZoom(parseFloat(e.target.value))}\r\n                      className=\"w-24 accent-blue-500\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <button\r\n                    onClick={addOverlayTrack}\r\n                    className=\"p-2 text-purple-600 hover:text-purple-800 hover:bg-purple-50 rounded-xl transition-all duration-200\"\r\n                    title=\"Add Overlay Track\"\r\n                  >\r\n                    <Plus size={16} />\r\n                  </button>\r\n                  <button\r\n                    onClick={addAudioTrack}\r\n                    className=\"p-2 text-green-600 hover:text-green-800 hover:bg-green-50 rounded-xl transition-all duration-200\"\r\n                    title=\"Add Audio Track\"\r\n                  >\r\n                    <Music size={16} />\r\n                  </button>\r\n                  <button\r\n                    onClick={splitTimelineItem}\r\n                    disabled={!selectedTimelineItem}\r\n                    className={`p-2 rounded-xl transition-all duration-200 ${\r\n                      selectedTimelineItem \r\n                        ? \"text-red-600 hover:text-red-800 hover:bg-red-50\" \r\n                        : \"text-gray-400 cursor-not-allowed\"\r\n                    }`}\r\n                    title=\"Split Selected Item\"\r\n                  >\r\n                    <Scissors size={16} />\r\n                  </button>\r\n                  <button className=\"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-xl transition-all duration-200\">\r\n                    <Copy size={16} />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Timeline Content */}\r\n          <div className=\"flex-1 flex\">\r\n            {/* Track Labels - Fixed Left Side */}\r\n            <div className=\"w-48 bg-gray-50 border-r border-gray-200 flex-shrink-0\">\r\n              {/* Empty space above track labels to align with time ruler */}\r\n              <div className=\"h-12 border-b border-gray-200\"></div>\r\n              \r\n              {/* Track Labels */}\r\n              <div>\r\n                {/* Overlay Tracks */}\r\n                {tracks.overlays.map((track, index) => (\r\n                  <div\r\n                    key={track.id}\r\n                    className=\"h-15 flex items-center px-4 border-b border-gray-100 text-sm font-medium text-purple-700 bg-purple-50\"\r\n                    style={{ height: '60px' }}\r\n                  >\r\n                    <Layers size={16} className=\"mr-2\" />\r\n                    {track.name}\r\n                  </div>\r\n                ))}\r\n                \r\n                {/* Main Video Track */}\r\n                {tracks.main.map((track, index) => (\r\n                  <div\r\n                    key={track.id}\r\n                    className=\"h-15 flex items-center px-4 border-b border-gray-100 text-sm font-medium text-blue-700 bg-blue-50\"\r\n                    style={{ height: '60px' }}\r\n                  >\r\n                    <Video size={16} className=\"mr-2\" />\r\n                    {track.name}\r\n                  </div>\r\n                ))}\r\n                \r\n                {/* Audio Tracks */}\r\n                {tracks.audio.map((track, index) => (\r\n                  <div\r\n                    key={track.id}\r\n                    className=\"h-15 flex items-center px-4 border-b border-gray-100 text-sm font-medium text-green-700 bg-green-50\"\r\n                    style={{ height: '60px' }}\r\n                  >\r\n                    <Music size={16} className=\"mr-2\" />\r\n                    {track.name}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Timeline Area - Right Side */}\r\n            <div \r\n              className=\"flex-1 relative overflow-x-auto\"\r\n              ref={timelineRef}\r\n              onClick={handleTimelineClick}\r\n            >\r\n              {/* Time Ruler */}\r\n              <div className=\"h-12 bg-gray-50 border-b border-gray-200 relative\">\r\n                {Array.from({ length: Math.ceil(videoDuration / 5) + 1 }, (_, i) => (\r\n                  <div\r\n                    key={i}\r\n                    className=\"absolute top-0 h-full border-l border-gray-300\"\r\n                    style={{ left: `${i * 100 * timelineZoom}px` }}\r\n                  >\r\n                    <span className=\"text-xs text-gray-600 ml-2 mt-2 inline-block font-medium\">\r\n                      {formatTime(i * 5)}\r\n                    </span>\r\n                  </div>\r\n                ))}\r\n                {/* Playhead */}\r\n                <div\r\n                  className=\"absolute top-0 w-0.5 h-full bg-red-500 z-20 shadow-sm\"\r\n                  style={{\r\n                    left: `${(currentTime / videoDuration) * videoDuration * 20 * timelineZoom}px`,\r\n                  }}\r\n                />\r\n              </div>\r\n\r\n              {/* Track Area */}\r\n              <div className=\"relative\" style={{ height: `${(tracks.overlays.length + tracks.main.length + tracks.audio.length) * 60}px` }}>\r\n                {/* Timeline Items */}\r\n                {timelineItems.map((item) => (\r\n                  <div\r\n                    key={item.id}\r\n                    draggable=\"true\"\r\n                    onDragStart={(e) => handleTimelineItemDragStart(e, item)}\r\n                    onDragEnd={handleTimelineItemDragEnd}\r\n                    className={`absolute h-10 rounded-lg border-2 cursor-grab active:cursor-grabbing transition-all shadow-sm hover:shadow-md ${\r\n                      getTrackColor(item.trackType)\r\n                    } ${\r\n                      selectedTimelineItem?.id === item.id ? \"ring-2 ring-blue-300\" : \"\"\r\n                    } ${\r\n                      draggedTimelineItem?.id === item.id ? \"opacity-50 z-30\" : \"\"\r\n                    }`}\r\n                    style={getTimelineItemStyle(item)}\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      setSelectedTimelineItem(item);\r\n                    }}\r\n                  >\r\n                    <div className=\"p-2 text-white text-xs truncate font-medium\">\r\n                      {item.name}\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n                \r\n                {/* Drop Preview */}\r\n                {dropPreview && (\r\n                  <div\r\n                    className={`absolute h-10 rounded-lg border-2 border-dashed opacity-75 ${\r\n                      dropPreview.isValid \r\n                        ? `${getTrackColor(dropPreview.trackType)} bg-opacity-50` \r\n                        : \"bg-red-300 border-red-500\"\r\n                    }`}\r\n                    style={getDropPreviewStyle()}\r\n                  />\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoEditor;"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,MAAM,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AAChE,SACEC,MAAM,EACNC,IAAI,EACJC,KAAK,EACLC,OAAO,EACPC,KAAK,EACLC,KAAK,EACLC,QAAQ,EACRC,WAAW,EACXC,OAAO,EACPC,IAAI,EACJC,MAAM,EACNC,QAAQ,EACRC,KAAK,EACLC,IAAI,EACJC,IAAI,EACJC,MAAM,QACD,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtB,MAAMC,WAAW,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACxB,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGzB,QAAQ,CAAC;IAC/C0B,MAAM,EAAE,EAAE;IACVC,MAAM,EAAE,EAAE;IACVC,MAAM,EAAE;EACV,CAAC,CAAC;EACF,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAG9B,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAAC+B,WAAW,EAAEC,cAAc,CAAC,GAAGhC,QAAQ,CAAC,CAAC,CAAC;EACjD,MAAM,CAACiC,aAAa,EAAEC,gBAAgB,CAAC,GAAGlC,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACmC,oBAAoB,EAAEC,uBAAuB,CAAC,GAAGpC,QAAQ,CAAC,IAAI,CAAC;EACtE,MAAM,CAACqC,YAAY,EAAEC,eAAe,CAAC,GAAGtC,QAAQ,CAAC,CAAC,CAAC;EACnD,MAAM,CAACuC,SAAS,EAAEC,YAAY,CAAC,GAAGxC,QAAQ,CAAC,QAAQ,CAAC;EACpD,MAAM,CAACyC,MAAM,EAAEC,SAAS,CAAC,GAAG1C,QAAQ,CAAC,CAAC,CAAC;EACvC,MAAM,CAAC2C,OAAO,EAAEC,UAAU,CAAC,GAAG5C,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAAC6C,SAAS,EAAEC,YAAY,CAAC,GAAG9C,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAAC+C,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGhD,QAAQ,CAAC,IAAI,CAAC;EAClE,MAAM,CAACiD,WAAW,EAAEC,cAAc,CAAC,GAAGlD,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAACmD,mBAAmB,EAAEC,sBAAsB,CAAC,GAAGpD,QAAQ,CAAC,IAAI,CAAC;EACpE,MAAM,CAACqD,WAAW,EAAEC,cAAc,CAAC,GAAGtD,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAACuD,UAAU,EAAEC,aAAa,CAAC,GAAGxD,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAACyD,kBAAkB,EAAEC,qBAAqB,CAAC,GAAG1D,QAAQ,CAAC,KAAK,CAAC;EACnE,MAAM,CAAC2D,UAAU,EAAEC,aAAa,CAAC,GAAG5D,QAAQ,CAAC,CAAC,CAAC;;EAE/C;EACA,MAAM,CAAC6D,MAAM,EAAEC,SAAS,CAAC,GAAG9D,QAAQ,CAAC;IACnC+D,QAAQ,EAAE,CACR;MAAEC,EAAE,EAAE,WAAW;MAAEC,IAAI,EAAE,WAAW;MAAEC,IAAI,EAAE;IAAU,CAAC,EACvD;MAAEF,EAAE,EAAE,WAAW;MAAEC,IAAI,EAAE,WAAW;MAAEC,IAAI,EAAE;IAAU,CAAC,CACxD;IACDC,IAAI,EAAE,CACJ;MAAEH,EAAE,EAAE,YAAY;MAAEC,IAAI,EAAE,YAAY;MAAEC,IAAI,EAAE;IAAO,CAAC,CACvD;IACDE,KAAK,EAAE,CACL;MAAEJ,EAAE,EAAE,SAAS;MAAEC,IAAI,EAAE,SAAS;MAAEC,IAAI,EAAE;IAAQ,CAAC,EACjD;MAAEF,EAAE,EAAE,SAAS;MAAEC,IAAI,EAAE,SAAS;MAAEC,IAAI,EAAE;IAAQ,CAAC;EAErD,CAAC,CAAC;EAEF,MAAMG,QAAQ,GAAGpE,MAAM,CAAC,IAAI,CAAC;EAC7B,MAAMqE,YAAY,GAAGrE,MAAM,CAAC,IAAI,CAAC;EACjC,MAAMsE,aAAa,GAAGtE,MAAM,CAAC,IAAI,CAAC;EAClC,MAAMuE,aAAa,GAAGvE,MAAM,CAAC,IAAI,CAAC;EAClC,MAAMwE,WAAW,GAAGxE,MAAM,CAAC,IAAI,CAAC;EAChC,MAAMyE,WAAW,GAAGzE,MAAM,CAAC,IAAI,CAAC;EAChC,MAAM0E,gBAAgB,GAAG1E,MAAM,CAAC,IAAI2E,GAAG,CAAC,CAAC,CAAC;EAE1C,MAAMC,yBAAyB,GAAG1E,WAAW,CAAC,MAAM;IAClD,MAAM2E,YAAY,GAAGjD,aAAa,CAACkD,MAAM,CACtCC,IAAI,IACHjD,WAAW,IAAIiD,IAAI,CAACC,SAAS,IAC7BlD,WAAW,GAAGiD,IAAI,CAACC,SAAS,GAAGD,IAAI,CAACE,QACxC,CAAC;IAED,OAAO;MACLC,SAAS,EAAEL,YAAY,CAACM,IAAI,CAACJ,IAAI,IAAIA,IAAI,CAACK,SAAS,KAAK,MAAM,IAAIL,IAAI,CAACd,IAAI,KAAK,OAAO,CAAC;MACxFH,QAAQ,EAAEe,YAAY,CAACC,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACK,SAAS,KAAK,SAAS,CAAC;MACnEjB,KAAK,EAAEU,YAAY,CAACC,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACK,SAAS,KAAK,OAAO;IAC/D,CAAC;EACH,CAAC,EAAE,CAACtD,WAAW,EAAEF,aAAa,CAAC,CAAC;EAEhC,MAAMyD,kBAAkB,GAAGnF,WAAW,CAAEoF,SAAS,IAAK;IACpD,IAAI,CAACZ,gBAAgB,CAACa,OAAO,CAACC,GAAG,CAACF,SAAS,CAACvB,EAAE,CAAC,EAAE;MAC/C,MAAMI,KAAK,GAAGsB,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC;MAC7CvB,KAAK,CAACwB,GAAG,GAAGL,SAAS,CAACM,GAAG;MACzBzB,KAAK,CAAC3B,MAAM,GAAG,CAAC8C,SAAS,CAAC9C,MAAM,IAAI,CAAC,IAAIA,MAAM;MAC/C2B,KAAK,CAAC0B,KAAK,GAAGnD,OAAO;MACrByB,KAAK,CAAC2B,OAAO,GAAG,UAAU;MAC1BpB,gBAAgB,CAACa,OAAO,CAACQ,GAAG,CAACT,SAAS,CAACvB,EAAE,EAAEI,KAAK,CAAC;IACnD;IACA,OAAOO,gBAAgB,CAACa,OAAO,CAACS,GAAG,CAACV,SAAS,CAACvB,EAAE,CAAC;EACnD,CAAC,EAAE,CAACvB,MAAM,EAAEE,OAAO,CAAC,CAAC;EAErB,MAAMuD,aAAa,GAAG/F,WAAW,CAAC,CAACoF,SAAS,EAAEY,YAAY,KAAK;IAC7D,MAAMC,YAAY,GAAGzB,gBAAgB,CAACa,OAAO,CAACS,GAAG,CAACV,SAAS,CAACvB,EAAE,CAAC;IAC/D,IAAIoC,YAAY,EAAE;MAChB,MAAMC,QAAQ,GAAGC,IAAI,CAACC,GAAG,CAACH,YAAY,CAACrE,WAAW,GAAGoE,YAAY,CAAC;MAClE,IAAIE,QAAQ,GAAG,GAAG,EAAE;QAClBD,YAAY,CAACrE,WAAW,GAAGuE,IAAI,CAACE,GAAG,CAAC,CAAC,EAAEL,YAAY,CAAC;MACtD;IACF;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMM,cAAc,GAAGtG,WAAW,CAAC,CAACuG,OAAO,EAAEC,SAAS,GAAG,IAAI,KAAK;IAChE,OAAO9E,aAAa,CAAC+E,IAAI,CAAC5B,IAAI,IAAI;MAChC,IAAIA,IAAI,CAAChB,EAAE,KAAK2C,SAAS,EAAE,OAAO,KAAK;MACvC,IAAI3B,IAAI,CAAC6B,OAAO,KAAKH,OAAO,CAACG,OAAO,EAAE,OAAO,KAAK;MAElD,MAAMC,SAAS,GAAG9B,IAAI,CAACC,SAAS;MAChC,MAAM8B,OAAO,GAAG/B,IAAI,CAACC,SAAS,GAAGD,IAAI,CAACE,QAAQ;MAC9C,MAAM8B,QAAQ,GAAGN,OAAO,CAACzB,SAAS;MAClC,MAAMgC,MAAM,GAAGP,OAAO,CAACzB,SAAS,GAAGyB,OAAO,CAACxB,QAAQ;MAEnD,OAAQ8B,QAAQ,GAAGD,OAAO,IAAIE,MAAM,GAAGH,SAAS;IAClD,CAAC,CAAC;EACJ,CAAC,EAAE,CAACjF,aAAa,CAAC,CAAC;EAEnB,MAAMqF,yBAAyB,GAAG/G,WAAW,CAAC,CAAC0G,OAAO,EAAE3B,QAAQ,EAAEiC,cAAc,GAAG,CAAC,KAAK;IACvF,MAAMC,UAAU,GAAGvF,aAAa,CAC7BkD,MAAM,CAACC,IAAI,IAAIA,IAAI,CAAC6B,OAAO,KAAKA,OAAO,CAAC,CACxCQ,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,CAACrC,SAAS,GAAGsC,CAAC,CAACtC,SAAS,CAAC;IAE5C,IAAIkC,cAAc,IAAI,CAAC,EAAE;MACvB,MAAMK,QAAQ,GAAG;QAAEX,OAAO;QAAE5B,SAAS,EAAEkC,cAAc;QAAEjC;MAAS,CAAC;MACjE,IAAI,CAACuB,cAAc,CAACe,QAAQ,CAAC,EAAE;QAC7B,OAAOL,cAAc;MACvB;IACF;IAEA,KAAK,IAAIM,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGL,UAAU,CAACM,MAAM,EAAED,CAAC,EAAE,EAAE;MAC1C,MAAME,WAAW,GAAGP,UAAU,CAACK,CAAC,CAAC;MACjC,MAAMG,QAAQ,GAAGR,UAAU,CAACK,CAAC,GAAG,CAAC,CAAC;MAElC,IAAIA,CAAC,KAAK,CAAC,IAAIE,WAAW,CAAC1C,SAAS,IAAIC,QAAQ,EAAE;QAChD,OAAO,CAAC;MACV;MAEA,IAAI0C,QAAQ,EAAE;QACZ,MAAMC,QAAQ,GAAGF,WAAW,CAAC1C,SAAS,GAAG0C,WAAW,CAACzC,QAAQ;QAC7D,MAAM4C,MAAM,GAAGF,QAAQ,CAAC3C,SAAS;QACjC,MAAM8C,OAAO,GAAGD,MAAM,GAAGD,QAAQ;QAEjC,IAAIE,OAAO,IAAI7C,QAAQ,EAAE;UACvB,OAAO2C,QAAQ;QACjB;MACF;IACF;IAEA,IAAIT,UAAU,CAACM,MAAM,KAAK,CAAC,EAAE,OAAO,CAAC;IACrC,MAAMM,QAAQ,GAAGZ,UAAU,CAACA,UAAU,CAACM,MAAM,GAAG,CAAC,CAAC;IAClD,OAAOM,QAAQ,CAAC/C,SAAS,GAAG+C,QAAQ,CAAC9C,QAAQ;EAC/C,CAAC,EAAE,CAACrD,aAAa,EAAE4E,cAAc,CAAC,CAAC;;EAEnC;EACA,MAAMwB,iBAAiB,GAAG9H,WAAW,CAAC,MAAM;IAC1C,IAAI,CAACgC,oBAAoB,EAAE;IAE3B,MAAM6C,IAAI,GAAG7C,oBAAoB;IACjC,MAAM+F,SAAS,GAAGnG,WAAW;;IAE7B;IACA,IAAImG,SAAS,IAAIlD,IAAI,CAACC,SAAS,IAAIiD,SAAS,IAAIlD,IAAI,CAACC,SAAS,GAAGD,IAAI,CAACE,QAAQ,EAAE;MAC9E;IACF;IAEA,MAAMiD,iBAAiB,GAAGD,SAAS,GAAGlD,IAAI,CAACC,SAAS;IACpD,MAAMmD,eAAe,GAAGF,SAAS;IACjC,MAAMG,kBAAkB,GAAGrD,IAAI,CAACE,QAAQ,GAAGiD,iBAAiB;;IAE5D;IACA,MAAMG,UAAU,GAAG;MACjB,GAAGtD,IAAI;MACPhB,EAAE,EAAEuE,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGlC,IAAI,CAACmC,MAAM,CAAC,CAAC;MAC9BxD,SAAS,EAAEmD,eAAe;MAC1BlD,QAAQ,EAAEmD;IACZ,CAAC;;IAED;IACA,MAAMK,gBAAgB,GAAG;MACvB,GAAG1D,IAAI;MACPE,QAAQ,EAAEiD;IACZ,CAAC;IAEDrG,gBAAgB,CAAC6G,IAAI,IAAIA,IAAI,CAACC,GAAG,CAACC,YAAY,IAC5CA,YAAY,CAAC7E,EAAE,KAAKgB,IAAI,CAAChB,EAAE,GAAG0E,gBAAgB,GAAGG,YACnD,CAAC,CAACC,MAAM,CAACR,UAAU,CAAC,CAAC;IAErBlG,uBAAuB,CAAC,IAAI,CAAC;EAC/B,CAAC,EAAE,CAACD,oBAAoB,EAAEJ,WAAW,CAAC,CAAC;;EAEvC;EACA7B,SAAS,CAAC,MAAM;IACd,MAAM6I,OAAO,GAAGlE,yBAAyB,CAAC,CAAC;;IAE3C;IACA,IAAIkE,OAAO,CAAC5D,SAAS,IAAI4D,OAAO,CAAC5D,SAAS,CAACU,GAAG,KAAK9C,kBAAkB,EAAE;MACrEC,qBAAqB,CAAC+F,OAAO,CAAC5D,SAAS,CAACU,GAAG,CAAC;MAC5C,IAAIxB,QAAQ,CAACmB,OAAO,EAAE;QACpB,MAAMW,YAAY,GAAGpE,WAAW,GAAGgH,OAAO,CAAC5D,SAAS,CAACF,SAAS;QAC9DZ,QAAQ,CAACmB,OAAO,CAACzD,WAAW,GAAGuE,IAAI,CAACE,GAAG,CAAC,CAAC,EAAEL,YAAY,CAAC;MAC1D;IACF,CAAC,MAAM,IAAI,CAAC4C,OAAO,CAAC5D,SAAS,IAAI4D,OAAO,CAAChF,QAAQ,CAACqB,IAAI,CAAC4D,CAAC,IAAIA,CAAC,CAAC9E,IAAI,KAAK,OAAO,CAAC,EAAE;MAC/E,MAAM+E,UAAU,GAAGF,OAAO,CAAChF,QAAQ,CAACqB,IAAI,CAAC4D,CAAC,IAAIA,CAAC,CAAC9E,IAAI,KAAK,OAAO,CAAC;MACjElB,qBAAqB,CAACiG,UAAU,CAACpD,GAAG,CAAC;IACvC,CAAC,MAAM,IAAI,CAACkD,OAAO,CAAC5D,SAAS,IAAI,CAAC4D,OAAO,CAAChF,QAAQ,CAACqB,IAAI,CAAC4D,CAAC,IAAIA,CAAC,CAAC9E,IAAI,KAAK,OAAO,CAAC,EAAE;MAChFlB,qBAAqB,CAAC,IAAI,CAAC;IAC7B;;IAEA;IACA,MAAMkG,eAAe,GAAG,IAAIC,GAAG,CAACJ,OAAO,CAAC3E,KAAK,CAACwE,GAAG,CAAC5D,IAAI,IAAIA,IAAI,CAAChB,EAAE,CAAC,CAAC;IAEnEW,gBAAgB,CAACa,OAAO,CAAC4D,OAAO,CAAC,CAAChD,YAAY,EAAEpC,EAAE,KAAK;MACrD,IAAI,CAACkF,eAAe,CAACzD,GAAG,CAACzB,EAAE,CAAC,EAAE;QAC5B,IAAI,CAACoC,YAAY,CAACiD,MAAM,EAAE;UACxBjD,YAAY,CAACkD,KAAK,CAAC,CAAC;QACtB;MACF;IACF,CAAC,CAAC;IAEFP,OAAO,CAAC3E,KAAK,CAACgF,OAAO,CAAC7D,SAAS,IAAI;MACjC,MAAMa,YAAY,GAAGd,kBAAkB,CAACC,SAAS,CAAC;MAClD,MAAMY,YAAY,GAAGpE,WAAW,GAAGwD,SAAS,CAACN,SAAS;MAEtDmB,YAAY,CAAC3D,MAAM,GAAG,CAAC8C,SAAS,CAAC9C,MAAM,IAAI,CAAC,IAAIA,MAAM;MACtD2D,YAAY,CAACN,KAAK,GAAGnD,OAAO;MAE5B,IAAIE,SAAS,IAAIsD,YAAY,IAAI,CAAC,EAAE;QAClCD,aAAa,CAACX,SAAS,EAAEY,YAAY,CAAC;QACtC,IAAIC,YAAY,CAACiD,MAAM,EAAE;UACvBjD,YAAY,CAACmD,IAAI,CAAC,CAAC,CAACC,KAAK,CAACC,OAAO,CAACC,KAAK,CAAC;QAC1C;MACF,CAAC,MAAM;QACL,IAAI,CAACtD,YAAY,CAACiD,MAAM,EAAE;UACxBjD,YAAY,CAACkD,KAAK,CAAC,CAAC;QACtB;MACF;IACF,CAAC,CAAC;EAEJ,CAAC,EAAE,CAACvH,WAAW,EAAEF,aAAa,EAAEgD,yBAAyB,EAAEhC,SAAS,EAAEJ,MAAM,EAAEE,OAAO,EAAE2C,kBAAkB,EAAEY,aAAa,EAAEnD,kBAAkB,CAAC,CAAC;EAE9I7C,SAAS,CAAC,MAAM;IACd,IAAI2C,SAAS,EAAE;MACb6B,WAAW,CAACc,OAAO,GAAGmE,WAAW,CAAC,MAAM;QACtC3H,cAAc,CAAE2G,IAAI,IAAK;UACvB,MAAMiB,OAAO,GAAGjB,IAAI,GAAG,GAAG;UAC1B,IAAIiB,OAAO,IAAI3H,aAAa,EAAE;YAC5Ba,YAAY,CAAC,KAAK,CAAC;YACnB,OAAOb,aAAa;UACtB;UACA,OAAO2H,OAAO;QAChB,CAAC,CAAC;MACJ,CAAC,EAAE,GAAG,CAAC;IACT,CAAC,MAAM;MACL,IAAIlF,WAAW,CAACc,OAAO,EAAE;QACvBqE,aAAa,CAACnF,WAAW,CAACc,OAAO,CAAC;MACpC;IACF;IAEA,OAAO,MAAM;MACX,IAAId,WAAW,CAACc,OAAO,EAAE;QACvBqE,aAAa,CAACnF,WAAW,CAACc,OAAO,CAAC;MACpC;IACF,CAAC;EACH,CAAC,EAAE,CAAC3C,SAAS,EAAEZ,aAAa,CAAC,CAAC;EAE9B/B,SAAS,CAAC,MAAM;IACd,IAAImE,QAAQ,CAACmB,OAAO,IAAIzC,kBAAkB,EAAE;MAC1C,MAAMgG,OAAO,GAAGlE,yBAAyB,CAAC,CAAC;MAC3C,IAAIkE,OAAO,CAAC5D,SAAS,EAAE;QACrB,MAAMgB,YAAY,GAAGpE,WAAW,GAAGgH,OAAO,CAAC5D,SAAS,CAACF,SAAS;QAC9D,MAAMoB,QAAQ,GAAGC,IAAI,CAACC,GAAG,CAAClC,QAAQ,CAACmB,OAAO,CAACzD,WAAW,GAAGoE,YAAY,CAAC;QAEtE,IAAIE,QAAQ,GAAG,GAAG,EAAE;UAClBhC,QAAQ,CAACmB,OAAO,CAACzD,WAAW,GAAGuE,IAAI,CAACE,GAAG,CAAC,CAAC,EAAEL,YAAY,CAAC;QAC1D;QAEA,IAAItD,SAAS,IAAIwB,QAAQ,CAACmB,OAAO,CAAC6D,MAAM,EAAE;UACxChF,QAAQ,CAACmB,OAAO,CAAC+D,IAAI,CAAC,CAAC,CAACC,KAAK,CAACC,OAAO,CAACC,KAAK,CAAC;QAC9C,CAAC,MAAM,IAAI,CAAC7G,SAAS,IAAI,CAACwB,QAAQ,CAACmB,OAAO,CAAC6D,MAAM,EAAE;UACjDhF,QAAQ,CAACmB,OAAO,CAAC8D,KAAK,CAAC,CAAC;QAC1B;MACF;IACF;EACF,CAAC,EAAE,CAACvH,WAAW,EAAEgB,kBAAkB,EAAE8B,yBAAyB,EAAEhC,SAAS,CAAC,CAAC;EAE3E3C,SAAS,CAAC,MAAM;IACd,MAAMgJ,eAAe,GAAG,IAAIC,GAAG,CAC7BtH,aAAa,CACVkD,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACd,IAAI,KAAK,OAAO,CAAC,CACrC0E,GAAG,CAAC5D,IAAI,IAAIA,IAAI,CAAChB,EAAE,CACxB,CAAC;IAEDW,gBAAgB,CAACa,OAAO,CAAC4D,OAAO,CAAC,CAAChD,YAAY,EAAEpC,EAAE,KAAK;MACrD,IAAI,CAACkF,eAAe,CAACzD,GAAG,CAACzB,EAAE,CAAC,EAAE;QAC5BoC,YAAY,CAACkD,KAAK,CAAC,CAAC;QACpBlD,YAAY,CAACR,GAAG,GAAG,EAAE;QACrBjB,gBAAgB,CAACa,OAAO,CAACsE,MAAM,CAAC9F,EAAE,CAAC;MACrC;IACF,CAAC,CAAC;EACJ,CAAC,EAAE,CAACnC,aAAa,CAAC,CAAC;EAEnB,MAAMkI,iBAAiB,GAAIC,KAAK,IAAK;IACnC,MAAMC,KAAK,GAAGD,KAAK,CAACE,MAAM,CAACD,KAAK,GAAGE,KAAK,CAACC,IAAI,CAACJ,KAAK,CAACE,MAAM,CAACD,KAAK,CAAC,GAAG,EAAE;IACtEA,KAAK,CAACb,OAAO,CAAEiB,IAAI,IAAK;MACtB,MAAMxE,GAAG,GAAGyE,GAAG,CAACC,eAAe,CAACF,IAAI,CAAC;MACrC,MAAMG,QAAQ,GAAG;QACfxG,EAAE,EAAEuE,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGlC,IAAI,CAACmC,MAAM,CAAC,CAAC;QAC9BxE,IAAI,EAAEoG,IAAI,CAACpG,IAAI;QACf4B,GAAG,EAAEA,GAAG;QACRwE,IAAI,EAAEA,IAAI;QACVnF,QAAQ,EAAE,EAAE;QACZhB,IAAI,EAAE;MACR,CAAC;MAEDzC,eAAe,CAAEkH,IAAI,KAAM;QACzB,GAAGA,IAAI;QACPjH,MAAM,EAAE,CAAC,GAAGiH,IAAI,CAACjH,MAAM,EAAE8I,QAAQ;MACnC,CAAC,CAAC,CAAC;IACL,CAAC,CAAC;EACJ,CAAC;EAED,MAAMC,iBAAiB,GAAIT,KAAK,IAAK;IACnC,MAAMC,KAAK,GAAGD,KAAK,CAACE,MAAM,CAACD,KAAK,GAAGE,KAAK,CAACC,IAAI,CAACJ,KAAK,CAACE,MAAM,CAACD,KAAK,CAAC,GAAG,EAAE;IACtEA,KAAK,CAACb,OAAO,CAAEiB,IAAI,IAAK;MACtB,MAAMxE,GAAG,GAAGyE,GAAG,CAACC,eAAe,CAACF,IAAI,CAAC;MACrC,MAAMK,QAAQ,GAAG;QACf1G,EAAE,EAAEuE,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGlC,IAAI,CAACmC,MAAM,CAAC,CAAC;QAC9BxE,IAAI,EAAEoG,IAAI,CAACpG,IAAI;QACf4B,GAAG,EAAEA,GAAG;QACRwE,IAAI,EAAEA,IAAI;QACVnF,QAAQ,EAAE,EAAE;QACZhB,IAAI,EAAE;MACR,CAAC;MAEDzC,eAAe,CAAEkH,IAAI,KAAM;QACzB,GAAGA,IAAI;QACPhH,MAAM,EAAE,CAAC,GAAGgH,IAAI,CAAChH,MAAM,EAAE+I,QAAQ;MACnC,CAAC,CAAC,CAAC;IACL,CAAC,CAAC;EACJ,CAAC;EAED,MAAMC,iBAAiB,GAAIX,KAAK,IAAK;IACnC,MAAMC,KAAK,GAAGD,KAAK,CAACE,MAAM,CAACD,KAAK,GAAGE,KAAK,CAACC,IAAI,CAACJ,KAAK,CAACE,MAAM,CAACD,KAAK,CAAC,GAAG,EAAE;IACtEA,KAAK,CAACb,OAAO,CAAEiB,IAAI,IAAK;MACtB,MAAMxE,GAAG,GAAGyE,GAAG,CAACC,eAAe,CAACF,IAAI,CAAC;MACrC,MAAMO,QAAQ,GAAG;QACf5G,EAAE,EAAEuE,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGlC,IAAI,CAACmC,MAAM,CAAC,CAAC;QAC9BxE,IAAI,EAAEoG,IAAI,CAACpG,IAAI;QACf4B,GAAG,EAAEA,GAAG;QACRwE,IAAI,EAAEA,IAAI;QACVnG,IAAI,EAAE;MACR,CAAC;MAEDzC,eAAe,CAAEkH,IAAI,KAAM;QACzB,GAAGA,IAAI;QACP/G,MAAM,EAAE,CAAC,GAAG+G,IAAI,CAAC/G,MAAM,EAAEgJ,QAAQ;MACnC,CAAC,CAAC,CAAC;IACL,CAAC,CAAC;EACJ,CAAC;EAED,MAAMC,aAAa,GAAGA,CAACC,SAAS,EAAE7F,SAAS,GAAG,IAAI,EAAE8F,aAAa,GAAG,IAAI,KAAK;IAC3E,IAAI1F,SAAS,EAAEwB,OAAO;;IAEtB;IACA,IAAIiE,SAAS,CAAC5G,IAAI,KAAK,OAAO,EAAE;MAC9BmB,SAAS,GAAG0F,aAAa,IAAIA,aAAa,CAACC,UAAU,CAAC,SAAS,CAAC,GAAG,SAAS,GAAG,MAAM;MACrFnE,OAAO,GAAGkE,aAAa,IAAI,YAAY;IACzC,CAAC,MAAM,IAAID,SAAS,CAAC5G,IAAI,KAAK,OAAO,EAAE;MACrCmB,SAAS,GAAG,SAAS;MACrBwB,OAAO,GAAGkE,aAAa,IAAI,WAAW;IACxC,CAAC,MAAM,IAAID,SAAS,CAAC5G,IAAI,KAAK,OAAO,EAAE;MACrCmB,SAAS,GAAG,OAAO;MACnBwB,OAAO,GAAGkE,aAAa,IAAI,SAAS;IACtC;IAEA,MAAM7F,QAAQ,GAAG4F,SAAS,CAAC5F,QAAQ,KAAK4F,SAAS,CAAC5G,IAAI,KAAK,OAAO,GAAG,CAAC,GAAG,EAAE,CAAC;IAC5E,MAAM+G,cAAc,GAAGhG,SAAS,KAAK,IAAI,GAAGA,SAAS,GACnDiC,yBAAyB,CAACL,OAAO,EAAE3B,QAAQ,CAAC;IAE9C,MAAMgG,eAAe,GAAG;MACtBlH,EAAE,EAAEuE,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGlC,IAAI,CAACmC,MAAM,CAAC,CAAC;MAC9B0C,OAAO,EAAEL,SAAS,CAAC9G,EAAE;MACrBE,IAAI,EAAE4G,SAAS,CAAC5G,IAAI;MACpBD,IAAI,EAAE6G,SAAS,CAAC7G,IAAI;MACpB4B,GAAG,EAAEiF,SAAS,CAACjF,GAAG;MAClBZ,SAAS,EAAEgG,cAAc;MACzB/F,QAAQ,EAAEA,QAAQ;MAClB2B,OAAO,EAAEA,OAAO;MAChBxB,SAAS,EAAEA,SAAS;MACpB5C,MAAM,EAAE,CAAC;MACT2I,OAAO,EAAE;IACX,CAAC;IAED,IAAI,CAAC3E,cAAc,CAACyE,eAAe,CAAC,EAAE;MACpCpJ,gBAAgB,CAAE6G,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAEuC,eAAe,CAAC,CAAC;MAEtD,MAAMG,UAAU,GAAGH,eAAe,CAACjG,SAAS,GAAGiG,eAAe,CAAChG,QAAQ;MACvE,IAAImG,UAAU,GAAGpJ,aAAa,EAAE;QAC9BC,gBAAgB,CAACmJ,UAAU,CAAC;MAC9B;IACF;EACF,CAAC;EAED,MAAMC,eAAe,GAAGA,CAAA,KAAM;IAC5B,MAAMC,UAAU,GAAG,WAAWhD,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;IAC1C1E,SAAS,CAAC6E,IAAI,KAAK;MACjB,GAAGA,IAAI;MACP5E,QAAQ,EAAE,CAAC,GAAG4E,IAAI,CAAC5E,QAAQ,EAAE;QAC3BC,EAAE,EAAEuH,UAAU;QACdtH,IAAI,EAAE,WAAW0E,IAAI,CAAC5E,QAAQ,CAAC2D,MAAM,GAAG,CAAC,EAAE;QAC3CxD,IAAI,EAAE;MACR,CAAC;IACH,CAAC,CAAC,CAAC;EACL,CAAC;EAED,MAAMsH,aAAa,GAAGA,CAAA,KAAM;IAC1B,MAAMD,UAAU,GAAG,SAAShD,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;IACxC1E,SAAS,CAAC6E,IAAI,KAAK;MACjB,GAAGA,IAAI;MACPvE,KAAK,EAAE,CAAC,GAAGuE,IAAI,CAACvE,KAAK,EAAE;QACrBJ,EAAE,EAAEuH,UAAU;QACdtH,IAAI,EAAE,SAAS0E,IAAI,CAACvE,KAAK,CAACsD,MAAM,GAAG,CAAC,EAAE;QACtCxD,IAAI,EAAE;MACR,CAAC;IACH,CAAC,CAAC,CAAC;EACL,CAAC;EAED,MAAMuH,eAAe,GAAGA,CAAA,KAAM;IAC5B3I,YAAY,CAAC,CAACD,SAAS,CAAC;EAC1B,CAAC;EAED,MAAM6I,MAAM,GAAIC,IAAI,IAAK;IACvB,MAAM/B,OAAO,GAAGtD,IAAI,CAACE,GAAG,CAAC,CAAC,EAAEF,IAAI,CAACsF,GAAG,CAAC3J,aAAa,EAAE0J,IAAI,CAAC,CAAC;IAC1D3J,cAAc,CAAC4H,OAAO,CAAC;IAEvB,MAAMb,OAAO,GAAGlE,yBAAyB,CAAC,CAAC;IAC3CkE,OAAO,CAAC3E,KAAK,CAACgF,OAAO,CAAC7D,SAAS,IAAI;MACjC,MAAMa,YAAY,GAAGzB,gBAAgB,CAACa,OAAO,CAACS,GAAG,CAACV,SAAS,CAACvB,EAAE,CAAC;MAC/D,IAAIoC,YAAY,EAAE;QAChB,MAAMD,YAAY,GAAGyD,OAAO,GAAGrE,SAAS,CAACN,SAAS;QAClDmB,YAAY,CAACrE,WAAW,GAAGuE,IAAI,CAACE,GAAG,CAAC,CAAC,EAAEL,YAAY,CAAC;MACtD;IACF,CAAC,CAAC;EACJ,CAAC;EAED,MAAM0F,iBAAiB,GAAGA,CAACC,MAAM,EAAE5H,IAAI,KAAK;IAC1CzC,eAAe,CAAEkH,IAAI,KAAM;MACzB,GAAGA,IAAI;MACP,CAACzE,IAAI,GAAGyE,IAAI,CAACzE,IAAI,CAAC,CAACa,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAAChB,EAAE,KAAK8H,MAAM;IACxD,CAAC,CAAC,CAAC;EACL,CAAC;EAED,MAAMC,kBAAkB,GAAID,MAAM,IAAK;IACrC,MAAM1F,YAAY,GAAGzB,gBAAgB,CAACa,OAAO,CAACS,GAAG,CAAC6F,MAAM,CAAC;IACzD,IAAI1F,YAAY,EAAE;MAChBA,YAAY,CAACkD,KAAK,CAAC,CAAC;MACpBlD,YAAY,CAACR,GAAG,GAAG,EAAE;MACrBjB,gBAAgB,CAACa,OAAO,CAACsE,MAAM,CAACgC,MAAM,CAAC;IACzC;IAEAhK,gBAAgB,CAAE6G,IAAI,IAAKA,IAAI,CAAC5D,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAAChB,EAAE,KAAK8H,MAAM,CAAC,CAAC;IACrE1J,uBAAuB,CAAC,IAAI,CAAC;EAC/B,CAAC;EAED,MAAM4J,UAAU,GAAIC,OAAO,IAAK;IAC9B,MAAMC,IAAI,GAAG5F,IAAI,CAAC6F,KAAK,CAACF,OAAO,GAAG,EAAE,CAAC;IACrC,MAAMG,IAAI,GAAG9F,IAAI,CAAC6F,KAAK,CAACF,OAAO,GAAG,EAAE,CAAC;IACrC,OAAO,GAAGC,IAAI,IAAIE,IAAI,CAACC,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE;EACtD,CAAC;EAED,MAAMC,mBAAmB,GAAIC,CAAC,IAAK;IACjC,IAAIjJ,UAAU,IAAIE,kBAAkB,EAAE;IAEtC,MAAMgJ,IAAI,GAAGhI,WAAW,CAACe,OAAO,CAACkH,qBAAqB,CAAC,CAAC;IACxD,MAAMC,MAAM,GAAGH,CAAC,CAACI,OAAO,GAAGH,IAAI,CAACI,IAAI;IACpC,MAAMC,YAAY,GAAG7K,aAAa,IAAIwK,IAAI,CAACM,KAAK,GAAG1K,YAAY,CAAC;IAChE,MAAM2K,SAAS,GAAGL,MAAM,GAAGG,YAAY;IACvCpB,MAAM,CAACsB,SAAS,CAAC;EACnB,CAAC;EAED,MAAMC,eAAe,GAAGA,CAACT,CAAC,EAAE1B,SAAS,KAAK;IACxC5H,cAAc,CAAC4H,SAAS,CAAC;IACzBtH,aAAa,CAAC,IAAI,CAAC;IACnBgJ,CAAC,CAACU,YAAY,CAACC,aAAa,GAAG,MAAM;IACrCX,CAAC,CAACU,YAAY,CAACE,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC;EAC1C,CAAC;EAED,MAAMC,aAAa,GAAGA,CAAA,KAAM;IAC1BnK,cAAc,CAAC,IAAI,CAAC;IACpBI,cAAc,CAAC,IAAI,CAAC;IACpBE,aAAa,CAAC,KAAK,CAAC;EACtB,CAAC;EAED,MAAM8J,2BAA2B,GAAGA,CAACd,CAAC,EAAE3D,YAAY,KAAK;IACvD2D,CAAC,CAACe,eAAe,CAAC,CAAC;IACnBnK,sBAAsB,CAACyF,YAAY,CAAC;IACpCnF,qBAAqB,CAAC,IAAI,CAAC;IAE3B,MAAM+I,IAAI,GAAGhI,WAAW,CAACe,OAAO,CAACkH,qBAAqB,CAAC,CAAC;IACxD,MAAMc,QAAQ,GAAGhB,CAAC,CAACtC,MAAM,CAACwC,qBAAqB,CAAC,CAAC;IACjD9I,aAAa,CAAC4I,CAAC,CAACI,OAAO,GAAGY,QAAQ,CAACX,IAAI,CAAC;IAExCL,CAAC,CAACU,YAAY,CAACC,aAAa,GAAG,MAAM;IACrCX,CAAC,CAACU,YAAY,CAACE,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC;EAC1C,CAAC;EAED,MAAMK,yBAAyB,GAAGA,CAAA,KAAM;IACtCrK,sBAAsB,CAAC,IAAI,CAAC;IAC5BE,cAAc,CAAC,IAAI,CAAC;IACpBI,qBAAqB,CAAC,KAAK,CAAC;IAC5BE,aAAa,CAAC,CAAC,CAAC;EAClB,CAAC;EAED,MAAM8J,cAAc,GAAIlB,CAAC,IAAK;IAC5B,IAAI,CAACvJ,WAAW,IAAI,CAACE,mBAAmB,EAAE;IAE1CqJ,CAAC,CAACmB,cAAc,CAAC,CAAC;IAClBnB,CAAC,CAACU,YAAY,CAACU,UAAU,GAAG3K,WAAW,GAAG,MAAM,GAAG,MAAM;IAEzD,MAAM4K,YAAY,GAAGpJ,WAAW,CAACe,OAAO,CAACkH,qBAAqB,CAAC,CAAC;IAChE,MAAMoB,KAAK,GAAGtB,CAAC,CAACI,OAAO,GAAGiB,YAAY,CAAChB,IAAI,IAAI1J,mBAAmB,GAAGQ,UAAU,GAAG,CAAC,CAAC;IACpF,MAAMmJ,YAAY,GAAG7K,aAAa,IAAI4L,YAAY,CAACd,KAAK,GAAG1K,YAAY,CAAC;IACxE,MAAM0L,QAAQ,GAAGzH,IAAI,CAACE,GAAG,CAAC,CAAC,EAAEsH,KAAK,GAAGhB,YAAY,CAAC;;IAElD;IACA;IACA,MAAMkB,KAAK,GAAGxB,CAAC,CAACyB,OAAO,GAAGJ,YAAY,CAACK,GAAG;IAC1C,MAAMC,WAAW,GAAG,EAAE;IACtB,MAAMC,eAAe,GAAG,EAAE,CAAC,CAAC;;IAE5B,MAAMC,SAAS,GAAGL,KAAK,GAAGI,eAAe;IACzC,MAAME,UAAU,GAAGhI,IAAI,CAAC6F,KAAK,CAACkC,SAAS,GAAGF,WAAW,CAAC;IAEtD,MAAMI,SAAS,GAAG,CAAC,GAAG1K,MAAM,CAACE,QAAQ,EAAE,GAAGF,MAAM,CAACM,IAAI,EAAE,GAAGN,MAAM,CAACO,KAAK,CAAC;IACvE,MAAMoK,WAAW,GAAGD,SAAS,CAACD,UAAU,CAAC;IAEzC,IAAIrL,WAAW,IAAIuL,WAAW,EAAE;MAC9B,MAAMtJ,QAAQ,GAAGjC,WAAW,CAACiC,QAAQ,KAAKjC,WAAW,CAACiB,IAAI,KAAK,OAAO,GAAG,CAAC,GAAG,EAAE,CAAC;MAChF,MAAMsD,QAAQ,GAAG;QAAEX,OAAO,EAAE2H,WAAW,CAACxK,EAAE;QAAEiB,SAAS,EAAE8I,QAAQ;QAAE7I;MAAS,CAAC;MAE3E5B,cAAc,CAAC;QACbqI,IAAI,EAAEoC,QAAQ;QACd7I,QAAQ,EAAEA,QAAQ;QAClB2B,OAAO,EAAE2H,WAAW,CAACxK,EAAE;QACvBqB,SAAS,EAAEmJ,WAAW,CAACtK,IAAI;QAC3BuK,OAAO,EAAE,CAAChI,cAAc,CAACe,QAAQ;MACnC,CAAC,CAAC;IACJ,CAAC,MAAM,IAAIrE,mBAAmB,IAAIqL,WAAW,EAAE;MAC7C,MAAMhH,QAAQ,GAAG;QACf,GAAGrE,mBAAmB;QACtB8B,SAAS,EAAE8I,QAAQ;QACnBlH,OAAO,EAAE2H,WAAW,CAACxK;MACvB,CAAC;MAEDV,cAAc,CAAC;QACbqI,IAAI,EAAEoC,QAAQ;QACd7I,QAAQ,EAAE/B,mBAAmB,CAAC+B,QAAQ;QACtC2B,OAAO,EAAE2H,WAAW,CAACxK,EAAE;QACvBqB,SAAS,EAAEmJ,WAAW,CAACtK,IAAI;QAC3BuK,OAAO,EAAE,CAAChI,cAAc,CAACe,QAAQ,EAAErE,mBAAmB,CAACa,EAAE;MAC3D,CAAC,CAAC;IACJ;EACF,CAAC;EAED,MAAM0K,UAAU,GAAIlC,CAAC,IAAK;IACxB,IAAK,CAACvJ,WAAW,IAAI,CAACE,mBAAmB,IAAK,CAACE,WAAW,EAAE;IAE5DmJ,CAAC,CAACmB,cAAc,CAAC,CAAC;IAElB,IAAItK,WAAW,CAACoL,OAAO,EAAE;MACvB,IAAIxL,WAAW,EAAE;QACf4H,aAAa,CAAC5H,WAAW,EAAEI,WAAW,CAACsI,IAAI,EAAEtI,WAAW,CAACwD,OAAO,CAAC;MACnE,CAAC,MAAM,IAAI1D,mBAAmB,EAAE;QAC9BrB,gBAAgB,CAAC6G,IAAI,IAAIA,IAAI,CAACC,GAAG,CAAC5D,IAAI,IACpCA,IAAI,CAAChB,EAAE,KAAKb,mBAAmB,CAACa,EAAE,GAC9B;UAAE,GAAGgB,IAAI;UAAEC,SAAS,EAAE5B,WAAW,CAACsI,IAAI;UAAE9E,OAAO,EAAExD,WAAW,CAACwD,OAAO;UAAExB,SAAS,EAAEhC,WAAW,CAACgC;QAAU,CAAC,GACxGL,IACN,CAAC,CAAC;MACJ;IACF;IAEA1B,cAAc,CAAC,IAAI,CAAC;IACpBJ,cAAc,CAAC,IAAI,CAAC;IACpBE,sBAAsB,CAAC,IAAI,CAAC;IAC5BI,aAAa,CAAC,KAAK,CAAC;IACpBE,qBAAqB,CAAC,KAAK,CAAC;EAC9B,CAAC;EAED,MAAMiL,eAAe,GAAInC,CAAC,IAAK;IAAA,IAAAoC,oBAAA;IAC7B,IAAI,GAAAA,oBAAA,GAACnK,WAAW,CAACe,OAAO,cAAAoJ,oBAAA,eAAnBA,oBAAA,CAAqBC,QAAQ,CAACrC,CAAC,CAACsC,aAAa,CAAC,GAAE;MACnDxL,cAAc,CAAC,IAAI,CAAC;IACtB;EACF,CAAC;EAED,MAAMyL,oBAAoB,GAAI/J,IAAI,IAAK;IACrC,MAAMuJ,SAAS,GAAG,CAAC,GAAG1K,MAAM,CAACE,QAAQ,EAAE,GAAGF,MAAM,CAACM,IAAI,EAAE,GAAGN,MAAM,CAACO,KAAK,CAAC;IACvE,MAAMkK,UAAU,GAAGC,SAAS,CAACS,SAAS,CAACC,KAAK,IAAIA,KAAK,CAACjL,EAAE,KAAKgB,IAAI,CAAC6B,OAAO,CAAC;IAE1E,OAAO;MACLgG,IAAI,EAAE,GACH7H,IAAI,CAACC,SAAS,GAAGhD,aAAa,GAC/BA,aAAa,GACb,EAAE,GACFI,YAAY,IACV;MACJ0K,KAAK,EAAE,GACJ/H,IAAI,CAACE,QAAQ,GAAGjD,aAAa,GAC9BA,aAAa,GACb,EAAE,GACFI,YAAY,IACV;MACJ6L,GAAG,EAAE,GAAGI,UAAU,GAAG,EAAE,GAAG,EAAE;IAC9B,CAAC;EACH,CAAC;EAED,MAAMY,mBAAmB,GAAGA,CAAA,KAAM;IAChC,IAAI,CAAC7L,WAAW,EAAE,OAAO,CAAC,CAAC;IAE3B,MAAMkL,SAAS,GAAG,CAAC,GAAG1K,MAAM,CAACE,QAAQ,EAAE,GAAGF,MAAM,CAACM,IAAI,EAAE,GAAGN,MAAM,CAACO,KAAK,CAAC;IACvE,MAAMkK,UAAU,GAAGC,SAAS,CAACS,SAAS,CAACC,KAAK,IAAIA,KAAK,CAACjL,EAAE,KAAKX,WAAW,CAACwD,OAAO,CAAC;IAEjF,OAAO;MACLgG,IAAI,EAAE,GACHxJ,WAAW,CAACsI,IAAI,GAAG1J,aAAa,GACjCA,aAAa,GACb,EAAE,GACFI,YAAY,IACV;MACJ0K,KAAK,EAAE,GACJ1J,WAAW,CAAC6B,QAAQ,GAAGjD,aAAa,GACrCA,aAAa,GACb,EAAE,GACFI,YAAY,IACV;MACJ6L,GAAG,EAAE,GAAGI,UAAU,GAAG,EAAE,GAAG,EAAE;IAC9B,CAAC;EACH,CAAC;EAED,MAAMa,aAAa,GAAI9J,SAAS,IAAK;IACnC,QAAQA,SAAS;MACf,KAAK,SAAS;QAAE,OAAO,iCAAiC;MACxD,KAAK,MAAM;QAAE,OAAO,6BAA6B;MACjD,KAAK,OAAO;QAAE,OAAO,+BAA+B;MACpD;QAAS,OAAO,6BAA6B;IAC/C;EACF,CAAC;EAED,oBACEhE,OAAA;IAAK+N,SAAS,EAAC,4CAA4C;IAAAC,QAAA,eAKzDhO,OAAA;MAAK+N,SAAS,EAAC,4BAA4B;MAAAC,QAAA,gBAEzChO,OAAA;QAAK+N,SAAS,EAAC,gEAAgE;QAAAC,QAAA,GAC5EtM,kBAAkB,gBACjB1B,OAAA;UAAK+N,SAAS,EAAC,wBAAwB;UAAAC,QAAA,GACpCxK,yBAAyB,CAAC,CAAC,CAACM,SAAS,gBACpC9D,OAAA;YACEiO,GAAG,EAAEjL,QAAS;YACduB,GAAG,EAAE7C,kBAAmB;YACxBqM,SAAS,EAAC,0CAA0C;YACpDtJ,KAAK,EAAEnD;UAAQ;YAAA4M,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChB,CAAC,gBAEFrO,OAAA;YACEuE,GAAG,EAAE7C,kBAAmB;YACxB4M,GAAG,EAAC,kBAAkB;YACtBP,SAAS,EAAC;UAA0C;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACrD,CACF,EAGA7K,yBAAyB,CAAC,CAAC,CAACd,QAAQ,CAAC6E,GAAG,CAAC,CAAC5D,IAAI,EAAE4K,KAAK,kBACpDvO,OAAA;YAEE+N,SAAS,EAAC,6FAA6F;YACvGS,KAAK,EAAE;cACL3B,GAAG,EAAE,GAAG,CAAC,GAAG0B,KAAK,GAAG,GAAG,IAAI;cAC3BxE,OAAO,EAAEpG,IAAI,CAACoG,OAAO,IAAI;YAC3B,CAAE;YAAAiE,QAAA,EAEDrK,IAAI,CAACd,IAAI,KAAK,OAAO,gBACpB7C,OAAA;cACEuE,GAAG,EAAEZ,IAAI,CAACa,GAAI;cACduJ,SAAS,EAAC,4BAA4B;cACtCtJ,KAAK;YAAA;cAAAyJ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC,gBAEFrO,OAAA;cACEuE,GAAG,EAAEZ,IAAI,CAACa,GAAI;cACd8J,GAAG,EAAE3K,IAAI,CAACf,IAAK;cACfmL,SAAS,EAAC;YAA4B;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACvC;UACF,GAnBI1K,IAAI,CAAChB,EAAE;YAAAuL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAoBT,CACN,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,gBAENrO,OAAA;UAAK+N,SAAS,EAAC,2DAA2D;UAAAC,QAAA,eACxEhO,OAAA;YAAK+N,SAAS,EAAC,aAAa;YAAAC,QAAA,gBAC1BhO,OAAA;cAAK+N,SAAS,EAAC,iFAAiF;cAAAC,QAAA,eAC9FhO,OAAA,CAACJ,IAAI;gBAAC6O,IAAI,EAAE,EAAG;gBAACV,SAAS,EAAC;cAAY;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACtC,CAAC,eACNrO,OAAA;cAAG+N,SAAS,EAAC,gCAAgC;cAAAC,QAAA,EAAC;YAE9C;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,eACJrO,OAAA;cAAG+N,SAAS,EAAC,oBAAoB;cAAAC,QAAA,EAAC;YAElC;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CACN,eAGDrO,OAAA;UAAK+N,SAAS,EAAC,oGAAoG;UAAAC,QAAA,eACjHhO,OAAA;YAAK+N,SAAS,EAAC,6BAA6B;YAAAC,QAAA,gBAC1ChO,OAAA;cACE0O,OAAO,EAAEA,CAAA,KAAMrE,MAAM,CAACpF,IAAI,CAACE,GAAG,CAAC,CAAC,EAAEzE,WAAW,GAAG,EAAE,CAAC,CAAE;cACrDqN,SAAS,EAAC,mFAAmF;cAAAC,QAAA,eAE7FhO,OAAA,CAACX,QAAQ;gBAACoP,IAAI,EAAE;cAAG;gBAAAP,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChB,CAAC,eACTrO,OAAA;cACE0O,OAAO,EAAEtE,eAAgB;cACzB2D,SAAS,EAAC,gIAAgI;cAAAC,QAAA,EAEzIxM,SAAS,gBAAGxB,OAAA,CAACf,KAAK;gBAACwP,IAAI,EAAE;cAAG;gBAAAP,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,gBAAGrO,OAAA,CAAChB,IAAI;gBAACyP,IAAI,EAAE;cAAG;gBAAAP,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC/C,CAAC,eACTrO,OAAA;cACE0O,OAAO,EAAEA,CAAA,KACPrE,MAAM,CAACpF,IAAI,CAACsF,GAAG,CAAC3J,aAAa,EAAEF,WAAW,GAAG,EAAE,CAAC,CACjD;cACDqN,SAAS,EAAC,mFAAmF;cAAAC,QAAA,eAE7FhO,OAAA,CAACV,WAAW;gBAACmP,IAAI,EAAE;cAAG;gBAAAP,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACnB,CAAC,eACTrO,OAAA;cAAK+N,SAAS,EAAC,6BAA6B;cAAAC,QAAA,gBAC1ChO,OAAA;gBACE0O,OAAO,EAAEA,CAAA,KAAMnN,UAAU,CAAC,CAACD,OAAO,CAAE;gBACpCyM,SAAS,EAAC,mFAAmF;gBAAAC,QAAA,EAE5F1M,OAAO,gBAAGtB,OAAA,CAACT,OAAO;kBAACkP,IAAI,EAAE;gBAAG;kBAAAP,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,gBAAGrO,OAAA,CAACd,OAAO;kBAACuP,IAAI,EAAE;gBAAG;kBAAAP,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAClD,CAAC,eACTrO,OAAA;gBACE6C,IAAI,EAAC,OAAO;gBACZ0H,GAAG,EAAC,GAAG;gBACPpF,GAAG,EAAC,GAAG;gBACPwJ,IAAI,EAAC,KAAK;gBACVC,KAAK,EAAExN,MAAO;gBACdyN,QAAQ,EAAG1D,CAAC,IAAK9J,SAAS,CAACyN,UAAU,CAAC3D,CAAC,CAACtC,MAAM,CAAC+F,KAAK,CAAC,CAAE;gBACvDb,SAAS,EAAC;cAAsB;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACjC,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACC,CAAC,eACNrO,OAAA;cAAM+N,SAAS,EAAC,wCAAwC;cAAAC,QAAA,GACrDrD,UAAU,CAACjK,WAAW,CAAC,EAAC,KAAG,EAACiK,UAAU,CAAC/J,aAAa,CAAC;YAAA;cAAAsN,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAClD,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAGNrO,OAAA;QACE+N,SAAS,EAAE,4FACT7L,UAAU,IAAIE,kBAAkB,GAC5B,+BAA+B,GAC/B,iBAAiB,EACpB;QACH2M,UAAU,EAAE1C,cAAe;QAC3B2C,MAAM,EAAE3B,UAAW;QACnB4B,WAAW,EAAE3B,eAAgB;QAAAU,QAAA,gBAG7BhO,OAAA;UAAK+N,SAAS,EAAC,yCAAyC;UAAAC,QAAA,eACtDhO,OAAA;YAAK+N,SAAS,EAAC,mCAAmC;YAAAC,QAAA,gBAChDhO,OAAA;cAAI+N,SAAS,EAAC,yDAAyD;cAAAC,QAAA,gBACrEhO,OAAA,CAACJ,IAAI;gBAAC6O,IAAI,EAAE;cAAG;gBAAAP,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eAClBrO,OAAA;gBAAAgO,QAAA,EAAM;cAAQ;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,EACpB,CAACnM,UAAU,IAAIE,kBAAkB,KAAKJ,WAAW,iBAChDhC,OAAA;gBAAM+N,SAAS,EAAE/L,WAAW,CAACoL,OAAO,GAAG,gBAAgB,GAAG,cAAe;gBAAAY,QAAA,GAAC,IACtE,EAAChM,WAAW,CAACoL,OAAO,GAAG,eAAe,GAAG,kBAAkB;cAAA;gBAAAc,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACzD,CACP;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACC,CAAC,eACLrO,OAAA;cAAK+N,SAAS,EAAC,6BAA6B;cAAAC,QAAA,gBAC1ChO,OAAA;gBAAK+N,SAAS,EAAC,6BAA6B;gBAAAC,QAAA,gBAC1ChO,OAAA;kBAAM+N,SAAS,EAAC,mCAAmC;kBAAAC,QAAA,EAAC;gBAAK;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eAChErO,OAAA;kBAAK+N,SAAS,EAAC,gDAAgD;kBAAAC,QAAA,eAC7DhO,OAAA;oBACE6C,IAAI,EAAC,OAAO;oBACZ0H,GAAG,EAAC,KAAK;oBACTpF,GAAG,EAAC,GAAG;oBACPwJ,IAAI,EAAC,KAAK;oBACVC,KAAK,EAAE5N,YAAa;oBACpB6N,QAAQ,EAAG1D,CAAC,IAAKlK,eAAe,CAAC6N,UAAU,CAAC3D,CAAC,CAACtC,MAAM,CAAC+F,KAAK,CAAC,CAAE;oBAC7Db,SAAS,EAAC;kBAAsB;oBAAAG,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACjC;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACC,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC,eACNrO,OAAA;gBAAK+N,SAAS,EAAC,6BAA6B;gBAAAC,QAAA,gBAC1ChO,OAAA;kBACE0O,OAAO,EAAEzE,eAAgB;kBACzB8D,SAAS,EAAC,qGAAqG;kBAC/GmB,KAAK,EAAC,mBAAmB;kBAAAlB,QAAA,eAEzBhO,OAAA,CAACH,IAAI;oBAAC4O,IAAI,EAAE;kBAAG;oBAAAP,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACZ,CAAC,eACTrO,OAAA;kBACE0O,OAAO,EAAEvE,aAAc;kBACvB4D,SAAS,EAAC,kGAAkG;kBAC5GmB,KAAK,EAAC,iBAAiB;kBAAAlB,QAAA,eAEvBhO,OAAA,CAACZ,KAAK;oBAACqP,IAAI,EAAE;kBAAG;oBAAAP,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACb,CAAC,eACTrO,OAAA;kBACE0O,OAAO,EAAE9H,iBAAkB;kBAC3BuI,QAAQ,EAAE,CAACrO,oBAAqB;kBAChCiN,SAAS,EAAE,8CACTjN,oBAAoB,GAChB,iDAAiD,GACjD,kCAAkC,EACrC;kBACHoO,KAAK,EAAC,qBAAqB;kBAAAlB,QAAA,eAE3BhO,OAAA,CAACN,QAAQ;oBAAC+O,IAAI,EAAE;kBAAG;oBAAAP,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAChB,CAAC,eACTrO,OAAA;kBAAQ+N,SAAS,EAAC,gGAAgG;kBAAAC,QAAA,eAChHhO,OAAA,CAACR,IAAI;oBAACiP,IAAI,EAAE;kBAAG;oBAAAP,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACZ,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eAGNrO,OAAA;UAAK+N,SAAS,EAAC,aAAa;UAAAC,QAAA,gBAE1BhO,OAAA;YAAK+N,SAAS,EAAC,wDAAwD;YAAAC,QAAA,gBAErEhO,OAAA;cAAK+N,SAAS,EAAC;YAA+B;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAGrDrO,OAAA;cAAAgO,QAAA,GAEGxL,MAAM,CAACE,QAAQ,CAAC6E,GAAG,CAAC,CAACqG,KAAK,EAAEW,KAAK,kBAChCvO,OAAA;gBAEE+N,SAAS,EAAC,uGAAuG;gBACjHS,KAAK,EAAE;kBAAEY,MAAM,EAAE;gBAAO,CAAE;gBAAApB,QAAA,gBAE1BhO,OAAA,CAACF,MAAM;kBAAC2O,IAAI,EAAE,EAAG;kBAACV,SAAS,EAAC;gBAAM;kBAAAG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,EACpCT,KAAK,CAAChL,IAAI;cAAA,GALNgL,KAAK,CAACjL,EAAE;gBAAAuL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAMV,CACN,CAAC,EAGD7L,MAAM,CAACM,IAAI,CAACyE,GAAG,CAAC,CAACqG,KAAK,EAAEW,KAAK,kBAC5BvO,OAAA;gBAEE+N,SAAS,EAAC,mGAAmG;gBAC7GS,KAAK,EAAE;kBAAEY,MAAM,EAAE;gBAAO,CAAE;gBAAApB,QAAA,gBAE1BhO,OAAA,CAACb,KAAK;kBAACsP,IAAI,EAAE,EAAG;kBAACV,SAAS,EAAC;gBAAM;kBAAAG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,EACnCT,KAAK,CAAChL,IAAI;cAAA,GALNgL,KAAK,CAACjL,EAAE;gBAAAuL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAMV,CACN,CAAC,EAGD7L,MAAM,CAACO,KAAK,CAACwE,GAAG,CAAC,CAACqG,KAAK,EAAEW,KAAK,kBAC7BvO,OAAA;gBAEE+N,SAAS,EAAC,qGAAqG;gBAC/GS,KAAK,EAAE;kBAAEY,MAAM,EAAE;gBAAO,CAAE;gBAAApB,QAAA,gBAE1BhO,OAAA,CAACZ,KAAK;kBAACqP,IAAI,EAAE,EAAG;kBAACV,SAAS,EAAC;gBAAM;kBAAAG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,EACnCT,KAAK,CAAChL,IAAI;cAAA,GALNgL,KAAK,CAACjL,EAAE;gBAAAuL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAMV,CACN,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eAGNrO,OAAA;YACE+N,SAAS,EAAC,iCAAiC;YAC3CE,GAAG,EAAE7K,WAAY;YACjBsL,OAAO,EAAExD,mBAAoB;YAAA8C,QAAA,gBAG7BhO,OAAA;cAAK+N,SAAS,EAAC,mDAAmD;cAAAC,QAAA,GAC/DlF,KAAK,CAACC,IAAI,CAAC;gBAAE1C,MAAM,EAAEpB,IAAI,CAACoK,IAAI,CAACzO,aAAa,GAAG,CAAC,CAAC,GAAG;cAAE,CAAC,EAAE,CAAC0O,CAAC,EAAElJ,CAAC,kBAC7DpG,OAAA;gBAEE+N,SAAS,EAAC,gDAAgD;gBAC1DS,KAAK,EAAE;kBAAEhD,IAAI,EAAE,GAAGpF,CAAC,GAAG,GAAG,GAAGpF,YAAY;gBAAK,CAAE;gBAAAgN,QAAA,eAE/ChO,OAAA;kBAAM+N,SAAS,EAAC,0DAA0D;kBAAAC,QAAA,EACvErD,UAAU,CAACvE,CAAC,GAAG,CAAC;gBAAC;kBAAA8H,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACd;cAAC,GANFjI,CAAC;gBAAA8H,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAOH,CACN,CAAC,eAEFrO,OAAA;gBACE+N,SAAS,EAAC,uDAAuD;gBACjES,KAAK,EAAE;kBACLhD,IAAI,EAAE,GAAI9K,WAAW,GAAGE,aAAa,GAAIA,aAAa,GAAG,EAAE,GAAGI,YAAY;gBAC5E;cAAE;gBAAAkN,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACC,CAAC,eAGNrO,OAAA;cAAK+N,SAAS,EAAC,UAAU;cAACS,KAAK,EAAE;gBAAEY,MAAM,EAAE,GAAG,CAAC5M,MAAM,CAACE,QAAQ,CAAC2D,MAAM,GAAG7D,MAAM,CAACM,IAAI,CAACuD,MAAM,GAAG7D,MAAM,CAACO,KAAK,CAACsD,MAAM,IAAI,EAAE;cAAK,CAAE;cAAA2H,QAAA,GAE1HxN,aAAa,CAAC+G,GAAG,CAAE5D,IAAI,iBACtB3D,OAAA;gBAEEuP,SAAS,EAAC,MAAM;gBAChBC,WAAW,EAAGrE,CAAC,IAAKc,2BAA2B,CAACd,CAAC,EAAExH,IAAI,CAAE;gBACzD8L,SAAS,EAAErD,yBAA0B;gBACrC2B,SAAS,EAAE,iHACTD,aAAa,CAACnK,IAAI,CAACK,SAAS,CAAC,IAE7B,CAAAlD,oBAAoB,aAApBA,oBAAoB,uBAApBA,oBAAoB,CAAE6B,EAAE,MAAKgB,IAAI,CAAChB,EAAE,GAAG,sBAAsB,GAAG,EAAE,IAElE,CAAAb,mBAAmB,aAAnBA,mBAAmB,uBAAnBA,mBAAmB,CAAEa,EAAE,MAAKgB,IAAI,CAAChB,EAAE,GAAG,iBAAiB,GAAG,EAAE,EAC3D;gBACH6L,KAAK,EAAEd,oBAAoB,CAAC/J,IAAI,CAAE;gBAClC+K,OAAO,EAAGvD,CAAC,IAAK;kBACdA,CAAC,CAACe,eAAe,CAAC,CAAC;kBACnBnL,uBAAuB,CAAC4C,IAAI,CAAC;gBAC/B,CAAE;gBAAAqK,QAAA,eAEFhO,OAAA;kBAAK+N,SAAS,EAAC,6CAA6C;kBAAAC,QAAA,EACzDrK,IAAI,CAACf;gBAAI;kBAAAsL,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACP;cAAC,GAnBD1K,IAAI,CAAChB,EAAE;gBAAAuL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAoBT,CACN,CAAC,EAGDrM,WAAW,iBACVhC,OAAA;gBACE+N,SAAS,EAAE,8DACT/L,WAAW,CAACoL,OAAO,GACf,GAAGU,aAAa,CAAC9L,WAAW,CAACgC,SAAS,CAAC,gBAAgB,GACvD,2BAA2B,EAC9B;gBACHwK,KAAK,EAAEX,mBAAmB,CAAC;cAAE;gBAAAK,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC9B,CACF;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAACnO,EAAA,CAv6BID,WAAW;AAAAyP,EAAA,GAAXzP,WAAW;AAy6BjB,eAAeA,WAAW;AAAC,IAAAyP,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}