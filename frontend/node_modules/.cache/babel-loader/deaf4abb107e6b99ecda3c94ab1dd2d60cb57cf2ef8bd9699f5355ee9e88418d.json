{"ast":null,"code":"var _jsxFileName = \"C:\\\\Scriptify\\\\ai-content-studio\\\\frontend\\\\src\\\\components\\\\VideoEditor\\\\VideoEditor.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useRef, useEffect, useCallback } from \"react\";\nimport { MediaLibrary } from \"../MediaLibrary\";\nimport { Timeline } from \"../Timeline\";\nimport { Play, Pause, Volume2, SkipBack, SkipForward, VolumeX, Film, Layers, HelpCircle, X } from \"lucide-react\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst VideoEditor = () => {\n  _s();\n  const [mediaLibrary, setMediaLibrary] = useState({\n    videos: [],\n    audios: [],\n    images: []\n  });\n  const [timelineItems, setTimelineItems] = useState([]);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [videoDuration, setVideoDuration] = useState(60);\n  const [selectedTimelineItem, setSelectedTimelineItem] = useState(null);\n  const [timelineZoom, setTimelineZoom] = useState(1);\n  const [activeTab, setActiveTab] = useState(\"videos\");\n  const [volume, setVolume] = useState(1);\n  const [isMuted, setIsMuted] = useState(false);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [currentVideoSource, setCurrentVideoSource] = useState(null);\n  const [draggedItem, setDraggedItem] = useState(null);\n  const [draggedTimelineItem, setDraggedTimelineItem] = useState(null);\n  const [dropPreview, setDropPreview] = useState(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [isTimelineDragging, setIsTimelineDragging] = useState(false);\n  const [copiedItem, setCopiedItem] = useState(null);\n\n  // Состояния для resize\n  const [isResizing, setIsResizing] = useState(false);\n\n  // Состояния для управления overlays на видео\n  const [selectedOverlay, setSelectedOverlay] = useState(null);\n  const [overlayTransforms, setOverlayTransforms] = useState({});\n  const [isDraggingOverlay, setIsDraggingOverlay] = useState(false);\n  const [isResizingOverlay, setIsResizingOverlay] = useState(false);\n  const [overlayDragStart, setOverlayDragStart] = useState({\n    x: 0,\n    y: 0\n  });\n  const [resizeOverlayHandle, setResizeOverlayHandle] = useState(null);\n  const [initialOverlayTransform, setInitialOverlayTransform] = useState(null);\n\n  // Модальное окно помощи\n  const [showHelp, setShowHelp] = useState(false);\n\n  // ✅ НОВОЕ: Состояние для умной функции добавления из Timeline\n  const [smartAddFunction, setSmartAddFunction] = useState(null);\n\n  // Треки\n  const [tracks, setTracks] = useState({\n    overlays: [{\n      id: \"overlay-1\",\n      name: \"Overlay 1\",\n      type: \"overlay\"\n    }, {\n      id: \"overlay-2\",\n      name: \"Overlay 2\",\n      type: \"overlay\"\n    }],\n    main: [{\n      id: \"main-video\",\n      name: \"Main Video\",\n      type: \"main\"\n    }],\n    audio: [{\n      id: \"audio-1\",\n      name: \"Audio 1\",\n      type: \"audio\"\n    }, {\n      id: \"audio-2\",\n      name: \"Audio 2\",\n      type: \"audio\"\n    }]\n  });\n  const intervalRef = useRef(null);\n  const audioElementsRef = useRef(new Map());\n  const videoRef = useRef(null);\n  const videoContainerRef = useRef(null);\n\n  // ✅ ОТЛАДКА: Проверка получения умной функции\n  useEffect(() => {\n    console.log('🔄 SmartAddFunction изменилась в VideoEditor:', {\n      available: !!smartAddFunction,\n      type: typeof smartAddFunction,\n      timestamp: new Date().toISOString()\n    });\n    if (smartAddFunction) {\n      console.log('✅ SmartAddFunction готова к использованию!');\n    } else {\n      console.log('⚠️ SmartAddFunction еще не получена от Timeline');\n    }\n  }, [smartAddFunction]);\n\n  // Базовые функции\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = Math.floor(seconds % 60);\n    const ms = Math.floor(seconds % 1 * 100);\n    return timelineZoom > 5 ? `${mins}:${secs.toString().padStart(2, \"0\")}.${ms.toString().padStart(2, \"0\")}` : `${mins}:${secs.toString().padStart(2, \"0\")}`;\n  };\n  const handlePlayPause = () => {\n    setIsPlaying(!isPlaying);\n  };\n  const seekTo = time => {\n    const newTime = Math.max(0, Math.min(videoDuration, time));\n    setCurrentTime(newTime);\n    const content = getCurrentTimelineContent();\n    content.audio.forEach(audioItem => {\n      const audioElement = audioElementsRef.current.get(audioItem.id);\n      if (audioElement) {\n        const relativeTime = newTime - audioItem.startTime;\n        audioElement.currentTime = Math.max(0, relativeTime);\n      }\n    });\n  };\n  const getCurrentTimelineContent = useCallback(() => {\n    const currentItems = timelineItems.filter(item => currentTime >= item.startTime && currentTime < item.startTime + item.duration);\n    return {\n      mainVideo: currentItems.find(item => item.trackType === \"main\" && item.type === \"video\"),\n      overlays: currentItems.filter(item => item.trackType === \"overlay\"),\n      audio: currentItems.filter(item => item.trackType === \"audio\")\n    };\n  }, [currentTime, timelineItems]);\n  const createAudioElement = useCallback(audioItem => {\n    if (!audioElementsRef.current.has(audioItem.id)) {\n      const audio = document.createElement(\"audio\");\n      audio.src = audioItem.url;\n      audio.volume = (audioItem.volume || 1) * volume;\n      audio.muted = isMuted;\n      audio.preload = \"metadata\";\n      audioElementsRef.current.set(audioItem.id, audio);\n    }\n    return audioElementsRef.current.get(audioItem.id);\n  }, [volume, isMuted]);\n  const syncAudioTime = useCallback((audioItem, relativeTime) => {\n    const audioElement = audioElementsRef.current.get(audioItem.id);\n    if (audioElement) {\n      const timeDiff = Math.abs(audioElement.currentTime - relativeTime);\n      if (timeDiff > 0.2) {\n        audioElement.currentTime = Math.max(0, relativeTime);\n      }\n    }\n  }, []);\n  const checkCollision = useCallback((newItem, excludeId = null) => {\n    return timelineItems.some(item => {\n      if (item.id === excludeId) return false;\n      if (item.trackId !== newItem.trackId) return false;\n      const itemStart = item.startTime;\n      const itemEnd = item.startTime + item.duration;\n      const newStart = newItem.startTime;\n      const newEnd = newItem.startTime + newItem.duration;\n      return newStart < itemEnd && newEnd > itemStart;\n    });\n  }, [timelineItems]);\n  const insertWithRipple = useCallback((trackId, insertTime, duration, excludeId = null) => {\n    const trackItems = timelineItems.filter(item => item.trackId === trackId && item.id !== excludeId).sort((a, b) => a.startTime - b.startTime);\n    if (trackItems.length === 0) {\n      return {\n        time: Math.max(0, insertTime),\n        shouldRipple: false,\n        affectedItems: []\n      };\n    }\n    let insertPosition = insertTime;\n    let shouldRipple = false;\n    let affectedItems = [];\n    const blockAtPosition = trackItems.find(item => insertTime >= item.startTime && insertTime < item.startTime + item.duration);\n    if (blockAtPosition) {\n      insertPosition = blockAtPosition.startTime;\n      shouldRipple = true;\n      affectedItems = trackItems.filter(item => item.startTime >= insertPosition);\n    } else {\n      const blocksToShift = trackItems.filter(item => item.startTime >= insertTime);\n      if (blocksToShift.length > 0) {\n        const nextBlock = blocksToShift[0];\n        const availableSpace = nextBlock.startTime - insertTime;\n        if (availableSpace >= duration) {\n          insertPosition = insertTime;\n          shouldRipple = false;\n        } else {\n          insertPosition = insertTime;\n          shouldRipple = true;\n          affectedItems = blocksToShift;\n        }\n      } else {\n        insertPosition = insertTime;\n        shouldRipple = false;\n      }\n    }\n    return {\n      time: Math.max(0, insertPosition),\n      shouldRipple,\n      affectedItems,\n      shiftAmount: shouldRipple ? duration : 0\n    };\n  }, [timelineItems]);\n  const applyRippleEffect = useCallback((affectedItems, shiftAmount) => {\n    if (!affectedItems.length || shiftAmount <= 0) return;\n    setTimelineItems(prev => prev.map(item => {\n      const affectedItem = affectedItems.find(affected => affected.id === item.id);\n      if (affectedItem) {\n        return {\n          ...item,\n          startTime: item.startTime + shiftAmount\n        };\n      }\n      return item;\n    }));\n    if (affectedItems.length > 0) {\n      const maxEndTime = Math.max(...affectedItems.map(item => item.startTime + item.duration + shiftAmount));\n      if (maxEndTime > videoDuration) {\n        setVideoDuration(maxEndTime + 10);\n      }\n    }\n  }, [videoDuration]);\n  const findNextAvailablePosition = useCallback((trackId, duration, preferredStart = 0) => {\n    const trackItems = timelineItems.filter(item => item.trackId === trackId).sort((a, b) => a.startTime - b.startTime);\n    if (preferredStart >= 0) {\n      const testItem = {\n        trackId,\n        startTime: preferredStart,\n        duration\n      };\n      if (!checkCollision(testItem)) {\n        return preferredStart;\n      }\n    }\n    for (let i = 0; i < trackItems.length; i++) {\n      const currentItem = trackItems[i];\n      const nextItem = trackItems[i + 1];\n      if (i === 0 && currentItem.startTime >= duration) {\n        return 0;\n      }\n      if (nextItem) {\n        const gapStart = currentItem.startTime + currentItem.duration;\n        const gapEnd = nextItem.startTime;\n        const gapSize = gapEnd - gapStart;\n        if (gapSize >= duration) {\n          return gapStart;\n        }\n      }\n    }\n    if (trackItems.length === 0) return 0;\n    const lastItem = trackItems[trackItems.length - 1];\n    return lastItem.startTime + lastItem.duration;\n  }, [timelineItems, checkCollision]);\n  const removeFromTimeline = itemId => {\n    const audioElement = audioElementsRef.current.get(itemId);\n    if (audioElement) {\n      audioElement.pause();\n      audioElement.src = \"\";\n      audioElementsRef.current.delete(itemId);\n    }\n    setTimelineItems(prev => prev.filter(item => item.id !== itemId));\n    setSelectedTimelineItem(null);\n  };\n\n  // Функции для управления overlays\n  const getOverlayTransform = useCallback(overlayId => {\n    return overlayTransforms[overlayId] || {\n      x: 0,\n      y: 0,\n      scale: 1,\n      opacity: 1\n    };\n  }, [overlayTransforms]);\n  const updateOverlayTransform = useCallback((overlayId, updates) => {\n    setOverlayTransforms(prev => ({\n      ...prev,\n      [overlayId]: {\n        ...getOverlayTransform(overlayId),\n        ...updates\n      }\n    }));\n  }, [getOverlayTransform]);\n  const handleOverlayMouseDown = useCallback((e, overlay) => {\n    if (e.target.closest(\".resize-handle\")) return;\n    e.preventDefault();\n    e.stopPropagation();\n    setSelectedOverlay(overlay);\n    setIsDraggingOverlay(true);\n    const container = videoContainerRef.current;\n    if (!container) return;\n    const containerRect = container.getBoundingClientRect();\n    const overlayElement = e.currentTarget;\n    const overlayRect = overlayElement.getBoundingClientRect();\n    setOverlayDragStart({\n      x: e.clientX - overlayRect.left,\n      y: e.clientY - overlayRect.top,\n      containerX: containerRect.left,\n      containerY: containerRect.top\n    });\n  }, []);\n  const handleOverlayResizeStart = useCallback((e, overlay, handle) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setSelectedOverlay(overlay);\n    setIsResizingOverlay(true);\n    setResizeOverlayHandle(handle);\n    const currentTransform = getOverlayTransform(overlay.id);\n    setInitialOverlayTransform(currentTransform);\n    setOverlayDragStart({\n      x: e.clientX,\n      y: e.clientY,\n      startScale: currentTransform.scale,\n      startX: currentTransform.x,\n      startY: currentTransform.y\n    });\n  }, [getOverlayTransform]);\n  const handleOverlayMouseMove = useCallback(e => {\n    if (!selectedOverlay) return;\n    if (isDraggingOverlay) {\n      const container = videoContainerRef.current;\n      if (!container) return;\n      const rect = container.getBoundingClientRect();\n      const overlaySize = 128 * getOverlayTransform(selectedOverlay.id).scale;\n      const newX = e.clientX - overlayDragStart.containerX - overlayDragStart.x;\n      const newY = e.clientY - overlayDragStart.containerY - overlayDragStart.y;\n      const padding = 5;\n      const limitedX = Math.max(padding, Math.min(rect.width - overlaySize - padding, newX));\n      const limitedY = Math.max(padding, Math.min(rect.height - overlaySize - padding, newY));\n      const baseX = 200;\n      const baseY = 50 + selectedOverlay.index * 120;\n      updateOverlayTransform(selectedOverlay.id, {\n        x: limitedX - baseX,\n        y: limitedY - baseY\n      });\n    } else if (isResizingOverlay && overlayDragStart.startScale !== undefined && resizeOverlayHandle) {\n      const deltaX = e.clientX - overlayDragStart.x;\n      const deltaY = e.clientY - overlayDragStart.y;\n      let scaleFactor = 1;\n      const sensitivity = 0.005;\n      switch (resizeOverlayHandle) {\n        case \"nw\":\n          scaleFactor = 1 - (deltaX + deltaY) * sensitivity;\n          break;\n        case \"ne\":\n          scaleFactor = 1 + (deltaX - deltaY) * sensitivity;\n          break;\n        case \"sw\":\n          scaleFactor = 1 + (-deltaX + deltaY) * sensitivity;\n          break;\n        case \"se\":\n          scaleFactor = 1 + (deltaX + deltaY) * sensitivity;\n          break;\n        default:\n          break;\n      }\n      const newScale = Math.max(0.2, Math.min(4, overlayDragStart.startScale * scaleFactor));\n      updateOverlayTransform(selectedOverlay.id, {\n        scale: newScale\n      });\n    }\n  }, [selectedOverlay, isDraggingOverlay, isResizingOverlay, overlayDragStart, updateOverlayTransform, getOverlayTransform, resizeOverlayHandle]);\n  const handleOverlayMouseUp = useCallback(() => {\n    setIsDraggingOverlay(false);\n    setIsResizingOverlay(false);\n    setResizeOverlayHandle(null);\n    setInitialOverlayTransform(null);\n  }, []);\n  const handleOverlayWheel = useCallback((e, overlayId) => {\n    if (!e.ctrlKey) return;\n    e.preventDefault();\n    e.stopPropagation();\n    const transform = getOverlayTransform(overlayId);\n    const scaleDelta = e.deltaY > 0 ? -0.05 : 0.05;\n    const newScale = Math.max(0.2, Math.min(4, transform.scale + scaleDelta));\n    updateOverlayTransform(overlayId, {\n      scale: newScale\n    });\n  }, [getOverlayTransform, updateOverlayTransform]);\n\n  // Функции для работы с элементами таймлайна\n  const splitTimelineItem = useCallback(() => {\n    if (!selectedTimelineItem) return;\n    const item = selectedTimelineItem;\n    const splitTime = currentTime;\n    if (splitTime <= item.startTime || splitTime >= item.startTime + item.duration) {\n      return;\n    }\n    const firstPartDuration = splitTime - item.startTime;\n    const secondPartStart = splitTime;\n    const secondPartDuration = item.duration - firstPartDuration;\n    const secondPart = {\n      ...item,\n      id: Date.now() + Math.random(),\n      startTime: secondPartStart,\n      duration: secondPartDuration\n    };\n    const updatedFirstPart = {\n      ...item,\n      duration: firstPartDuration\n    };\n    setTimelineItems(prev => prev.map(timelineItem => timelineItem.id === item.id ? updatedFirstPart : timelineItem).concat(secondPart));\n    setSelectedTimelineItem(null);\n  }, [selectedTimelineItem, currentTime]);\n  const copyTimelineItem = useCallback(() => {\n    if (!selectedTimelineItem) return;\n    setCopiedItem(selectedTimelineItem);\n  }, [selectedTimelineItem]);\n  const pasteTimelineItem = useCallback(() => {\n    var _insertResult$affecte;\n    if (!copiedItem) return;\n    const targetTrackId = copiedItem.trackId;\n    const insertResult = insertWithRipple(targetTrackId, currentTime, copiedItem.duration);\n    if (insertResult.shouldRipple && ((_insertResult$affecte = insertResult.affectedItems) === null || _insertResult$affecte === void 0 ? void 0 : _insertResult$affecte.length) > 0) {\n      applyRippleEffect(insertResult.affectedItems, copiedItem.duration);\n    }\n    const newItem = {\n      ...copiedItem,\n      id: Date.now() + Math.random(),\n      startTime: insertResult.time\n    };\n    setTimelineItems(prev => [...prev, newItem]);\n    const newEndTime = newItem.startTime + newItem.duration;\n    if (newEndTime > videoDuration) {\n      setVideoDuration(newEndTime + 10);\n    }\n    setSelectedTimelineItem(newItem);\n  }, [copiedItem, currentTime, insertWithRipple, applyRippleEffect, videoDuration]);\n  const deleteSelectedItem = useCallback(() => {\n    if (!selectedTimelineItem) return;\n    removeFromTimeline(selectedTimelineItem.id);\n  }, [selectedTimelineItem]);\n\n  // ✅ ИСПРАВЛЕННАЯ: Функция добавления с приоритетом переданных параметров\n  const addToTimeline = (mediaItem, startTime = null, targetTrackId = null) => {\n    if (!mediaItem || !mediaItem.name || !mediaItem.type) {\n      console.error('❌ addToTimeline: невалидный элемент', mediaItem);\n      return;\n    }\n    console.log('🚀 addToTimeline вызвана с:', {\n      name: mediaItem.name,\n      type: mediaItem.type,\n      startTime,\n      targetTrackId\n    });\n    let trackType, trackId;\n\n    // ПРИОРИТЕТ: Если передан targetTrackId, используем его\n    if (targetTrackId) {\n      trackId = targetTrackId;\n\n      // Определяем тип дорожки по ID\n      if (targetTrackId.startsWith(\"overlay\")) {\n        trackType = \"overlay\";\n      } else if (targetTrackId.startsWith(\"audio\")) {\n        trackType = \"audio\";\n      } else if (targetTrackId.startsWith(\"main\")) {\n        trackType = \"main\";\n      } else {\n        // Fallback по типу медиа\n        if (mediaItem.type === \"video\") trackType = \"main\";else if (mediaItem.type === \"image\") trackType = \"overlay\";else if (mediaItem.type === \"audio\") trackType = \"audio\";\n      }\n      console.log(`✅ Используем переданную дорожку: ID=\"${trackId}\", тип=\"${trackType}\"`);\n    } else {\n      // Fallback: старая логика если не передан targetTrackId\n      console.log('⚠️ targetTrackId не передан, используем fallback логику');\n      if (mediaItem.type === \"video\") {\n        trackType = \"main\";\n        trackId = \"main-video\";\n      } else if (mediaItem.type === \"image\") {\n        trackType = \"overlay\";\n        trackId = \"overlay-1\";\n      } else if (mediaItem.type === \"audio\") {\n        trackType = \"audio\";\n        trackId = \"audio-1\";\n      }\n    }\n    const duration = mediaItem.duration || (mediaItem.type === \"image\" ? 5 : 10);\n    const finalStartTime = startTime !== null ? startTime : findNextAvailablePosition(trackId, duration);\n    const newTimelineItem = {\n      id: Date.now() + Math.random(),\n      mediaId: mediaItem.id,\n      type: mediaItem.type,\n      name: mediaItem.name,\n      url: mediaItem.url,\n      startTime: finalStartTime,\n      duration: duration,\n      trackId: trackId,\n      trackType: trackType,\n      volume: 1,\n      opacity: 1\n    };\n    console.log('📍 Создаем timeline элемент:', {\n      name: newTimelineItem.name,\n      trackId: newTimelineItem.trackId,\n      trackType: newTimelineItem.trackType,\n      startTime: newTimelineItem.startTime\n    });\n    setTimelineItems(prev => [...prev, newTimelineItem]);\n    const newEndTime = newTimelineItem.startTime + newTimelineItem.duration;\n    if (newEndTime > videoDuration) {\n      setVideoDuration(newEndTime + 10);\n    }\n  };\n\n  // ✅ НОВАЯ: Умная функция для MediaLibrary с подробной отладкой\n  const handleMediaLibraryClick = item => {\n    if (!item || !item.name || !item.type) {\n      console.error('❌ handleMediaLibraryClick: невалидный элемент', item);\n      return;\n    }\n    console.log('🖱️ === КЛИК ПО MEDIALIBRARY ===');\n    console.log('📦 Элемент:', {\n      name: item.name,\n      type: item.type,\n      id: item.id\n    });\n    console.log('🔗 smartAddFunction доступна:', !!smartAddFunction);\n    if (smartAddFunction) {\n      console.log('✅ Используем smartAddFunction из Timeline');\n      smartAddFunction(item);\n    } else {\n      console.log('⚠️ smartAddFunction недоступна, используем fallback addToTimeline');\n      addToTimeline(item);\n    }\n    console.log('🖱️ === КЛИК ОБРАБОТАН ===');\n  };\n\n  // Эффекты для управления overlays\n  useEffect(() => {\n    if (isDraggingOverlay || isResizingOverlay) {\n      document.addEventListener(\"mousemove\", handleOverlayMouseMove);\n      document.addEventListener(\"mouseup\", handleOverlayMouseUp);\n      document.body.style.cursor = isDraggingOverlay ? \"grabbing\" : \"nw-resize\";\n      return () => {\n        document.removeEventListener(\"mousemove\", handleOverlayMouseMove);\n        document.removeEventListener(\"mouseup\", handleOverlayMouseUp);\n        document.body.style.cursor = \"\";\n      };\n    }\n  }, [isDraggingOverlay, isResizingOverlay, handleOverlayMouseMove, handleOverlayMouseUp]);\n\n  // Основные эффекты\n  useEffect(() => {\n    const content = getCurrentTimelineContent();\n    if (content.mainVideo && content.mainVideo.url !== currentVideoSource) {\n      setCurrentVideoSource(content.mainVideo.url);\n      if (videoRef.current) {\n        const relativeTime = currentTime - content.mainVideo.startTime;\n        videoRef.current.currentTime = Math.max(0, relativeTime);\n      }\n    } else if (!content.mainVideo && content.overlays.find(o => o.type === \"image\")) {\n      const firstImage = content.overlays.find(o => o.type === \"image\");\n      setCurrentVideoSource(firstImage.url);\n    } else if (!content.mainVideo && !content.overlays.find(o => o.type === \"image\")) {\n      setCurrentVideoSource(null);\n    }\n    const currentAudioIds = new Set(content.audio.map(item => item.id));\n    audioElementsRef.current.forEach((audioElement, id) => {\n      if (!currentAudioIds.has(id)) {\n        if (!audioElement.paused) {\n          audioElement.pause();\n        }\n      }\n    });\n    content.audio.forEach(audioItem => {\n      const audioElement = createAudioElement(audioItem);\n      const relativeTime = currentTime - audioItem.startTime;\n      audioElement.volume = (audioItem.volume || 1) * volume;\n      audioElement.muted = isMuted;\n      if (isPlaying && relativeTime >= 0) {\n        syncAudioTime(audioItem, relativeTime);\n        if (audioElement.paused) {\n          audioElement.play().catch(console.error);\n        }\n      } else {\n        if (!audioElement.paused) {\n          audioElement.pause();\n        }\n      }\n    });\n  }, [currentTime, timelineItems, getCurrentTimelineContent, isPlaying, volume, isMuted, createAudioElement, syncAudioTime, currentVideoSource]);\n  useEffect(() => {\n    if (isPlaying) {\n      intervalRef.current = setInterval(() => {\n        setCurrentTime(prev => {\n          const newTime = prev + 0.1;\n          if (newTime >= videoDuration) {\n            setIsPlaying(false);\n            return videoDuration;\n          }\n          return newTime;\n        });\n      }, 100);\n    } else {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    }\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, [isPlaying, videoDuration]);\n  useEffect(() => {\n    if (videoRef.current && currentVideoSource) {\n      const content = getCurrentTimelineContent();\n      if (content.mainVideo) {\n        const relativeTime = currentTime - content.mainVideo.startTime;\n        const timeDiff = Math.abs(videoRef.current.currentTime - relativeTime);\n        if (timeDiff > 0.5) {\n          videoRef.current.currentTime = Math.max(0, relativeTime);\n        }\n        if (isPlaying && videoRef.current.paused) {\n          videoRef.current.play().catch(console.error);\n        } else if (!isPlaying && !videoRef.current.paused) {\n          videoRef.current.pause();\n        }\n      }\n    }\n  }, [currentTime, currentVideoSource, getCurrentTimelineContent, isPlaying]);\n  useEffect(() => {\n    const currentAudioIds = new Set(timelineItems.filter(item => item.type === \"audio\").map(item => item.id));\n    audioElementsRef.current.forEach((audioElement, id) => {\n      if (!currentAudioIds.has(id)) {\n        audioElement.pause();\n        audioElement.src = \"\";\n        audioElementsRef.current.delete(id);\n      }\n    });\n  }, [timelineItems]);\n\n  // Обработка клавиатурных шорткатов\n  useEffect(() => {\n    const handleKeyDown = e => {\n      if (e.target.tagName === \"INPUT\" || e.target.tagName === \"TEXTAREA\") {\n        return;\n      }\n      if (e.key === \"Delete\" || e.key === \"Backspace\") {\n        e.preventDefault();\n        deleteSelectedItem();\n      }\n      if (e.ctrlKey && e.key === \"b\") {\n        e.preventDefault();\n        splitTimelineItem();\n      }\n      if (e.ctrlKey && e.key === \"c\") {\n        e.preventDefault();\n        copyTimelineItem();\n      }\n      if (e.ctrlKey && e.key === \"v\") {\n        e.preventDefault();\n        pasteTimelineItem();\n      }\n      if (e.key === \" \" || e.code === \"Space\") {\n        e.preventDefault();\n        setIsPlaying(prev => !prev);\n      }\n      if (e.key === \"ArrowLeft\") {\n        e.preventDefault();\n        const step = e.ctrlKey ? 5 : e.shiftKey ? 1 : 0.1;\n        seekTo(Math.max(0, currentTime - step));\n      }\n      if (e.key === \"ArrowRight\") {\n        e.preventDefault();\n        const step = e.ctrlKey ? 5 : e.shiftKey ? 1 : 0.1;\n        seekTo(Math.min(videoDuration, currentTime + step));\n      }\n      if (e.key === \"?\" || e.shiftKey && e.key === \"/\") {\n        e.preventDefault();\n        setShowHelp(true);\n      }\n      if (e.key === \"Escape\") {\n        e.preventDefault();\n        if (showHelp) {\n          setShowHelp(false);\n        } else if (selectedOverlay) {\n          setSelectedOverlay(null);\n        }\n      }\n    };\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  }, [selectedTimelineItem, copiedItem, currentTime, videoDuration, showHelp, selectedOverlay, deleteSelectedItem, splitTimelineItem, copyTimelineItem, pasteTimelineItem, seekTo]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex h-screen w-full gap-4 p-4 bg-gray-100 overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(MediaLibrary, {\n      mediaLibrary: mediaLibrary,\n      setMediaLibrary: setMediaLibrary,\n      activeTab: activeTab,\n      setActiveTab: setActiveTab,\n      draggedItem: draggedItem,\n      setDraggedItem: setDraggedItem,\n      isDragging: isDragging,\n      setIsDragging: setIsDragging,\n      addToTimeline: handleMediaLibraryClick // ✅ ИСПОЛЬЗУЕМ УМНУЮ ФУНКЦИЮ\n      ,\n      formatTime: formatTime\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 902,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed top-4 right-4 bg-black/80 text-white p-3 rounded-lg text-xs max-w-xs\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"font-bold mb-2\",\n        children: \"\\uD83D\\uDD27 Smart Add Status\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 917,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: smartAddFunction ? \"text-green-400\" : \"text-red-400\",\n          children: [\"Smart Function: \", smartAddFunction ? \"✅ Ready\" : \"❌ Not Ready\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 919,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-gray-300\",\n          children: \"Video \\u2192 Main Video track\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 922,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-gray-300\",\n          children: \"Audio \\u2192 Audio track\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 925,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-gray-300\",\n          children: \"Images \\u2192 Overlay track\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 928,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 918,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 916,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex flex-col gap-4 min-w-0 overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        ref: videoContainerRef,\n        className: \"flex-1 bg-black rounded-2xl relative overflow-hidden shadow-sm min-h-0\",\n        title: \"Video Preview - Click overlays to select, drag to move, Ctrl+scroll to resize, use opacity slider\",\n        children: [currentVideoSource ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative w-full h-full\",\n          onClick: e => {\n            if (e.target === e.currentTarget) {\n              setSelectedOverlay(null);\n            }\n          },\n          children: [getCurrentTimelineContent().mainVideo ? /*#__PURE__*/_jsxDEV(\"video\", {\n            ref: videoRef,\n            src: currentVideoSource,\n            className: \"w-full h-full object-contain rounded-2xl\",\n            muted: isMuted\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 952,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n            src: currentVideoSource,\n            alt: \"Timeline content\",\n            className: \"w-full h-full object-contain rounded-2xl\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 959,\n            columnNumber: 17\n          }, this), getCurrentTimelineContent().overlays.map((item, index) => {\n            const transform = getOverlayTransform(item.id);\n            const isSelected = (selectedOverlay === null || selectedOverlay === void 0 ? void 0 : selectedOverlay.id) === item.id;\n            const isDraggingThis = isDraggingOverlay && isSelected;\n            const isResizingThis = isResizingOverlay && isSelected;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `absolute select-none ${isSelected ? \"ring-2 ring-blue-400 ring-opacity-75 shadow-xl\" : \"hover:ring-2 hover:ring-blue-300 hover:ring-opacity-50\"} ${isDraggingThis ? \"cursor-grabbing z-50\" : isResizingThis ? \"cursor-nw-resize\" : \"cursor-grab hover:shadow-lg\"}`,\n              style: {\n                left: `${200 + transform.x}px`,\n                top: `${50 + index * 120 + transform.y}px`,\n                width: `${128 * transform.scale}px`,\n                height: `${96 * transform.scale}px`,\n                opacity: transform.opacity,\n                zIndex: isSelected ? 1000 : 10 + index,\n                transform: isDraggingThis ? \"scale(1.02)\" : \"scale(1)\",\n                transition: isDraggingThis || isResizingThis ? \"none\" : \"transform 0.2s ease, box-shadow 0.2s ease\"\n              },\n              onMouseDown: e => handleOverlayMouseDown(e, {\n                ...item,\n                index\n              }),\n              onWheel: e => handleOverlayWheel(e, item.id),\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `relative w-full h-full border-2 rounded-lg overflow-hidden shadow-lg group ${isSelected ? \"border-blue-400\" : \"border-white hover:border-blue-300\"}`,\n                style: {\n                  transition: isDraggingThis || isResizingThis ? \"none\" : \"border-color 0.2s ease\"\n                },\n                children: [item.type === \"video\" ? /*#__PURE__*/_jsxDEV(\"video\", {\n                  src: item.url,\n                  className: \"w-full h-full object-cover pointer-events-none\",\n                  muted: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1018,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: item.url,\n                  alt: item.name,\n                  className: \"w-full h-full object-cover pointer-events-none\",\n                  draggable: false\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1024,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `absolute inset-0 bg-blue-500 bg-opacity-0 hover:bg-opacity-10 ${isSelected ? \"bg-opacity-10\" : \"\"}`,\n                  style: {\n                    transition: isDraggingThis || isResizingThis ? \"none\" : \"background-color 0.2s ease\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1032,\n                  columnNumber: 23\n                }, this), isSelected && /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `resize-handle absolute -top-2 -left-2 w-4 h-4 bg-blue-500 rounded-full cursor-nw-resize opacity-90 hover:opacity-100 hover:scale-125 shadow-md border-2 border-white ${isResizingThis && resizeOverlayHandle === \"nw\" ? \"scale-150 bg-red-500\" : \"\"}`,\n                    onMouseDown: e => handleOverlayResizeStart(e, item, \"nw\"),\n                    style: {\n                      transition: isDraggingThis || isResizingThis ? \"none\" : \"all 0.2s ease\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1047,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `resize-handle absolute -top-2 -right-2 w-4 h-4 bg-blue-500 rounded-full cursor-ne-resize opacity-90 hover:opacity-100 hover:scale-125 shadow-md border-2 border-white ${isResizingThis && resizeOverlayHandle === \"ne\" ? \"scale-150 bg-red-500\" : \"\"}`,\n                    onMouseDown: e => handleOverlayResizeStart(e, item, \"ne\"),\n                    style: {\n                      transition: isDraggingThis || isResizingThis ? \"none\" : \"all 0.2s ease\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1063,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `resize-handle absolute -bottom-2 -left-2 w-4 h-4 bg-blue-500 rounded-full cursor-sw-resize opacity-90 hover:opacity-100 hover:scale-125 shadow-md border-2 border-white ${isResizingThis && resizeOverlayHandle === \"sw\" ? \"scale-150 bg-red-500\" : \"\"}`,\n                    onMouseDown: e => handleOverlayResizeStart(e, item, \"sw\"),\n                    style: {\n                      transition: isDraggingThis || isResizingThis ? \"none\" : \"all 0.2s ease\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1079,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `resize-handle absolute -bottom-2 -right-2 w-4 h-4 bg-blue-500 rounded-full cursor-se-resize opacity-90 hover:opacity-100 hover:scale-125 shadow-md border-2 border-white ${isResizingThis && resizeOverlayHandle === \"se\" ? \"scale-150 bg-red-500\" : \"\"}`,\n                    onMouseDown: e => handleOverlayResizeStart(e, item, \"se\"),\n                    style: {\n                      transition: isDraggingThis || isResizingThis ? \"none\" : \"all 0.2s ease\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1095,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-2 h-2 bg-blue-500 rounded-full opacity-60 pointer-events-none\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1112,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"absolute -bottom-12 left-0 right-0 bg-black/80 backdrop-blur-sm rounded-lg px-3 py-2 border border-white/20 shadow-lg\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center space-x-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-white text-xs font-medium min-w-fit\",\n                        children: \"Opacity:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1117,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"range\",\n                        min: \"0.1\",\n                        max: \"1\",\n                        step: \"0.05\",\n                        value: transform.opacity,\n                        onChange: e => updateOverlayTransform(item.id, {\n                          opacity: parseFloat(e.target.value)\n                        }),\n                        className: \"flex-1 h-2 accent-blue-500 cursor-pointer\",\n                        onMouseDown: e => e.stopPropagation()\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1120,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-white text-xs min-w-8 text-right font-mono\",\n                        children: [Math.round(transform.opacity * 100), \"%\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1134,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1116,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1115,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `absolute top-1 left-1 bg-black/70 text-white text-xs px-2 py-1 rounded pointer-events-none ${isSelected ? \"opacity-100\" : \"opacity-0 group-hover:opacity-100\"}`,\n                  style: {\n                    transition: isDraggingThis || isResizingThis ? \"none\" : \"opacity 0.2s ease\"\n                  },\n                  children: [item.name, \" \\u2022 \", Math.round(transform.scale * 100), \"% \\u2022\", \" \", Math.round(transform.opacity * 100), \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1142,\n                  columnNumber: 23\n                }, this), isSelected && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"absolute -top-0.5 -left-0.5 -right-0.5 -bottom-0.5 border-2 border-blue-400 rounded-lg pointer-events-none animate-pulse\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1160,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1004,\n                columnNumber: 21\n              }, this)\n            }, item.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 973,\n              columnNumber: 19\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 943,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full h-full flex items-center justify-center text-white\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-20 h-20 bg-gray-800 rounded-2xl flex items-center justify-center mx-auto mb-4\",\n              children: /*#__PURE__*/_jsxDEV(Film, {\n                size: 40,\n                className: \"opacity-50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1171,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1170,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xl opacity-75 font-medium\",\n              children: \"No content at current time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1173,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm opacity-50 mb-4\",\n              children: \"Drag media to timeline tracks to start editing\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1176,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs opacity-40 space-y-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\uD83D\\uDCA1 Overlays are interactive \\u2022 Ripple mode enabled\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1180,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Press\", \" \", /*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-1 py-0.5 bg-gray-700 rounded text-xs\",\n                  children: \"?\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1183,\n                  columnNumber: 21\n                }, this), \" \", \"for help & shortcuts\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1181,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1179,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1169,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1168,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute bottom-6 left-1/2 transform -translate-x-1/2 bg-black/60 backdrop-blur-md rounded-2xl p-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => seekTo(Math.max(0, currentTime - 10)),\n              className: \"text-white hover:text-blue-400 transition-colors p-1 rounded-lg hover:bg-white/10\",\n              title: \"Skip back 10 seconds\",\n              children: /*#__PURE__*/_jsxDEV(SkipBack, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1200,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1195,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handlePlayPause,\n              className: \"w-12 h-12 bg-white/20 hover:bg-white/30 rounded-2xl flex items-center justify-center text-white transition-all hover:scale-105\",\n              title: \"Play/Pause (Space)\",\n              children: isPlaying ? /*#__PURE__*/_jsxDEV(Pause, {\n                size: 24\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1207,\n                columnNumber: 30\n              }, this) : /*#__PURE__*/_jsxDEV(Play, {\n                size: 24\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1207,\n                columnNumber: 52\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1202,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => seekTo(Math.min(videoDuration, currentTime + 10)),\n              className: \"text-white hover:text-blue-400 transition-colors p-1 rounded-lg hover:bg-white/10\",\n              title: \"Skip forward 10 seconds\",\n              children: /*#__PURE__*/_jsxDEV(SkipForward, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1216,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1209,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setIsMuted(!isMuted),\n                className: \"text-white hover:text-blue-400 transition-colors p-1 rounded-lg hover:bg-white/10\",\n                title: \"Toggle mute\",\n                children: isMuted ? /*#__PURE__*/_jsxDEV(VolumeX, {\n                  size: 20\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1224,\n                  columnNumber: 30\n                }, this) : /*#__PURE__*/_jsxDEV(Volume2, {\n                  size: 20\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1224,\n                  columnNumber: 54\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1219,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"range\",\n                min: \"0\",\n                max: \"1\",\n                step: \"0.1\",\n                value: volume,\n                onChange: e => setVolume(parseFloat(e.target.value)),\n                className: \"w-24 accent-blue-500\",\n                title: \"Volume control\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1226,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1218,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-white text-sm font-medium min-w-0\",\n              title: \"Current time / Total duration\",\n              children: [formatTime(currentTime), \" / \", formatTime(videoDuration)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1237,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1194,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1193,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 937,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Timeline, {\n        timelineItems: timelineItems,\n        setTimelineItems: setTimelineItems,\n        currentTime: currentTime,\n        videoDuration: videoDuration,\n        setVideoDuration: setVideoDuration,\n        selectedTimelineItem: selectedTimelineItem,\n        setSelectedTimelineItem: setSelectedTimelineItem,\n        timelineZoom: timelineZoom,\n        setTimelineZoom: setTimelineZoom,\n        tracks: tracks,\n        setTracks: setTracks,\n        draggedItem: draggedItem,\n        draggedTimelineItem: draggedTimelineItem,\n        setDraggedTimelineItem: setDraggedTimelineItem,\n        dropPreview: dropPreview,\n        setDropPreview: setDropPreview,\n        isDragging: isDragging,\n        isTimelineDragging: isTimelineDragging,\n        setIsTimelineDragging: setIsTimelineDragging,\n        isResizing: isResizing,\n        setIsResizing: setIsResizing,\n        copiedItem: copiedItem,\n        formatTime: formatTime,\n        seekTo: seekTo,\n        splitTimelineItem: splitTimelineItem,\n        copyTimelineItem: copyTimelineItem,\n        pasteTimelineItem: pasteTimelineItem,\n        deleteSelectedItem: deleteSelectedItem,\n        addToTimeline: addToTimeline,\n        insertWithRipple: insertWithRipple,\n        applyRippleEffect: applyRippleEffect,\n        removeFromTimeline: removeFromTimeline,\n        onSmartAddToTimeline: func => {\n          console.log('📨 Timeline передал smartAddFunction:', {\n            received: !!func,\n            type: typeof func,\n            timestamp: new Date().toISOString()\n          });\n          // ВАЖНО: Правильно сохраняем функцию в состоянии\n          setSmartAddFunction(() => func);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1247,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 935,\n      columnNumber: 7\n    }, this), showHelp && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-y-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 border-b border-gray-200 flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl font-bold text-gray-800 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(HelpCircle, {\n              size: 24,\n              className: \"mr-3 text-blue-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1298,\n              columnNumber: 17\n            }, this), \"CapCut Pro - Help & Shortcuts\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1297,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowHelp(false),\n            className: \"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-xl transition-all\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1305,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1301,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1296,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-semibold text-gray-800 mb-3 flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(Film, {\n                size: 18,\n                className: \"mr-2 text-blue-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1312,\n                columnNumber: 19\n              }, this), \"Timeline Controls\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1311,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 gap-3 text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Drag center:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1317,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Move item\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1318,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1316,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Drag edges:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1321,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Trim duration\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1322,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1320,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Auto ripple:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1325,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Push other blocks\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1326,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1324,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Ctrl + Wheel:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1329,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Zoom timeline\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1330,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1328,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1315,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1310,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-semibold text-gray-800 mb-3 flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(Layers, {\n                size: 18,\n                className: \"mr-2 text-purple-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1337,\n                columnNumber: 19\n              }, this), \"Video Overlays (CapCut Style)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1336,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 gap-3 text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Click overlay:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1342,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Select & show controls\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1343,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1341,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Drag anywhere:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1346,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Move position\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1347,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1345,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Drag corner dots:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1350,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Resize overlay\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1351,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1349,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Ctrl + Scroll:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1354,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Smooth zoom\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1355,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1353,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Opacity slider:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1358,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"0-100% transparency\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1359,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1357,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Auto bounds:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1362,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Stays in view area\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1363,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1361,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1340,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1335,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-semibold text-gray-800 mb-3 flex items-center\",\n              children: \"\\u2328\\uFE0F Keyboard Shortcuts\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1369,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 gap-3 text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-2 py-1 bg-gray-100 rounded text-xs font-mono\",\n                  children: \"Space\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1374,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Play / Pause\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1377,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1373,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-2 py-1 bg-gray-100 rounded text-xs font-mono\",\n                  children: \"\\u2190 \\u2192\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1380,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Seek (0.1s)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1383,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1379,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-2 py-1 bg-gray-100 rounded text-xs font-mono\",\n                  children: \"Ctrl + B\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1386,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Split item\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1389,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1385,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-2 py-1 bg-gray-100 rounded text-xs font-mono\",\n                  children: \"Ctrl + C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1392,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Copy item\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1395,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1391,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-2 py-1 bg-gray-100 rounded text-xs font-mono\",\n                  children: \"Ctrl + V\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1398,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Paste item\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1401,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1397,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-2 py-1 bg-gray-100 rounded text-xs font-mono\",\n                  children: \"Del\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1404,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Delete item\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1407,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1403,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1372,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1368,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-semibold text-gray-800 mb-3 flex items-center\",\n              children: \"\\uD83D\\uDCA1 Pro Tips\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1413,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"space-y-2 text-sm text-gray-600\",\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"flex items-start\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"inline-block w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3 flex-shrink-0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1418,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Drag media from library directly to timeline tracks for quick editing\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1419,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1417,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"flex items-start\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"inline-block w-2 h-2 bg-purple-500 rounded-full mt-2 mr-3 flex-shrink-0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1425,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Overlays can be dragged anywhere on video area - they auto-fit within bounds\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1426,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1424,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"flex items-start\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"inline-block w-2 h-2 bg-green-500 rounded-full mt-2 mr-3 flex-shrink-0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1432,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Ripple mode automatically pushes blocks when inserting new content\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1433,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1431,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1416,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1412,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1309,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 border-t border-gray-200 bg-gray-50 rounded-b-2xl\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-center text-sm text-gray-500\",\n            children: [\"\\uD83C\\uDFAC Made with CapCut Pro styling \\u2022 Press\", \" \", /*#__PURE__*/_jsxDEV(\"kbd\", {\n              className: \"px-1 py-0.5 bg-white rounded text-xs font-mono border\",\n              children: \"?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1445,\n              columnNumber: 17\n            }, this), \" \", \"or click help icon anytime\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1443,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1442,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1295,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1294,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 900,\n    columnNumber: 5\n  }, this);\n};\n_s(VideoEditor, \"G1WsBOUIIaEun+k4uO6BPi+HDeg=\");\n_c = VideoEditor;\nexport default VideoEditor;\nvar _c;\n$RefreshReg$(_c, \"VideoEditor\");","map":{"version":3,"names":["useState","useRef","useEffect","useCallback","MediaLibrary","Timeline","Play","Pause","Volume2","SkipBack","SkipForward","VolumeX","Film","Layers","HelpCircle","X","jsxDEV","_jsxDEV","Fragment","_Fragment","VideoEditor","_s","mediaLibrary","setMediaLibrary","videos","audios","images","timelineItems","setTimelineItems","currentTime","setCurrentTime","videoDuration","setVideoDuration","selectedTimelineItem","setSelectedTimelineItem","timelineZoom","setTimelineZoom","activeTab","setActiveTab","volume","setVolume","isMuted","setIsMuted","isPlaying","setIsPlaying","currentVideoSource","setCurrentVideoSource","draggedItem","setDraggedItem","draggedTimelineItem","setDraggedTimelineItem","dropPreview","setDropPreview","isDragging","setIsDragging","isTimelineDragging","setIsTimelineDragging","copiedItem","setCopiedItem","isResizing","setIsResizing","selectedOverlay","setSelectedOverlay","overlayTransforms","setOverlayTransforms","isDraggingOverlay","setIsDraggingOverlay","isResizingOverlay","setIsResizingOverlay","overlayDragStart","setOverlayDragStart","x","y","resizeOverlayHandle","setResizeOverlayHandle","initialOverlayTransform","setInitialOverlayTransform","showHelp","setShowHelp","smartAddFunction","setSmartAddFunction","tracks","setTracks","overlays","id","name","type","main","audio","intervalRef","audioElementsRef","Map","videoRef","videoContainerRef","console","log","available","timestamp","Date","toISOString","formatTime","seconds","mins","Math","floor","secs","ms","toString","padStart","handlePlayPause","seekTo","time","newTime","max","min","content","getCurrentTimelineContent","forEach","audioItem","audioElement","current","get","relativeTime","startTime","currentItems","filter","item","duration","mainVideo","find","trackType","createAudioElement","has","document","createElement","src","url","muted","preload","set","syncAudioTime","timeDiff","abs","checkCollision","newItem","excludeId","some","trackId","itemStart","itemEnd","newStart","newEnd","insertWithRipple","insertTime","trackItems","sort","a","b","length","shouldRipple","affectedItems","insertPosition","blockAtPosition","blocksToShift","nextBlock","availableSpace","shiftAmount","applyRippleEffect","prev","map","affectedItem","affected","maxEndTime","findNextAvailablePosition","preferredStart","testItem","i","currentItem","nextItem","gapStart","gapEnd","gapSize","lastItem","removeFromTimeline","itemId","pause","delete","getOverlayTransform","overlayId","scale","opacity","updateOverlayTransform","updates","handleOverlayMouseDown","e","overlay","target","closest","preventDefault","stopPropagation","container","containerRect","getBoundingClientRect","overlayElement","currentTarget","overlayRect","clientX","left","clientY","top","containerX","containerY","handleOverlayResizeStart","handle","currentTransform","startScale","startX","startY","handleOverlayMouseMove","rect","overlaySize","newX","newY","padding","limitedX","width","limitedY","height","baseX","baseY","index","undefined","deltaX","deltaY","scaleFactor","sensitivity","newScale","handleOverlayMouseUp","handleOverlayWheel","ctrlKey","transform","scaleDelta","splitTimelineItem","splitTime","firstPartDuration","secondPartStart","secondPartDuration","secondPart","now","random","updatedFirstPart","timelineItem","concat","copyTimelineItem","pasteTimelineItem","_insertResult$affecte","targetTrackId","insertResult","newEndTime","deleteSelectedItem","addToTimeline","mediaItem","error","startsWith","finalStartTime","newTimelineItem","mediaId","handleMediaLibraryClick","addEventListener","body","style","cursor","removeEventListener","o","firstImage","currentAudioIds","Set","paused","play","catch","setInterval","clearInterval","handleKeyDown","tagName","key","code","step","shiftKey","window","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","title","onClick","alt","isSelected","isDraggingThis","isResizingThis","zIndex","transition","onMouseDown","onWheel","draggable","value","onChange","parseFloat","round","size","onSmartAddToTimeline","func","received","_c","$RefreshReg$"],"sources":["C:/Scriptify/ai-content-studio/frontend/src/components/VideoEditor/VideoEditor.jsx"],"sourcesContent":["import { useState, useRef, useEffect, useCallback } from \"react\";\r\nimport { MediaLibrary } from \"../MediaLibrary\";\r\nimport { Timeline } from \"../Timeline\";\r\n\r\nimport {\r\n  Play,\r\n  Pause,\r\n  Volume2,\r\n  SkipBack,\r\n  SkipForward,\r\n  VolumeX,\r\n  Film,\r\n  Layers,\r\n  HelpCircle,\r\n  X,\r\n} from \"lucide-react\";\r\n\r\nconst VideoEditor = () => {\r\n  const [mediaLibrary, setMediaLibrary] = useState({\r\n    videos: [],\r\n    audios: [],\r\n    images: [],\r\n  });\r\n  const [timelineItems, setTimelineItems] = useState([]);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [videoDuration, setVideoDuration] = useState(60);\r\n  const [selectedTimelineItem, setSelectedTimelineItem] = useState(null);\r\n  const [timelineZoom, setTimelineZoom] = useState(1);\r\n  const [activeTab, setActiveTab] = useState(\"videos\");\r\n  const [volume, setVolume] = useState(1);\r\n  const [isMuted, setIsMuted] = useState(false);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [currentVideoSource, setCurrentVideoSource] = useState(null);\r\n  const [draggedItem, setDraggedItem] = useState(null);\r\n  const [draggedTimelineItem, setDraggedTimelineItem] = useState(null);\r\n  const [dropPreview, setDropPreview] = useState(null);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [isTimelineDragging, setIsTimelineDragging] = useState(false);\r\n  const [copiedItem, setCopiedItem] = useState(null);\r\n\r\n  // Состояния для resize\r\n  const [isResizing, setIsResizing] = useState(false);\r\n\r\n  // Состояния для управления overlays на видео\r\n  const [selectedOverlay, setSelectedOverlay] = useState(null);\r\n  const [overlayTransforms, setOverlayTransforms] = useState({});\r\n  const [isDraggingOverlay, setIsDraggingOverlay] = useState(false);\r\n  const [isResizingOverlay, setIsResizingOverlay] = useState(false);\r\n  const [overlayDragStart, setOverlayDragStart] = useState({ x: 0, y: 0 });\r\n  const [resizeOverlayHandle, setResizeOverlayHandle] = useState(null);\r\n  const [initialOverlayTransform, setInitialOverlayTransform] = useState(null);\r\n\r\n  // Модальное окно помощи\r\n  const [showHelp, setShowHelp] = useState(false);\r\n\r\n  // ✅ НОВОЕ: Состояние для умной функции добавления из Timeline\r\n  const [smartAddFunction, setSmartAddFunction] = useState(null);\r\n\r\n  // Треки\r\n  const [tracks, setTracks] = useState({\r\n    overlays: [\r\n      { id: \"overlay-1\", name: \"Overlay 1\", type: \"overlay\" },\r\n      { id: \"overlay-2\", name: \"Overlay 2\", type: \"overlay\" },\r\n    ],\r\n    main: [{ id: \"main-video\", name: \"Main Video\", type: \"main\" }],\r\n    audio: [\r\n      { id: \"audio-1\", name: \"Audio 1\", type: \"audio\" },\r\n      { id: \"audio-2\", name: \"Audio 2\", type: \"audio\" },\r\n    ],\r\n  });\r\n\r\n  const intervalRef = useRef(null);\r\n  const audioElementsRef = useRef(new Map());\r\n  const videoRef = useRef(null);\r\n  const videoContainerRef = useRef(null);\r\n\r\n  // ✅ ОТЛАДКА: Проверка получения умной функции\r\n  useEffect(() => {\r\n    console.log('🔄 SmartAddFunction изменилась в VideoEditor:', {\r\n      available: !!smartAddFunction,\r\n      type: typeof smartAddFunction,\r\n      timestamp: new Date().toISOString()\r\n    });\r\n    \r\n    if (smartAddFunction) {\r\n      console.log('✅ SmartAddFunction готова к использованию!');\r\n    } else {\r\n      console.log('⚠️ SmartAddFunction еще не получена от Timeline');\r\n    }\r\n  }, [smartAddFunction]);\r\n\r\n  // Базовые функции\r\n  const formatTime = (seconds) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = Math.floor(seconds % 60);\r\n    const ms = Math.floor((seconds % 1) * 100);\r\n    return timelineZoom > 5\r\n      ? `${mins}:${secs.toString().padStart(2, \"0\")}.${ms\r\n          .toString()\r\n          .padStart(2, \"0\")}`\r\n      : `${mins}:${secs.toString().padStart(2, \"0\")}`;\r\n  };\r\n\r\n  const handlePlayPause = () => {\r\n    setIsPlaying(!isPlaying);\r\n  };\r\n\r\n  const seekTo = (time) => {\r\n    const newTime = Math.max(0, Math.min(videoDuration, time));\r\n    setCurrentTime(newTime);\r\n\r\n    const content = getCurrentTimelineContent();\r\n    content.audio.forEach((audioItem) => {\r\n      const audioElement = audioElementsRef.current.get(audioItem.id);\r\n      if (audioElement) {\r\n        const relativeTime = newTime - audioItem.startTime;\r\n        audioElement.currentTime = Math.max(0, relativeTime);\r\n      }\r\n    });\r\n  };\r\n\r\n  const getCurrentTimelineContent = useCallback(() => {\r\n    const currentItems = timelineItems.filter(\r\n      (item) =>\r\n        currentTime >= item.startTime &&\r\n        currentTime < item.startTime + item.duration\r\n    );\r\n\r\n    return {\r\n      mainVideo: currentItems.find(\r\n        (item) => item.trackType === \"main\" && item.type === \"video\"\r\n      ),\r\n      overlays: currentItems.filter((item) => item.trackType === \"overlay\"),\r\n      audio: currentItems.filter((item) => item.trackType === \"audio\"),\r\n    };\r\n  }, [currentTime, timelineItems]);\r\n\r\n  const createAudioElement = useCallback(\r\n    (audioItem) => {\r\n      if (!audioElementsRef.current.has(audioItem.id)) {\r\n        const audio = document.createElement(\"audio\");\r\n        audio.src = audioItem.url;\r\n        audio.volume = (audioItem.volume || 1) * volume;\r\n        audio.muted = isMuted;\r\n        audio.preload = \"metadata\";\r\n        audioElementsRef.current.set(audioItem.id, audio);\r\n      }\r\n      return audioElementsRef.current.get(audioItem.id);\r\n    },\r\n    [volume, isMuted]\r\n  );\r\n\r\n  const syncAudioTime = useCallback((audioItem, relativeTime) => {\r\n    const audioElement = audioElementsRef.current.get(audioItem.id);\r\n    if (audioElement) {\r\n      const timeDiff = Math.abs(audioElement.currentTime - relativeTime);\r\n      if (timeDiff > 0.2) {\r\n        audioElement.currentTime = Math.max(0, relativeTime);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  const checkCollision = useCallback(\r\n    (newItem, excludeId = null) => {\r\n      return timelineItems.some((item) => {\r\n        if (item.id === excludeId) return false;\r\n        if (item.trackId !== newItem.trackId) return false;\r\n\r\n        const itemStart = item.startTime;\r\n        const itemEnd = item.startTime + item.duration;\r\n        const newStart = newItem.startTime;\r\n        const newEnd = newItem.startTime + newItem.duration;\r\n\r\n        return newStart < itemEnd && newEnd > itemStart;\r\n      });\r\n    },\r\n    [timelineItems]\r\n  );\r\n\r\n  const insertWithRipple = useCallback(\r\n    (trackId, insertTime, duration, excludeId = null) => {\r\n      const trackItems = timelineItems\r\n        .filter((item) => item.trackId === trackId && item.id !== excludeId)\r\n        .sort((a, b) => a.startTime - b.startTime);\r\n\r\n      if (trackItems.length === 0) {\r\n        return {\r\n          time: Math.max(0, insertTime),\r\n          shouldRipple: false,\r\n          affectedItems: [],\r\n        };\r\n      }\r\n\r\n      let insertPosition = insertTime;\r\n      let shouldRipple = false;\r\n      let affectedItems = [];\r\n\r\n      const blockAtPosition = trackItems.find(\r\n        (item) =>\r\n          insertTime >= item.startTime &&\r\n          insertTime < item.startTime + item.duration\r\n      );\r\n\r\n      if (blockAtPosition) {\r\n        insertPosition = blockAtPosition.startTime;\r\n        shouldRipple = true;\r\n        affectedItems = trackItems.filter(\r\n          (item) => item.startTime >= insertPosition\r\n        );\r\n      } else {\r\n        const blocksToShift = trackItems.filter(\r\n          (item) => item.startTime >= insertTime\r\n        );\r\n\r\n        if (blocksToShift.length > 0) {\r\n          const nextBlock = blocksToShift[0];\r\n          const availableSpace = nextBlock.startTime - insertTime;\r\n\r\n          if (availableSpace >= duration) {\r\n            insertPosition = insertTime;\r\n            shouldRipple = false;\r\n          } else {\r\n            insertPosition = insertTime;\r\n            shouldRipple = true;\r\n            affectedItems = blocksToShift;\r\n          }\r\n        } else {\r\n          insertPosition = insertTime;\r\n          shouldRipple = false;\r\n        }\r\n      }\r\n\r\n      return {\r\n        time: Math.max(0, insertPosition),\r\n        shouldRipple,\r\n        affectedItems,\r\n        shiftAmount: shouldRipple ? duration : 0,\r\n      };\r\n    },\r\n    [timelineItems]\r\n  );\r\n\r\n  const applyRippleEffect = useCallback(\r\n    (affectedItems, shiftAmount) => {\r\n      if (!affectedItems.length || shiftAmount <= 0) return;\r\n\r\n      setTimelineItems((prev) =>\r\n        prev.map((item) => {\r\n          const affectedItem = affectedItems.find(\r\n            (affected) => affected.id === item.id\r\n          );\r\n          if (affectedItem) {\r\n            return {\r\n              ...item,\r\n              startTime: item.startTime + shiftAmount,\r\n            };\r\n          }\r\n          return item;\r\n        })\r\n      );\r\n\r\n      if (affectedItems.length > 0) {\r\n        const maxEndTime = Math.max(\r\n          ...affectedItems.map(\r\n            (item) => item.startTime + item.duration + shiftAmount\r\n          )\r\n        );\r\n        if (maxEndTime > videoDuration) {\r\n          setVideoDuration(maxEndTime + 10);\r\n        }\r\n      }\r\n    },\r\n    [videoDuration]\r\n  );\r\n\r\n  const findNextAvailablePosition = useCallback(\r\n    (trackId, duration, preferredStart = 0) => {\r\n      const trackItems = timelineItems\r\n        .filter((item) => item.trackId === trackId)\r\n        .sort((a, b) => a.startTime - b.startTime);\r\n\r\n      if (preferredStart >= 0) {\r\n        const testItem = { trackId, startTime: preferredStart, duration };\r\n        if (!checkCollision(testItem)) {\r\n          return preferredStart;\r\n        }\r\n      }\r\n\r\n      for (let i = 0; i < trackItems.length; i++) {\r\n        const currentItem = trackItems[i];\r\n        const nextItem = trackItems[i + 1];\r\n\r\n        if (i === 0 && currentItem.startTime >= duration) {\r\n          return 0;\r\n        }\r\n\r\n        if (nextItem) {\r\n          const gapStart = currentItem.startTime + currentItem.duration;\r\n          const gapEnd = nextItem.startTime;\r\n          const gapSize = gapEnd - gapStart;\r\n\r\n          if (gapSize >= duration) {\r\n            return gapStart;\r\n          }\r\n        }\r\n      }\r\n\r\n      if (trackItems.length === 0) return 0;\r\n      const lastItem = trackItems[trackItems.length - 1];\r\n      return lastItem.startTime + lastItem.duration;\r\n    },\r\n    [timelineItems, checkCollision]\r\n  );\r\n\r\n  const removeFromTimeline = (itemId) => {\r\n    const audioElement = audioElementsRef.current.get(itemId);\r\n    if (audioElement) {\r\n      audioElement.pause();\r\n      audioElement.src = \"\";\r\n      audioElementsRef.current.delete(itemId);\r\n    }\r\n\r\n    setTimelineItems((prev) => prev.filter((item) => item.id !== itemId));\r\n    setSelectedTimelineItem(null);\r\n  };\r\n\r\n  // Функции для управления overlays\r\n  const getOverlayTransform = useCallback(\r\n    (overlayId) => {\r\n      return (\r\n        overlayTransforms[overlayId] || { x: 0, y: 0, scale: 1, opacity: 1 }\r\n      );\r\n    },\r\n    [overlayTransforms]\r\n  );\r\n\r\n  const updateOverlayTransform = useCallback(\r\n    (overlayId, updates) => {\r\n      setOverlayTransforms((prev) => ({\r\n        ...prev,\r\n        [overlayId]: { ...getOverlayTransform(overlayId), ...updates },\r\n      }));\r\n    },\r\n    [getOverlayTransform]\r\n  );\r\n\r\n  const handleOverlayMouseDown = useCallback((e, overlay) => {\r\n    if (e.target.closest(\".resize-handle\")) return;\r\n\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    setSelectedOverlay(overlay);\r\n    setIsDraggingOverlay(true);\r\n\r\n    const container = videoContainerRef.current;\r\n    if (!container) return;\r\n\r\n    const containerRect = container.getBoundingClientRect();\r\n    const overlayElement = e.currentTarget;\r\n    const overlayRect = overlayElement.getBoundingClientRect();\r\n\r\n    setOverlayDragStart({\r\n      x: e.clientX - overlayRect.left,\r\n      y: e.clientY - overlayRect.top,\r\n      containerX: containerRect.left,\r\n      containerY: containerRect.top,\r\n    });\r\n  }, []);\r\n\r\n  const handleOverlayResizeStart = useCallback(\r\n    (e, overlay, handle) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      setSelectedOverlay(overlay);\r\n      setIsResizingOverlay(true);\r\n      setResizeOverlayHandle(handle);\r\n\r\n      const currentTransform = getOverlayTransform(overlay.id);\r\n      setInitialOverlayTransform(currentTransform);\r\n\r\n      setOverlayDragStart({\r\n        x: e.clientX,\r\n        y: e.clientY,\r\n        startScale: currentTransform.scale,\r\n        startX: currentTransform.x,\r\n        startY: currentTransform.y,\r\n      });\r\n    },\r\n    [getOverlayTransform]\r\n  );\r\n\r\n  const handleOverlayMouseMove = useCallback(\r\n    (e) => {\r\n      if (!selectedOverlay) return;\r\n\r\n      if (isDraggingOverlay) {\r\n        const container = videoContainerRef.current;\r\n        if (!container) return;\r\n\r\n        const rect = container.getBoundingClientRect();\r\n        const overlaySize = 128 * getOverlayTransform(selectedOverlay.id).scale;\r\n\r\n        const newX =\r\n          e.clientX - overlayDragStart.containerX - overlayDragStart.x;\r\n        const newY =\r\n          e.clientY - overlayDragStart.containerY - overlayDragStart.y;\r\n\r\n        const padding = 5;\r\n        const limitedX = Math.max(\r\n          padding,\r\n          Math.min(rect.width - overlaySize - padding, newX)\r\n        );\r\n        const limitedY = Math.max(\r\n          padding,\r\n          Math.min(rect.height - overlaySize - padding, newY)\r\n        );\r\n\r\n        const baseX = 200;\r\n        const baseY = 50 + selectedOverlay.index * 120;\r\n\r\n        updateOverlayTransform(selectedOverlay.id, {\r\n          x: limitedX - baseX,\r\n          y: limitedY - baseY,\r\n        });\r\n      } else if (\r\n        isResizingOverlay &&\r\n        overlayDragStart.startScale !== undefined &&\r\n        resizeOverlayHandle\r\n      ) {\r\n        const deltaX = e.clientX - overlayDragStart.x;\r\n        const deltaY = e.clientY - overlayDragStart.y;\r\n\r\n        let scaleFactor = 1;\r\n        const sensitivity = 0.005;\r\n\r\n        switch (resizeOverlayHandle) {\r\n          case \"nw\":\r\n            scaleFactor = 1 - (deltaX + deltaY) * sensitivity;\r\n            break;\r\n          case \"ne\":\r\n            scaleFactor = 1 + (deltaX - deltaY) * sensitivity;\r\n            break;\r\n          case \"sw\":\r\n            scaleFactor = 1 + (-deltaX + deltaY) * sensitivity;\r\n            break;\r\n          case \"se\":\r\n            scaleFactor = 1 + (deltaX + deltaY) * sensitivity;\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n\r\n        const newScale = Math.max(\r\n          0.2,\r\n          Math.min(4, overlayDragStart.startScale * scaleFactor)\r\n        );\r\n\r\n        updateOverlayTransform(selectedOverlay.id, {\r\n          scale: newScale,\r\n        });\r\n      }\r\n    },\r\n    [\r\n      selectedOverlay,\r\n      isDraggingOverlay,\r\n      isResizingOverlay,\r\n      overlayDragStart,\r\n      updateOverlayTransform,\r\n      getOverlayTransform,\r\n      resizeOverlayHandle,\r\n    ]\r\n  );\r\n\r\n  const handleOverlayMouseUp = useCallback(() => {\r\n    setIsDraggingOverlay(false);\r\n    setIsResizingOverlay(false);\r\n    setResizeOverlayHandle(null);\r\n    setInitialOverlayTransform(null);\r\n  }, []);\r\n\r\n  const handleOverlayWheel = useCallback(\r\n    (e, overlayId) => {\r\n      if (!e.ctrlKey) return;\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      const transform = getOverlayTransform(overlayId);\r\n      const scaleDelta = e.deltaY > 0 ? -0.05 : 0.05;\r\n      const newScale = Math.max(0.2, Math.min(4, transform.scale + scaleDelta));\r\n\r\n      updateOverlayTransform(overlayId, { scale: newScale });\r\n    },\r\n    [getOverlayTransform, updateOverlayTransform]\r\n  );\r\n\r\n  // Функции для работы с элементами таймлайна\r\n  const splitTimelineItem = useCallback(() => {\r\n    if (!selectedTimelineItem) return;\r\n\r\n    const item = selectedTimelineItem;\r\n    const splitTime = currentTime;\r\n\r\n    if (\r\n      splitTime <= item.startTime ||\r\n      splitTime >= item.startTime + item.duration\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    const firstPartDuration = splitTime - item.startTime;\r\n    const secondPartStart = splitTime;\r\n    const secondPartDuration = item.duration - firstPartDuration;\r\n\r\n    const secondPart = {\r\n      ...item,\r\n      id: Date.now() + Math.random(),\r\n      startTime: secondPartStart,\r\n      duration: secondPartDuration,\r\n    };\r\n\r\n    const updatedFirstPart = {\r\n      ...item,\r\n      duration: firstPartDuration,\r\n    };\r\n\r\n    setTimelineItems((prev) =>\r\n      prev\r\n        .map((timelineItem) =>\r\n          timelineItem.id === item.id ? updatedFirstPart : timelineItem\r\n        )\r\n        .concat(secondPart)\r\n    );\r\n\r\n    setSelectedTimelineItem(null);\r\n  }, [selectedTimelineItem, currentTime]);\r\n\r\n  const copyTimelineItem = useCallback(() => {\r\n    if (!selectedTimelineItem) return;\r\n    setCopiedItem(selectedTimelineItem);\r\n  }, [selectedTimelineItem]);\r\n\r\n  const pasteTimelineItem = useCallback(() => {\r\n    if (!copiedItem) return;\r\n\r\n    const targetTrackId = copiedItem.trackId;\r\n    const insertResult = insertWithRipple(\r\n      targetTrackId,\r\n      currentTime,\r\n      copiedItem.duration\r\n    );\r\n\r\n    if (insertResult.shouldRipple && insertResult.affectedItems?.length > 0) {\r\n      applyRippleEffect(insertResult.affectedItems, copiedItem.duration);\r\n    }\r\n\r\n    const newItem = {\r\n      ...copiedItem,\r\n      id: Date.now() + Math.random(),\r\n      startTime: insertResult.time,\r\n    };\r\n\r\n    setTimelineItems((prev) => [...prev, newItem]);\r\n\r\n    const newEndTime = newItem.startTime + newItem.duration;\r\n    if (newEndTime > videoDuration) {\r\n      setVideoDuration(newEndTime + 10);\r\n    }\r\n\r\n    setSelectedTimelineItem(newItem);\r\n  }, [\r\n    copiedItem,\r\n    currentTime,\r\n    insertWithRipple,\r\n    applyRippleEffect,\r\n    videoDuration,\r\n  ]);\r\n\r\n  const deleteSelectedItem = useCallback(() => {\r\n    if (!selectedTimelineItem) return;\r\n    removeFromTimeline(selectedTimelineItem.id);\r\n  }, [selectedTimelineItem]);\r\n\r\n  // ✅ ИСПРАВЛЕННАЯ: Функция добавления с приоритетом переданных параметров\r\n  const addToTimeline = (mediaItem, startTime = null, targetTrackId = null) => {\r\n    if (!mediaItem || !mediaItem.name || !mediaItem.type) {\r\n      console.error('❌ addToTimeline: невалидный элемент', mediaItem);\r\n      return;\r\n    }\r\n    \r\n    console.log('🚀 addToTimeline вызвана с:', { \r\n      name: mediaItem.name, \r\n      type: mediaItem.type, \r\n      startTime, \r\n      targetTrackId \r\n    });\r\n\r\n    let trackType, trackId;\r\n\r\n    // ПРИОРИТЕТ: Если передан targetTrackId, используем его\r\n    if (targetTrackId) {\r\n      trackId = targetTrackId;\r\n      \r\n      // Определяем тип дорожки по ID\r\n      if (targetTrackId.startsWith(\"overlay\")) {\r\n        trackType = \"overlay\";\r\n      } else if (targetTrackId.startsWith(\"audio\")) {\r\n        trackType = \"audio\";\r\n      } else if (targetTrackId.startsWith(\"main\")) {\r\n        trackType = \"main\";\r\n      } else {\r\n        // Fallback по типу медиа\r\n        if (mediaItem.type === \"video\") trackType = \"main\";\r\n        else if (mediaItem.type === \"image\") trackType = \"overlay\";\r\n        else if (mediaItem.type === \"audio\") trackType = \"audio\";\r\n      }\r\n      \r\n      console.log(`✅ Используем переданную дорожку: ID=\"${trackId}\", тип=\"${trackType}\"`);\r\n    } else {\r\n      // Fallback: старая логика если не передан targetTrackId\r\n      console.log('⚠️ targetTrackId не передан, используем fallback логику');\r\n      \r\n      if (mediaItem.type === \"video\") {\r\n        trackType = \"main\";\r\n        trackId = \"main-video\";\r\n      } else if (mediaItem.type === \"image\") {\r\n        trackType = \"overlay\";\r\n        trackId = \"overlay-1\";\r\n      } else if (mediaItem.type === \"audio\") {\r\n        trackType = \"audio\";\r\n        trackId = \"audio-1\";\r\n      }\r\n    }\r\n\r\n    const duration = mediaItem.duration || (mediaItem.type === \"image\" ? 5 : 10);\r\n\r\n    const finalStartTime = startTime !== null \r\n      ? startTime \r\n      : findNextAvailablePosition(trackId, duration);\r\n\r\n    const newTimelineItem = {\r\n      id: Date.now() + Math.random(),\r\n      mediaId: mediaItem.id,\r\n      type: mediaItem.type,\r\n      name: mediaItem.name,\r\n      url: mediaItem.url,\r\n      startTime: finalStartTime,\r\n      duration: duration,\r\n      trackId: trackId,\r\n      trackType: trackType,\r\n      volume: 1,\r\n      opacity: 1,\r\n    };\r\n\r\n    console.log('📍 Создаем timeline элемент:', {\r\n      name: newTimelineItem.name,\r\n      trackId: newTimelineItem.trackId,\r\n      trackType: newTimelineItem.trackType,\r\n      startTime: newTimelineItem.startTime\r\n    });\r\n\r\n    setTimelineItems((prev) => [...prev, newTimelineItem]);\r\n\r\n    const newEndTime = newTimelineItem.startTime + newTimelineItem.duration;\r\n    if (newEndTime > videoDuration) {\r\n      setVideoDuration(newEndTime + 10);\r\n    }\r\n  };\r\n\r\n  // ✅ НОВАЯ: Умная функция для MediaLibrary с подробной отладкой\r\n  const handleMediaLibraryClick = (item) => {\r\n    if (!item || !item.name || !item.type) {\r\n      console.error('❌ handleMediaLibraryClick: невалидный элемент', item);\r\n      return;\r\n    }\r\n    \r\n    console.log('🖱️ === КЛИК ПО MEDIALIBRARY ===');\r\n    console.log('📦 Элемент:', { name: item.name, type: item.type, id: item.id });\r\n    console.log('🔗 smartAddFunction доступна:', !!smartAddFunction);\r\n    \r\n    if (smartAddFunction) {\r\n      console.log('✅ Используем smartAddFunction из Timeline');\r\n      smartAddFunction(item);\r\n    } else {\r\n      console.log('⚠️ smartAddFunction недоступна, используем fallback addToTimeline');\r\n      addToTimeline(item);\r\n    }\r\n    \r\n    console.log('🖱️ === КЛИК ОБРАБОТАН ===');\r\n  };\r\n\r\n  // Эффекты для управления overlays\r\n  useEffect(() => {\r\n    if (isDraggingOverlay || isResizingOverlay) {\r\n      document.addEventListener(\"mousemove\", handleOverlayMouseMove);\r\n      document.addEventListener(\"mouseup\", handleOverlayMouseUp);\r\n      document.body.style.cursor = isDraggingOverlay ? \"grabbing\" : \"nw-resize\";\r\n\r\n      return () => {\r\n        document.removeEventListener(\"mousemove\", handleOverlayMouseMove);\r\n        document.removeEventListener(\"mouseup\", handleOverlayMouseUp);\r\n        document.body.style.cursor = \"\";\r\n      };\r\n    }\r\n  }, [\r\n    isDraggingOverlay,\r\n    isResizingOverlay,\r\n    handleOverlayMouseMove,\r\n    handleOverlayMouseUp,\r\n  ]);\r\n\r\n  // Основные эффекты\r\n  useEffect(() => {\r\n    const content = getCurrentTimelineContent();\r\n\r\n    if (content.mainVideo && content.mainVideo.url !== currentVideoSource) {\r\n      setCurrentVideoSource(content.mainVideo.url);\r\n      if (videoRef.current) {\r\n        const relativeTime = currentTime - content.mainVideo.startTime;\r\n        videoRef.current.currentTime = Math.max(0, relativeTime);\r\n      }\r\n    } else if (\r\n      !content.mainVideo &&\r\n      content.overlays.find((o) => o.type === \"image\")\r\n    ) {\r\n      const firstImage = content.overlays.find((o) => o.type === \"image\");\r\n      setCurrentVideoSource(firstImage.url);\r\n    } else if (\r\n      !content.mainVideo &&\r\n      !content.overlays.find((o) => o.type === \"image\")\r\n    ) {\r\n      setCurrentVideoSource(null);\r\n    }\r\n\r\n    const currentAudioIds = new Set(content.audio.map((item) => item.id));\r\n\r\n    audioElementsRef.current.forEach((audioElement, id) => {\r\n      if (!currentAudioIds.has(id)) {\r\n        if (!audioElement.paused) {\r\n          audioElement.pause();\r\n        }\r\n      }\r\n    });\r\n\r\n    content.audio.forEach((audioItem) => {\r\n      const audioElement = createAudioElement(audioItem);\r\n      const relativeTime = currentTime - audioItem.startTime;\r\n\r\n      audioElement.volume = (audioItem.volume || 1) * volume;\r\n      audioElement.muted = isMuted;\r\n\r\n      if (isPlaying && relativeTime >= 0) {\r\n        syncAudioTime(audioItem, relativeTime);\r\n        if (audioElement.paused) {\r\n          audioElement.play().catch(console.error);\r\n        }\r\n      } else {\r\n        if (!audioElement.paused) {\r\n          audioElement.pause();\r\n        }\r\n      }\r\n    });\r\n  }, [\r\n    currentTime,\r\n    timelineItems,\r\n    getCurrentTimelineContent,\r\n    isPlaying,\r\n    volume,\r\n    isMuted,\r\n    createAudioElement,\r\n    syncAudioTime,\r\n    currentVideoSource,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (isPlaying) {\r\n      intervalRef.current = setInterval(() => {\r\n        setCurrentTime((prev) => {\r\n          const newTime = prev + 0.1;\r\n          if (newTime >= videoDuration) {\r\n            setIsPlaying(false);\r\n            return videoDuration;\r\n          }\r\n          return newTime;\r\n        });\r\n      }, 100);\r\n    } else {\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n      }\r\n    }\r\n\r\n    return () => {\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n      }\r\n    };\r\n  }, [isPlaying, videoDuration]);\r\n\r\n  useEffect(() => {\r\n    if (videoRef.current && currentVideoSource) {\r\n      const content = getCurrentTimelineContent();\r\n      if (content.mainVideo) {\r\n        const relativeTime = currentTime - content.mainVideo.startTime;\r\n        const timeDiff = Math.abs(videoRef.current.currentTime - relativeTime);\r\n\r\n        if (timeDiff > 0.5) {\r\n          videoRef.current.currentTime = Math.max(0, relativeTime);\r\n        }\r\n\r\n        if (isPlaying && videoRef.current.paused) {\r\n          videoRef.current.play().catch(console.error);\r\n        } else if (!isPlaying && !videoRef.current.paused) {\r\n          videoRef.current.pause();\r\n        }\r\n      }\r\n    }\r\n  }, [currentTime, currentVideoSource, getCurrentTimelineContent, isPlaying]);\r\n\r\n  useEffect(() => {\r\n    const currentAudioIds = new Set(\r\n      timelineItems\r\n        .filter((item) => item.type === \"audio\")\r\n        .map((item) => item.id)\r\n    );\r\n\r\n    audioElementsRef.current.forEach((audioElement, id) => {\r\n      if (!currentAudioIds.has(id)) {\r\n        audioElement.pause();\r\n        audioElement.src = \"\";\r\n        audioElementsRef.current.delete(id);\r\n      }\r\n    });\r\n  }, [timelineItems]);\r\n\r\n  // Обработка клавиатурных шорткатов\r\n  useEffect(() => {\r\n    const handleKeyDown = (e) => {\r\n      if (e.target.tagName === \"INPUT\" || e.target.tagName === \"TEXTAREA\") {\r\n        return;\r\n      }\r\n\r\n      if (e.key === \"Delete\" || e.key === \"Backspace\") {\r\n        e.preventDefault();\r\n        deleteSelectedItem();\r\n      }\r\n\r\n      if (e.ctrlKey && e.key === \"b\") {\r\n        e.preventDefault();\r\n        splitTimelineItem();\r\n      }\r\n\r\n      if (e.ctrlKey && e.key === \"c\") {\r\n        e.preventDefault();\r\n        copyTimelineItem();\r\n      }\r\n\r\n      if (e.ctrlKey && e.key === \"v\") {\r\n        e.preventDefault();\r\n        pasteTimelineItem();\r\n      }\r\n\r\n      if (e.key === \" \" || e.code === \"Space\") {\r\n        e.preventDefault();\r\n        setIsPlaying((prev) => !prev);\r\n      }\r\n\r\n      if (e.key === \"ArrowLeft\") {\r\n        e.preventDefault();\r\n        const step = e.ctrlKey ? 5 : e.shiftKey ? 1 : 0.1;\r\n        seekTo(Math.max(0, currentTime - step));\r\n      }\r\n      if (e.key === \"ArrowRight\") {\r\n        e.preventDefault();\r\n        const step = e.ctrlKey ? 5 : e.shiftKey ? 1 : 0.1;\r\n        seekTo(Math.min(videoDuration, currentTime + step));\r\n      }\r\n\r\n      if (e.key === \"?\" || (e.shiftKey && e.key === \"/\")) {\r\n        e.preventDefault();\r\n        setShowHelp(true);\r\n      }\r\n\r\n      if (e.key === \"Escape\") {\r\n        e.preventDefault();\r\n        if (showHelp) {\r\n          setShowHelp(false);\r\n        } else if (selectedOverlay) {\r\n          setSelectedOverlay(null);\r\n        }\r\n      }\r\n    };\r\n\r\n    window.addEventListener(\"keydown\", handleKeyDown);\r\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\r\n  }, [selectedTimelineItem, copiedItem, currentTime, videoDuration, showHelp, selectedOverlay, deleteSelectedItem, splitTimelineItem, copyTimelineItem, pasteTimelineItem, seekTo]);\r\n\r\n  return (\r\n    <div className=\"flex h-screen w-full gap-4 p-4 bg-gray-100 overflow-hidden\">\r\n      {/* Media Library Component */}\r\n      <MediaLibrary\r\n        mediaLibrary={mediaLibrary}\r\n        setMediaLibrary={setMediaLibrary}\r\n        activeTab={activeTab}\r\n        setActiveTab={setActiveTab}\r\n        draggedItem={draggedItem}\r\n        setDraggedItem={setDraggedItem}\r\n        isDragging={isDragging}\r\n        setIsDragging={setIsDragging}\r\n        addToTimeline={handleMediaLibraryClick} // ✅ ИСПОЛЬЗУЕМ УМНУЮ ФУНКЦИЮ\r\n        formatTime={formatTime}\r\n      />\r\n\r\n      {/* ОТЛАДОЧНАЯ ПАНЕЛЬ */}\r\n      <div className=\"fixed top-4 right-4 bg-black/80 text-white p-3 rounded-lg text-xs max-w-xs\">\r\n        <div className=\"font-bold mb-2\">🔧 Smart Add Status</div>\r\n        <div className=\"space-y-1\">\r\n          <div className={smartAddFunction ? \"text-green-400\" : \"text-red-400\"}>\r\n            Smart Function: {smartAddFunction ? \"✅ Ready\" : \"❌ Not Ready\"}\r\n          </div>\r\n          <div className=\"text-gray-300\">\r\n            Video → Main Video track\r\n          </div>\r\n          <div className=\"text-gray-300\">\r\n            Audio → Audio track  \r\n          </div>\r\n          <div className=\"text-gray-300\">\r\n            Images → Overlay track\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 flex flex-col gap-4 min-w-0 overflow-hidden\">\r\n        {/* Video Preview */}\r\n        <div\r\n          ref={videoContainerRef}\r\n          className=\"flex-1 bg-black rounded-2xl relative overflow-hidden shadow-sm min-h-0\"\r\n          title=\"Video Preview - Click overlays to select, drag to move, Ctrl+scroll to resize, use opacity slider\"\r\n        >\r\n          {currentVideoSource ? (\r\n            <div\r\n              className=\"relative w-full h-full\"\r\n              onClick={(e) => {\r\n                if (e.target === e.currentTarget) {\r\n                  setSelectedOverlay(null);\r\n                }\r\n              }}\r\n            >\r\n              {getCurrentTimelineContent().mainVideo ? (\r\n                <video\r\n                  ref={videoRef}\r\n                  src={currentVideoSource}\r\n                  className=\"w-full h-full object-contain rounded-2xl\"\r\n                  muted={isMuted}\r\n                />\r\n              ) : (\r\n                <img\r\n                  src={currentVideoSource}\r\n                  alt=\"Timeline content\"\r\n                  className=\"w-full h-full object-contain rounded-2xl\"\r\n                />\r\n              )}\r\n\r\n              {getCurrentTimelineContent().overlays.map((item, index) => {\r\n                const transform = getOverlayTransform(item.id);\r\n                const isSelected = selectedOverlay?.id === item.id;\r\n                const isDraggingThis = isDraggingOverlay && isSelected;\r\n                const isResizingThis = isResizingOverlay && isSelected;\r\n\r\n                return (\r\n                  <div\r\n                    key={item.id}\r\n                    className={`absolute select-none ${\r\n                      isSelected\r\n                        ? \"ring-2 ring-blue-400 ring-opacity-75 shadow-xl\"\r\n                        : \"hover:ring-2 hover:ring-blue-300 hover:ring-opacity-50\"\r\n                    } ${\r\n                      isDraggingThis\r\n                        ? \"cursor-grabbing z-50\"\r\n                        : isResizingThis\r\n                        ? \"cursor-nw-resize\"\r\n                        : \"cursor-grab hover:shadow-lg\"\r\n                    }`}\r\n                    style={{\r\n                      left: `${200 + transform.x}px`,\r\n                      top: `${50 + index * 120 + transform.y}px`,\r\n                      width: `${128 * transform.scale}px`,\r\n                      height: `${96 * transform.scale}px`,\r\n                      opacity: transform.opacity,\r\n                      zIndex: isSelected ? 1000 : 10 + index,\r\n                      transform: isDraggingThis ? \"scale(1.02)\" : \"scale(1)\",\r\n                      transition:\r\n                        isDraggingThis || isResizingThis\r\n                          ? \"none\"\r\n                          : \"transform 0.2s ease, box-shadow 0.2s ease\",\r\n                    }}\r\n                    onMouseDown={(e) =>\r\n                      handleOverlayMouseDown(e, { ...item, index })\r\n                    }\r\n                    onWheel={(e) => handleOverlayWheel(e, item.id)}\r\n                  >\r\n                    <div\r\n                      className={`relative w-full h-full border-2 rounded-lg overflow-hidden shadow-lg group ${\r\n                        isSelected\r\n                          ? \"border-blue-400\"\r\n                          : \"border-white hover:border-blue-300\"\r\n                      }`}\r\n                      style={{\r\n                        transition:\r\n                          isDraggingThis || isResizingThis\r\n                            ? \"none\"\r\n                            : \"border-color 0.2s ease\",\r\n                      }}\r\n                    >\r\n                      {item.type === \"video\" ? (\r\n                        <video\r\n                          src={item.url}\r\n                          className=\"w-full h-full object-cover pointer-events-none\"\r\n                          muted\r\n                        />\r\n                      ) : (\r\n                        <img\r\n                          src={item.url}\r\n                          alt={item.name}\r\n                          className=\"w-full h-full object-cover pointer-events-none\"\r\n                          draggable={false}\r\n                        />\r\n                      )}\r\n\r\n                      <div\r\n                        className={`absolute inset-0 bg-blue-500 bg-opacity-0 hover:bg-opacity-10 ${\r\n                          isSelected ? \"bg-opacity-10\" : \"\"\r\n                        }`}\r\n                        style={{\r\n                          transition:\r\n                            isDraggingThis || isResizingThis\r\n                              ? \"none\"\r\n                              : \"background-color 0.2s ease\",\r\n                        }}\r\n                      ></div>\r\n\r\n                      {isSelected && (\r\n                        <>\r\n                          {/* Resize handles */}\r\n                          <div\r\n                            className={`resize-handle absolute -top-2 -left-2 w-4 h-4 bg-blue-500 rounded-full cursor-nw-resize opacity-90 hover:opacity-100 hover:scale-125 shadow-md border-2 border-white ${\r\n                              isResizingThis && resizeOverlayHandle === \"nw\"\r\n                                ? \"scale-150 bg-red-500\"\r\n                                : \"\"\r\n                            }`}\r\n                            onMouseDown={(e) =>\r\n                              handleOverlayResizeStart(e, item, \"nw\")\r\n                            }\r\n                            style={{\r\n                              transition:\r\n                                isDraggingThis || isResizingThis\r\n                                  ? \"none\"\r\n                                  : \"all 0.2s ease\",\r\n                            }}\r\n                          ></div>\r\n                          <div\r\n                            className={`resize-handle absolute -top-2 -right-2 w-4 h-4 bg-blue-500 rounded-full cursor-ne-resize opacity-90 hover:opacity-100 hover:scale-125 shadow-md border-2 border-white ${\r\n                              isResizingThis && resizeOverlayHandle === \"ne\"\r\n                                ? \"scale-150 bg-red-500\"\r\n                                : \"\"\r\n                            }`}\r\n                            onMouseDown={(e) =>\r\n                              handleOverlayResizeStart(e, item, \"ne\")\r\n                            }\r\n                            style={{\r\n                              transition:\r\n                                isDraggingThis || isResizingThis\r\n                                  ? \"none\"\r\n                                  : \"all 0.2s ease\",\r\n                            }}\r\n                          ></div>\r\n                          <div\r\n                            className={`resize-handle absolute -bottom-2 -left-2 w-4 h-4 bg-blue-500 rounded-full cursor-sw-resize opacity-90 hover:opacity-100 hover:scale-125 shadow-md border-2 border-white ${\r\n                              isResizingThis && resizeOverlayHandle === \"sw\"\r\n                                ? \"scale-150 bg-red-500\"\r\n                                : \"\"\r\n                            }`}\r\n                            onMouseDown={(e) =>\r\n                              handleOverlayResizeStart(e, item, \"sw\")\r\n                            }\r\n                            style={{\r\n                              transition:\r\n                                isDraggingThis || isResizingThis\r\n                                  ? \"none\"\r\n                                  : \"all 0.2s ease\",\r\n                            }}\r\n                          ></div>\r\n                          <div\r\n                            className={`resize-handle absolute -bottom-2 -right-2 w-4 h-4 bg-blue-500 rounded-full cursor-se-resize opacity-90 hover:opacity-100 hover:scale-125 shadow-md border-2 border-white ${\r\n                              isResizingThis && resizeOverlayHandle === \"se\"\r\n                                ? \"scale-150 bg-red-500\"\r\n                                : \"\"\r\n                            }`}\r\n                            onMouseDown={(e) =>\r\n                              handleOverlayResizeStart(e, item, \"se\")\r\n                            }\r\n                            style={{\r\n                              transition:\r\n                                isDraggingThis || isResizingThis\r\n                                  ? \"none\"\r\n                                  : \"all 0.2s ease\",\r\n                            }}\r\n                          ></div>\r\n\r\n                          <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-2 h-2 bg-blue-500 rounded-full opacity-60 pointer-events-none\"></div>\r\n\r\n                          {/* Opacity slider */}\r\n                          <div className=\"absolute -bottom-12 left-0 right-0 bg-black/80 backdrop-blur-sm rounded-lg px-3 py-2 border border-white/20 shadow-lg\">\r\n                            <div className=\"flex items-center space-x-2\">\r\n                              <span className=\"text-white text-xs font-medium min-w-fit\">\r\n                                Opacity:\r\n                              </span>\r\n                              <input\r\n                                type=\"range\"\r\n                                min=\"0.1\"\r\n                                max=\"1\"\r\n                                step=\"0.05\"\r\n                                value={transform.opacity}\r\n                                onChange={(e) =>\r\n                                  updateOverlayTransform(item.id, {\r\n                                    opacity: parseFloat(e.target.value),\r\n                                  })\r\n                                }\r\n                                className=\"flex-1 h-2 accent-blue-500 cursor-pointer\"\r\n                                onMouseDown={(e) => e.stopPropagation()}\r\n                              />\r\n                              <span className=\"text-white text-xs min-w-8 text-right font-mono\">\r\n                                {Math.round(transform.opacity * 100)}%\r\n                              </span>\r\n                            </div>\r\n                          </div>\r\n                        </>\r\n                      )}\r\n\r\n                      <div\r\n                        className={`absolute top-1 left-1 bg-black/70 text-white text-xs px-2 py-1 rounded pointer-events-none ${\r\n                          isSelected\r\n                            ? \"opacity-100\"\r\n                            : \"opacity-0 group-hover:opacity-100\"\r\n                        }`}\r\n                        style={{\r\n                          transition:\r\n                            isDraggingThis || isResizingThis\r\n                              ? \"none\"\r\n                              : \"opacity 0.2s ease\",\r\n                        }}\r\n                      >\r\n                        {item.name} • {Math.round(transform.scale * 100)}% •{\" \"}\r\n                        {Math.round(transform.opacity * 100)}%\r\n                      </div>\r\n\r\n                      {isSelected && (\r\n                        <div className=\"absolute -top-0.5 -left-0.5 -right-0.5 -bottom-0.5 border-2 border-blue-400 rounded-lg pointer-events-none animate-pulse\"></div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          ) : (\r\n            <div className=\"w-full h-full flex items-center justify-center text-white\">\r\n              <div className=\"text-center\">\r\n                <div className=\"w-20 h-20 bg-gray-800 rounded-2xl flex items-center justify-center mx-auto mb-4\">\r\n                  <Film size={40} className=\"opacity-50\" />\r\n                </div>\r\n                <p className=\"text-xl opacity-75 font-medium\">\r\n                  No content at current time\r\n                </p>\r\n                <p className=\"text-sm opacity-50 mb-4\">\r\n                  Drag media to timeline tracks to start editing\r\n                </p>\r\n                <div className=\"text-xs opacity-40 space-y-1\">\r\n                  <p>💡 Overlays are interactive • Ripple mode enabled</p>\r\n                  <p>\r\n                    Press{\" \"}\r\n                    <kbd className=\"px-1 py-0.5 bg-gray-700 rounded text-xs\">\r\n                      ?\r\n                    </kbd>{\" \"}\r\n                    for help & shortcuts\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"absolute bottom-6 left-1/2 transform -translate-x-1/2 bg-black/60 backdrop-blur-md rounded-2xl p-4\">\r\n            <div className=\"flex items-center space-x-6\">\r\n              <button\r\n                onClick={() => seekTo(Math.max(0, currentTime - 10))}\r\n                className=\"text-white hover:text-blue-400 transition-colors p-1 rounded-lg hover:bg-white/10\"\r\n                title=\"Skip back 10 seconds\"\r\n              >\r\n                <SkipBack size={20} />\r\n              </button>\r\n              <button\r\n                onClick={handlePlayPause}\r\n                className=\"w-12 h-12 bg-white/20 hover:bg-white/30 rounded-2xl flex items-center justify-center text-white transition-all hover:scale-105\"\r\n                title=\"Play/Pause (Space)\"\r\n              >\r\n                {isPlaying ? <Pause size={24} /> : <Play size={24} />}\r\n              </button>\r\n              <button\r\n                onClick={() =>\r\n                  seekTo(Math.min(videoDuration, currentTime + 10))\r\n                }\r\n                className=\"text-white hover:text-blue-400 transition-colors p-1 rounded-lg hover:bg-white/10\"\r\n                title=\"Skip forward 10 seconds\"\r\n              >\r\n                <SkipForward size={20} />\r\n              </button>\r\n              <div className=\"flex items-center space-x-3\">\r\n                <button\r\n                  onClick={() => setIsMuted(!isMuted)}\r\n                  className=\"text-white hover:text-blue-400 transition-colors p-1 rounded-lg hover:bg-white/10\"\r\n                  title=\"Toggle mute\"\r\n                >\r\n                  {isMuted ? <VolumeX size={20} /> : <Volume2 size={20} />}\r\n                </button>\r\n                <input\r\n                  type=\"range\"\r\n                  min=\"0\"\r\n                  max=\"1\"\r\n                  step=\"0.1\"\r\n                  value={volume}\r\n                  onChange={(e) => setVolume(parseFloat(e.target.value))}\r\n                  className=\"w-24 accent-blue-500\"\r\n                  title=\"Volume control\"\r\n                />\r\n              </div>\r\n              <span\r\n                className=\"text-white text-sm font-medium min-w-0\"\r\n                title=\"Current time / Total duration\"\r\n              >\r\n                {formatTime(currentTime)} / {formatTime(videoDuration)}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <Timeline\r\n          timelineItems={timelineItems}\r\n          setTimelineItems={setTimelineItems}\r\n          currentTime={currentTime}\r\n          videoDuration={videoDuration}\r\n          setVideoDuration={setVideoDuration}\r\n          selectedTimelineItem={selectedTimelineItem}\r\n          setSelectedTimelineItem={setSelectedTimelineItem}\r\n          timelineZoom={timelineZoom}\r\n          setTimelineZoom={setTimelineZoom}\r\n          tracks={tracks}\r\n          setTracks={setTracks}\r\n          draggedItem={draggedItem}\r\n          draggedTimelineItem={draggedTimelineItem}\r\n          setDraggedTimelineItem={setDraggedTimelineItem}\r\n          dropPreview={dropPreview}\r\n          setDropPreview={setDropPreview}\r\n          isDragging={isDragging}\r\n          isTimelineDragging={isTimelineDragging}\r\n          setIsTimelineDragging={setIsTimelineDragging}\r\n          isResizing={isResizing}\r\n          setIsResizing={setIsResizing}\r\n          copiedItem={copiedItem}\r\n          formatTime={formatTime}\r\n          seekTo={seekTo}\r\n          splitTimelineItem={splitTimelineItem}\r\n          copyTimelineItem={copyTimelineItem}\r\n          pasteTimelineItem={pasteTimelineItem}\r\n          deleteSelectedItem={deleteSelectedItem}\r\n          addToTimeline={addToTimeline}\r\n          insertWithRipple={insertWithRipple}\r\n          applyRippleEffect={applyRippleEffect}\r\n          removeFromTimeline={removeFromTimeline}\r\n          onSmartAddToTimeline={(func) => {\r\n            console.log('📨 Timeline передал smartAddFunction:', {\r\n              received: !!func,\r\n              type: typeof func,\r\n              timestamp: new Date().toISOString()\r\n            });\r\n            // ВАЖНО: Правильно сохраняем функцию в состоянии\r\n            setSmartAddFunction(() => func);\r\n          }}\r\n        />\r\n      </div>\r\n\r\n      {/* Help Modal */}\r\n      {showHelp && (\r\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n          <div className=\"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-y-auto\">\r\n            <div className=\"p-6 border-b border-gray-200 flex items-center justify-between\">\r\n              <h3 className=\"text-xl font-bold text-gray-800 flex items-center\">\r\n                <HelpCircle size={24} className=\"mr-3 text-blue-600\" />\r\n                CapCut Pro - Help & Shortcuts\r\n              </h3>\r\n              <button\r\n                onClick={() => setShowHelp(false)}\r\n                className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-xl transition-all\"\r\n              >\r\n                <X size={20} />\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"p-6 space-y-6\">\r\n              <div>\r\n                <h4 className=\"font-semibold text-gray-800 mb-3 flex items-center\">\r\n                  <Film size={18} className=\"mr-2 text-blue-600\" />\r\n                  Timeline Controls\r\n                </h4>\r\n                <div className=\"grid grid-cols-2 gap-3 text-sm\">\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Drag center:</span>\r\n                    <span className=\"font-medium\">Move item</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Drag edges:</span>\r\n                    <span className=\"font-medium\">Trim duration</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Auto ripple:</span>\r\n                    <span className=\"font-medium\">Push other blocks</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Ctrl + Wheel:</span>\r\n                    <span className=\"font-medium\">Zoom timeline</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <h4 className=\"font-semibold text-gray-800 mb-3 flex items-center\">\r\n                  <Layers size={18} className=\"mr-2 text-purple-600\" />\r\n                  Video Overlays (CapCut Style)\r\n                </h4>\r\n                <div className=\"grid grid-cols-2 gap-3 text-sm\">\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Click overlay:</span>\r\n                    <span className=\"font-medium\">Select & show controls</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Drag anywhere:</span>\r\n                    <span className=\"font-medium\">Move position</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Drag corner dots:</span>\r\n                    <span className=\"font-medium\">Resize overlay</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Ctrl + Scroll:</span>\r\n                    <span className=\"font-medium\">Smooth zoom</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Opacity slider:</span>\r\n                    <span className=\"font-medium\">0-100% transparency</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Auto bounds:</span>\r\n                    <span className=\"font-medium\">Stays in view area</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <h4 className=\"font-semibold text-gray-800 mb-3 flex items-center\">\r\n                  ⌨️ Keyboard Shortcuts\r\n                </h4>\r\n                <div className=\"grid grid-cols-2 gap-3 text-sm\">\r\n                  <div className=\"flex justify-between\">\r\n                    <kbd className=\"px-2 py-1 bg-gray-100 rounded text-xs font-mono\">\r\n                      Space\r\n                    </kbd>\r\n                    <span className=\"font-medium\">Play / Pause</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <kbd className=\"px-2 py-1 bg-gray-100 rounded text-xs font-mono\">\r\n                      ← →\r\n                    </kbd>\r\n                    <span className=\"font-medium\">Seek (0.1s)</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <kbd className=\"px-2 py-1 bg-gray-100 rounded text-xs font-mono\">\r\n                      Ctrl + B\r\n                    </kbd>\r\n                    <span className=\"font-medium\">Split item</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <kbd className=\"px-2 py-1 bg-gray-100 rounded text-xs font-mono\">\r\n                      Ctrl + C\r\n                    </kbd>\r\n                    <span className=\"font-medium\">Copy item</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <kbd className=\"px-2 py-1 bg-gray-100 rounded text-xs font-mono\">\r\n                      Ctrl + V\r\n                    </kbd>\r\n                    <span className=\"font-medium\">Paste item</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <kbd className=\"px-2 py-1 bg-gray-100 rounded text-xs font-mono\">\r\n                      Del\r\n                    </kbd>\r\n                    <span className=\"font-medium\">Delete item</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <h4 className=\"font-semibold text-gray-800 mb-3 flex items-center\">\r\n                  💡 Pro Tips\r\n                </h4>\r\n                <ul className=\"space-y-2 text-sm text-gray-600\">\r\n                  <li className=\"flex items-start\">\r\n                    <span className=\"inline-block w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\r\n                    <span>\r\n                      Drag media from library directly to timeline tracks for\r\n                      quick editing\r\n                    </span>\r\n                  </li>\r\n                  <li className=\"flex items-start\">\r\n                    <span className=\"inline-block w-2 h-2 bg-purple-500 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\r\n                    <span>\r\n                      Overlays can be dragged anywhere on video area - they\r\n                      auto-fit within bounds\r\n                    </span>\r\n                  </li>\r\n                  <li className=\"flex items-start\">\r\n                    <span className=\"inline-block w-2 h-2 bg-green-500 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\r\n                    <span>\r\n                      Ripple mode automatically pushes blocks when inserting new\r\n                      content\r\n                    </span>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"p-6 border-t border-gray-200 bg-gray-50 rounded-b-2xl\">\r\n              <p className=\"text-center text-sm text-gray-500\">\r\n                🎬 Made with CapCut Pro styling • Press{\" \"}\r\n                <kbd className=\"px-1 py-0.5 bg-white rounded text-xs font-mono border\">\r\n                  ?\r\n                </kbd>{\" \"}\r\n                or click help icon anytime\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoEditor;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}