{"ast":null,"code":"var _jsxFileName = \"C:\\\\Scriptify\\\\ai-content-studio\\\\frontend\\\\src\\\\components\\\\teleprompter\\\\DraggableTeleprompterModal.jsx\",\n  _s = $RefreshSig$();\n// components/teleprompter/DraggableTeleprompterModal.jsx\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Mic, Play, Pause, RotateCcw, Move, Maximize2, Minimize2, X, Volume2 } from 'lucide-react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst DraggableTeleprompterModal = ({\n  isOpen,\n  onClose,\n  script = \"\",\n  scriptTitle = \"Сценарий\",\n  onRecordingComplete\n}) => {\n  _s();\n  // Состояния суфлёра\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [speed, setSpeed] = useState(5);\n  const [fontSize, setFontSize] = useState(32);\n  const [position, setPosition] = useState(0);\n\n  // Состояния записи\n  const [isRecording, setIsRecording] = useState(false);\n  const [recordingTime, setRecordingTime] = useState(0);\n  const [audioBlob, setAudioBlob] = useState(null);\n  const [audioUrl, setAudioUrl] = useState(null);\n\n  // Состояния модального окна\n  const [modalPosition, setModalPosition] = useState({\n    x: 100,\n    y: 100\n  });\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragOffset, setDragOffset] = useState({\n    x: 0,\n    y: 0\n  });\n\n  // Refs\n  const textRef = useRef(null);\n  const modalRef = useRef(null);\n  const animationRef = useRef(null);\n  const lastTimeRef = useRef(Date.now());\n  const timerRef = useRef(null);\n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n\n  // Автопрокрутка суфлёра\n  useEffect(() => {\n    if (isPlaying && textRef.current && isOpen) {\n      const animate = () => {\n        const now = Date.now();\n        const deltaTime = now - lastTimeRef.current;\n        lastTimeRef.current = now;\n        setPosition(prev => {\n          const newPosition = prev + speed * deltaTime * 100;\n          const maxScroll = textRef.current.scrollHeight - textRef.current.clientHeight;\n          if (newPosition >= maxScroll) {\n            setIsPlaying(false);\n            return maxScroll;\n          }\n          return Math.max(0, newPosition);\n        });\n        animationRef.current = requestAnimationFrame(animate);\n      };\n      animationRef.current = requestAnimationFrame(animate);\n    }\n    return () => {\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n      }\n    };\n  }, [isPlaying, speed, isOpen]);\n\n  // Синхронизация прокрутки\n  useEffect(() => {\n    if (textRef.current) {\n      textRef.current.scrollTop = position;\n    }\n  }, [position]);\n\n  // Таймер записи\n  useEffect(() => {\n    if (isRecording) {\n      timerRef.current = setInterval(() => {\n        setRecordingTime(prev => prev + 1);\n      }, 1000);\n    } else {\n      clearInterval(timerRef.current);\n    }\n    return () => clearInterval(timerRef.current);\n  }, [isRecording]);\n\n  // Сброс при открытии\n  useEffect(() => {\n    if (isOpen) {\n      setPosition(0);\n      setIsPlaying(false);\n      setRecordingTime(0);\n      lastTimeRef.current = Date.now();\n    }\n  }, [isOpen]);\n\n  // Drag and Drop функциональность\n  const handleMouseDown = e => {\n    if (!isFullscreen && e.target.closest('.drag-handle')) {\n      setIsDragging(true);\n      const rect = modalRef.current.getBoundingClientRect();\n      setDragOffset({\n        x: e.clientX - rect.left,\n        y: e.clientY - rect.top\n      });\n    }\n  };\n  useEffect(() => {\n    const handleMouseMove = e => {\n      if (isDragging && !isFullscreen) {\n        const newX = e.clientX - dragOffset.x;\n        const newY = e.clientY - dragOffset.y;\n\n        // Ограничиваем положение в пределах экрана\n        const maxX = window.innerWidth - 400;\n        const maxY = window.innerHeight - 300;\n        setModalPosition({\n          x: Math.max(0, Math.min(newX, maxX)),\n          y: Math.max(0, Math.min(newY, maxY))\n        });\n      }\n    };\n    const handleMouseUp = () => {\n      setIsDragging(false);\n    };\n    if (isDragging) {\n      document.addEventListener('mousemove', handleMouseMove);\n      document.addEventListener('mouseup', handleMouseUp);\n    }\n    return () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n    };\n  }, [isDragging, dragOffset, isFullscreen]);\n\n  // Запуск записи\n  const startRecording = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: {\n          echoCancellation: true,\n          noiseSuppression: true,\n          sampleRate: 44100\n        }\n      });\n      const mediaRecorder = new MediaRecorder(stream, {\n        mimeType: 'audio/webm;codecs=opus'\n      });\n      mediaRecorderRef.current = mediaRecorder;\n      audioChunksRef.current = [];\n      mediaRecorder.ondataavailable = event => {\n        if (event.data.size > 0) {\n          audioChunksRef.current.push(event.data);\n        }\n      };\n      mediaRecorder.onstop = () => {\n        const audioBlob = new Blob(audioChunksRef.current, {\n          type: 'audio/webm'\n        });\n        const audioUrl = URL.createObjectURL(audioBlob);\n        setAudioBlob(audioBlob);\n        setAudioUrl(audioUrl);\n        if (onRecordingComplete) {\n          onRecordingComplete({\n            blob: audioBlob,\n            url: audioUrl,\n            duration: recordingTime,\n            timestamp: new Date().toISOString(),\n            scriptTitle: scriptTitle\n          });\n        }\n\n        // Останавливаем поток\n        stream.getTracks().forEach(track => track.stop());\n      };\n      mediaRecorder.start(100);\n      setIsRecording(true);\n      setRecordingTime(0);\n    } catch (error) {\n      console.error('Ошибка доступа к микрофону:', error);\n      alert('Не удалось получить доступ к микрофону. Проверьте разрешения.');\n    }\n  };\n\n  // Остановка записи\n  const stopRecording = () => {\n    if (mediaRecorderRef.current && isRecording) {\n      mediaRecorderRef.current.stop();\n      setIsRecording(false);\n      setIsPlaying(false);\n    }\n  };\n\n  // Управление суфлёром\n  const togglePlay = () => {\n    setIsPlaying(!isPlaying);\n    lastTimeRef.current = Date.now();\n  };\n  const resetTeleprompter = () => {\n    setIsPlaying(false);\n    setPosition(0);\n  };\n\n  // Старт записи с суфлёром\n  const startRecordingWithTeleprompter = async () => {\n    await startRecording();\n    // Автоматически запускаем суфлёр через 1 секунду\n    setTimeout(() => {\n      setIsPlaying(true);\n      lastTimeRef.current = Date.now();\n    }, 1000);\n  };\n\n  // Форматирование времени\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n  const bloggerSpeeds = [3, 4, 5, 6, 7, 8, 10, 12];\n  const fontSizes = [24, 28, 32, 36, 40, 44, 48];\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 z-50 pointer-events-none\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-0 bg-black/20 backdrop-blur-sm pointer-events-auto\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: modalRef,\n      className: \"absolute pointer-events-auto\",\n      style: {\n        left: isFullscreen ? 0 : modalPosition.x,\n        top: isFullscreen ? 0 : modalPosition.y,\n        width: isFullscreen ? '100%' : '500px',\n        height: isFullscreen ? '100%' : 'auto',\n        maxHeight: isFullscreen ? '100%' : '80vh'\n      },\n      onMouseDown: handleMouseDown,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-2xl border-2 border-slate-200 overflow-hidden h-full flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"drag-handle bg-gradient-to-r from-slate-700 to-blue-700 text-white p-4 cursor-move select-none\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(Move, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"font-bold text-lg\",\n                children: [\"\\uD83C\\uDFAC \", scriptTitle]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 17\n              }, this), isRecording && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2 bg-red-500 px-3 py-1 rounded-full text-sm animate-pulse\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-2 h-2 bg-white rounded-full\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"REC \", formatTime(recordingTime)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 267,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setIsFullscreen(!isFullscreen),\n                className: \"p-2 hover:bg-white/20 rounded-lg transition-colors\",\n                title: isFullscreen ? \"Свернуть\" : \"На весь экран\",\n                children: isFullscreen ? /*#__PURE__*/_jsxDEV(Minimize2, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 278,\n                  columnNumber: 35\n                }, this) : /*#__PURE__*/_jsxDEV(Maximize2, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 278,\n                  columnNumber: 61\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: onClose,\n                className: \"p-2 hover:bg-white/20 rounded-lg transition-colors\",\n                title: \"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\",\n                children: /*#__PURE__*/_jsxDEV(X, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 285,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-50 p-4 border-b border-gray-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-center space-x-3 mb-4\",\n            children: !isRecording ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: startRecordingWithTeleprompter,\n                className: \"bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white font-bold py-2 px-4 rounded-lg transition-all duration-300 shadow-lg flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(Mic, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 299,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"\\uD83C\\uDFAC \\u0417\\u0430\\u043F\\u0438\\u0441\\u044C \\u0441 \\u0441\\u0443\\u0444\\u043B\\u0451\\u0440\\u043E\\u043C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: startRecording,\n                className: \"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg transition-all duration-300 flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(Mic, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 306,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"\\u0422\\u043E\\u043B\\u044C\\u043A\\u043E \\u0437\\u0430\\u043F\\u0438\\u0441\\u044C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 307,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: stopRecording,\n              className: \"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg transition-all duration-300\",\n              children: \"\\u23F9\\uFE0F \\u041E\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0437\\u0430\\u043F\\u0438\\u0441\\u044C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-center space-x-2 mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: togglePlay,\n              className: `p-2 rounded-lg transition-all duration-300 ${isPlaying ? 'bg-yellow-500 text-white' : 'bg-green-500 text-white hover:bg-green-600'}`,\n              children: isPlaying ? /*#__PURE__*/_jsxDEV(Pause, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 30\n              }, this) : /*#__PURE__*/_jsxDEV(Play, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 52\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: resetTeleprompter,\n              className: \"p-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-all duration-300\",\n              children: /*#__PURE__*/_jsxDEV(RotateCcw, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-center space-x-2 mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-medium text-gray-600\",\n              children: \"\\u0421\\u043A\\u043E\\u0440\\u043E\\u0441\\u0442\\u044C:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 15\n            }, this), bloggerSpeeds.map(speedValue => /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setSpeed(speedValue),\n              className: `px-2 py-1 text-sm rounded transition-all duration-200 ${speed === speedValue ? 'bg-red-500 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}`,\n              children: [speedValue, \"x\"]\n            }, speedValue, true, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-medium text-gray-600\",\n              children: \"\\u0420\\u0430\\u0437\\u043C\\u0435\\u0440:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 15\n            }, this), fontSizes.map(size => /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setFontSize(size),\n              className: `px-2 py-1 text-sm rounded transition-all duration-200 ${fontSize === size ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}`,\n              children: size\n            }, size, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 relative overflow-hidden\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            ref: textRef,\n            className: \"bg-black text-white p-6 h-full overflow-y-auto scrollbar-hide\",\n            style: {\n              fontSize: `${fontSize}px`,\n              lineHeight: '1.7',\n              fontFamily: 'Arial, sans-serif',\n              minHeight: isFullscreen ? 'calc(100vh - 200px)' : '300px'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"whitespace-pre-wrap text-center\",\n              children: script || \"Добавьте текст сценария для использования суфлёра\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute left-0 right-0 top-1/2 transform -translate-y-1/2 pointer-events-none\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-1 bg-red-500 opacity-70 mx-6 rounded-full shadow-lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute bottom-0 left-0 right-0 h-2 bg-gray-800\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-full bg-gradient-to-r from-blue-500 to-red-500 transition-all duration-100\",\n              style: {\n                width: textRef.current ? `${position / Math.max(1, textRef.current.scrollHeight - textRef.current.clientHeight) * 100}%` : '0%'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 11\n        }, this), audioUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-green-50 p-4 border-t border-green-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-3 mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(Volume2, {\n              size: 20,\n              className: \"text-green-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold text-green-800\",\n              children: [\"\\u0417\\u0430\\u043F\\u0438\\u0441\\u044C \\u0433\\u043E\\u0442\\u043E\\u0432\\u0430! (\", formatTime(recordingTime), \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n            controls: true,\n            src: audioUrl,\n            className: \"w-full mb-3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                const a = document.createElement('a');\n                a.href = audioUrl;\n                a.download = `${scriptTitle}_${Date.now()}.webm`;\n                a.click();\n              },\n              className: \"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm transition-colors\",\n              children: \"\\uD83D\\uDCE5 \\u0421\\u043A\\u0430\\u0447\\u0430\\u0442\\u044C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                setAudioUrl(null);\n                setAudioBlob(null);\n                setRecordingTime(0);\n              },\n              className: \"bg-gray-500 hover:bg-gray-600 text-white px-3 py-1 rounded text-sm transition-colors\",\n              children: \"\\uD83D\\uDDD1\\uFE0F \\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 430,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-blue-50 p-3 border-t border-blue-200\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-blue-700 text-center\",\n            children: [\"\\uD83D\\uDCA1 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u0421\\u043E\\u0432\\u0435\\u0442:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 18\n            }, this), \" \\u041F\\u0435\\u0440\\u0435\\u0442\\u0430\\u0449\\u0438\\u0442\\u0435 \\u043E\\u043A\\u043D\\u043E \\u0432 \\u0443\\u0434\\u043E\\u0431\\u043D\\u043E\\u0435 \\u043C\\u0435\\u0441\\u0442\\u043E. \\u0421\\u043A\\u043E\\u0440\\u043E\\u0441\\u0442\\u044C 5x-8x \\u0438\\u0434\\u0435\\u0430\\u043B\\u044C\\u043D\\u0430 \\u0434\\u043B\\u044F \\u0436\\u0438\\u0432\\u043E\\u0439 \\u0440\\u0435\\u0447\\u0438\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 243,\n    columnNumber: 5\n  }, this);\n};\n_s(DraggableTeleprompterModal, \"8apnbWI8HwLfNIOFcV6Si+P9VG4=\");\n_c = DraggableTeleprompterModal;\nexport default DraggableTeleprompterModal;\nvar _c;\n$RefreshReg$(_c, \"DraggableTeleprompterModal\");","map":{"version":3,"names":["React","useState","useRef","useEffect","Mic","Play","Pause","RotateCcw","Move","Maximize2","Minimize2","X","Volume2","jsxDEV","_jsxDEV","Fragment","_Fragment","DraggableTeleprompterModal","isOpen","onClose","script","scriptTitle","onRecordingComplete","_s","isPlaying","setIsPlaying","speed","setSpeed","fontSize","setFontSize","position","setPosition","isRecording","setIsRecording","recordingTime","setRecordingTime","audioBlob","setAudioBlob","audioUrl","setAudioUrl","modalPosition","setModalPosition","x","y","isFullscreen","setIsFullscreen","isDragging","setIsDragging","dragOffset","setDragOffset","textRef","modalRef","animationRef","lastTimeRef","Date","now","timerRef","mediaRecorderRef","audioChunksRef","current","animate","deltaTime","prev","newPosition","maxScroll","scrollHeight","clientHeight","Math","max","requestAnimationFrame","cancelAnimationFrame","scrollTop","setInterval","clearInterval","handleMouseDown","e","target","closest","rect","getBoundingClientRect","clientX","left","clientY","top","handleMouseMove","newX","newY","maxX","window","innerWidth","maxY","innerHeight","min","handleMouseUp","document","addEventListener","removeEventListener","startRecording","stream","navigator","mediaDevices","getUserMedia","audio","echoCancellation","noiseSuppression","sampleRate","mediaRecorder","MediaRecorder","mimeType","ondataavailable","event","data","size","push","onstop","Blob","type","URL","createObjectURL","blob","url","duration","timestamp","toISOString","getTracks","forEach","track","stop","start","error","console","alert","stopRecording","togglePlay","resetTeleprompter","startRecordingWithTeleprompter","setTimeout","formatTime","seconds","mins","floor","secs","toString","padStart","bloggerSpeeds","fontSizes","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","style","width","height","maxHeight","onMouseDown","onClick","title","map","speedValue","lineHeight","fontFamily","minHeight","controls","src","a","createElement","href","download","click","_c","$RefreshReg$"],"sources":["C:/Scriptify/ai-content-studio/frontend/src/components/teleprompter/DraggableTeleprompterModal.jsx"],"sourcesContent":["// components/teleprompter/DraggableTeleprompterModal.jsx\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport { Mic, Play, Pause, RotateCcw, Move, Maximize2, Minimize2, X, Volume2 } from 'lucide-react';\r\n\r\nconst DraggableTeleprompterModal = ({ \r\n  isOpen, \r\n  onClose, \r\n  script = \"\",\r\n  scriptTitle = \"Сценарий\",\r\n  onRecordingComplete\r\n}) => {\r\n  // Состояния суфлёра\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [speed, setSpeed] = useState(5);\r\n  const [fontSize, setFontSize] = useState(32);\r\n  const [position, setPosition] = useState(0);\r\n  \r\n  // Состояния записи\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  const [recordingTime, setRecordingTime] = useState(0);\r\n  const [audioBlob, setAudioBlob] = useState(null);\r\n  const [audioUrl, setAudioUrl] = useState(null);\r\n  \r\n  // Состояния модального окна\r\n  const [modalPosition, setModalPosition] = useState({ x: 100, y: 100 });\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });\r\n  \r\n  // Refs\r\n  const textRef = useRef(null);\r\n  const modalRef = useRef(null);\r\n  const animationRef = useRef(null);\r\n  const lastTimeRef = useRef(Date.now());\r\n  const timerRef = useRef(null);\r\n  const mediaRecorderRef = useRef(null);\r\n  const audioChunksRef = useRef([]);\r\n\r\n  // Автопрокрутка суфлёра\r\n  useEffect(() => {\r\n    if (isPlaying && textRef.current && isOpen) {\r\n      const animate = () => {\r\n        const now = Date.now();\r\n        const deltaTime = now - lastTimeRef.current;\r\n        lastTimeRef.current = now;\r\n\r\n        setPosition(prev => {\r\n          const newPosition = prev + (speed * deltaTime * 100);\r\n          const maxScroll = textRef.current.scrollHeight - textRef.current.clientHeight;\r\n          \r\n          if (newPosition >= maxScroll) {\r\n            setIsPlaying(false);\r\n            return maxScroll;\r\n          }\r\n          \r\n          return Math.max(0, newPosition);\r\n        });\r\n\r\n        animationRef.current = requestAnimationFrame(animate);\r\n      };\r\n\r\n      animationRef.current = requestAnimationFrame(animate);\r\n    }\r\n\r\n    return () => {\r\n      if (animationRef.current) {\r\n        cancelAnimationFrame(animationRef.current);\r\n      }\r\n    };\r\n  }, [isPlaying, speed, isOpen]);\r\n\r\n  // Синхронизация прокрутки\r\n  useEffect(() => {\r\n    if (textRef.current) {\r\n      textRef.current.scrollTop = position;\r\n    }\r\n  }, [position]);\r\n\r\n  // Таймер записи\r\n  useEffect(() => {\r\n    if (isRecording) {\r\n      timerRef.current = setInterval(() => {\r\n        setRecordingTime(prev => prev + 1);\r\n      }, 1000);\r\n    } else {\r\n      clearInterval(timerRef.current);\r\n    }\r\n\r\n    return () => clearInterval(timerRef.current);\r\n  }, [isRecording]);\r\n\r\n  // Сброс при открытии\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      setPosition(0);\r\n      setIsPlaying(false);\r\n      setRecordingTime(0);\r\n      lastTimeRef.current = Date.now();\r\n    }\r\n  }, [isOpen]);\r\n\r\n  // Drag and Drop функциональность\r\n  const handleMouseDown = (e) => {\r\n    if (!isFullscreen && e.target.closest('.drag-handle')) {\r\n      setIsDragging(true);\r\n      const rect = modalRef.current.getBoundingClientRect();\r\n      setDragOffset({\r\n        x: e.clientX - rect.left,\r\n        y: e.clientY - rect.top\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleMouseMove = (e) => {\r\n      if (isDragging && !isFullscreen) {\r\n        const newX = e.clientX - dragOffset.x;\r\n        const newY = e.clientY - dragOffset.y;\r\n        \r\n        // Ограничиваем положение в пределах экрана\r\n        const maxX = window.innerWidth - 400;\r\n        const maxY = window.innerHeight - 300;\r\n        \r\n        setModalPosition({\r\n          x: Math.max(0, Math.min(newX, maxX)),\r\n          y: Math.max(0, Math.min(newY, maxY))\r\n        });\r\n      }\r\n    };\r\n\r\n    const handleMouseUp = () => {\r\n      setIsDragging(false);\r\n    };\r\n\r\n    if (isDragging) {\r\n      document.addEventListener('mousemove', handleMouseMove);\r\n      document.addEventListener('mouseup', handleMouseUp);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener('mousemove', handleMouseMove);\r\n      document.removeEventListener('mouseup', handleMouseUp);\r\n    };\r\n  }, [isDragging, dragOffset, isFullscreen]);\r\n\r\n  // Запуск записи\r\n  const startRecording = async () => {\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({\r\n        audio: {\r\n          echoCancellation: true,\r\n          noiseSuppression: true,\r\n          sampleRate: 44100\r\n        }\r\n      });\r\n\r\n      const mediaRecorder = new MediaRecorder(stream, {\r\n        mimeType: 'audio/webm;codecs=opus'\r\n      });\r\n\r\n      mediaRecorderRef.current = mediaRecorder;\r\n      audioChunksRef.current = [];\r\n\r\n      mediaRecorder.ondataavailable = (event) => {\r\n        if (event.data.size > 0) {\r\n          audioChunksRef.current.push(event.data);\r\n        }\r\n      };\r\n\r\n      mediaRecorder.onstop = () => {\r\n        const audioBlob = new Blob(audioChunksRef.current, { type: 'audio/webm' });\r\n        const audioUrl = URL.createObjectURL(audioBlob);\r\n        setAudioBlob(audioBlob);\r\n        setAudioUrl(audioUrl);\r\n        \r\n        if (onRecordingComplete) {\r\n          onRecordingComplete({\r\n            blob: audioBlob,\r\n            url: audioUrl,\r\n            duration: recordingTime,\r\n            timestamp: new Date().toISOString(),\r\n            scriptTitle: scriptTitle\r\n          });\r\n        }\r\n        \r\n        // Останавливаем поток\r\n        stream.getTracks().forEach(track => track.stop());\r\n      };\r\n\r\n      mediaRecorder.start(100);\r\n      setIsRecording(true);\r\n      setRecordingTime(0);\r\n\r\n    } catch (error) {\r\n      console.error('Ошибка доступа к микрофону:', error);\r\n      alert('Не удалось получить доступ к микрофону. Проверьте разрешения.');\r\n    }\r\n  };\r\n\r\n  // Остановка записи\r\n  const stopRecording = () => {\r\n    if (mediaRecorderRef.current && isRecording) {\r\n      mediaRecorderRef.current.stop();\r\n      setIsRecording(false);\r\n      setIsPlaying(false);\r\n    }\r\n  };\r\n\r\n  // Управление суфлёром\r\n  const togglePlay = () => {\r\n    setIsPlaying(!isPlaying);\r\n    lastTimeRef.current = Date.now();\r\n  };\r\n\r\n  const resetTeleprompter = () => {\r\n    setIsPlaying(false);\r\n    setPosition(0);\r\n  };\r\n\r\n  // Старт записи с суфлёром\r\n  const startRecordingWithTeleprompter = async () => {\r\n    await startRecording();\r\n    // Автоматически запускаем суфлёр через 1 секунду\r\n    setTimeout(() => {\r\n      setIsPlaying(true);\r\n      lastTimeRef.current = Date.now();\r\n    }, 1000);\r\n  };\r\n\r\n  // Форматирование времени\r\n  const formatTime = (seconds) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  const bloggerSpeeds = [3, 4, 5, 6, 7, 8, 10, 12];\r\n  const fontSizes = [24, 28, 32, 36, 40, 44, 48];\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 pointer-events-none\">\r\n      <div className=\"absolute inset-0 bg-black/20 backdrop-blur-sm pointer-events-auto\" />\r\n      \r\n      <div\r\n        ref={modalRef}\r\n        className=\"absolute pointer-events-auto\"\r\n        style={{\r\n          left: isFullscreen ? 0 : modalPosition.x,\r\n          top: isFullscreen ? 0 : modalPosition.y,\r\n          width: isFullscreen ? '100%' : '500px',\r\n          height: isFullscreen ? '100%' : 'auto',\r\n          maxHeight: isFullscreen ? '100%' : '80vh'\r\n        }}\r\n        onMouseDown={handleMouseDown}\r\n      >\r\n        <div className=\"bg-white rounded-xl shadow-2xl border-2 border-slate-200 overflow-hidden h-full flex flex-col\">\r\n          <div className=\"drag-handle bg-gradient-to-r from-slate-700 to-blue-700 text-white p-4 cursor-move select-none\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <Move size={18} />\r\n                <h3 className=\"font-bold text-lg\">🎬 {scriptTitle}</h3>\r\n                {isRecording && (\r\n                  <div className=\"flex items-center space-x-2 bg-red-500 px-3 py-1 rounded-full text-sm animate-pulse\">\r\n                    <div className=\"w-2 h-2 bg-white rounded-full\"></div>\r\n                    <span>REC {formatTime(recordingTime)}</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              \r\n              <div className=\"flex items-center space-x-2\">\r\n                <button\r\n                  onClick={() => setIsFullscreen(!isFullscreen)}\r\n                  className=\"p-2 hover:bg-white/20 rounded-lg transition-colors\"\r\n                  title={isFullscreen ? \"Свернуть\" : \"На весь экран\"}\r\n                >\r\n                  {isFullscreen ? <Minimize2 size={16} /> : <Maximize2 size={16} />}\r\n                </button>\r\n                <button\r\n                  onClick={onClose}\r\n                  className=\"p-2 hover:bg-white/20 rounded-lg transition-colors\"\r\n                  title=\"Закрыть\"\r\n                >\r\n                  <X size={16} />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-gray-50 p-4 border-b border-gray-200\">\r\n            <div className=\"flex items-center justify-center space-x-3 mb-4\">\r\n              {!isRecording ? (\r\n                <>\r\n                  <button\r\n                    onClick={startRecordingWithTeleprompter}\r\n                    className=\"bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white font-bold py-2 px-4 rounded-lg transition-all duration-300 shadow-lg flex items-center space-x-2\"\r\n                  >\r\n                    <Mic size={16} />\r\n                    <span>🎬 Запись с суфлёром</span>\r\n                  </button>\r\n                  <button\r\n                    onClick={startRecording}\r\n                    className=\"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg transition-all duration-300 flex items-center space-x-2\"\r\n                  >\r\n                    <Mic size={16} />\r\n                    <span>Только запись</span>\r\n                  </button>\r\n                </>\r\n              ) : (\r\n                <button\r\n                  onClick={stopRecording}\r\n                  className=\"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg transition-all duration-300\"\r\n                >\r\n                  ⏹️ Остановить запись\r\n                </button>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"flex items-center justify-center space-x-2 mb-4\">\r\n              <button\r\n                onClick={togglePlay}\r\n                className={`p-2 rounded-lg transition-all duration-300 ${\r\n                  isPlaying ? 'bg-yellow-500 text-white' : 'bg-green-500 text-white hover:bg-green-600'\r\n                }`}\r\n              >\r\n                {isPlaying ? <Pause size={16} /> : <Play size={16} />}\r\n              </button>\r\n              <button\r\n                onClick={resetTeleprompter}\r\n                className=\"p-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-all duration-300\"\r\n              >\r\n                <RotateCcw size={16} />\r\n              </button>\r\n            </div>\r\n\r\n\r\n            <div className=\"flex items-center justify-center space-x-2 mb-3\">\r\n              <span className=\"text-sm font-medium text-gray-600\">Скорость:</span>\r\n              {bloggerSpeeds.map(speedValue => (\r\n                <button\r\n                  key={speedValue}\r\n                  onClick={() => setSpeed(speedValue)}\r\n                  className={`px-2 py-1 text-sm rounded transition-all duration-200 ${\r\n                    speed === speedValue \r\n                      ? 'bg-red-500 text-white' \r\n                      : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n                  }`}\r\n                >\r\n                  {speedValue}x\r\n                </button>\r\n              ))}\r\n            </div>\r\n\r\n            <div className=\"flex items-center justify-center space-x-2\">\r\n              <span className=\"text-sm font-medium text-gray-600\">Размер:</span>\r\n              {fontSizes.map(size => (\r\n                <button\r\n                  key={size}\r\n                  onClick={() => setFontSize(size)}\r\n                  className={`px-2 py-1 text-sm rounded transition-all duration-200 ${\r\n                    fontSize === size \r\n                      ? 'bg-blue-500 text-white' \r\n                      : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n                  }`}\r\n                >\r\n                  {size}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex-1 relative overflow-hidden\">\r\n            <div\r\n              ref={textRef}\r\n              className=\"bg-black text-white p-6 h-full overflow-y-auto scrollbar-hide\"\r\n              style={{\r\n                fontSize: `${fontSize}px`,\r\n                lineHeight: '1.7',\r\n                fontFamily: 'Arial, sans-serif',\r\n                minHeight: isFullscreen ? 'calc(100vh - 200px)' : '300px'\r\n              }}\r\n            >\r\n              <div className=\"whitespace-pre-wrap text-center\">\r\n                {script || \"Добавьте текст сценария для использования суфлёра\"}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"absolute left-0 right-0 top-1/2 transform -translate-y-1/2 pointer-events-none\">\r\n              <div className=\"h-1 bg-red-500 opacity-70 mx-6 rounded-full shadow-lg\"></div>\r\n            </div>\r\n\r\n            <div className=\"absolute bottom-0 left-0 right-0 h-2 bg-gray-800\">\r\n              <div \r\n                className=\"h-full bg-gradient-to-r from-blue-500 to-red-500 transition-all duration-100\"\r\n                style={{ \r\n                  width: textRef.current ? \r\n                    `${(position / Math.max(1, textRef.current.scrollHeight - textRef.current.clientHeight)) * 100}%` : \r\n                    '0%' \r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {audioUrl && (\r\n            <div className=\"bg-green-50 p-4 border-t border-green-200\">\r\n              <div className=\"flex items-center space-x-3 mb-3\">\r\n                <Volume2 size={20} className=\"text-green-600\" />\r\n                <span className=\"font-semibold text-green-800\">\r\n                  Запись готова! ({formatTime(recordingTime)})\r\n                </span>\r\n              </div>\r\n              <audio \r\n                controls \r\n                src={audioUrl}\r\n                className=\"w-full mb-3\"\r\n              />\r\n              <div className=\"flex space-x-2\">\r\n                <button\r\n                  onClick={() => {\r\n                    const a = document.createElement('a');\r\n                    a.href = audioUrl;\r\n                    a.download = `${scriptTitle}_${Date.now()}.webm`;\r\n                    a.click();\r\n                  }}\r\n                  className=\"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm transition-colors\"\r\n                >\r\n                  📥 Скачать\r\n                </button>\r\n                <button\r\n                  onClick={() => {\r\n                    setAudioUrl(null);\r\n                    setAudioBlob(null);\r\n                    setRecordingTime(0);\r\n                  }}\r\n                  className=\"bg-gray-500 hover:bg-gray-600 text-white px-3 py-1 rounded text-sm transition-colors\"\r\n                >\r\n                  🗑️ Удалить\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"bg-blue-50 p-3 border-t border-blue-200\">\r\n            <p className=\"text-sm text-blue-700 text-center\">\r\n              💡 <strong>Совет:</strong> Перетащите окно в удобное место. Скорость 5x-8x идеальна для живой речи\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DraggableTeleprompterModal;"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,MAAM,EAAEC,SAAS,QAAQ,OAAO;AAC1D,SAASC,GAAG,EAAEC,IAAI,EAAEC,KAAK,EAAEC,SAAS,EAAEC,IAAI,EAAEC,SAAS,EAAEC,SAAS,EAAEC,CAAC,EAAEC,OAAO,QAAQ,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEnG,MAAMC,0BAA0B,GAAGA,CAAC;EAClCC,MAAM;EACNC,OAAO;EACPC,MAAM,GAAG,EAAE;EACXC,WAAW,GAAG,UAAU;EACxBC;AACF,CAAC,KAAK;EAAAC,EAAA;EACJ;EACA,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGxB,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACyB,KAAK,EAAEC,QAAQ,CAAC,GAAG1B,QAAQ,CAAC,CAAC,CAAC;EACrC,MAAM,CAAC2B,QAAQ,EAAEC,WAAW,CAAC,GAAG5B,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAAC6B,QAAQ,EAAEC,WAAW,CAAC,GAAG9B,QAAQ,CAAC,CAAC,CAAC;;EAE3C;EACA,MAAM,CAAC+B,WAAW,EAAEC,cAAc,CAAC,GAAGhC,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACiC,aAAa,EAAEC,gBAAgB,CAAC,GAAGlC,QAAQ,CAAC,CAAC,CAAC;EACrD,MAAM,CAACmC,SAAS,EAAEC,YAAY,CAAC,GAAGpC,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACqC,QAAQ,EAAEC,WAAW,CAAC,GAAGtC,QAAQ,CAAC,IAAI,CAAC;;EAE9C;EACA,MAAM,CAACuC,aAAa,EAAEC,gBAAgB,CAAC,GAAGxC,QAAQ,CAAC;IAAEyC,CAAC,EAAE,GAAG;IAAEC,CAAC,EAAE;EAAI,CAAC,CAAC;EACtE,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAG5C,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAM,CAAC6C,UAAU,EAAEC,aAAa,CAAC,GAAG9C,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAAC+C,UAAU,EAAEC,aAAa,CAAC,GAAGhD,QAAQ,CAAC;IAAEyC,CAAC,EAAE,CAAC;IAAEC,CAAC,EAAE;EAAE,CAAC,CAAC;;EAE5D;EACA,MAAMO,OAAO,GAAGhD,MAAM,CAAC,IAAI,CAAC;EAC5B,MAAMiD,QAAQ,GAAGjD,MAAM,CAAC,IAAI,CAAC;EAC7B,MAAMkD,YAAY,GAAGlD,MAAM,CAAC,IAAI,CAAC;EACjC,MAAMmD,WAAW,GAAGnD,MAAM,CAACoD,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC;EACtC,MAAMC,QAAQ,GAAGtD,MAAM,CAAC,IAAI,CAAC;EAC7B,MAAMuD,gBAAgB,GAAGvD,MAAM,CAAC,IAAI,CAAC;EACrC,MAAMwD,cAAc,GAAGxD,MAAM,CAAC,EAAE,CAAC;;EAEjC;EACAC,SAAS,CAAC,MAAM;IACd,IAAIqB,SAAS,IAAI0B,OAAO,CAACS,OAAO,IAAIzC,MAAM,EAAE;MAC1C,MAAM0C,OAAO,GAAGA,CAAA,KAAM;QACpB,MAAML,GAAG,GAAGD,IAAI,CAACC,GAAG,CAAC,CAAC;QACtB,MAAMM,SAAS,GAAGN,GAAG,GAAGF,WAAW,CAACM,OAAO;QAC3CN,WAAW,CAACM,OAAO,GAAGJ,GAAG;QAEzBxB,WAAW,CAAC+B,IAAI,IAAI;UAClB,MAAMC,WAAW,GAAGD,IAAI,GAAIpC,KAAK,GAAGmC,SAAS,GAAG,GAAI;UACpD,MAAMG,SAAS,GAAGd,OAAO,CAACS,OAAO,CAACM,YAAY,GAAGf,OAAO,CAACS,OAAO,CAACO,YAAY;UAE7E,IAAIH,WAAW,IAAIC,SAAS,EAAE;YAC5BvC,YAAY,CAAC,KAAK,CAAC;YACnB,OAAOuC,SAAS;UAClB;UAEA,OAAOG,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEL,WAAW,CAAC;QACjC,CAAC,CAAC;QAEFX,YAAY,CAACO,OAAO,GAAGU,qBAAqB,CAACT,OAAO,CAAC;MACvD,CAAC;MAEDR,YAAY,CAACO,OAAO,GAAGU,qBAAqB,CAACT,OAAO,CAAC;IACvD;IAEA,OAAO,MAAM;MACX,IAAIR,YAAY,CAACO,OAAO,EAAE;QACxBW,oBAAoB,CAAClB,YAAY,CAACO,OAAO,CAAC;MAC5C;IACF,CAAC;EACH,CAAC,EAAE,CAACnC,SAAS,EAAEE,KAAK,EAAER,MAAM,CAAC,CAAC;;EAE9B;EACAf,SAAS,CAAC,MAAM;IACd,IAAI+C,OAAO,CAACS,OAAO,EAAE;MACnBT,OAAO,CAACS,OAAO,CAACY,SAAS,GAAGzC,QAAQ;IACtC;EACF,CAAC,EAAE,CAACA,QAAQ,CAAC,CAAC;;EAEd;EACA3B,SAAS,CAAC,MAAM;IACd,IAAI6B,WAAW,EAAE;MACfwB,QAAQ,CAACG,OAAO,GAAGa,WAAW,CAAC,MAAM;QACnCrC,gBAAgB,CAAC2B,IAAI,IAAIA,IAAI,GAAG,CAAC,CAAC;MACpC,CAAC,EAAE,IAAI,CAAC;IACV,CAAC,MAAM;MACLW,aAAa,CAACjB,QAAQ,CAACG,OAAO,CAAC;IACjC;IAEA,OAAO,MAAMc,aAAa,CAACjB,QAAQ,CAACG,OAAO,CAAC;EAC9C,CAAC,EAAE,CAAC3B,WAAW,CAAC,CAAC;;EAEjB;EACA7B,SAAS,CAAC,MAAM;IACd,IAAIe,MAAM,EAAE;MACVa,WAAW,CAAC,CAAC,CAAC;MACdN,YAAY,CAAC,KAAK,CAAC;MACnBU,gBAAgB,CAAC,CAAC,CAAC;MACnBkB,WAAW,CAACM,OAAO,GAAGL,IAAI,CAACC,GAAG,CAAC,CAAC;IAClC;EACF,CAAC,EAAE,CAACrC,MAAM,CAAC,CAAC;;EAEZ;EACA,MAAMwD,eAAe,GAAIC,CAAC,IAAK;IAC7B,IAAI,CAAC/B,YAAY,IAAI+B,CAAC,CAACC,MAAM,CAACC,OAAO,CAAC,cAAc,CAAC,EAAE;MACrD9B,aAAa,CAAC,IAAI,CAAC;MACnB,MAAM+B,IAAI,GAAG3B,QAAQ,CAACQ,OAAO,CAACoB,qBAAqB,CAAC,CAAC;MACrD9B,aAAa,CAAC;QACZP,CAAC,EAAEiC,CAAC,CAACK,OAAO,GAAGF,IAAI,CAACG,IAAI;QACxBtC,CAAC,EAAEgC,CAAC,CAACO,OAAO,GAAGJ,IAAI,CAACK;MACtB,CAAC,CAAC;IACJ;EACF,CAAC;EAEDhF,SAAS,CAAC,MAAM;IACd,MAAMiF,eAAe,GAAIT,CAAC,IAAK;MAC7B,IAAI7B,UAAU,IAAI,CAACF,YAAY,EAAE;QAC/B,MAAMyC,IAAI,GAAGV,CAAC,CAACK,OAAO,GAAGhC,UAAU,CAACN,CAAC;QACrC,MAAM4C,IAAI,GAAGX,CAAC,CAACO,OAAO,GAAGlC,UAAU,CAACL,CAAC;;QAErC;QACA,MAAM4C,IAAI,GAAGC,MAAM,CAACC,UAAU,GAAG,GAAG;QACpC,MAAMC,IAAI,GAAGF,MAAM,CAACG,WAAW,GAAG,GAAG;QAErClD,gBAAgB,CAAC;UACfC,CAAC,EAAEyB,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACyB,GAAG,CAACP,IAAI,EAAEE,IAAI,CAAC,CAAC;UACpC5C,CAAC,EAAEwB,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACyB,GAAG,CAACN,IAAI,EAAEI,IAAI,CAAC;QACrC,CAAC,CAAC;MACJ;IACF,CAAC;IAED,MAAMG,aAAa,GAAGA,CAAA,KAAM;MAC1B9C,aAAa,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,IAAID,UAAU,EAAE;MACdgD,QAAQ,CAACC,gBAAgB,CAAC,WAAW,EAAEX,eAAe,CAAC;MACvDU,QAAQ,CAACC,gBAAgB,CAAC,SAAS,EAAEF,aAAa,CAAC;IACrD;IAEA,OAAO,MAAM;MACXC,QAAQ,CAACE,mBAAmB,CAAC,WAAW,EAAEZ,eAAe,CAAC;MAC1DU,QAAQ,CAACE,mBAAmB,CAAC,SAAS,EAAEH,aAAa,CAAC;IACxD,CAAC;EACH,CAAC,EAAE,CAAC/C,UAAU,EAAEE,UAAU,EAAEJ,YAAY,CAAC,CAAC;;EAE1C;EACA,MAAMqD,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjC,IAAI;MACF,MAAMC,MAAM,GAAG,MAAMC,SAAS,CAACC,YAAY,CAACC,YAAY,CAAC;QACvDC,KAAK,EAAE;UACLC,gBAAgB,EAAE,IAAI;UACtBC,gBAAgB,EAAE,IAAI;UACtBC,UAAU,EAAE;QACd;MACF,CAAC,CAAC;MAEF,MAAMC,aAAa,GAAG,IAAIC,aAAa,CAACT,MAAM,EAAE;QAC9CU,QAAQ,EAAE;MACZ,CAAC,CAAC;MAEFnD,gBAAgB,CAACE,OAAO,GAAG+C,aAAa;MACxChD,cAAc,CAACC,OAAO,GAAG,EAAE;MAE3B+C,aAAa,CAACG,eAAe,GAAIC,KAAK,IAAK;QACzC,IAAIA,KAAK,CAACC,IAAI,CAACC,IAAI,GAAG,CAAC,EAAE;UACvBtD,cAAc,CAACC,OAAO,CAACsD,IAAI,CAACH,KAAK,CAACC,IAAI,CAAC;QACzC;MACF,CAAC;MAEDL,aAAa,CAACQ,MAAM,GAAG,MAAM;QAC3B,MAAM9E,SAAS,GAAG,IAAI+E,IAAI,CAACzD,cAAc,CAACC,OAAO,EAAE;UAAEyD,IAAI,EAAE;QAAa,CAAC,CAAC;QAC1E,MAAM9E,QAAQ,GAAG+E,GAAG,CAACC,eAAe,CAAClF,SAAS,CAAC;QAC/CC,YAAY,CAACD,SAAS,CAAC;QACvBG,WAAW,CAACD,QAAQ,CAAC;QAErB,IAAIhB,mBAAmB,EAAE;UACvBA,mBAAmB,CAAC;YAClBiG,IAAI,EAAEnF,SAAS;YACfoF,GAAG,EAAElF,QAAQ;YACbmF,QAAQ,EAAEvF,aAAa;YACvBwF,SAAS,EAAE,IAAIpE,IAAI,CAAC,CAAC,CAACqE,WAAW,CAAC,CAAC;YACnCtG,WAAW,EAAEA;UACf,CAAC,CAAC;QACJ;;QAEA;QACA6E,MAAM,CAAC0B,SAAS,CAAC,CAAC,CAACC,OAAO,CAACC,KAAK,IAAIA,KAAK,CAACC,IAAI,CAAC,CAAC,CAAC;MACnD,CAAC;MAEDrB,aAAa,CAACsB,KAAK,CAAC,GAAG,CAAC;MACxB/F,cAAc,CAAC,IAAI,CAAC;MACpBE,gBAAgB,CAAC,CAAC,CAAC;IAErB,CAAC,CAAC,OAAO8F,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;MACnDE,KAAK,CAAC,+DAA+D,CAAC;IACxE;EACF,CAAC;;EAED;EACA,MAAMC,aAAa,GAAGA,CAAA,KAAM;IAC1B,IAAI3E,gBAAgB,CAACE,OAAO,IAAI3B,WAAW,EAAE;MAC3CyB,gBAAgB,CAACE,OAAO,CAACoE,IAAI,CAAC,CAAC;MAC/B9F,cAAc,CAAC,KAAK,CAAC;MACrBR,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;;EAED;EACA,MAAM4G,UAAU,GAAGA,CAAA,KAAM;IACvB5G,YAAY,CAAC,CAACD,SAAS,CAAC;IACxB6B,WAAW,CAACM,OAAO,GAAGL,IAAI,CAACC,GAAG,CAAC,CAAC;EAClC,CAAC;EAED,MAAM+E,iBAAiB,GAAGA,CAAA,KAAM;IAC9B7G,YAAY,CAAC,KAAK,CAAC;IACnBM,WAAW,CAAC,CAAC,CAAC;EAChB,CAAC;;EAED;EACA,MAAMwG,8BAA8B,GAAG,MAAAA,CAAA,KAAY;IACjD,MAAMtC,cAAc,CAAC,CAAC;IACtB;IACAuC,UAAU,CAAC,MAAM;MACf/G,YAAY,CAAC,IAAI,CAAC;MAClB4B,WAAW,CAACM,OAAO,GAAGL,IAAI,CAACC,GAAG,CAAC,CAAC;IAClC,CAAC,EAAE,IAAI,CAAC;EACV,CAAC;;EAED;EACA,MAAMkF,UAAU,GAAIC,OAAO,IAAK;IAC9B,MAAMC,IAAI,GAAGxE,IAAI,CAACyE,KAAK,CAACF,OAAO,GAAG,EAAE,CAAC;IACrC,MAAMG,IAAI,GAAGH,OAAO,GAAG,EAAE;IACzB,OAAO,GAAGC,IAAI,CAACG,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,IAAIF,IAAI,CAACC,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE;EAClF,CAAC;EAED,MAAMC,aAAa,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC;EAChD,MAAMC,SAAS,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;EAE9C,IAAI,CAAC/H,MAAM,EAAE,OAAO,IAAI;EAExB,oBACEJ,OAAA;IAAKoI,SAAS,EAAC,wCAAwC;IAAAC,QAAA,gBACrDrI,OAAA;MAAKoI,SAAS,EAAC;IAAmE;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAErFzI,OAAA;MACE0I,GAAG,EAAErG,QAAS;MACd+F,SAAS,EAAC,8BAA8B;MACxCO,KAAK,EAAE;QACLxE,IAAI,EAAErC,YAAY,GAAG,CAAC,GAAGJ,aAAa,CAACE,CAAC;QACxCyC,GAAG,EAAEvC,YAAY,GAAG,CAAC,GAAGJ,aAAa,CAACG,CAAC;QACvC+G,KAAK,EAAE9G,YAAY,GAAG,MAAM,GAAG,OAAO;QACtC+G,MAAM,EAAE/G,YAAY,GAAG,MAAM,GAAG,MAAM;QACtCgH,SAAS,EAAEhH,YAAY,GAAG,MAAM,GAAG;MACrC,CAAE;MACFiH,WAAW,EAAEnF,eAAgB;MAAAyE,QAAA,eAE7BrI,OAAA;QAAKoI,SAAS,EAAC,+FAA+F;QAAAC,QAAA,gBAC5GrI,OAAA;UAAKoI,SAAS,EAAC,gGAAgG;UAAAC,QAAA,eAC7GrI,OAAA;YAAKoI,SAAS,EAAC,mCAAmC;YAAAC,QAAA,gBAChDrI,OAAA;cAAKoI,SAAS,EAAC,6BAA6B;cAAAC,QAAA,gBAC1CrI,OAAA,CAACN,IAAI;gBAACwG,IAAI,EAAE;cAAG;gBAAAoC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eAClBzI,OAAA;gBAAIoI,SAAS,EAAC,mBAAmB;gBAAAC,QAAA,GAAC,eAAG,EAAC9H,WAAW;cAAA;gBAAA+H,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,EACtDvH,WAAW,iBACVlB,OAAA;gBAAKoI,SAAS,EAAC,qFAAqF;gBAAAC,QAAA,gBAClGrI,OAAA;kBAAKoI,SAAS,EAAC;gBAA+B;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACrDzI,OAAA;kBAAAqI,QAAA,GAAM,MAAI,EAACV,UAAU,CAACvG,aAAa,CAAC;gBAAA;kBAAAkH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACzC,CACN;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACE,CAAC,eAENzI,OAAA;cAAKoI,SAAS,EAAC,6BAA6B;cAAAC,QAAA,gBAC1CrI,OAAA;gBACEgJ,OAAO,EAAEA,CAAA,KAAMjH,eAAe,CAAC,CAACD,YAAY,CAAE;gBAC9CsG,SAAS,EAAC,oDAAoD;gBAC9Da,KAAK,EAAEnH,YAAY,GAAG,UAAU,GAAG,eAAgB;gBAAAuG,QAAA,EAElDvG,YAAY,gBAAG9B,OAAA,CAACJ,SAAS;kBAACsG,IAAI,EAAE;gBAAG;kBAAAoC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,gBAAGzI,OAAA,CAACL,SAAS;kBAACuG,IAAI,EAAE;gBAAG;kBAAAoC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC3D,CAAC,eACTzI,OAAA;gBACEgJ,OAAO,EAAE3I,OAAQ;gBACjB+H,SAAS,EAAC,oDAAoD;gBAC9Da,KAAK,EAAC,4CAAS;gBAAAZ,QAAA,eAEfrI,OAAA,CAACH,CAAC;kBAACqG,IAAI,EAAE;gBAAG;kBAAAoC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACT,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eAENzI,OAAA;UAAKoI,SAAS,EAAC,yCAAyC;UAAAC,QAAA,gBACtDrI,OAAA;YAAKoI,SAAS,EAAC,iDAAiD;YAAAC,QAAA,EAC7D,CAACnH,WAAW,gBACXlB,OAAA,CAAAE,SAAA;cAAAmI,QAAA,gBACErI,OAAA;gBACEgJ,OAAO,EAAEvB,8BAA+B;gBACxCW,SAAS,EAAC,4LAA4L;gBAAAC,QAAA,gBAEtMrI,OAAA,CAACV,GAAG;kBAAC4G,IAAI,EAAE;gBAAG;kBAAAoC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,eACjBzI,OAAA;kBAAAqI,QAAA,EAAM;gBAAoB;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC3B,CAAC,eACTzI,OAAA;gBACEgJ,OAAO,EAAE7D,cAAe;gBACxBiD,SAAS,EAAC,iIAAiI;gBAAAC,QAAA,gBAE3IrI,OAAA,CAACV,GAAG;kBAAC4G,IAAI,EAAE;gBAAG;kBAAAoC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,eACjBzI,OAAA;kBAAAqI,QAAA,EAAM;gBAAa;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACpB,CAAC;YAAA,eACT,CAAC,gBAEHzI,OAAA;cACEgJ,OAAO,EAAE1B,aAAc;cACvBc,SAAS,EAAC,mGAAmG;cAAAC,QAAA,EAC9G;YAED;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ;UACT;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC,eAENzI,OAAA;YAAKoI,SAAS,EAAC,iDAAiD;YAAAC,QAAA,gBAC9DrI,OAAA;cACEgJ,OAAO,EAAEzB,UAAW;cACpBa,SAAS,EAAE,8CACT1H,SAAS,GAAG,0BAA0B,GAAG,4CAA4C,EACpF;cAAA2H,QAAA,EAEF3H,SAAS,gBAAGV,OAAA,CAACR,KAAK;gBAAC0G,IAAI,EAAE;cAAG;gBAAAoC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,gBAAGzI,OAAA,CAACT,IAAI;gBAAC2G,IAAI,EAAE;cAAG;gBAAAoC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC/C,CAAC,eACTzI,OAAA;cACEgJ,OAAO,EAAExB,iBAAkB;cAC3BY,SAAS,EAAC,qFAAqF;cAAAC,QAAA,eAE/FrI,OAAA,CAACP,SAAS;gBAACyG,IAAI,EAAE;cAAG;gBAAAoC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjB,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,eAGNzI,OAAA;YAAKoI,SAAS,EAAC,iDAAiD;YAAAC,QAAA,gBAC9DrI,OAAA;cAAMoI,SAAS,EAAC,mCAAmC;cAAAC,QAAA,EAAC;YAAS;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,EACnEP,aAAa,CAACgB,GAAG,CAACC,UAAU,iBAC3BnJ,OAAA;cAEEgJ,OAAO,EAAEA,CAAA,KAAMnI,QAAQ,CAACsI,UAAU,CAAE;cACpCf,SAAS,EAAE,yDACTxH,KAAK,KAAKuI,UAAU,GAChB,uBAAuB,GACvB,6CAA6C,EAChD;cAAAd,QAAA,GAEFc,UAAU,EAAC,GACd;YAAA,GATOA,UAAU;cAAAb,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAST,CACT,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC,eAENzI,OAAA;YAAKoI,SAAS,EAAC,4CAA4C;YAAAC,QAAA,gBACzDrI,OAAA;cAAMoI,SAAS,EAAC,mCAAmC;cAAAC,QAAA,EAAC;YAAO;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,EACjEN,SAAS,CAACe,GAAG,CAAChD,IAAI,iBACjBlG,OAAA;cAEEgJ,OAAO,EAAEA,CAAA,KAAMjI,WAAW,CAACmF,IAAI,CAAE;cACjCkC,SAAS,EAAE,yDACTtH,QAAQ,KAAKoF,IAAI,GACb,wBAAwB,GACxB,6CAA6C,EAChD;cAAAmC,QAAA,EAEFnC;YAAI,GARAA,IAAI;cAAAoC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OASH,CACT,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eAENzI,OAAA;UAAKoI,SAAS,EAAC,iCAAiC;UAAAC,QAAA,gBAC9CrI,OAAA;YACE0I,GAAG,EAAEtG,OAAQ;YACbgG,SAAS,EAAC,+DAA+D;YACzEO,KAAK,EAAE;cACL7H,QAAQ,EAAE,GAAGA,QAAQ,IAAI;cACzBsI,UAAU,EAAE,KAAK;cACjBC,UAAU,EAAE,mBAAmB;cAC/BC,SAAS,EAAExH,YAAY,GAAG,qBAAqB,GAAG;YACpD,CAAE;YAAAuG,QAAA,eAEFrI,OAAA;cAAKoI,SAAS,EAAC,iCAAiC;cAAAC,QAAA,EAC7C/H,MAAM,IAAI;YAAmD;cAAAgI,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC3D;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eAENzI,OAAA;YAAKoI,SAAS,EAAC,gFAAgF;YAAAC,QAAA,eAC7FrI,OAAA;cAAKoI,SAAS,EAAC;YAAuD;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC1E,CAAC,eAENzI,OAAA;YAAKoI,SAAS,EAAC,kDAAkD;YAAAC,QAAA,eAC/DrI,OAAA;cACEoI,SAAS,EAAC,8EAA8E;cACxFO,KAAK,EAAE;gBACLC,KAAK,EAAExG,OAAO,CAACS,OAAO,GACpB,GAAI7B,QAAQ,GAAGqC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAElB,OAAO,CAACS,OAAO,CAACM,YAAY,GAAGf,OAAO,CAACS,OAAO,CAACO,YAAY,CAAC,GAAI,GAAG,GAAG,GACjG;cACJ;YAAE;cAAAkF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,EAELjH,QAAQ,iBACPxB,OAAA;UAAKoI,SAAS,EAAC,2CAA2C;UAAAC,QAAA,gBACxDrI,OAAA;YAAKoI,SAAS,EAAC,kCAAkC;YAAAC,QAAA,gBAC/CrI,OAAA,CAACF,OAAO;cAACoG,IAAI,EAAE,EAAG;cAACkC,SAAS,EAAC;YAAgB;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,eAChDzI,OAAA;cAAMoI,SAAS,EAAC,8BAA8B;cAAAC,QAAA,GAAC,8EAC7B,EAACV,UAAU,CAACvG,aAAa,CAAC,EAAC,GAC7C;YAAA;cAAAkH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ,CAAC,eACNzI,OAAA;YACEuJ,QAAQ;YACRC,GAAG,EAAEhI,QAAS;YACd4G,SAAS,EAAC;UAAa;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACxB,CAAC,eACFzI,OAAA;YAAKoI,SAAS,EAAC,gBAAgB;YAAAC,QAAA,gBAC7BrI,OAAA;cACEgJ,OAAO,EAAEA,CAAA,KAAM;gBACb,MAAMS,CAAC,GAAGzE,QAAQ,CAAC0E,aAAa,CAAC,GAAG,CAAC;gBACrCD,CAAC,CAACE,IAAI,GAAGnI,QAAQ;gBACjBiI,CAAC,CAACG,QAAQ,GAAG,GAAGrJ,WAAW,IAAIiC,IAAI,CAACC,GAAG,CAAC,CAAC,OAAO;gBAChDgH,CAAC,CAACI,KAAK,CAAC,CAAC;cACX,CAAE;cACFzB,SAAS,EAAC,sFAAsF;cAAAC,QAAA,EACjG;YAED;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACTzI,OAAA;cACEgJ,OAAO,EAAEA,CAAA,KAAM;gBACbvH,WAAW,CAAC,IAAI,CAAC;gBACjBF,YAAY,CAAC,IAAI,CAAC;gBAClBF,gBAAgB,CAAC,CAAC,CAAC;cACrB,CAAE;cACF+G,SAAS,EAAC,sFAAsF;cAAAC,QAAA,EACjG;YAED;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CACN,eAEDzI,OAAA;UAAKoI,SAAS,EAAC,yCAAyC;UAAAC,QAAA,eACtDrI,OAAA;YAAGoI,SAAS,EAAC,mCAAmC;YAAAC,QAAA,GAAC,eAC5C,eAAArI,OAAA;cAAAqI,QAAA,EAAQ;YAAM;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,+VAC5B;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAAChI,EAAA,CAhcIN,0BAA0B;AAAA2J,EAAA,GAA1B3J,0BAA0B;AAkchC,eAAeA,0BAA0B;AAAC,IAAA2J,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}