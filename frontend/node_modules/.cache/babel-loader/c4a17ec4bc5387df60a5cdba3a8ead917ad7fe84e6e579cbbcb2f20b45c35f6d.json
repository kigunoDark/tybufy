{"ast":null,"code":"var _jsxFileName = \"C:\\\\Scriptify\\\\ai-content-studio\\\\frontend\\\\src\\\\components\\\\Timeline.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useRef, useEffect, useCallback } from \"react\";\nimport { Video, Music, Copy, Trash2, Scissors, Film, Plus, Layers, ZoomIn, ZoomOut, RotateCcw, Type, Magnet, Eye, EyeOff, Lock, Unlock } from \"lucide-react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Timeline = ({\n  timelineItems,\n  setTimelineItems,\n  currentTime,\n  videoDuration,\n  setVideoDuration,\n  selectedTimelineItem,\n  setSelectedTimelineItem,\n  timelineZoom,\n  setTimelineZoom,\n  tracks,\n  setTracks,\n  draggedItem,\n  draggedTimelineItem,\n  setDraggedTimelineItem,\n  dropPreview,\n  setDropPreview,\n  isDragging,\n  isTimelineDragging,\n  setIsTimelineDragging,\n  isResizing,\n  setIsResizing,\n  copiedItem,\n  formatTime,\n  seekTo,\n  splitTimelineItem,\n  copyTimelineItem,\n  pasteTimelineItem,\n  deleteSelectedItem,\n  addToTimeline,\n  insertWithRipple,\n  applyRippleEffect,\n  removeFromTimeline\n}) => {\n  _s();\n  const timelineRef = useRef(null);\n  const timelineScrollRef = useRef(null);\n  const trackLabelsRef = useRef(null);\n  const autoScrollIntervalRef = useRef(null);\n\n  // CapCut-style states\n  const [isSnappingEnabled, setIsSnappingEnabled] = useState(true);\n  const [snapThreshold] = useState(10); // pixels\n  const [dragOffset, setDragOffset] = useState(0);\n  const [resizeHandle, setResizeHandle] = useState(null);\n  const [resizeItem, setResizeItem] = useState(null);\n  const [originalItemData, setOriginalItemData] = useState(null);\n  const [snapIndicators, setSnapIndicators] = useState([]);\n\n  // Snap helpers\n  const getSnapPoints = useCallback(() => {\n    const snapPoints = [];\n    const pixelsPerSecond = getPixelsPerSecond();\n\n    // Playhead snap point\n    snapPoints.push({\n      time: currentTime,\n      pixel: currentTime * pixelsPerSecond,\n      type: 'playhead'\n    });\n\n    // Clip edges snap points\n    timelineItems.forEach(item => {\n      if ((draggedTimelineItem === null || draggedTimelineItem === void 0 ? void 0 : draggedTimelineItem.id) !== item.id) {\n        snapPoints.push({\n          time: item.startTime,\n          pixel: item.startTime * pixelsPerSecond,\n          type: 'clip-start',\n          clipId: item.id\n        });\n        snapPoints.push({\n          time: item.startTime + item.duration,\n          pixel: (item.startTime + item.duration) * pixelsPerSecond,\n          type: 'clip-end',\n          clipId: item.id\n        });\n      }\n    });\n\n    // Timeline start\n    snapPoints.push({\n      time: 0,\n      pixel: 0,\n      type: 'timeline-start'\n    });\n    return snapPoints;\n  }, [currentTime, timelineItems, draggedTimelineItem, getPixelsPerSecond]);\n  const findNearestSnap = useCallback(targetPixel => {\n    if (!isSnappingEnabled) return null;\n    const snapPoints = getSnapPoints();\n    let nearestSnap = null;\n    let minDistance = snapThreshold;\n    snapPoints.forEach(point => {\n      const distance = Math.abs(point.pixel - targetPixel);\n      if (distance < minDistance) {\n        minDistance = distance;\n        nearestSnap = point;\n      }\n    });\n    return nearestSnap;\n  }, [isSnappingEnabled, getSnapPoints, snapThreshold]);\n\n  // Auto-scroll logic\n  const stopAutoScroll = useCallback(() => {\n    if (autoScrollIntervalRef.current) {\n      clearInterval(autoScrollIntervalRef.current);\n      autoScrollIntervalRef.current = null;\n    }\n  }, []);\n  const startAutoScroll = useCallback((direction, speed = 1) => {\n    stopAutoScroll();\n    autoScrollIntervalRef.current = setInterval(() => {\n      if (timelineScrollRef.current) {\n        const scrollAmount = 15 * speed;\n        const currentScrollLeft = timelineScrollRef.current.scrollLeft;\n        const maxScroll = timelineScrollRef.current.scrollWidth - timelineScrollRef.current.clientWidth;\n        if (direction === \"left\" && currentScrollLeft > 0) {\n          timelineScrollRef.current.scrollLeft = Math.max(0, currentScrollLeft - scrollAmount);\n        } else if (direction === \"right\" && currentScrollLeft < maxScroll) {\n          timelineScrollRef.current.scrollLeft = Math.min(maxScroll, currentScrollLeft + scrollAmount);\n        }\n      }\n    }, 16);\n  }, [stopAutoScroll]);\n  const checkAutoScroll = useCallback(clientX => {\n    if (!timelineScrollRef.current) return;\n    const rect = timelineScrollRef.current.getBoundingClientRect();\n    const scrollZoneWidth = 120;\n    const relativeX = clientX - rect.left;\n    if (relativeX < scrollZoneWidth && timelineScrollRef.current.scrollLeft > 0) {\n      const speed = (scrollZoneWidth - relativeX) / scrollZoneWidth * 3;\n      startAutoScroll(\"left\", speed);\n    } else if (relativeX > rect.width - scrollZoneWidth) {\n      const maxScroll = timelineScrollRef.current.scrollWidth - timelineScrollRef.current.clientWidth;\n      if (timelineScrollRef.current.scrollLeft < maxScroll) {\n        const speed = (relativeX - (rect.width - scrollZoneWidth)) / scrollZoneWidth * 3;\n        startAutoScroll(\"right\", speed);\n      }\n    } else {\n      stopAutoScroll();\n    }\n  }, [startAutoScroll, stopAutoScroll]);\n\n  // Zoom functions\n  const zoomIn = () => setTimelineZoom(prev => Math.min(8, prev * 1.5));\n  const zoomOut = () => setTimelineZoom(prev => Math.max(0.25, prev / 1.5));\n  const resetZoom = () => setTimelineZoom(1);\n\n  // Track management\n  const addVideoTrack = () => {\n    const newTrackId = `video-${Date.now()}`;\n    setTracks(prev => ({\n      ...prev,\n      video: [...prev.video, {\n        id: newTrackId,\n        name: `Video ${prev.video.length + 1}`,\n        type: \"video\",\n        visible: true,\n        locked: false\n      }]\n    }));\n  };\n  const addAudioTrack = () => {\n    const newTrackId = `audio-${Date.now()}`;\n    setTracks(prev => ({\n      ...prev,\n      audio: [...prev.audio, {\n        id: newTrackId,\n        name: `Audio ${prev.audio.length + 1}`,\n        type: \"audio\",\n        visible: true,\n        locked: false\n      }]\n    }));\n  };\n  const addTextTrack = () => {\n    const newTrackId = `text-${Date.now()}`;\n    setTracks(prev => ({\n      ...prev,\n      text: [...prev.text, {\n        id: newTrackId,\n        name: `Text ${prev.text.length + 1}`,\n        type: \"text\",\n        visible: true,\n        locked: false\n      }]\n    }));\n  };\n  const toggleTrackVisibility = trackId => {\n    setTracks(prev => {\n      const newTracks = {\n        ...prev\n      };\n      Object.keys(newTracks).forEach(trackType => {\n        newTracks[trackType] = newTracks[trackType].map(track => track.id === trackId ? {\n          ...track,\n          visible: !track.visible\n        } : track);\n      });\n      return newTracks;\n    });\n  };\n  const toggleTrackLock = trackId => {\n    setTracks(prev => {\n      const newTracks = {\n        ...prev\n      };\n      Object.keys(newTracks).forEach(trackType => {\n        newTracks[trackType] = newTracks[trackType].map(track => track.id === trackId ? {\n          ...track,\n          locked: !track.locked\n        } : track);\n      });\n      return newTracks;\n    });\n  };\n\n  // Helper functions\n  const getTimelineWidth = () => {\n    const baseWidth = videoDuration * 50 * timelineZoom;\n    return Math.max(baseWidth, 2000);\n  };\n  const getPixelsPerSecond = () => 50 * timelineZoom;\n  const getAllTracks = () => [...(tracks.video || []), ...(tracks.audio || []), ...(tracks.text || [])];\n  const getTrackColor = trackType => {\n    switch (trackType) {\n      case \"video\":\n        return \"bg-blue-500 border-blue-400\";\n      case \"audio\":\n        return \"bg-green-500 border-green-400\";\n      case \"text\":\n        return \"bg-purple-500 border-purple-400\";\n      default:\n        return \"bg-gray-500 border-gray-400\";\n    }\n  };\n  const getTrackIcon = trackType => {\n    switch (trackType) {\n      case \"video\":\n        return /*#__PURE__*/_jsxDEV(Video, {\n          size: 16\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 16\n        }, this);\n      case \"audio\":\n        return /*#__PURE__*/_jsxDEV(Music, {\n          size: 16\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 16\n        }, this);\n      case \"text\":\n        return /*#__PURE__*/_jsxDEV(Type, {\n          size: 16\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 16\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(Layers, {\n          size: 16\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 16\n        }, this);\n    }\n  };\n\n  // Resize handlers\n  const handleResizeStart = useCallback((e, item, handle) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsResizing(true);\n    setResizeHandle(handle);\n    setResizeItem(item);\n    setOriginalItemData({\n      startTime: item.startTime,\n      duration: item.duration\n    });\n    setIsTimelineDragging(false);\n    setDraggedTimelineItem(null);\n  }, [setIsResizing, setIsTimelineDragging, setDraggedTimelineItem]);\n  const handleResizeEnd = useCallback(() => {\n    setIsResizing(false);\n    setResizeHandle(null);\n    setResizeItem(null);\n    setOriginalItemData(null);\n    setSnapIndicators([]);\n    stopAutoScroll();\n  }, [setIsResizing, stopAutoScroll]);\n\n  // Sync scroll\n  const handleTrackAreaScroll = e => {\n    if (trackLabelsRef.current) {\n      trackLabelsRef.current.scrollTop = e.target.scrollTop;\n    }\n  };\n  const handleTrackLabelsScroll = e => {\n    if (timelineScrollRef.current) {\n      timelineScrollRef.current.scrollTop = e.target.scrollTop;\n    }\n  };\n\n  // Event handlers\n  const handleTimelineClick = e => {\n    if (isDragging || isTimelineDragging || isResizing) return;\n    const rect = timelineScrollRef.current.getBoundingClientRect();\n    const clickX = e.clientX - rect.left + timelineScrollRef.current.scrollLeft;\n    const pixelsPerSecond = getPixelsPerSecond();\n    const clickTime = clickX / pixelsPerSecond;\n    seekTo(clickTime);\n  };\n  const handleTimelineItemDragStart = (e, timelineItem) => {\n    if (isResizing) {\n      e.preventDefault();\n      return;\n    }\n    const track = getAllTracks().find(t => t.id === timelineItem.trackId);\n    if (track !== null && track !== void 0 && track.locked) {\n      e.preventDefault();\n      return;\n    }\n    e.stopPropagation();\n    setDraggedTimelineItem(timelineItem);\n    setIsTimelineDragging(true);\n    const rect = timelineScrollRef.current.getBoundingClientRect();\n    const itemRect = e.target.getBoundingClientRect();\n    setDragOffset(e.clientX - itemRect.left + timelineScrollRef.current.scrollLeft);\n    e.dataTransfer.effectAllowed = \"move\";\n    e.dataTransfer.setData(\"text/plain\", \"\");\n  };\n  const handleTimelineItemDragEnd = () => {\n    setDraggedTimelineItem(null);\n    setDropPreview(null);\n    setIsTimelineDragging(false);\n    setDragOffset(0);\n    setSnapIndicators([]);\n    stopAutoScroll();\n  };\n  const handleDragOver = e => {\n    if (!draggedItem && !draggedTimelineItem) return;\n    e.preventDefault();\n    e.dataTransfer.dropEffect = draggedItem ? \"copy\" : \"move\";\n    if (draggedTimelineItem || isResizing) {\n      checkAutoScroll(e.clientX);\n    }\n    const timelineRect = timelineScrollRef.current.getBoundingClientRect();\n    let dragX = e.clientX - timelineRect.left + timelineScrollRef.current.scrollLeft;\n    if (draggedTimelineItem) {\n      dragX -= dragOffset;\n    }\n    const pixelsPerSecond = getPixelsPerSecond();\n    let dropTime = Math.max(0, dragX / pixelsPerSecond);\n\n    // Apply snapping\n    if (isSnappingEnabled) {\n      const nearestSnap = findNearestSnap(dragX);\n      if (nearestSnap) {\n        dropTime = nearestSnap.time;\n        setSnapIndicators([{\n          time: nearestSnap.time,\n          type: nearestSnap.type\n        }]);\n      } else {\n        setSnapIndicators([]);\n      }\n    }\n    const dragY = e.clientY - timelineRect.top + timelineScrollRef.current.scrollTop;\n    const trackHeight = 60;\n    const timeRulerHeight = 48;\n    const relativeY = dragY - timeRulerHeight;\n    const trackIndex = Math.floor(relativeY / trackHeight);\n    const allTracks = getAllTracks();\n    const targetTrack = allTracks[trackIndex];\n    if (draggedItem && targetTrack && !targetTrack.locked) {\n      const duration = draggedItem.duration || (draggedItem.type === \"image\" ? 5 : 10);\n      const insertResult = insertWithRipple(targetTrack.id, dropTime, duration);\n      setDropPreview({\n        time: insertResult.time,\n        duration: duration,\n        trackId: targetTrack.id,\n        trackType: targetTrack.type,\n        isValid: true,\n        shouldRipple: insertResult.shouldRipple,\n        affectedItems: insertResult.affectedItems || []\n      });\n    } else if (draggedTimelineItem && targetTrack && !targetTrack.locked) {\n      const insertResult = insertWithRipple(targetTrack.id, dropTime, draggedTimelineItem.duration, draggedTimelineItem.id);\n      setDropPreview({\n        time: insertResult.time,\n        duration: draggedTimelineItem.duration,\n        trackId: targetTrack.id,\n        trackType: targetTrack.type,\n        isValid: true,\n        shouldRipple: insertResult.shouldRipple,\n        affectedItems: insertResult.affectedItems || []\n      });\n    }\n  };\n  const handleDrop = e => {\n    if (!draggedItem && !draggedTimelineItem || !dropPreview) return;\n    e.preventDefault();\n    stopAutoScroll();\n    setSnapIndicators([]);\n    if (dropPreview.isValid) {\n      if (draggedItem) {\n        var _dropPreview$affected;\n        if (dropPreview.shouldRipple && ((_dropPreview$affected = dropPreview.affectedItems) === null || _dropPreview$affected === void 0 ? void 0 : _dropPreview$affected.length) > 0) {\n          applyRippleEffect(dropPreview.affectedItems, dropPreview.duration);\n        }\n        addToTimeline(draggedItem, dropPreview.time, dropPreview.trackId);\n      } else if (draggedTimelineItem) {\n        var _dropPreview$affected2;\n        if (dropPreview.shouldRipple && ((_dropPreview$affected2 = dropPreview.affectedItems) === null || _dropPreview$affected2 === void 0 ? void 0 : _dropPreview$affected2.length) > 0) {\n          applyRippleEffect(dropPreview.affectedItems, draggedTimelineItem.duration);\n        }\n        setTimelineItems(prev => prev.map(item => item.id === draggedTimelineItem.id ? {\n          ...item,\n          startTime: dropPreview.time,\n          trackId: dropPreview.trackId,\n          trackType: dropPreview.trackType\n        } : item));\n        const newEndTime = dropPreview.time + draggedTimelineItem.duration;\n        if (newEndTime > videoDuration) {\n          setVideoDuration(newEndTime + 10);\n        }\n      }\n    }\n    setDropPreview(null);\n    setIsTimelineDragging(false);\n  };\n  const handleDragLeave = e => {\n    var _timelineRef$current;\n    if (!((_timelineRef$current = timelineRef.current) !== null && _timelineRef$current !== void 0 && _timelineRef$current.contains(e.relatedTarget))) {\n      setDropPreview(null);\n      setSnapIndicators([]);\n      stopAutoScroll();\n    }\n  };\n  const getTimelineItemStyle = item => {\n    const allTracks = getAllTracks();\n    const trackIndex = allTracks.findIndex(track => track.id === item.trackId);\n    const pixelsPerSecond = getPixelsPerSecond();\n    return {\n      left: `${item.startTime * pixelsPerSecond}px`,\n      width: `${item.duration * pixelsPerSecond}px`,\n      top: `${trackIndex * 60 + 10}px`\n    };\n  };\n  const getDropPreviewStyle = () => {\n    if (!dropPreview) return {};\n    const allTracks = getAllTracks();\n    const trackIndex = allTracks.findIndex(track => track.id === dropPreview.trackId);\n    const pixelsPerSecond = getPixelsPerSecond();\n    return {\n      left: `${dropPreview.time * pixelsPerSecond}px`,\n      width: `${dropPreview.duration * pixelsPerSecond}px`,\n      top: `${trackIndex * 60 + 10}px`\n    };\n  };\n\n  // Resize effect\n  useEffect(() => {\n    const handleMouseMove = e => {\n      if (!isResizing || !resizeItem || !timelineScrollRef.current) return;\n      checkAutoScroll(e.clientX);\n      const rect = timelineScrollRef.current.getBoundingClientRect();\n      let mouseX = e.clientX - rect.left + timelineScrollRef.current.scrollLeft;\n      const pixelsPerSecond = getPixelsPerSecond();\n      let newTime = mouseX / pixelsPerSecond;\n\n      // Apply snapping for resize\n      if (isSnappingEnabled) {\n        const nearestSnap = findNearestSnap(mouseX);\n        if (nearestSnap) {\n          newTime = nearestSnap.time;\n          setSnapIndicators([{\n            time: nearestSnap.time,\n            type: nearestSnap.type\n          }]);\n        } else {\n          setSnapIndicators([]);\n        }\n      }\n      setTimelineItems(prev => prev.map(item => {\n        if (item.id !== resizeItem.id) return item;\n        const minDuration = 0.1;\n        if (resizeHandle === \"left\") {\n          const rightEdge = originalItemData.startTime + originalItemData.duration;\n          const newStartTime = Math.max(0, Math.min(rightEdge - minDuration, newTime));\n          const newDuration = rightEdge - newStartTime;\n          return {\n            ...item,\n            startTime: newStartTime,\n            duration: newDuration\n          };\n        } else if (resizeHandle === \"right\") {\n          const leftEdge = originalItemData.startTime;\n          const newEndTime = Math.max(leftEdge + minDuration, newTime);\n          const newDuration = newEndTime - leftEdge;\n          return {\n            ...item,\n            duration: newDuration\n          };\n        }\n        return item;\n      }));\n    };\n    const handleMouseUp = () => {\n      if (isResizing) handleResizeEnd();\n    };\n    if (isResizing) {\n      document.addEventListener(\"mousemove\", handleMouseMove);\n      document.addEventListener(\"mouseup\", handleMouseUp);\n    }\n    return () => {\n      document.removeEventListener(\"mousemove\", handleMouseMove);\n      document.removeEventListener(\"mouseup\", handleMouseUp);\n    };\n  }, [isResizing, resizeItem, resizeHandle, originalItemData, getPixelsPerSecond, checkAutoScroll, handleResizeEnd, setTimelineItems, isSnappingEnabled, findNearestSnap]);\n  useEffect(() => {\n    return () => stopAutoScroll();\n  }, [stopAutoScroll]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `h-80 bg-white rounded-2xl shadow-sm border-2 transition-all duration-200 overflow-hidden flex flex-col flex-shrink-0 ${isDragging || isTimelineDragging || isResizing ? \"border-blue-400 bg-blue-50/20\" : \"border-gray-200\"}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-50 p-4 border-b border-gray-200 space-y-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-gray-800 font-semibold flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(Film, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 640,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Timeline Pro - CapCut Style\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 641,\n            columnNumber: 13\n          }, this), isDragging && dropPreview && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-green-600\",\n            children: [\"- Adding \\\"\", draggedItem === null || draggedItem === void 0 ? void 0 : draggedItem.name, \"\\\"\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 643,\n            columnNumber: 15\n          }, this), isTimelineDragging && dropPreview && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-blue-600\",\n            children: [\"- Moving \\\"\", draggedTimelineItem === null || draggedTimelineItem === void 0 ? void 0 : draggedTimelineItem.name, \"\\\"\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 646,\n            columnNumber: 15\n          }, this), isResizing && resizeItem && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-orange-600\",\n            children: [\"- Trimming \\\"\", resizeItem.name, \"\\\"\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 649,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 639,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setIsSnappingEnabled(!isSnappingEnabled),\n            className: `p-2 rounded-xl transition-all duration-200 ${isSnappingEnabled ? \"text-blue-600 bg-blue-50\" : \"text-gray-400 hover:text-gray-600\"}`,\n            title: \"Toggle Snapping (Magnet)\",\n            children: /*#__PURE__*/_jsxDEV(Magnet, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 664,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 655,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2 bg-white rounded-xl p-2 border border-gray-200\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: zoomOut,\n              className: \"p-1 text-gray-600 hover:text-blue-600 transition-colors\",\n              title: \"Zoom Out\",\n              children: /*#__PURE__*/_jsxDEV(ZoomOut, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 670,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 669,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs text-gray-500 min-w-12 text-center\",\n              children: [(timelineZoom * 100).toFixed(0), \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 672,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: zoomIn,\n              className: \"p-1 text-gray-600 hover:text-blue-600 transition-colors\",\n              title: \"Zoom In\",\n              children: /*#__PURE__*/_jsxDEV(ZoomIn, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 676,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 675,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: resetZoom,\n              className: \"p-1 text-gray-600 hover:text-blue-600 transition-colors\",\n              title: \"Reset Zoom\",\n              children: /*#__PURE__*/_jsxDEV(RotateCcw, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 679,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 678,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 668,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 653,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 638,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: addVideoTrack,\n              className: \"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-xl transition-all duration-200\",\n              title: \"Add Video Track\",\n              children: /*#__PURE__*/_jsxDEV(Video, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 691,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 690,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: addAudioTrack,\n              className: \"p-2 text-green-600 hover:text-green-800 hover:bg-green-50 rounded-xl transition-all duration-200\",\n              title: \"Add Audio Track\",\n              children: /*#__PURE__*/_jsxDEV(Music, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 694,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 693,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: addTextTrack,\n              className: \"p-2 text-purple-600 hover:text-purple-800 hover:bg-purple-50 rounded-xl transition-all duration-200\",\n              title: \"Add Text Track\",\n              children: /*#__PURE__*/_jsxDEV(Type, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 697,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 696,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 689,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: splitTimelineItem,\n              disabled: !selectedTimelineItem,\n              className: `p-2 rounded-xl transition-all duration-200 ${selectedTimelineItem ? \"text-red-600 hover:text-red-800 hover:bg-red-50\" : \"text-gray-400 cursor-not-allowed\"}`,\n              title: \"Split Selected Item (S)\",\n              children: /*#__PURE__*/_jsxDEV(Scissors, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 713,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 703,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: copyTimelineItem,\n              disabled: !selectedTimelineItem,\n              className: `p-2 rounded-xl transition-all duration-200 ${selectedTimelineItem ? \"text-blue-600 hover:text-blue-800 hover:bg-blue-50\" : \"text-gray-400 cursor-not-allowed\"}`,\n              title: \"Copy Selected Item (Ctrl+C)\",\n              children: /*#__PURE__*/_jsxDEV(Copy, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 725,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 715,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: pasteTimelineItem,\n              disabled: !copiedItem,\n              className: `p-2 rounded-xl transition-all duration-200 ${copiedItem ? \"text-green-600 hover:text-green-800 hover:bg-green-50\" : \"text-gray-400 cursor-not-allowed\"}`,\n              title: \"Paste Item (Ctrl+V)\",\n              children: /*#__PURE__*/_jsxDEV(Copy, {\n                size: 16,\n                className: \"rotate-180\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 737,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 727,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: deleteSelectedItem,\n              disabled: !selectedTimelineItem,\n              className: `p-2 rounded-xl transition-all duration-200 ${selectedTimelineItem ? \"text-red-600 hover:text-red-800 hover:bg-red-50\" : \"text-gray-400 cursor-not-allowed\"}`,\n              title: \"Delete Selected Item (Del)\",\n              children: /*#__PURE__*/_jsxDEV(Trash2, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 749,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 739,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 702,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 687,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 686,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 637,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex min-h-0\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-48 bg-gray-50 border-r border-gray-200 flex-shrink-0 flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-12 border-b border-gray-200 flex-shrink-0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 760,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: trackLabelsRef,\n          className: \"flex-1 overflow-y-auto overflow-x-hidden\",\n          onScroll: handleTrackLabelsScroll,\n          children: getAllTracks().map(track => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `h-15 flex items-center px-2 border-b border-gray-100 text-sm font-medium flex-shrink-0 ${track.type === 'video' ? 'text-blue-700 bg-blue-50' : track.type === 'audio' ? 'text-green-700 bg-green-50' : 'text-purple-700 bg-purple-50'}`,\n            style: {\n              height: \"60px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-2 flex-1\",\n              children: [getTrackIcon(track.type), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"truncate flex-1\",\n                children: track.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 778,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 776,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => toggleTrackVisibility(track.id),\n                className: \"p-1 text-gray-500 hover:text-gray-700\",\n                title: track.visible ? \"Hide track\" : \"Show track\",\n                children: track.visible ? /*#__PURE__*/_jsxDEV(Eye, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 786,\n                  columnNumber: 38\n                }, this) : /*#__PURE__*/_jsxDEV(EyeOff, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 786,\n                  columnNumber: 58\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 781,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => toggleTrackLock(track.id),\n                className: \"p-1 text-gray-500 hover:text-gray-700\",\n                title: track.locked ? \"Unlock track\" : \"Lock track\",\n                children: track.locked ? /*#__PURE__*/_jsxDEV(Lock, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 793,\n                  columnNumber: 37\n                }, this) : /*#__PURE__*/_jsxDEV(Unlock, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 793,\n                  columnNumber: 58\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 788,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 780,\n              columnNumber: 17\n            }, this)]\n          }, track.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 767,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 761,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 759,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: el => {\n          timelineRef.current = el;\n          timelineScrollRef.current = el;\n        },\n        className: \"flex-1 relative overflow-auto bg-white\",\n        onScroll: handleTrackAreaScroll,\n        onDragOver: handleDragOver,\n        onDrop: handleDrop,\n        onDragLeave: handleDragLeave,\n        style: {\n          overflowX: \"auto\",\n          overflowY: \"auto\",\n          scrollbarWidth: \"thin\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: `${getTimelineWidth()}px`,\n            minHeight: \"100%\",\n            position: \"relative\"\n          },\n          onClick: handleTimelineClick,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h-12 bg-gray-50 border-b border-gray-200 relative flex-shrink-0\",\n            children: [Array.from({\n              length: Math.ceil(videoDuration * timelineZoom / 5) + 1\n            }, (_, i) => {\n              const timeValue = i * 5 / timelineZoom;\n              const pixelsPerSecond = getPixelsPerSecond();\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute top-0 h-full border-l border-gray-300\",\n                style: {\n                  left: `${timeValue * pixelsPerSecond}px`\n                },\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs text-gray-600 ml-2 mt-2 inline-block font-medium\",\n                  children: formatTime(timeValue)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 835,\n                  columnNumber: 23\n                }, this)\n              }, i, false, {\n                fileName: _jsxFileName,\n                lineNumber: 830,\n                columnNumber: 21\n              }, this);\n            }), timelineZoom > 2 && Array.from({\n              length: Math.ceil(videoDuration * timelineZoom) + 1\n            }, (_, i) => {\n              const timeValue = i / timelineZoom;\n              const pixelsPerSecond = getPixelsPerSecond();\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute top-8 w-0 h-4 border-l border-gray-200\",\n                style: {\n                  left: `${timeValue * pixelsPerSecond}px`\n                }\n              }, `sub-${i}`, false, {\n                fileName: _jsxFileName,\n                lineNumber: 851,\n                columnNumber: 23\n              }, this);\n            }), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute top-0 w-0.5 h-full bg-red-500 z-20 shadow-sm\",\n              style: {\n                left: `${currentTime * getPixelsPerSecond()}px`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 861,\n              columnNumber: 15\n            }, this), snapIndicators.map((indicator, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `absolute top-0 w-0.5 h-full z-10 ${indicator.type === 'playhead' ? 'bg-red-300' : 'bg-yellow-400'}`,\n              style: {\n                left: `${indicator.time * getPixelsPerSecond()}px`\n              }\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 868,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 823,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative flex-1\",\n            style: {\n              height: `${getAllTracks().length * 60}px`,\n              minHeight: \"100%\"\n            },\n            children: [timelineItems.map(item => {\n              const track = getAllTracks().find(t => t.id === item.trackId);\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `absolute h-10 rounded-lg border-2 cursor-grab active:cursor-grabbing transition-all shadow-sm hover:shadow-md group ${getTrackColor(item.trackType)} ${(selectedTimelineItem === null || selectedTimelineItem === void 0 ? void 0 : selectedTimelineItem.id) === item.id ? \"ring-2 ring-blue-300\" : \"\"} ${(draggedTimelineItem === null || draggedTimelineItem === void 0 ? void 0 : draggedTimelineItem.id) === item.id ? \"opacity-50 z-30\" : \"\"} ${(copiedItem === null || copiedItem === void 0 ? void 0 : copiedItem.id) === item.id ? \"ring-2 ring-green-300 ring-dashed\" : \"\"} ${!(track !== null && track !== void 0 && track.visible) ? \"opacity-50\" : \"\"} ${track !== null && track !== void 0 && track.locked ? \"cursor-not-allowed\" : \"\"}`,\n                style: getTimelineItemStyle(item),\n                onClick: e => {\n                  e.stopPropagation();\n                  setSelectedTimelineItem(item);\n                },\n                children: [!(track !== null && track !== void 0 && track.locked) && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"absolute left-0 top-0 w-3 h-full cursor-ew-resize opacity-0 group-hover:opacity-100 bg-white/50 rounded-l-lg z-10 flex items-center justify-center\",\n                  onMouseDown: e => handleResizeStart(e, item, \"left\"),\n                  title: \"Trim start\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-0.5 h-6 bg-white rounded-full opacity-80\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 922,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 917,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  draggable: !(track !== null && track !== void 0 && track.locked),\n                  onDragStart: e => handleTimelineItemDragStart(e, item),\n                  onDragEnd: handleTimelineItemDragEnd,\n                  className: `p-2 text-white text-xs truncate font-medium flex items-center h-full mx-3 ${track !== null && track !== void 0 && track.locked ? 'cursor-not-allowed' : 'cursor-grab active:cursor-grabbing'}`,\n                  title: `${item.name} - ${track !== null && track !== void 0 && track.locked ? 'Track locked' : 'Drag to move'}`,\n                  children: [item.name, (track === null || track === void 0 ? void 0 : track.locked) && /*#__PURE__*/_jsxDEV(Lock, {\n                    size: 12,\n                    className: \"ml-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 937,\n                    columnNumber: 41\n                  }, this), (copiedItem === null || copiedItem === void 0 ? void 0 : copiedItem.id) === item.id && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"ml-2 text-green-200\",\n                    children: \"\\uD83D\\uDCCB\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 939,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 927,\n                  columnNumber: 21\n                }, this), !(track !== null && track !== void 0 && track.locked) && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"absolute right-0 top-0 w-3 h-full cursor-ew-resize opacity-0 group-hover:opacity-100 bg-white/50 rounded-r-lg z-10 flex items-center justify-center\",\n                  onMouseDown: e => handleResizeStart(e, item, \"right\"),\n                  title: \"Trim end\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-0.5 h-6 bg-white rounded-full opacity-80\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 950,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 945,\n                  columnNumber: 23\n                }, this)]\n              }, item.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 890,\n                columnNumber: 19\n              }, this);\n            }), dropPreview && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `absolute h-10 rounded-lg border-2 transition-all ${dropPreview.isValid ? `${getTrackColor(dropPreview.trackType)} bg-opacity-60 border-dashed animate-pulse` : \"bg-red-300 border-red-500 border-dashed\"}`,\n              style: getDropPreviewStyle(),\n              children: dropPreview.isValid && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-center h-full text-white text-xs font-bold\",\n                children: isSnappingEnabled && snapIndicators.length > 0 ? \"🧲\" : \"📍\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 968,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 959,\n              columnNumber: 17\n            }, this), snapIndicators.map((indicator, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `absolute w-0.5 bg-yellow-400 z-30 opacity-75`,\n              style: {\n                left: `${indicator.time * getPixelsPerSecond()}px`,\n                top: '0px',\n                height: `${getAllTracks().length * 60}px`\n              }\n            }, `timeline-snap-${index}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 977,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 879,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 814,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 802,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 757,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 629,\n    columnNumber: 5\n  }, this);\n};\n_s(Timeline, \"CM793lLtyytUTsmgTy5sUzYhqRw=\");\n_c = Timeline;\nvar _c;\n$RefreshReg$(_c, \"Timeline\");","map":{"version":3,"names":["useState","useRef","useEffect","useCallback","Video","Music","Copy","Trash2","Scissors","Film","Plus","Layers","ZoomIn","ZoomOut","RotateCcw","Type","Magnet","Eye","EyeOff","Lock","Unlock","jsxDEV","_jsxDEV","Timeline","timelineItems","setTimelineItems","currentTime","videoDuration","setVideoDuration","selectedTimelineItem","setSelectedTimelineItem","timelineZoom","setTimelineZoom","tracks","setTracks","draggedItem","draggedTimelineItem","setDraggedTimelineItem","dropPreview","setDropPreview","isDragging","isTimelineDragging","setIsTimelineDragging","isResizing","setIsResizing","copiedItem","formatTime","seekTo","splitTimelineItem","copyTimelineItem","pasteTimelineItem","deleteSelectedItem","addToTimeline","insertWithRipple","applyRippleEffect","removeFromTimeline","_s","timelineRef","timelineScrollRef","trackLabelsRef","autoScrollIntervalRef","isSnappingEnabled","setIsSnappingEnabled","snapThreshold","dragOffset","setDragOffset","resizeHandle","setResizeHandle","resizeItem","setResizeItem","originalItemData","setOriginalItemData","snapIndicators","setSnapIndicators","getSnapPoints","snapPoints","pixelsPerSecond","getPixelsPerSecond","push","time","pixel","type","forEach","item","id","startTime","clipId","duration","findNearestSnap","targetPixel","nearestSnap","minDistance","point","distance","Math","abs","stopAutoScroll","current","clearInterval","startAutoScroll","direction","speed","setInterval","scrollAmount","currentScrollLeft","scrollLeft","maxScroll","scrollWidth","clientWidth","max","min","checkAutoScroll","clientX","rect","getBoundingClientRect","scrollZoneWidth","relativeX","left","width","zoomIn","prev","zoomOut","resetZoom","addVideoTrack","newTrackId","Date","now","video","name","length","visible","locked","addAudioTrack","audio","addTextTrack","text","toggleTrackVisibility","trackId","newTracks","Object","keys","trackType","map","track","toggleTrackLock","getTimelineWidth","baseWidth","getAllTracks","getTrackColor","getTrackIcon","size","fileName","_jsxFileName","lineNumber","columnNumber","handleResizeStart","e","handle","preventDefault","stopPropagation","handleResizeEnd","handleTrackAreaScroll","scrollTop","target","handleTrackLabelsScroll","handleTimelineClick","clickX","clickTime","handleTimelineItemDragStart","timelineItem","find","t","itemRect","dataTransfer","effectAllowed","setData","handleTimelineItemDragEnd","handleDragOver","dropEffect","timelineRect","dragX","dropTime","dragY","clientY","top","trackHeight","timeRulerHeight","relativeY","trackIndex","floor","allTracks","targetTrack","insertResult","isValid","shouldRipple","affectedItems","handleDrop","_dropPreview$affected","_dropPreview$affected2","newEndTime","handleDragLeave","_timelineRef$current","contains","relatedTarget","getTimelineItemStyle","findIndex","getDropPreviewStyle","handleMouseMove","mouseX","newTime","minDuration","rightEdge","newStartTime","newDuration","leftEdge","handleMouseUp","document","addEventListener","removeEventListener","className","children","onClick","title","toFixed","disabled","ref","onScroll","style","height","el","onDragOver","onDrop","onDragLeave","overflowX","overflowY","scrollbarWidth","minHeight","position","Array","from","ceil","_","i","timeValue","indicator","index","onMouseDown","draggable","onDragStart","onDragEnd","_c","$RefreshReg$"],"sources":["C:/Scriptify/ai-content-studio/frontend/src/components/Timeline.jsx"],"sourcesContent":["import { useState, useRef, useEffect, useCallback } from \"react\";\r\nimport {\r\n  Video,\r\n  Music,\r\n  Copy,\r\n  Trash2,\r\n  Scissors,\r\n  Film,\r\n  Plus,\r\n  Layers,\r\n  ZoomIn,\r\n  ZoomOut,\r\n  RotateCcw,\r\n  Type,\r\n  Magnet,\r\n  Eye,\r\n  EyeOff,\r\n  Lock,\r\n  Unlock,\r\n} from \"lucide-react\";\r\n\r\nexport const Timeline = ({\r\n  timelineItems,\r\n  setTimelineItems,\r\n  currentTime,\r\n  videoDuration,\r\n  setVideoDuration,\r\n  selectedTimelineItem,\r\n  setSelectedTimelineItem,\r\n  timelineZoom,\r\n  setTimelineZoom,\r\n  tracks,\r\n  setTracks,\r\n  draggedItem,\r\n  draggedTimelineItem,\r\n  setDraggedTimelineItem,\r\n  dropPreview,\r\n  setDropPreview,\r\n  isDragging,\r\n  isTimelineDragging,\r\n  setIsTimelineDragging,\r\n  isResizing,\r\n  setIsResizing,\r\n  copiedItem,\r\n  formatTime,\r\n  seekTo,\r\n  splitTimelineItem,\r\n  copyTimelineItem,\r\n  pasteTimelineItem,\r\n  deleteSelectedItem,\r\n  addToTimeline,\r\n  insertWithRipple,\r\n  applyRippleEffect,\r\n  removeFromTimeline,\r\n}) => {\r\n  const timelineRef = useRef(null);\r\n  const timelineScrollRef = useRef(null);\r\n  const trackLabelsRef = useRef(null);\r\n  const autoScrollIntervalRef = useRef(null);\r\n\r\n  // CapCut-style states\r\n  const [isSnappingEnabled, setIsSnappingEnabled] = useState(true);\r\n  const [snapThreshold] = useState(10); // pixels\r\n  const [dragOffset, setDragOffset] = useState(0);\r\n  const [resizeHandle, setResizeHandle] = useState(null);\r\n  const [resizeItem, setResizeItem] = useState(null);\r\n  const [originalItemData, setOriginalItemData] = useState(null);\r\n  const [snapIndicators, setSnapIndicators] = useState([]);\r\n\r\n  // Snap helpers\r\n  const getSnapPoints = useCallback(() => {\r\n    const snapPoints = [];\r\n    const pixelsPerSecond = getPixelsPerSecond();\r\n    \r\n    // Playhead snap point\r\n    snapPoints.push({\r\n      time: currentTime,\r\n      pixel: currentTime * pixelsPerSecond,\r\n      type: 'playhead'\r\n    });\r\n    \r\n    // Clip edges snap points\r\n    timelineItems.forEach(item => {\r\n      if (draggedTimelineItem?.id !== item.id) {\r\n        snapPoints.push({\r\n          time: item.startTime,\r\n          pixel: item.startTime * pixelsPerSecond,\r\n          type: 'clip-start',\r\n          clipId: item.id\r\n        });\r\n        snapPoints.push({\r\n          time: item.startTime + item.duration,\r\n          pixel: (item.startTime + item.duration) * pixelsPerSecond,\r\n          type: 'clip-end',\r\n          clipId: item.id\r\n        });\r\n      }\r\n    });\r\n    \r\n    // Timeline start\r\n    snapPoints.push({\r\n      time: 0,\r\n      pixel: 0,\r\n      type: 'timeline-start'\r\n    });\r\n    \r\n    return snapPoints;\r\n  }, [currentTime, timelineItems, draggedTimelineItem, getPixelsPerSecond]);\r\n\r\n  const findNearestSnap = useCallback((targetPixel) => {\r\n    if (!isSnappingEnabled) return null;\r\n    \r\n    const snapPoints = getSnapPoints();\r\n    let nearestSnap = null;\r\n    let minDistance = snapThreshold;\r\n    \r\n    snapPoints.forEach(point => {\r\n      const distance = Math.abs(point.pixel - targetPixel);\r\n      if (distance < minDistance) {\r\n        minDistance = distance;\r\n        nearestSnap = point;\r\n      }\r\n    });\r\n    \r\n    return nearestSnap;\r\n  }, [isSnappingEnabled, getSnapPoints, snapThreshold]);\r\n\r\n  // Auto-scroll logic\r\n  const stopAutoScroll = useCallback(() => {\r\n    if (autoScrollIntervalRef.current) {\r\n      clearInterval(autoScrollIntervalRef.current);\r\n      autoScrollIntervalRef.current = null;\r\n    }\r\n  }, []);\r\n\r\n  const startAutoScroll = useCallback(\r\n    (direction, speed = 1) => {\r\n      stopAutoScroll();\r\n      autoScrollIntervalRef.current = setInterval(() => {\r\n        if (timelineScrollRef.current) {\r\n          const scrollAmount = 15 * speed;\r\n          const currentScrollLeft = timelineScrollRef.current.scrollLeft;\r\n          const maxScroll =\r\n            timelineScrollRef.current.scrollWidth -\r\n            timelineScrollRef.current.clientWidth;\r\n\r\n          if (direction === \"left\" && currentScrollLeft > 0) {\r\n            timelineScrollRef.current.scrollLeft = Math.max(\r\n              0,\r\n              currentScrollLeft - scrollAmount\r\n            );\r\n          } else if (direction === \"right\" && currentScrollLeft < maxScroll) {\r\n            timelineScrollRef.current.scrollLeft = Math.min(\r\n              maxScroll,\r\n              currentScrollLeft + scrollAmount\r\n            );\r\n          }\r\n        }\r\n      }, 16);\r\n    },\r\n    [stopAutoScroll]\r\n  );\r\n\r\n  const checkAutoScroll = useCallback(\r\n    (clientX) => {\r\n      if (!timelineScrollRef.current) return;\r\n      const rect = timelineScrollRef.current.getBoundingClientRect();\r\n      const scrollZoneWidth = 120;\r\n      const relativeX = clientX - rect.left;\r\n\r\n      if (\r\n        relativeX < scrollZoneWidth &&\r\n        timelineScrollRef.current.scrollLeft > 0\r\n      ) {\r\n        const speed = ((scrollZoneWidth - relativeX) / scrollZoneWidth) * 3;\r\n        startAutoScroll(\"left\", speed);\r\n      } else if (relativeX > rect.width - scrollZoneWidth) {\r\n        const maxScroll =\r\n          timelineScrollRef.current.scrollWidth -\r\n          timelineScrollRef.current.clientWidth;\r\n        if (timelineScrollRef.current.scrollLeft < maxScroll) {\r\n          const speed =\r\n            ((relativeX - (rect.width - scrollZoneWidth)) / scrollZoneWidth) *\r\n            3;\r\n          startAutoScroll(\"right\", speed);\r\n        }\r\n      } else {\r\n        stopAutoScroll();\r\n      }\r\n    },\r\n    [startAutoScroll, stopAutoScroll]\r\n  );\r\n\r\n  // Zoom functions\r\n  const zoomIn = () => setTimelineZoom((prev) => Math.min(8, prev * 1.5));\r\n  const zoomOut = () => setTimelineZoom((prev) => Math.max(0.25, prev / 1.5));\r\n  const resetZoom = () => setTimelineZoom(1);\r\n\r\n  // Track management\r\n  const addVideoTrack = () => {\r\n    const newTrackId = `video-${Date.now()}`;\r\n    setTracks((prev) => ({\r\n      ...prev,\r\n      video: [\r\n        ...prev.video,\r\n        {\r\n          id: newTrackId,\r\n          name: `Video ${prev.video.length + 1}`,\r\n          type: \"video\",\r\n          visible: true,\r\n          locked: false,\r\n        },\r\n      ],\r\n    }));\r\n  };\r\n\r\n  const addAudioTrack = () => {\r\n    const newTrackId = `audio-${Date.now()}`;\r\n    setTracks((prev) => ({\r\n      ...prev,\r\n      audio: [\r\n        ...prev.audio,\r\n        {\r\n          id: newTrackId,\r\n          name: `Audio ${prev.audio.length + 1}`,\r\n          type: \"audio\",\r\n          visible: true,\r\n          locked: false,\r\n        },\r\n      ],\r\n    }));\r\n  };\r\n\r\n  const addTextTrack = () => {\r\n    const newTrackId = `text-${Date.now()}`;\r\n    setTracks((prev) => ({\r\n      ...prev,\r\n      text: [\r\n        ...prev.text,\r\n        {\r\n          id: newTrackId,\r\n          name: `Text ${prev.text.length + 1}`,\r\n          type: \"text\",\r\n          visible: true,\r\n          locked: false,\r\n        },\r\n      ],\r\n    }));\r\n  };\r\n\r\n  const toggleTrackVisibility = (trackId) => {\r\n    setTracks((prev) => {\r\n      const newTracks = { ...prev };\r\n      Object.keys(newTracks).forEach(trackType => {\r\n        newTracks[trackType] = newTracks[trackType].map(track =>\r\n          track.id === trackId ? { ...track, visible: !track.visible } : track\r\n        );\r\n      });\r\n      return newTracks;\r\n    });\r\n  };\r\n\r\n  const toggleTrackLock = (trackId) => {\r\n    setTracks((prev) => {\r\n      const newTracks = { ...prev };\r\n      Object.keys(newTracks).forEach(trackType => {\r\n        newTracks[trackType] = newTracks[trackType].map(track =>\r\n          track.id === trackId ? { ...track, locked: !track.locked } : track\r\n        );\r\n      });\r\n      return newTracks;\r\n    });\r\n  };\r\n\r\n  // Helper functions\r\n  const getTimelineWidth = () => {\r\n    const baseWidth = videoDuration * 50 * timelineZoom;\r\n    return Math.max(baseWidth, 2000);\r\n  };\r\n\r\n  const getPixelsPerSecond = () => 50 * timelineZoom;\r\n\r\n  const getAllTracks = () => [\r\n    ...(tracks.video || []),\r\n    ...(tracks.audio || []),\r\n    ...(tracks.text || []),\r\n  ];\r\n\r\n  const getTrackColor = (trackType) => {\r\n    switch (trackType) {\r\n      case \"video\":\r\n        return \"bg-blue-500 border-blue-400\";\r\n      case \"audio\":\r\n        return \"bg-green-500 border-green-400\";\r\n      case \"text\":\r\n        return \"bg-purple-500 border-purple-400\";\r\n      default:\r\n        return \"bg-gray-500 border-gray-400\";\r\n    }\r\n  };\r\n\r\n  const getTrackIcon = (trackType) => {\r\n    switch (trackType) {\r\n      case \"video\":\r\n        return <Video size={16} />;\r\n      case \"audio\":\r\n        return <Music size={16} />;\r\n      case \"text\":\r\n        return <Type size={16} />;\r\n      default:\r\n        return <Layers size={16} />;\r\n    }\r\n  };\r\n\r\n  // Resize handlers\r\n  const handleResizeStart = useCallback(\r\n    (e, item, handle) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      setIsResizing(true);\r\n      setResizeHandle(handle);\r\n      setResizeItem(item);\r\n      setOriginalItemData({\r\n        startTime: item.startTime,\r\n        duration: item.duration,\r\n      });\r\n      setIsTimelineDragging(false);\r\n      setDraggedTimelineItem(null);\r\n    },\r\n    [setIsResizing, setIsTimelineDragging, setDraggedTimelineItem]\r\n  );\r\n\r\n  const handleResizeEnd = useCallback(() => {\r\n    setIsResizing(false);\r\n    setResizeHandle(null);\r\n    setResizeItem(null);\r\n    setOriginalItemData(null);\r\n    setSnapIndicators([]);\r\n    stopAutoScroll();\r\n  }, [setIsResizing, stopAutoScroll]);\r\n\r\n  // Sync scroll\r\n  const handleTrackAreaScroll = (e) => {\r\n    if (trackLabelsRef.current) {\r\n      trackLabelsRef.current.scrollTop = e.target.scrollTop;\r\n    }\r\n  };\r\n\r\n  const handleTrackLabelsScroll = (e) => {\r\n    if (timelineScrollRef.current) {\r\n      timelineScrollRef.current.scrollTop = e.target.scrollTop;\r\n    }\r\n  };\r\n\r\n  // Event handlers\r\n  const handleTimelineClick = (e) => {\r\n    if (isDragging || isTimelineDragging || isResizing) return;\r\n    const rect = timelineScrollRef.current.getBoundingClientRect();\r\n    const clickX = e.clientX - rect.left + timelineScrollRef.current.scrollLeft;\r\n    const pixelsPerSecond = getPixelsPerSecond();\r\n    const clickTime = clickX / pixelsPerSecond;\r\n    seekTo(clickTime);\r\n  };\r\n\r\n  const handleTimelineItemDragStart = (e, timelineItem) => {\r\n    if (isResizing) {\r\n      e.preventDefault();\r\n      return;\r\n    }\r\n\r\n    const track = getAllTracks().find(t => t.id === timelineItem.trackId);\r\n    if (track?.locked) {\r\n      e.preventDefault();\r\n      return;\r\n    }\r\n\r\n    e.stopPropagation();\r\n    setDraggedTimelineItem(timelineItem);\r\n    setIsTimelineDragging(true);\r\n\r\n    const rect = timelineScrollRef.current.getBoundingClientRect();\r\n    const itemRect = e.target.getBoundingClientRect();\r\n    setDragOffset(\r\n      e.clientX - itemRect.left + timelineScrollRef.current.scrollLeft\r\n    );\r\n\r\n    e.dataTransfer.effectAllowed = \"move\";\r\n    e.dataTransfer.setData(\"text/plain\", \"\");\r\n  };\r\n\r\n  const handleTimelineItemDragEnd = () => {\r\n    setDraggedTimelineItem(null);\r\n    setDropPreview(null);\r\n    setIsTimelineDragging(false);\r\n    setDragOffset(0);\r\n    setSnapIndicators([]);\r\n    stopAutoScroll();\r\n  };\r\n\r\n  const handleDragOver = (e) => {\r\n    if (!draggedItem && !draggedTimelineItem) return;\r\n    e.preventDefault();\r\n    e.dataTransfer.dropEffect = draggedItem ? \"copy\" : \"move\";\r\n\r\n    if (draggedTimelineItem || isResizing) {\r\n      checkAutoScroll(e.clientX);\r\n    }\r\n\r\n    const timelineRect = timelineScrollRef.current.getBoundingClientRect();\r\n    let dragX = e.clientX - timelineRect.left + timelineScrollRef.current.scrollLeft;\r\n    \r\n    if (draggedTimelineItem) {\r\n      dragX -= dragOffset;\r\n    }\r\n\r\n    const pixelsPerSecond = getPixelsPerSecond();\r\n    let dropTime = Math.max(0, dragX / pixelsPerSecond);\r\n\r\n    // Apply snapping\r\n    if (isSnappingEnabled) {\r\n      const nearestSnap = findNearestSnap(dragX);\r\n      if (nearestSnap) {\r\n        dropTime = nearestSnap.time;\r\n        setSnapIndicators([{\r\n          time: nearestSnap.time,\r\n          type: nearestSnap.type\r\n        }]);\r\n      } else {\r\n        setSnapIndicators([]);\r\n      }\r\n    }\r\n\r\n    const dragY = e.clientY - timelineRect.top + timelineScrollRef.current.scrollTop;\r\n    const trackHeight = 60;\r\n    const timeRulerHeight = 48;\r\n    const relativeY = dragY - timeRulerHeight;\r\n    const trackIndex = Math.floor(relativeY / trackHeight);\r\n\r\n    const allTracks = getAllTracks();\r\n    const targetTrack = allTracks[trackIndex];\r\n\r\n    if (draggedItem && targetTrack && !targetTrack.locked) {\r\n      const duration = draggedItem.duration || (draggedItem.type === \"image\" ? 5 : 10);\r\n      const insertResult = insertWithRipple(targetTrack.id, dropTime, duration);\r\n\r\n      setDropPreview({\r\n        time: insertResult.time,\r\n        duration: duration,\r\n        trackId: targetTrack.id,\r\n        trackType: targetTrack.type,\r\n        isValid: true,\r\n        shouldRipple: insertResult.shouldRipple,\r\n        affectedItems: insertResult.affectedItems || [],\r\n      });\r\n    } else if (draggedTimelineItem && targetTrack && !targetTrack.locked) {\r\n      const insertResult = insertWithRipple(\r\n        targetTrack.id,\r\n        dropTime,\r\n        draggedTimelineItem.duration,\r\n        draggedTimelineItem.id\r\n      );\r\n\r\n      setDropPreview({\r\n        time: insertResult.time,\r\n        duration: draggedTimelineItem.duration,\r\n        trackId: targetTrack.id,\r\n        trackType: targetTrack.type,\r\n        isValid: true,\r\n        shouldRipple: insertResult.shouldRipple,\r\n        affectedItems: insertResult.affectedItems || [],\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleDrop = (e) => {\r\n    if ((!draggedItem && !draggedTimelineItem) || !dropPreview) return;\r\n    e.preventDefault();\r\n    stopAutoScroll();\r\n    setSnapIndicators([]);\r\n\r\n    if (dropPreview.isValid) {\r\n      if (draggedItem) {\r\n        if (dropPreview.shouldRipple && dropPreview.affectedItems?.length > 0) {\r\n          applyRippleEffect(dropPreview.affectedItems, dropPreview.duration);\r\n        }\r\n        addToTimeline(draggedItem, dropPreview.time, dropPreview.trackId);\r\n      } else if (draggedTimelineItem) {\r\n        if (dropPreview.shouldRipple && dropPreview.affectedItems?.length > 0) {\r\n          applyRippleEffect(\r\n            dropPreview.affectedItems,\r\n            draggedTimelineItem.duration\r\n          );\r\n        }\r\n\r\n        setTimelineItems((prev) =>\r\n          prev.map((item) =>\r\n            item.id === draggedTimelineItem.id\r\n              ? {\r\n                  ...item,\r\n                  startTime: dropPreview.time,\r\n                  trackId: dropPreview.trackId,\r\n                  trackType: dropPreview.trackType,\r\n                }\r\n              : item\r\n          )\r\n        );\r\n\r\n        const newEndTime = dropPreview.time + draggedTimelineItem.duration;\r\n        if (newEndTime > videoDuration) {\r\n          setVideoDuration(newEndTime + 10);\r\n        }\r\n      }\r\n    }\r\n\r\n    setDropPreview(null);\r\n    setIsTimelineDragging(false);\r\n  };\r\n\r\n  const handleDragLeave = (e) => {\r\n    if (!timelineRef.current?.contains(e.relatedTarget)) {\r\n      setDropPreview(null);\r\n      setSnapIndicators([]);\r\n      stopAutoScroll();\r\n    }\r\n  };\r\n\r\n  const getTimelineItemStyle = (item) => {\r\n    const allTracks = getAllTracks();\r\n    const trackIndex = allTracks.findIndex((track) => track.id === item.trackId);\r\n    const pixelsPerSecond = getPixelsPerSecond();\r\n\r\n    return {\r\n      left: `${item.startTime * pixelsPerSecond}px`,\r\n      width: `${item.duration * pixelsPerSecond}px`,\r\n      top: `${trackIndex * 60 + 10}px`,\r\n    };\r\n  };\r\n\r\n  const getDropPreviewStyle = () => {\r\n    if (!dropPreview) return {};\r\n    const allTracks = getAllTracks();\r\n    const trackIndex = allTracks.findIndex((track) => track.id === dropPreview.trackId);\r\n    const pixelsPerSecond = getPixelsPerSecond();\r\n\r\n    return {\r\n      left: `${dropPreview.time * pixelsPerSecond}px`,\r\n      width: `${dropPreview.duration * pixelsPerSecond}px`,\r\n      top: `${trackIndex * 60 + 10}px`,\r\n    };\r\n  };\r\n\r\n  // Resize effect\r\n  useEffect(() => {\r\n    const handleMouseMove = (e) => {\r\n      if (!isResizing || !resizeItem || !timelineScrollRef.current) return;\r\n      checkAutoScroll(e.clientX);\r\n\r\n      const rect = timelineScrollRef.current.getBoundingClientRect();\r\n      let mouseX = e.clientX - rect.left + timelineScrollRef.current.scrollLeft;\r\n      const pixelsPerSecond = getPixelsPerSecond();\r\n      let newTime = mouseX / pixelsPerSecond;\r\n\r\n      // Apply snapping for resize\r\n      if (isSnappingEnabled) {\r\n        const nearestSnap = findNearestSnap(mouseX);\r\n        if (nearestSnap) {\r\n          newTime = nearestSnap.time;\r\n          setSnapIndicators([{\r\n            time: nearestSnap.time,\r\n            type: nearestSnap.type\r\n          }]);\r\n        } else {\r\n          setSnapIndicators([]);\r\n        }\r\n      }\r\n\r\n      setTimelineItems((prev) =>\r\n        prev.map((item) => {\r\n          if (item.id !== resizeItem.id) return item;\r\n          const minDuration = 0.1;\r\n\r\n          if (resizeHandle === \"left\") {\r\n            const rightEdge = originalItemData.startTime + originalItemData.duration;\r\n            const newStartTime = Math.max(0, Math.min(rightEdge - minDuration, newTime));\r\n            const newDuration = rightEdge - newStartTime;\r\n            return { ...item, startTime: newStartTime, duration: newDuration };\r\n          } else if (resizeHandle === \"right\") {\r\n            const leftEdge = originalItemData.startTime;\r\n            const newEndTime = Math.max(leftEdge + minDuration, newTime);\r\n            const newDuration = newEndTime - leftEdge;\r\n            return { ...item, duration: newDuration };\r\n          }\r\n          return item;\r\n        })\r\n      );\r\n    };\r\n\r\n    const handleMouseUp = () => {\r\n      if (isResizing) handleResizeEnd();\r\n    };\r\n\r\n    if (isResizing) {\r\n      document.addEventListener(\"mousemove\", handleMouseMove);\r\n      document.addEventListener(\"mouseup\", handleMouseUp);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener(\"mousemove\", handleMouseMove);\r\n      document.removeEventListener(\"mouseup\", handleMouseUp);\r\n    };\r\n  }, [\r\n    isResizing,\r\n    resizeItem,\r\n    resizeHandle,\r\n    originalItemData,\r\n    getPixelsPerSecond,\r\n    checkAutoScroll,\r\n    handleResizeEnd,\r\n    setTimelineItems,\r\n    isSnappingEnabled,\r\n    findNearestSnap,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    return () => stopAutoScroll();\r\n  }, [stopAutoScroll]);\r\n\r\n  return (\r\n    <div\r\n      className={`h-80 bg-white rounded-2xl shadow-sm border-2 transition-all duration-200 overflow-hidden flex flex-col flex-shrink-0 ${\r\n        isDragging || isTimelineDragging || isResizing\r\n          ? \"border-blue-400 bg-blue-50/20\"\r\n          : \"border-gray-200\"\r\n      }`}\r\n    >\r\n      {/* Header */}\r\n      <div className=\"bg-gray-50 p-4 border-b border-gray-200 space-y-3\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <h4 className=\"text-gray-800 font-semibold flex items-center space-x-2\">\r\n            <Film size={18} />\r\n            <span>Timeline Pro - CapCut Style</span>\r\n            {isDragging && dropPreview && (\r\n              <span className=\"text-green-600\">- Adding \"{draggedItem?.name}\"</span>\r\n            )}\r\n            {isTimelineDragging && dropPreview && (\r\n              <span className=\"text-blue-600\">- Moving \"{draggedTimelineItem?.name}\"</span>\r\n            )}\r\n            {isResizing && resizeItem && (\r\n              <span className=\"text-orange-600\">- Trimming \"{resizeItem.name}\"</span>\r\n            )}\r\n          </h4>\r\n\r\n          <div className=\"flex items-center space-x-3\">\r\n            {/* Snapping toggle */}\r\n            <button\r\n              onClick={() => setIsSnappingEnabled(!isSnappingEnabled)}\r\n              className={`p-2 rounded-xl transition-all duration-200 ${\r\n                isSnappingEnabled\r\n                  ? \"text-blue-600 bg-blue-50\"\r\n                  : \"text-gray-400 hover:text-gray-600\"\r\n              }`}\r\n              title=\"Toggle Snapping (Magnet)\"\r\n            >\r\n              <Magnet size={16} />\r\n            </button>\r\n\r\n            {/* Zoom controls */}\r\n            <div className=\"flex items-center space-x-2 bg-white rounded-xl p-2 border border-gray-200\">\r\n              <button onClick={zoomOut} className=\"p-1 text-gray-600 hover:text-blue-600 transition-colors\" title=\"Zoom Out\">\r\n                <ZoomOut size={16} />\r\n              </button>\r\n              <span className=\"text-xs text-gray-500 min-w-12 text-center\">\r\n                {(timelineZoom * 100).toFixed(0)}%\r\n              </span>\r\n              <button onClick={zoomIn} className=\"p-1 text-gray-600 hover:text-blue-600 transition-colors\" title=\"Zoom In\">\r\n                <ZoomIn size={16} />\r\n              </button>\r\n              <button onClick={resetZoom} className=\"p-1 text-gray-600 hover:text-blue-600 transition-colors\" title=\"Reset Zoom\">\r\n                <RotateCcw size={16} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Controls */}\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center space-x-6\">\r\n            {/* Add tracks */}\r\n            <div className=\"flex items-center space-x-2\">\r\n              <button onClick={addVideoTrack} className=\"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-xl transition-all duration-200\" title=\"Add Video Track\">\r\n                <Video size={16} />\r\n              </button>\r\n              <button onClick={addAudioTrack} className=\"p-2 text-green-600 hover:text-green-800 hover:bg-green-50 rounded-xl transition-all duration-200\" title=\"Add Audio Track\">\r\n                <Music size={16} />\r\n              </button>\r\n              <button onClick={addTextTrack} className=\"p-2 text-purple-600 hover:text-purple-800 hover:bg-purple-50 rounded-xl transition-all duration-200\" title=\"Add Text Track\">\r\n                <Type size={16} />\r\n              </button>\r\n            </div>\r\n\r\n            {/* Timeline controls */}\r\n            <div className=\"flex items-center space-x-2\">\r\n              <button\r\n                onClick={splitTimelineItem}\r\n                disabled={!selectedTimelineItem}\r\n                className={`p-2 rounded-xl transition-all duration-200 ${\r\n                  selectedTimelineItem\r\n                    ? \"text-red-600 hover:text-red-800 hover:bg-red-50\"\r\n                    : \"text-gray-400 cursor-not-allowed\"\r\n                }`}\r\n                title=\"Split Selected Item (S)\"\r\n              >\r\n                <Scissors size={16} />\r\n              </button>\r\n              <button\r\n                onClick={copyTimelineItem}\r\n                disabled={!selectedTimelineItem}\r\n                className={`p-2 rounded-xl transition-all duration-200 ${\r\n                  selectedTimelineItem\r\n                    ? \"text-blue-600 hover:text-blue-800 hover:bg-blue-50\"\r\n                    : \"text-gray-400 cursor-not-allowed\"\r\n                }`}\r\n                title=\"Copy Selected Item (Ctrl+C)\"\r\n              >\r\n                <Copy size={16} />\r\n              </button>\r\n              <button\r\n                onClick={pasteTimelineItem}\r\n                disabled={!copiedItem}\r\n                className={`p-2 rounded-xl transition-all duration-200 ${\r\n                  copiedItem\r\n                    ? \"text-green-600 hover:text-green-800 hover:bg-green-50\"\r\n                    : \"text-gray-400 cursor-not-allowed\"\r\n                }`}\r\n                title=\"Paste Item (Ctrl+V)\"\r\n              >\r\n                <Copy size={16} className=\"rotate-180\" />\r\n              </button>\r\n              <button\r\n                onClick={deleteSelectedItem}\r\n                disabled={!selectedTimelineItem}\r\n                className={`p-2 rounded-xl transition-all duration-200 ${\r\n                  selectedTimelineItem\r\n                    ? \"text-red-600 hover:text-red-800 hover:bg-red-50\"\r\n                    : \"text-gray-400 cursor-not-allowed\"\r\n                }`}\r\n                title=\"Delete Selected Item (Del)\"\r\n              >\r\n                <Trash2 size={16} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Timeline area */}\r\n      <div className=\"flex-1 flex min-h-0\">\r\n        {/* Track labels */}\r\n        <div className=\"w-48 bg-gray-50 border-r border-gray-200 flex-shrink-0 flex flex-col\">\r\n          <div className=\"h-12 border-b border-gray-200 flex-shrink-0\"></div>\r\n          <div\r\n            ref={trackLabelsRef}\r\n            className=\"flex-1 overflow-y-auto overflow-x-hidden\"\r\n            onScroll={handleTrackLabelsScroll}\r\n          >\r\n            {getAllTracks().map((track) => (\r\n              <div\r\n                key={track.id}\r\n                className={`h-15 flex items-center px-2 border-b border-gray-100 text-sm font-medium flex-shrink-0 ${\r\n                  track.type === 'video' ? 'text-blue-700 bg-blue-50' :\r\n                  track.type === 'audio' ? 'text-green-700 bg-green-50' :\r\n                  'text-purple-700 bg-purple-50'\r\n                }`}\r\n                style={{ height: \"60px\" }}\r\n              >\r\n                <div className=\"flex items-center space-x-2 flex-1\">\r\n                  {getTrackIcon(track.type)}\r\n                  <span className=\"truncate flex-1\">{track.name}</span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-1\">\r\n                  <button\r\n                    onClick={() => toggleTrackVisibility(track.id)}\r\n                    className=\"p-1 text-gray-500 hover:text-gray-700\"\r\n                    title={track.visible ? \"Hide track\" : \"Show track\"}\r\n                  >\r\n                    {track.visible ? <Eye size={14} /> : <EyeOff size={14} />}\r\n                  </button>\r\n                  <button\r\n                    onClick={() => toggleTrackLock(track.id)}\r\n                    className=\"p-1 text-gray-500 hover:text-gray-700\"\r\n                    title={track.locked ? \"Unlock track\" : \"Lock track\"}\r\n                  >\r\n                    {track.locked ? <Lock size={14} /> : <Unlock size={14} />}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Timeline scroll area */}\r\n        <div\r\n          ref={(el) => {\r\n            timelineRef.current = el;\r\n            timelineScrollRef.current = el;\r\n          }}\r\n          className=\"flex-1 relative overflow-auto bg-white\"\r\n          onScroll={handleTrackAreaScroll}\r\n          onDragOver={handleDragOver}\r\n          onDrop={handleDrop}\r\n          onDragLeave={handleDragLeave}\r\n          style={{ overflowX: \"auto\", overflowY: \"auto\", scrollbarWidth: \"thin\" }}\r\n        >\r\n          <div\r\n            style={{\r\n              width: `${getTimelineWidth()}px`,\r\n              minHeight: \"100%\",\r\n              position: \"relative\",\r\n            }}\r\n            onClick={handleTimelineClick}\r\n          >\r\n            {/* Time ruler */}\r\n            <div className=\"h-12 bg-gray-50 border-b border-gray-200 relative flex-shrink-0\">\r\n              {Array.from(\r\n                { length: Math.ceil((videoDuration * timelineZoom) / 5) + 1 },\r\n                (_, i) => {\r\n                  const timeValue = (i * 5) / timelineZoom;\r\n                  const pixelsPerSecond = getPixelsPerSecond();\r\n                  return (\r\n                    <div\r\n                      key={i}\r\n                      className=\"absolute top-0 h-full border-l border-gray-300\"\r\n                      style={{ left: `${timeValue * pixelsPerSecond}px` }}\r\n                    >\r\n                      <span className=\"text-xs text-gray-600 ml-2 mt-2 inline-block font-medium\">\r\n                        {formatTime(timeValue)}\r\n                      </span>\r\n                    </div>\r\n                  );\r\n                }\r\n              )}\r\n\r\n              {/* Sub-divisions for high zoom */}\r\n              {timelineZoom > 2 &&\r\n                Array.from(\r\n                  { length: Math.ceil(videoDuration * timelineZoom) + 1 },\r\n                  (_, i) => {\r\n                    const timeValue = i / timelineZoom;\r\n                    const pixelsPerSecond = getPixelsPerSecond();\r\n                    return (\r\n                      <div\r\n                        key={`sub-${i}`}\r\n                        className=\"absolute top-8 w-0 h-4 border-l border-gray-200\"\r\n                        style={{ left: `${timeValue * pixelsPerSecond}px` }}\r\n                      />\r\n                    );\r\n                  }\r\n                )}\r\n\r\n              {/* Playhead */}\r\n              <div\r\n                className=\"absolute top-0 w-0.5 h-full bg-red-500 z-20 shadow-sm\"\r\n                style={{ left: `${currentTime * getPixelsPerSecond()}px` }}\r\n              />\r\n\r\n              {/* Snap indicators */}\r\n              {snapIndicators.map((indicator, index) => (\r\n                <div\r\n                  key={index}\r\n                  className={`absolute top-0 w-0.5 h-full z-10 ${\r\n                    indicator.type === 'playhead' ? 'bg-red-300' : 'bg-yellow-400'\r\n                  }`}\r\n                  style={{ left: `${indicator.time * getPixelsPerSecond()}px` }}\r\n                />\r\n              ))}\r\n            </div>\r\n\r\n            {/* Tracks area */}\r\n            <div\r\n              className=\"relative flex-1\"\r\n              style={{\r\n                height: `${getAllTracks().length * 60}px`,\r\n                minHeight: \"100%\",\r\n              }}\r\n            >\r\n              {/* Timeline items */}\r\n              {timelineItems.map((item) => {\r\n                const track = getAllTracks().find(t => t.id === item.trackId);\r\n                return (\r\n                  <div\r\n                    key={item.id}\r\n                    className={`absolute h-10 rounded-lg border-2 cursor-grab active:cursor-grabbing transition-all shadow-sm hover:shadow-md group ${getTrackColor(\r\n                      item.trackType\r\n                    )} ${\r\n                      selectedTimelineItem?.id === item.id\r\n                        ? \"ring-2 ring-blue-300\"\r\n                        : \"\"\r\n                    } ${\r\n                      draggedTimelineItem?.id === item.id ? \"opacity-50 z-30\" : \"\"\r\n                    } ${\r\n                      copiedItem?.id === item.id\r\n                        ? \"ring-2 ring-green-300 ring-dashed\"\r\n                        : \"\"\r\n                    } ${\r\n                      !track?.visible ? \"opacity-50\" : \"\"\r\n                    } ${\r\n                      track?.locked ? \"cursor-not-allowed\" : \"\"\r\n                    }`}\r\n                    style={getTimelineItemStyle(item)}\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      setSelectedTimelineItem(item);\r\n                    }}\r\n                  >\r\n                    {/* Left resize handle */}\r\n                    {!track?.locked && (\r\n                      <div\r\n                        className=\"absolute left-0 top-0 w-3 h-full cursor-ew-resize opacity-0 group-hover:opacity-100 bg-white/50 rounded-l-lg z-10 flex items-center justify-center\"\r\n                        onMouseDown={(e) => handleResizeStart(e, item, \"left\")}\r\n                        title=\"Trim start\"\r\n                      >\r\n                        <div className=\"w-0.5 h-6 bg-white rounded-full opacity-80\"></div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Item content */}\r\n                    <div\r\n                      draggable={!track?.locked}\r\n                      onDragStart={(e) => handleTimelineItemDragStart(e, item)}\r\n                      onDragEnd={handleTimelineItemDragEnd}\r\n                      className={`p-2 text-white text-xs truncate font-medium flex items-center h-full mx-3 ${\r\n                        track?.locked ? 'cursor-not-allowed' : 'cursor-grab active:cursor-grabbing'\r\n                      }`}\r\n                      title={`${item.name} - ${track?.locked ? 'Track locked' : 'Drag to move'}`}\r\n                    >\r\n                      {item.name}\r\n                      {track?.locked && <Lock size={12} className=\"ml-1\" />}\r\n                      {copiedItem?.id === item.id && (\r\n                        <span className=\"ml-2 text-green-200\">📋</span>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Right resize handle */}\r\n                    {!track?.locked && (\r\n                      <div\r\n                        className=\"absolute right-0 top-0 w-3 h-full cursor-ew-resize opacity-0 group-hover:opacity-100 bg-white/50 rounded-r-lg z-10 flex items-center justify-center\"\r\n                        onMouseDown={(e) => handleResizeStart(e, item, \"right\")}\r\n                        title=\"Trim end\"\r\n                      >\r\n                        <div className=\"w-0.5 h-6 bg-white rounded-full opacity-80\"></div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                );\r\n              })}\r\n\r\n              {/* Drop preview */}\r\n              {dropPreview && (\r\n                <div\r\n                  className={`absolute h-10 rounded-lg border-2 transition-all ${\r\n                    dropPreview.isValid\r\n                      ? `${getTrackColor(dropPreview.trackType)} bg-opacity-60 border-dashed animate-pulse`\r\n                      : \"bg-red-300 border-red-500 border-dashed\"\r\n                  }`}\r\n                  style={getDropPreviewStyle()}\r\n                >\r\n                  {dropPreview.isValid && (\r\n                    <div className=\"flex items-center justify-center h-full text-white text-xs font-bold\">\r\n                      {isSnappingEnabled && snapIndicators.length > 0 ? \"🧲\" : \"📍\"}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              {/* Snap indicators in timeline */}\r\n              {snapIndicators.map((indicator, index) => (\r\n                <div\r\n                  key={`timeline-snap-${index}`}\r\n                  className={`absolute w-0.5 bg-yellow-400 z-30 opacity-75`}\r\n                  style={{\r\n                    left: `${indicator.time * getPixelsPerSecond()}px`,\r\n                    top: '0px',\r\n                    height: `${getAllTracks().length * 60}px`\r\n                  }}\r\n                />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}