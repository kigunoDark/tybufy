{"ast":null,"code":"var _jsxFileName = \"C:\\\\Scriptify\\\\ai-content-studio\\\\frontend\\\\src\\\\components\\\\pages\\\\VideoEditorAppPage.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useRef, useEffect, useCallback } from \"react\";\nimport MediaStorage from \"../../utils/MediaStorage\";\nimport NotificationSystem, { showNotification } from \"../NotificationSystem\";\nimport { Upload, Play, Pause, Volume2, Video, Music, SkipBack, SkipForward, VolumeX, Copy, Trash2, Scissors, Image, Film, Plus, Layers, ZoomIn, ZoomOut, RotateCcw, HelpCircle, X, HardDrive, Clock, AlertTriangle } from \"lucide-react\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst VideoEditor = () => {\n  _s();\n  const [mediaLibrary, setMediaLibrary] = useState({\n    videos: [],\n    audios: [],\n    images: []\n  });\n  const [timelineItems, setTimelineItems] = useState([]);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [videoDuration, setVideoDuration] = useState(60);\n  const [selectedTimelineItem, setSelectedTimelineItem] = useState(null);\n  const [timelineZoom, setTimelineZoom] = useState(1);\n  const [activeTab, setActiveTab] = useState(\"videos\");\n  const [volume, setVolume] = useState(1);\n  const [isMuted, setIsMuted] = useState(false);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [currentVideoSource, setCurrentVideoSource] = useState(null);\n  const [draggedItem, setDraggedItem] = useState(null);\n  const [draggedTimelineItem, setDraggedTimelineItem] = useState(null);\n  const [dropPreview, setDropPreview] = useState(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [isTimelineDragging, setIsTimelineDragging] = useState(false);\n  const [dragOffset, setDragOffset] = useState(0);\n  const [copiedItem, setCopiedItem] = useState(null);\n  const [isUploading, setIsUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n\n  // Состояния для локального хранилища\n  const [storageInfo, setStorageInfo] = useState(null);\n  const [isStorageReady, setIsStorageReady] = useState(false);\n\n  // Новые состояния для resize\n  const [isResizing, setIsResizing] = useState(false);\n  const [resizeHandle, setResizeHandle] = useState(null); // 'left' | 'right'\n  const [resizeItem, setResizeItem] = useState(null);\n  const [originalItemData, setOriginalItemData] = useState(null);\n\n  // Состояния для управления overlays на видео\n  const [selectedOverlay, setSelectedOverlay] = useState(null);\n  const [overlayTransforms, setOverlayTransforms] = useState({}); // { overlayId: { x, y, scale, opacity } }\n  const [isDraggingOverlay, setIsDraggingOverlay] = useState(false);\n  const [isResizingOverlay, setIsResizingOverlay] = useState(false);\n  const [overlayDragStart, setOverlayDragStart] = useState({\n    x: 0,\n    y: 0\n  });\n  const [resizeOverlayHandle, setResizeOverlayHandle] = useState(null);\n  const [initialOverlayTransform, setInitialOverlayTransform] = useState(null);\n  const [showOverlayInfo, setShowOverlayInfo] = useState({}); // { overlayId: boolean }\n\n  // Модальное окно помощи\n  const [showHelp, setShowHelp] = useState(false);\n\n  // Треки как в CapCut\n  const [tracks, setTracks] = useState({\n    overlays: [{\n      id: 'overlay-1',\n      name: 'Overlay 1',\n      type: 'overlay'\n    }, {\n      id: 'overlay-2',\n      name: 'Overlay 2',\n      type: 'overlay'\n    }],\n    main: [{\n      id: 'main-video',\n      name: 'Main Video',\n      type: 'main'\n    }],\n    audio: [{\n      id: 'audio-1',\n      name: 'Audio 1',\n      type: 'audio'\n    }, {\n      id: 'audio-2',\n      name: 'Audio 2',\n      type: 'audio'\n    }]\n  });\n  const timelineRef = useRef(null);\n  const timelineScrollRef = useRef(null);\n  const trackLabelsRef = useRef(null);\n  const intervalRef = useRef(null);\n  const audioElementsRef = useRef(new Map());\n  const fileInputRef = useRef(null);\n  const audioInputRef = useRef(null);\n  const imageInputRef = useRef(null);\n  const videoRef = useRef(null);\n  const autoScrollIntervalRef = useRef(null);\n  const videoContainerRef = useRef(null);\n\n  // Инициализация локального хранилища\n  useEffect(() => {\n    const initStorage = async () => {\n      try {\n        await MediaStorage.init();\n        setIsStorageReady(true);\n\n        // Загружаем файлы\n        await loadMediaFromStorage();\n\n        // Очищаем истекшие файлы\n        const cleanedCount = await MediaStorage.cleanupExpiredFiles();\n        if (cleanedCount > 0) {\n          showNotification({\n            type: 'info',\n            title: 'Storage Cleanup',\n            message: `Removed ${cleanedCount} expired files`,\n            duration: 3000\n          });\n        }\n\n        // Показываем welcome уведомление\n        showNotification({\n          type: 'info',\n          title: 'Local Storage Ready',\n          message: 'Your media files are stored locally for 7 days',\n          duration: 4000\n        });\n      } catch (error) {\n        console.error('Storage initialization failed:', error);\n        showNotification({\n          type: 'error',\n          title: 'Storage Error',\n          message: 'Failed to initialize local storage',\n          duration: 5000\n        });\n      }\n    };\n    initStorage();\n  }, []);\n\n  // Слушаем обновления хранилища\n  useEffect(() => {\n    const handleStorageUpdate = event => {\n      setStorageInfo(event.detail);\n    };\n    window.addEventListener('storageUpdated', handleStorageUpdate);\n    return () => window.removeEventListener('storageUpdated', handleStorageUpdate);\n  }, []);\n\n  // Загрузка медиафайлов из локального хранилища\n  const loadMediaFromStorage = async () => {\n    try {\n      const files = await MediaStorage.getAllFiles();\n      setMediaLibrary(files);\n\n      // Обновляем информацию о хранилище\n      const info = await MediaStorage.getStorageInfo();\n      setStorageInfo(info);\n    } catch (error) {\n      console.error('Load media error:', error);\n      showNotification({\n        type: 'error',\n        title: 'Load Error',\n        message: 'Failed to load media files',\n        duration: 4000\n      });\n    }\n  };\n\n  // Сохранение файла в локальное хранилище\n  const saveFileToStorage = async (file, type) => {\n    try {\n      // Проверяем лимиты перед загрузкой\n      const canUpload = await MediaStorage.canUpload(type);\n      if (!canUpload) {\n        const remaining = await MediaStorage.getRemainingSpace(type);\n        throw new Error(`Storage limit reached! You can upload ${remaining} more ${type}.`);\n      }\n      const savedFile = await MediaStorage.saveFile(file, type);\n\n      // Добавляем в библиотеку\n      setMediaLibrary(prev => ({\n        ...prev,\n        [type]: [...prev[type], savedFile]\n      }));\n\n      // Показываем уведомление об успехе\n      showNotification({\n        type: 'success',\n        title: 'File Uploaded',\n        message: `${savedFile.name} saved successfully`,\n        duration: 3000\n      });\n      return savedFile;\n    } catch (error) {\n      console.error('Save file error:', error);\n\n      // Показываем уведомление об ошибке\n      showNotification({\n        type: 'error',\n        title: 'Upload Failed',\n        message: error.message,\n        duration: 5000\n      });\n      throw error;\n    }\n  };\n\n  // Удаление файла из локального хранилища\n  const deleteFileFromStorage = async (fileId, type) => {\n    try {\n      await MediaStorage.deleteFile(fileId);\n\n      // Удаляем из библиотеки\n      setMediaLibrary(prev => ({\n        ...prev,\n        [type]: prev[type].filter(file => file.id !== fileId)\n      }));\n      showNotification({\n        type: 'success',\n        title: 'File Deleted',\n        message: 'File removed from library',\n        duration: 2000\n      });\n      return true;\n    } catch (error) {\n      console.error('Delete file error:', error);\n      showNotification({\n        type: 'error',\n        title: 'Delete Failed',\n        message: 'Failed to delete file',\n        duration: 4000\n      });\n      return false;\n    }\n  };\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = Math.floor(seconds % 60);\n    const ms = Math.floor(seconds % 1 * 100);\n    return timelineZoom > 5 ? `${mins}:${secs.toString().padStart(2, \"0\")}.${ms.toString().padStart(2, \"0\")}` : `${mins}:${secs.toString().padStart(2, \"0\")}`;\n  };\n  const handlePlayPause = () => {\n    setIsPlaying(!isPlaying);\n  };\n  const seekTo = time => {\n    const newTime = Math.max(0, Math.min(videoDuration, time));\n    setCurrentTime(newTime);\n    const content = getCurrentTimelineContent();\n    content.audio.forEach(audioItem => {\n      const audioElement = audioElementsRef.current.get(audioItem.id);\n      if (audioElement) {\n        const relativeTime = newTime - audioItem.startTime;\n        audioElement.currentTime = Math.max(0, relativeTime);\n      }\n    });\n  };\n  const getCurrentTimelineContent = useCallback(() => {\n    const currentItems = timelineItems.filter(item => currentTime >= item.startTime && currentTime < item.startTime + item.duration);\n    return {\n      mainVideo: currentItems.find(item => item.trackType === 'main' && item.type === 'video'),\n      overlays: currentItems.filter(item => item.trackType === 'overlay'),\n      audio: currentItems.filter(item => item.trackType === 'audio')\n    };\n  }, [currentTime, timelineItems]);\n  const createAudioElement = useCallback(audioItem => {\n    if (!audioElementsRef.current.has(audioItem.id)) {\n      const audio = document.createElement('audio');\n      audio.src = audioItem.url;\n      audio.volume = (audioItem.volume || 1) * volume;\n      audio.muted = isMuted;\n      audio.preload = \"metadata\";\n      audioElementsRef.current.set(audioItem.id, audio);\n    }\n    return audioElementsRef.current.get(audioItem.id);\n  }, [volume, isMuted]);\n  const syncAudioTime = useCallback((audioItem, relativeTime) => {\n    const audioElement = audioElementsRef.current.get(audioItem.id);\n    if (audioElement) {\n      const timeDiff = Math.abs(audioElement.currentTime - relativeTime);\n      if (timeDiff > 0.2) {\n        audioElement.currentTime = Math.max(0, relativeTime);\n      }\n    }\n  }, []);\n  const checkCollision = useCallback((newItem, excludeId = null) => {\n    return timelineItems.some(item => {\n      if (item.id === excludeId) return false;\n      if (item.trackId !== newItem.trackId) return false;\n      const itemStart = item.startTime;\n      const itemEnd = item.startTime + item.duration;\n      const newStart = newItem.startTime;\n      const newEnd = newItem.startTime + newItem.duration;\n      return newStart < itemEnd && newEnd > itemStart;\n    });\n  }, [timelineItems]);\n\n  // Функция для вставки с автоматическим сдвигом блоков (как в CapCut)\n  const insertWithRipple = useCallback((trackId, insertTime, duration, excludeId = null) => {\n    const trackItems = timelineItems.filter(item => item.trackId === trackId && item.id !== excludeId).sort((a, b) => a.startTime - b.startTime);\n\n    // Если трек пустой\n    if (trackItems.length === 0) {\n      return {\n        time: Math.max(0, insertTime),\n        shouldRipple: false,\n        affectedItems: []\n      };\n    }\n\n    // Ищем где вставить\n    let insertPosition = insertTime;\n    let shouldRipple = false;\n    let affectedItems = [];\n\n    // Проверяем есть ли точно в этом месте блок\n    const blockAtPosition = trackItems.find(item => insertTime >= item.startTime && insertTime < item.startTime + item.duration);\n    if (blockAtPosition) {\n      // Вставляем в начало этого блока и сдвигаем все что справа\n      insertPosition = blockAtPosition.startTime;\n      shouldRipple = true;\n      affectedItems = trackItems.filter(item => item.startTime >= insertPosition);\n    } else {\n      // Ищем блоки которые нужно сдвинуть\n      const blocksToShift = trackItems.filter(item => item.startTime >= insertTime);\n      if (blocksToShift.length > 0) {\n        // Проверяем, есть ли место без сдвига\n        const nextBlock = blocksToShift[0];\n        const availableSpace = nextBlock.startTime - insertTime;\n        if (availableSpace >= duration) {\n          // Помещается без сдвига\n          insertPosition = insertTime;\n          shouldRipple = false;\n        } else {\n          // Нужно сдвинуть\n          insertPosition = insertTime;\n          shouldRipple = true;\n          affectedItems = blocksToShift;\n        }\n      } else {\n        // Вставляем в конец\n        insertPosition = insertTime;\n        shouldRipple = false;\n      }\n    }\n    return {\n      time: Math.max(0, insertPosition),\n      shouldRipple,\n      affectedItems,\n      shiftAmount: shouldRipple ? duration : 0\n    };\n  }, [timelineItems]);\n\n  // Функция для поиска ближайшего свободного места (обратная совместимость)\n  const findNearestValidPosition = useCallback((trackId, dropTime, duration, excludeId = null) => {\n    const result = insertWithRipple(trackId, dropTime, duration, excludeId);\n    return {\n      time: result.time,\n      isExact: !result.shouldRipple\n    };\n  }, [insertWithRipple]);\n\n  // Функция для применения ripple effect\n  const applyRippleEffect = useCallback((affectedItems, shiftAmount) => {\n    if (!affectedItems.length || shiftAmount <= 0) return;\n    console.log('Applying ripple effect:', {\n      affectedCount: affectedItems.length,\n      shiftAmount,\n      affectedItems: affectedItems.map(item => ({\n        name: item.name,\n        oldStart: item.startTime\n      }))\n    });\n    setTimelineItems(prev => prev.map(item => {\n      const affectedItem = affectedItems.find(affected => affected.id === item.id);\n      if (affectedItem) {\n        console.log(`Shifting ${item.name} from ${item.startTime} to ${item.startTime + shiftAmount}`);\n        return {\n          ...item,\n          startTime: item.startTime + shiftAmount\n        };\n      }\n      return item;\n    }));\n\n    // Обновляем общую длительность если нужно\n    if (affectedItems.length > 0) {\n      const maxEndTime = Math.max(...affectedItems.map(item => item.startTime + item.duration + shiftAmount));\n      if (maxEndTime > videoDuration) {\n        setVideoDuration(maxEndTime + 10);\n      }\n    }\n  }, [videoDuration]);\n  const findNextAvailablePosition = useCallback((trackId, duration, preferredStart = 0) => {\n    const trackItems = timelineItems.filter(item => item.trackId === trackId).sort((a, b) => a.startTime - b.startTime);\n    if (preferredStart >= 0) {\n      const testItem = {\n        trackId,\n        startTime: preferredStart,\n        duration\n      };\n      if (!checkCollision(testItem)) {\n        return preferredStart;\n      }\n    }\n    for (let i = 0; i < trackItems.length; i++) {\n      const currentItem = trackItems[i];\n      const nextItem = trackItems[i + 1];\n      if (i === 0 && currentItem.startTime >= duration) {\n        return 0;\n      }\n      if (nextItem) {\n        const gapStart = currentItem.startTime + currentItem.duration;\n        const gapEnd = nextItem.startTime;\n        const gapSize = gapEnd - gapStart;\n        if (gapSize >= duration) {\n          return gapStart;\n        }\n      }\n    }\n    if (trackItems.length === 0) return 0;\n    const lastItem = trackItems[trackItems.length - 1];\n    return lastItem.startTime + lastItem.duration;\n  }, [timelineItems, checkCollision]);\n  const removeFromTimeline = itemId => {\n    const audioElement = audioElementsRef.current.get(itemId);\n    if (audioElement) {\n      audioElement.pause();\n      audioElement.src = '';\n      audioElementsRef.current.delete(itemId);\n    }\n    setTimelineItems(prev => prev.filter(item => item.id !== itemId));\n    setSelectedTimelineItem(null);\n  };\n\n  // Функции для управления overlays на видео\n  const getOverlayTransform = useCallback(overlayId => {\n    return overlayTransforms[overlayId] || {\n      x: 0,\n      y: 0,\n      scale: 1,\n      opacity: 1\n    };\n  }, [overlayTransforms]);\n  const updateOverlayTransform = useCallback((overlayId, updates) => {\n    setOverlayTransforms(prev => ({\n      ...prev,\n      [overlayId]: {\n        ...getOverlayTransform(overlayId),\n        ...updates\n      }\n    }));\n  }, [getOverlayTransform]);\n\n  // Функция для показа информации об overlay на несколько секунд\n  const showOverlayInfoTemporary = useCallback((overlayId, duration = 2000) => {\n    setShowOverlayInfo(prev => ({\n      ...prev,\n      [overlayId]: true\n    }));\n\n    // Очищаем предыдущий таймер если есть\n    if (window.overlayInfoTimers && window.overlayInfoTimers[overlayId]) {\n      clearTimeout(window.overlayInfoTimers[overlayId]);\n    }\n\n    // Создаем новый таймер\n    if (!window.overlayInfoTimers) window.overlayInfoTimers = {};\n    window.overlayInfoTimers[overlayId] = setTimeout(() => {\n      setShowOverlayInfo(prev => ({\n        ...prev,\n        [overlayId]: false\n      }));\n      delete window.overlayInfoTimers[overlayId];\n    }, duration);\n  }, []);\n  const handleOverlayMouseDown = useCallback((e, overlay) => {\n    if (e.target.closest('.resize-handle')) return; // Не начинаем drag если кликнули на resize handle\n\n    e.preventDefault();\n    e.stopPropagation();\n    setSelectedOverlay(overlay);\n    setIsDraggingOverlay(true);\n    const container = videoContainerRef.current;\n    if (!container) return;\n    const containerRect = container.getBoundingClientRect();\n    const overlayElement = e.currentTarget;\n    const overlayRect = overlayElement.getBoundingClientRect();\n    const transform = getOverlayTransform(overlay.id);\n\n    // Запоминаем точный offset от позиции мыши до текущей позиции элемента\n    setOverlayDragStart({\n      x: e.clientX - overlayRect.left,\n      y: e.clientY - overlayRect.top,\n      containerX: containerRect.left,\n      containerY: containerRect.top\n    });\n  }, [getOverlayTransform]);\n  const handleOverlayResizeStart = useCallback((e, overlay, handle) => {\n    e.preventDefault();\n    e.stopPropagation();\n    console.log('Starting resize:', handle); // Для отладки\n\n    setSelectedOverlay(overlay);\n    setIsResizingOverlay(true);\n    setResizeOverlayHandle(handle);\n    const currentTransform = getOverlayTransform(overlay.id);\n    setInitialOverlayTransform(currentTransform);\n    setOverlayDragStart({\n      x: e.clientX,\n      y: e.clientY,\n      startScale: currentTransform.scale,\n      startX: currentTransform.x,\n      startY: currentTransform.y\n    });\n  }, [getOverlayTransform]);\n  const handleOverlayMouseMove = useCallback(e => {\n    if (!selectedOverlay) return;\n    if (isDraggingOverlay) {\n      // Перетаскивание с максимальной плавностью\n      const container = videoContainerRef.current;\n      if (!container) return;\n      const rect = container.getBoundingClientRect();\n      const overlaySize = 128 * getOverlayTransform(selectedOverlay.id).scale;\n\n      // Вычисляем новую позицию с учетом начального offset\n      const newX = e.clientX - overlayDragStart.containerX - overlayDragStart.x;\n      const newY = e.clientY - overlayDragStart.containerY - overlayDragStart.y;\n\n      // Ограничиваем движение границами контейнера с учетом размера overlay\n      const padding = 5; // Минимальный отступ\n      const limitedX = Math.max(padding, Math.min(rect.width - overlaySize - padding, newX));\n      const limitedY = Math.max(padding, Math.min(rect.height - overlaySize - padding, newY));\n\n      // Обновляем позицию относительно базовой позиции\n      const baseX = 200;\n      const baseY = 50 + selectedOverlay.index * 120;\n\n      // Мгновенное обновление без debounce для плавности\n      updateOverlayTransform(selectedOverlay.id, {\n        x: limitedX - baseX,\n        y: limitedY - baseY\n      });\n    } else if (isResizingOverlay && overlayDragStart.startScale !== undefined && resizeOverlayHandle) {\n      console.log('Resizing...', resizeOverlayHandle); // Для отладки\n\n      // Простая логика resize\n      const deltaX = e.clientX - overlayDragStart.x;\n      const deltaY = e.clientY - overlayDragStart.y;\n\n      // Определяем направление и чувствительность\n      let scaleFactor = 1;\n      const sensitivity = 0.005; // Базовая чувствительность\n\n      switch (resizeOverlayHandle) {\n        case 'nw':\n          // Северо-запад: тянем влево-вверх = уменьшаем\n          scaleFactor = 1 - (deltaX + deltaY) * sensitivity;\n          break;\n        case 'ne':\n          // Северо-восток: тянем вправо-вверх = увеличиваем вправо, уменьшаем вверх  \n          scaleFactor = 1 + (deltaX - deltaY) * sensitivity;\n          break;\n        case 'sw':\n          // Юго-запад: тянем влево-вниз = уменьшаем влево, увеличиваем вниз\n          scaleFactor = 1 + (-deltaX + deltaY) * sensitivity;\n          break;\n        case 'se':\n          // Юго-восток: тянем вправо-вниз = увеличиваем\n          scaleFactor = 1 + (deltaX + deltaY) * sensitivity;\n          break;\n      }\n\n      // Применяем новый масштаб\n      const newScale = Math.max(0.2, Math.min(4, overlayDragStart.startScale * scaleFactor));\n\n      // Простое обновление без сложной компенсации позиции\n      updateOverlayTransform(selectedOverlay.id, {\n        scale: newScale\n      });\n    }\n  }, [selectedOverlay, isDraggingOverlay, isResizingOverlay, overlayDragStart, initialOverlayTransform, updateOverlayTransform, getOverlayTransform, resizeOverlayHandle]);\n  const handleOverlayMouseUp = useCallback(() => {\n    console.log('Mouse up - stopping drag/resize'); // Для отладки\n\n    // Если завершили изменение размера, показываем инфо на 2 секунды\n    if (isResizingOverlay && selectedOverlay) {\n      showOverlayInfoTemporary(selectedOverlay.id, 2000);\n    }\n    setIsDraggingOverlay(false);\n    setIsResizingOverlay(false);\n    setResizeOverlayHandle(null);\n    setInitialOverlayTransform(null);\n  }, [isResizingOverlay, selectedOverlay, showOverlayInfoTemporary]);\n  const handleOverlayWheel = useCallback((e, overlayId) => {\n    if (!e.ctrlKey) return;\n    e.preventDefault();\n    e.stopPropagation();\n    const transform = getOverlayTransform(overlayId);\n    const scaleDelta = e.deltaY > 0 ? -0.05 : 0.05; // Более плавное масштабирование\n    const newScale = Math.max(0.2, Math.min(4, transform.scale + scaleDelta));\n    updateOverlayTransform(overlayId, {\n      scale: newScale\n    });\n\n    // Показываем информацию временно при масштабировании колесиком\n    showOverlayInfoTemporary(overlayId, 1500);\n  }, [getOverlayTransform, updateOverlayTransform, showOverlayInfoTemporary]);\n\n  // Функции для работы с элементами таймлайна\n  const splitTimelineItem = useCallback(() => {\n    if (!selectedTimelineItem) return;\n    const item = selectedTimelineItem;\n    const splitTime = currentTime;\n    if (splitTime <= item.startTime || splitTime >= item.startTime + item.duration) {\n      return;\n    }\n    const firstPartDuration = splitTime - item.startTime;\n    const secondPartStart = splitTime;\n    const secondPartDuration = item.duration - firstPartDuration;\n    const secondPart = {\n      ...item,\n      id: Date.now() + Math.random(),\n      startTime: secondPartStart,\n      duration: secondPartDuration\n    };\n    const updatedFirstPart = {\n      ...item,\n      duration: firstPartDuration\n    };\n    setTimelineItems(prev => prev.map(timelineItem => timelineItem.id === item.id ? updatedFirstPart : timelineItem).concat(secondPart));\n    setSelectedTimelineItem(null);\n  }, [selectedTimelineItem, currentTime]);\n  const copyTimelineItem = useCallback(() => {\n    if (!selectedTimelineItem) return;\n    setCopiedItem(selectedTimelineItem);\n  }, [selectedTimelineItem]);\n  const pasteTimelineItem = useCallback(() => {\n    var _insertResult$affecte;\n    if (!copiedItem) return;\n    const targetTrackId = copiedItem.trackId;\n    const insertResult = insertWithRipple(targetTrackId, currentTime, copiedItem.duration);\n\n    // Применяем ripple effect если нужно\n    if (insertResult.shouldRipple && ((_insertResult$affecte = insertResult.affectedItems) === null || _insertResult$affecte === void 0 ? void 0 : _insertResult$affecte.length) > 0) {\n      applyRippleEffect(insertResult.affectedItems, copiedItem.duration);\n    }\n    const newItem = {\n      ...copiedItem,\n      id: Date.now() + Math.random(),\n      startTime: insertResult.time\n    };\n    setTimelineItems(prev => [...prev, newItem]);\n    const newEndTime = newItem.startTime + newItem.duration;\n    if (newEndTime > videoDuration) {\n      setVideoDuration(newEndTime + 10);\n    }\n    setSelectedTimelineItem(newItem);\n  }, [copiedItem, currentTime, insertWithRipple, applyRippleEffect, videoDuration]);\n  const deleteSelectedItem = useCallback(() => {\n    if (!selectedTimelineItem) return;\n    removeFromTimeline(selectedTimelineItem.id);\n  }, [selectedTimelineItem]);\n\n  // Автопрокрутка и зум\n  const stopAutoScroll = useCallback(() => {\n    if (autoScrollIntervalRef.current) {\n      clearInterval(autoScrollIntervalRef.current);\n      autoScrollIntervalRef.current = null;\n    }\n  }, []);\n  const startAutoScroll = useCallback((direction, speed = 1) => {\n    stopAutoScroll();\n    autoScrollIntervalRef.current = setInterval(() => {\n      if (timelineScrollRef.current) {\n        const scrollAmount = 15 * speed;\n        const currentScrollLeft = timelineScrollRef.current.scrollLeft;\n        const maxScroll = timelineScrollRef.current.scrollWidth - timelineScrollRef.current.clientWidth;\n        if (direction === 'left' && currentScrollLeft > 0) {\n          timelineScrollRef.current.scrollLeft = Math.max(0, currentScrollLeft - scrollAmount);\n        } else if (direction === 'right' && currentScrollLeft < maxScroll) {\n          timelineScrollRef.current.scrollLeft = Math.min(maxScroll, currentScrollLeft + scrollAmount);\n        }\n      }\n    }, 16); // 60fps для плавности\n  }, [stopAutoScroll]);\n  const checkAutoScroll = useCallback(clientX => {\n    if (!timelineScrollRef.current) return;\n    const rect = timelineScrollRef.current.getBoundingClientRect();\n    const scrollZoneWidth = 120;\n    const relativeX = clientX - rect.left;\n    if (relativeX < scrollZoneWidth && timelineScrollRef.current.scrollLeft > 0) {\n      const speed = (scrollZoneWidth - relativeX) / scrollZoneWidth * 3;\n      startAutoScroll('left', speed);\n    } else if (relativeX > rect.width - scrollZoneWidth) {\n      const maxScroll = timelineScrollRef.current.scrollWidth - timelineScrollRef.current.clientWidth;\n      if (timelineScrollRef.current.scrollLeft < maxScroll) {\n        const speed = (relativeX - (rect.width - scrollZoneWidth)) / scrollZoneWidth * 3;\n        startAutoScroll('right', speed);\n      }\n    } else {\n      stopAutoScroll();\n    }\n  }, [startAutoScroll, stopAutoScroll]);\n\n  // Функции зума\n  const zoomIn = () => {\n    setTimelineZoom(prev => Math.min(20, prev * 1.5));\n  };\n  const zoomOut = () => {\n    setTimelineZoom(prev => Math.max(0.1, prev / 1.5));\n  };\n  const resetZoom = () => {\n    setTimelineZoom(1);\n  };\n\n  // Функции для resize\n  const handleResizeStart = useCallback((e, item, handle) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsResizing(true);\n    setResizeHandle(handle);\n    setResizeItem(item);\n    setOriginalItemData({\n      startTime: item.startTime,\n      duration: item.duration\n    });\n\n    // Предотвращаем drag\n    setIsTimelineDragging(false);\n    setDraggedTimelineItem(null);\n  }, []);\n  const handleResizeEnd = useCallback(() => {\n    setIsResizing(false);\n    setResizeHandle(null);\n    setResizeItem(null);\n    setOriginalItemData(null);\n    stopAutoScroll();\n  }, [stopAutoScroll]);\n\n  // Синхронизация скролла\n  const handleTrackAreaScroll = e => {\n    if (trackLabelsRef.current) {\n      trackLabelsRef.current.scrollTop = e.target.scrollTop;\n    }\n  };\n  const handleTrackLabelsScroll = e => {\n    if (timelineScrollRef.current) {\n      timelineScrollRef.current.scrollTop = e.target.scrollTop;\n    }\n  };\n  const getTimelineWidth = () => {\n    const baseWidth = videoDuration * 50 * timelineZoom;\n    return Math.max(baseWidth, 2000);\n  };\n  const getPixelsPerSecond = () => {\n    return 50 * timelineZoom;\n  };\n\n  // Эффекты для управления overlays\n  useEffect(() => {\n    if (isDraggingOverlay || isResizingOverlay) {\n      document.addEventListener('mousemove', handleOverlayMouseMove);\n      document.addEventListener('mouseup', handleOverlayMouseUp);\n      document.body.style.cursor = isDraggingOverlay ? 'grabbing' : 'nw-resize';\n      return () => {\n        document.removeEventListener('mousemove', handleOverlayMouseMove);\n        document.removeEventListener('mouseup', handleOverlayMouseUp);\n        document.body.style.cursor = '';\n      };\n    }\n  }, [isDraggingOverlay, isResizingOverlay, handleOverlayMouseMove, handleOverlayMouseUp]);\n\n  // Обработка resize во время движения мыши\n  useEffect(() => {\n    const handleMouseMove = e => {\n      if (!isResizing || !resizeItem || !timelineScrollRef.current) return;\n      checkAutoScroll(e.clientX);\n      const rect = timelineScrollRef.current.getBoundingClientRect();\n      const mouseX = e.clientX - rect.left + timelineScrollRef.current.scrollLeft;\n      const pixelsPerSecond = getPixelsPerSecond();\n      const newTime = mouseX / pixelsPerSecond;\n      setTimelineItems(prev => prev.map(item => {\n        if (item.id !== resizeItem.id) return item;\n        const minDuration = 0.1;\n        if (resizeHandle === 'left') {\n          const rightEdge = originalItemData.startTime + originalItemData.duration;\n          const newStartTime = Math.max(0, Math.min(rightEdge - minDuration, newTime));\n          const newDuration = rightEdge - newStartTime;\n          return {\n            ...item,\n            startTime: newStartTime,\n            duration: newDuration\n          };\n        } else if (resizeHandle === 'right') {\n          const leftEdge = originalItemData.startTime;\n          const newEndTime = Math.max(leftEdge + minDuration, newTime);\n          const newDuration = newEndTime - leftEdge;\n          return {\n            ...item,\n            duration: newDuration\n          };\n        }\n        return item;\n      }));\n    };\n    const handleMouseUp = () => {\n      if (isResizing) {\n        handleResizeEnd();\n      }\n    };\n    if (isResizing) {\n      document.addEventListener('mousemove', handleMouseMove);\n      document.addEventListener('mouseup', handleMouseUp);\n    }\n    return () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n    };\n  }, [isResizing, resizeItem, resizeHandle, originalItemData, getPixelsPerSecond, checkAutoScroll, handleResizeEnd]);\n\n  // Основные эффекты\n  useEffect(() => {\n    const content = getCurrentTimelineContent();\n    if (content.mainVideo && content.mainVideo.url !== currentVideoSource) {\n      setCurrentVideoSource(content.mainVideo.url);\n      if (videoRef.current) {\n        const relativeTime = currentTime - content.mainVideo.startTime;\n        videoRef.current.currentTime = Math.max(0, relativeTime);\n      }\n    } else if (!content.mainVideo && content.overlays.find(o => o.type === 'image')) {\n      const firstImage = content.overlays.find(o => o.type === 'image');\n      setCurrentVideoSource(firstImage.url);\n    } else if (!content.mainVideo && !content.overlays.find(o => o.type === 'image')) {\n      setCurrentVideoSource(null);\n    }\n    const currentAudioIds = new Set(content.audio.map(item => item.id));\n    audioElementsRef.current.forEach((audioElement, id) => {\n      if (!currentAudioIds.has(id)) {\n        if (!audioElement.paused) {\n          audioElement.pause();\n        }\n      }\n    });\n    content.audio.forEach(audioItem => {\n      const audioElement = createAudioElement(audioItem);\n      const relativeTime = currentTime - audioItem.startTime;\n      audioElement.volume = (audioItem.volume || 1) * volume;\n      audioElement.muted = isMuted;\n      if (isPlaying && relativeTime >= 0) {\n        syncAudioTime(audioItem, relativeTime);\n        if (audioElement.paused) {\n          audioElement.play().catch(console.error);\n        }\n      } else {\n        if (!audioElement.paused) {\n          audioElement.pause();\n        }\n      }\n    });\n  }, [currentTime, timelineItems, getCurrentTimelineContent, isPlaying, volume, isMuted, createAudioElement, syncAudioTime, currentVideoSource]);\n  useEffect(() => {\n    if (isPlaying) {\n      intervalRef.current = setInterval(() => {\n        setCurrentTime(prev => {\n          const newTime = prev + 0.1;\n          if (newTime >= videoDuration) {\n            setIsPlaying(false);\n            return videoDuration;\n          }\n          return newTime;\n        });\n      }, 100);\n    } else {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    }\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, [isPlaying, videoDuration]);\n  useEffect(() => {\n    if (videoRef.current && currentVideoSource) {\n      const content = getCurrentTimelineContent();\n      if (content.mainVideo) {\n        const relativeTime = currentTime - content.mainVideo.startTime;\n        const timeDiff = Math.abs(videoRef.current.currentTime - relativeTime);\n        if (timeDiff > 0.5) {\n          videoRef.current.currentTime = Math.max(0, relativeTime);\n        }\n        if (isPlaying && videoRef.current.paused) {\n          videoRef.current.play().catch(console.error);\n        } else if (!isPlaying && !videoRef.current.paused) {\n          videoRef.current.pause();\n        }\n      }\n    }\n  }, [currentTime, currentVideoSource, getCurrentTimelineContent, isPlaying]);\n  useEffect(() => {\n    const currentAudioIds = new Set(timelineItems.filter(item => item.type === \"audio\").map(item => item.id));\n    audioElementsRef.current.forEach((audioElement, id) => {\n      if (!currentAudioIds.has(id)) {\n        audioElement.pause();\n        audioElement.src = '';\n        audioElementsRef.current.delete(id);\n      }\n    });\n  }, [timelineItems]);\n\n  // Очистка при размонтировании\n  useEffect(() => {\n    return () => {\n      stopAutoScroll();\n      // Очищаем все таймеры overlay info\n      if (window.overlayInfoTimers) {\n        Object.values(window.overlayInfoTimers).forEach(timer => clearTimeout(timer));\n        window.overlayInfoTimers = {};\n      }\n    };\n  }, [stopAutoScroll]);\n\n  // Обработка клавиатурных шорткатов\n  useEffect(() => {\n    const handleKeyDown = e => {\n      if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {\n        return;\n      }\n      if (e.key === 'Delete' || e.key === 'Backspace') {\n        e.preventDefault();\n        deleteSelectedItem();\n      }\n      if (e.ctrlKey && e.key === 'b') {\n        e.preventDefault();\n        splitTimelineItem();\n      }\n      if (e.ctrlKey && e.key === 'c') {\n        e.preventDefault();\n        copyTimelineItem();\n      }\n      if (e.ctrlKey && e.key === 'v') {\n        e.preventDefault();\n        pasteTimelineItem();\n      }\n      if (e.key === ' ' || e.code === 'Space') {\n        e.preventDefault();\n        setIsPlaying(prev => !prev);\n      }\n      if (e.key === 'ArrowLeft') {\n        e.preventDefault();\n        const step = e.ctrlKey ? 5 : e.shiftKey ? 1 : 0.1;\n        seekTo(Math.max(0, currentTime - step));\n      }\n      if (e.key === 'ArrowRight') {\n        e.preventDefault();\n        const step = e.ctrlKey ? 5 : e.shiftKey ? 1 : 0.1;\n        seekTo(Math.min(videoDuration, currentTime + step));\n      }\n      if (e.key === '=' || e.key === '+') {\n        e.preventDefault();\n        zoomIn();\n      }\n      if (e.key === '-') {\n        e.preventDefault();\n        zoomOut();\n      }\n      if (e.key === '0') {\n        e.preventDefault();\n        resetZoom();\n      }\n      if (e.key === '?' || e.shiftKey && e.key === '/') {\n        e.preventDefault();\n        setShowHelp(true);\n      }\n      if (e.key === 'Escape') {\n        e.preventDefault();\n        if (showHelp) {\n          setShowHelp(false);\n        } else if (selectedOverlay) {\n          setSelectedOverlay(null);\n        }\n      }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [selectedTimelineItem, copiedItem, currentTime, videoDuration, showHelp, selectedOverlay, deleteSelectedItem, splitTimelineItem, copyTimelineItem, pasteTimelineItem]);\n\n  // Обработка колесика мыши для зума\n  useEffect(() => {\n    const handleWheel = e => {\n      var _timelineRef$current;\n      if (e.ctrlKey && (_timelineRef$current = timelineRef.current) !== null && _timelineRef$current !== void 0 && _timelineRef$current.contains(e.target)) {\n        e.preventDefault();\n        if (e.deltaY < 0) {\n          zoomIn();\n        } else {\n          zoomOut();\n        }\n      }\n    };\n    document.addEventListener('wheel', handleWheel, {\n      passive: false\n    });\n    return () => document.removeEventListener('wheel', handleWheel);\n  }, []);\n  const handleVideoUpload = async event => {\n    const files = event.target.files ? Array.from(event.target.files) : [];\n    if (files.length === 0) return;\n    setIsUploading(true);\n    setUploadProgress(0);\n    try {\n      for (let i = 0; i < files.length; i++) {\n        const file = files[i];\n        setUploadProgress((i + 1) / files.length * 100);\n        await saveFileToStorage(file, 'videos');\n      }\n    } catch (error) {\n      console.error('Video upload error:', error);\n    } finally {\n      setIsUploading(false);\n      setUploadProgress(0);\n    }\n  };\n  const handleAudioUpload = async event => {\n    const files = event.target.files ? Array.from(event.target.files) : [];\n    if (files.length === 0) return;\n    setIsUploading(true);\n    setUploadProgress(0);\n    try {\n      for (let i = 0; i < files.length; i++) {\n        const file = files[i];\n        setUploadProgress((i + 1) / files.length * 100);\n        await saveFileToStorage(file, 'audios');\n      }\n    } catch (error) {\n      console.error('Audio upload error:', error);\n    } finally {\n      setIsUploading(false);\n      setUploadProgress(0);\n    }\n  };\n  const handleImageUpload = async event => {\n    const files = event.target.files ? Array.from(event.target.files) : [];\n    if (files.length === 0) return;\n    setIsUploading(true);\n    setUploadProgress(0);\n    try {\n      for (let i = 0; i < files.length; i++) {\n        const file = files[i];\n        setUploadProgress((i + 1) / files.length * 100);\n        await saveFileToStorage(file, 'images');\n      }\n    } catch (error) {\n      console.error('Image upload error:', error);\n    } finally {\n      setIsUploading(false);\n      setUploadProgress(0);\n    }\n  };\n  const addToTimeline = async (mediaItem, startTime = null, targetTrackId = null) => {\n    // Если это превью, загружаем оригинал\n    let finalUrl = mediaItem.url;\n    if (mediaItem.isPreview) {\n      try {\n        // Показываем индикатор загрузки\n        const loadingToast = document.createElement('div');\n        loadingToast.className = 'fixed top-4 right-4 bg-blue-500 text-white px-4 py-2 rounded-lg shadow-lg z-50';\n        loadingToast.textContent = `Loading ${mediaItem.name}...`;\n        document.body.appendChild(loadingToast);\n\n        // Получаем оригинальный файл из S3\n        const originalUrl = await getOriginalFileUrl(mediaItem.id);\n        if (originalUrl) {\n          finalUrl = originalUrl;\n        }\n\n        // Убираем индикатор загрузки\n        document.body.removeChild(loadingToast);\n      } catch (error) {\n        console.error('Failed to load original file:', error);\n        alert('Failed to load original file. Using preview instead.');\n      }\n    }\n    let trackType, trackId;\n    if (mediaItem.type === \"video\") {\n      trackType = targetTrackId && targetTrackId.startsWith('overlay') ? 'overlay' : 'main';\n      trackId = targetTrackId || 'main-video';\n    } else if (mediaItem.type === \"image\") {\n      trackType = 'overlay';\n      trackId = targetTrackId || 'overlay-1';\n    } else if (mediaItem.type === \"audio\") {\n      trackType = 'audio';\n      trackId = targetTrackId || 'audio-1';\n    }\n    const duration = mediaItem.duration || (mediaItem.type === \"image\" ? 5 : 10);\n    const finalStartTime = startTime !== null ? startTime : findNextAvailablePosition(trackId, duration);\n    const newTimelineItem = {\n      id: Date.now() + Math.random(),\n      mediaId: mediaItem.id,\n      type: mediaItem.type,\n      name: mediaItem.name,\n      url: finalUrl,\n      // Используем оригинальный URL\n      startTime: finalStartTime,\n      duration: duration,\n      trackId: trackId,\n      trackType: trackType,\n      volume: 1,\n      opacity: 1\n    };\n    setTimelineItems(prev => [...prev, newTimelineItem]);\n    const newEndTime = newTimelineItem.startTime + newTimelineItem.duration;\n    if (newEndTime > videoDuration) {\n      setVideoDuration(newEndTime + 10);\n    }\n  };\n  const addOverlayTrack = () => {\n    const newTrackId = `overlay-${Date.now()}`;\n    setTracks(prev => ({\n      ...prev,\n      overlays: [...prev.overlays, {\n        id: newTrackId,\n        name: `Overlay ${prev.overlays.length + 1}`,\n        type: 'overlay'\n      }]\n    }));\n  };\n  const addAudioTrack = () => {\n    const newTrackId = `audio-${Date.now()}`;\n    setTracks(prev => ({\n      ...prev,\n      audio: [...prev.audio, {\n        id: newTrackId,\n        name: `Audio ${prev.audio.length + 1}`,\n        type: 'audio'\n      }]\n    }));\n  };\n  const removeFromLibrary = async (itemId, type) => {\n    // Сначала удаляем с сервера\n    const success = await deleteMediaFromServer(itemId);\n    if (success) {\n      // Затем удаляем из локального состояния\n      setMediaLibrary(prev => ({\n        ...prev,\n        [type]: prev[type].filter(item => item.id !== itemId)\n      }));\n    } else {\n      alert('Failed to delete media file. Please try again.');\n    }\n  };\n  const handleTimelineClick = e => {\n    if (isDragging || isTimelineDragging || isResizing) return;\n    const rect = timelineScrollRef.current.getBoundingClientRect();\n    const clickX = e.clientX - rect.left + timelineScrollRef.current.scrollLeft;\n    const pixelsPerSecond = getPixelsPerSecond();\n    const clickTime = clickX / pixelsPerSecond;\n    seekTo(clickTime);\n  };\n  const handleDragStart = (e, mediaItem) => {\n    setDraggedItem(mediaItem);\n    setIsDragging(true);\n    e.dataTransfer.effectAllowed = \"copy\";\n    e.dataTransfer.setData(\"text/plain\", \"\");\n  };\n  const handleDragEnd = () => {\n    setDraggedItem(null);\n    setDropPreview(null);\n    setIsDragging(false);\n  };\n  const handleTimelineItemDragStart = (e, timelineItem) => {\n    if (isResizing) {\n      e.preventDefault();\n      return;\n    }\n    e.stopPropagation();\n    setDraggedTimelineItem(timelineItem);\n    setIsTimelineDragging(true);\n    const rect = timelineScrollRef.current.getBoundingClientRect();\n    const itemRect = e.target.getBoundingClientRect();\n    setDragOffset(e.clientX - itemRect.left + timelineScrollRef.current.scrollLeft);\n    e.dataTransfer.effectAllowed = \"move\";\n    e.dataTransfer.setData(\"text/plain\", \"\");\n  };\n  const handleTimelineItemDragEnd = () => {\n    setDraggedTimelineItem(null);\n    setDropPreview(null);\n    setIsTimelineDragging(false);\n    setDragOffset(0);\n    stopAutoScroll();\n  };\n  const handleDragOver = e => {\n    if (!draggedItem && !draggedTimelineItem) return;\n    e.preventDefault();\n    e.dataTransfer.dropEffect = draggedItem ? \"copy\" : \"move\";\n    if (draggedTimelineItem || isResizing) {\n      checkAutoScroll(e.clientX);\n    }\n    const timelineRect = timelineScrollRef.current.getBoundingClientRect();\n    const dragX = e.clientX - timelineRect.left + timelineScrollRef.current.scrollLeft - (draggedTimelineItem ? dragOffset : 0);\n    const pixelsPerSecond = getPixelsPerSecond();\n    const dropTime = Math.max(0, dragX / pixelsPerSecond);\n    const dragY = e.clientY - timelineRect.top + timelineScrollRef.current.scrollTop;\n    const trackHeight = 60;\n    const timeRulerHeight = 48;\n    const relativeY = dragY - timeRulerHeight;\n    const trackIndex = Math.floor(relativeY / trackHeight);\n    const allTracks = [...tracks.overlays, ...tracks.main, ...tracks.audio];\n    const targetTrack = allTracks[trackIndex];\n    if (draggedItem && targetTrack) {\n      // Новый элемент из библиотеки\n      const duration = draggedItem.duration || (draggedItem.type === \"image\" ? 5 : 10);\n      const insertResult = insertWithRipple(targetTrack.id, dropTime, duration);\n      setDropPreview({\n        time: insertResult.time,\n        duration: duration,\n        trackId: targetTrack.id,\n        trackType: targetTrack.type,\n        isValid: true,\n        shouldRipple: insertResult.shouldRipple,\n        affectedItems: insertResult.affectedItems || []\n      });\n    } else if (draggedTimelineItem && targetTrack) {\n      // Существующий элемент\n      const insertResult = insertWithRipple(targetTrack.id, dropTime, draggedTimelineItem.duration, draggedTimelineItem.id);\n      setDropPreview({\n        time: insertResult.time,\n        duration: draggedTimelineItem.duration,\n        trackId: targetTrack.id,\n        trackType: targetTrack.type,\n        isValid: true,\n        shouldRipple: insertResult.shouldRipple,\n        affectedItems: insertResult.affectedItems || []\n      });\n    }\n  };\n  const handleDrop = e => {\n    var _dropPreview$affected;\n    if (!draggedItem && !draggedTimelineItem || !dropPreview) return;\n    e.preventDefault();\n    stopAutoScroll();\n    console.log('Dropping with ripple:', {\n      dropPreview,\n      shouldRipple: dropPreview.shouldRipple,\n      affectedItems: ((_dropPreview$affected = dropPreview.affectedItems) === null || _dropPreview$affected === void 0 ? void 0 : _dropPreview$affected.length) || 0\n    });\n    if (dropPreview.isValid) {\n      if (draggedItem) {\n        var _dropPreview$affected2;\n        // Новый элемент из библиотеки\n        if (dropPreview.shouldRipple && ((_dropPreview$affected2 = dropPreview.affectedItems) === null || _dropPreview$affected2 === void 0 ? void 0 : _dropPreview$affected2.length) > 0) {\n          // Сначала сдвигаем существующие блоки\n          applyRippleEffect(dropPreview.affectedItems, dropPreview.duration);\n        }\n\n        // Добавляем новый элемент\n        addToTimeline(draggedItem, dropPreview.time, dropPreview.trackId);\n        console.log('Added with ripple effect:', dropPreview.shouldRipple);\n      } else if (draggedTimelineItem) {\n        var _dropPreview$affected3;\n        // Перемещение существующего элемента\n        if (dropPreview.shouldRipple && ((_dropPreview$affected3 = dropPreview.affectedItems) === null || _dropPreview$affected3 === void 0 ? void 0 : _dropPreview$affected3.length) > 0) {\n          // Сначала сдвигаем блоки, которые нужно освободить место\n          applyRippleEffect(dropPreview.affectedItems, draggedTimelineItem.duration);\n        }\n\n        // Перемещаем элемент\n        setTimelineItems(prev => prev.map(item => item.id === draggedTimelineItem.id ? {\n          ...item,\n          startTime: dropPreview.time,\n          trackId: dropPreview.trackId,\n          trackType: dropPreview.trackType\n        } : item));\n        console.log('Moved with ripple effect:', dropPreview.shouldRipple);\n        const newEndTime = dropPreview.time + draggedTimelineItem.duration;\n        if (newEndTime > videoDuration) {\n          setVideoDuration(newEndTime + 10);\n        }\n      }\n    }\n    setDropPreview(null);\n    setDraggedItem(null);\n    setDraggedTimelineItem(null);\n    setIsDragging(false);\n    setIsTimelineDragging(false);\n  };\n  const handleDragLeave = e => {\n    var _timelineRef$current2;\n    if (!((_timelineRef$current2 = timelineRef.current) !== null && _timelineRef$current2 !== void 0 && _timelineRef$current2.contains(e.relatedTarget))) {\n      setDropPreview(null);\n      stopAutoScroll();\n    }\n  };\n  const getTimelineItemStyle = item => {\n    const allTracks = [...tracks.overlays, ...tracks.main, ...tracks.audio];\n    const trackIndex = allTracks.findIndex(track => track.id === item.trackId);\n    const pixelsPerSecond = getPixelsPerSecond();\n    return {\n      left: `${item.startTime * pixelsPerSecond}px`,\n      width: `${item.duration * pixelsPerSecond}px`,\n      top: `${trackIndex * 60 + 10}px`\n    };\n  };\n  const getDropPreviewStyle = () => {\n    if (!dropPreview) return {};\n    const allTracks = [...tracks.overlays, ...tracks.main, ...tracks.audio];\n    const trackIndex = allTracks.findIndex(track => track.id === dropPreview.trackId);\n    const pixelsPerSecond = getPixelsPerSecond();\n    return {\n      left: `${dropPreview.time * pixelsPerSecond}px`,\n      width: `${dropPreview.duration * pixelsPerSecond}px`,\n      top: `${trackIndex * 60 + 10}px`\n    };\n  };\n  const getTrackColor = trackType => {\n    switch (trackType) {\n      case 'overlay':\n        return 'bg-purple-500 border-purple-400';\n      case 'main':\n        return 'bg-blue-500 border-blue-400';\n      case 'audio':\n        return 'bg-green-500 border-green-400';\n      default:\n        return 'bg-gray-500 border-gray-400';\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex h-screen w-full gap-4 p-4 bg-gray-100 overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(NotificationSystem, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1508,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-80 min-w-72 max-w-80 bg-white border-2 border-blue-200 flex flex-col rounded-2xl shadow-lg overflow-hidden flex-shrink-0\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-blue-50 px-4 py-3 border-b border-blue-100\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-bold text-blue-800 flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(Upload, {\n            size: 18,\n            className: \"mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1514,\n            columnNumber: 13\n          }, this), \"Media Library (Local MVP)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1513,\n          columnNumber: 11\n        }, this), !isStorageReady && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xs text-blue-600 mt-1\",\n          children: \"Initializing storage...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1518,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1512,\n        columnNumber: 9\n      }, this), storageInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-blue-100\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-3 gap-2 text-center mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm font-bold text-blue-600\",\n              children: [storageInfo.usage.videos, \"/\", storageInfo.limits.videos]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1527,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-gray-600\",\n              children: \"Videos\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1530,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1526,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm font-bold text-purple-600\",\n              children: [storageInfo.usage.images, \"/\", storageInfo.limits.images]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1533,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-gray-600\",\n              children: \"Images\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1536,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1532,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm font-bold text-green-600\",\n              children: [storageInfo.usage.audios, \"/\", storageInfo.limits.audios]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1539,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-gray-600\",\n              children: \"Audios\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1542,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1538,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1525,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between text-xs\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-1\",\n            children: [/*#__PURE__*/_jsxDEV(HardDrive, {\n              size: 12,\n              className: \"text-gray-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1548,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-600\",\n              children: [storageInfo.usage.totalSizeMB, \"MB used\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1549,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1547,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-1\",\n            children: [/*#__PURE__*/_jsxDEV(Clock, {\n              size: 12,\n              className: \"text-orange-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1552,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-orange-600\",\n              children: \"7 days retention\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1553,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1551,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1546,\n          columnNumber: 13\n        }, this), (storageInfo.usage.videos >= storageInfo.limits.videos * 0.8 || storageInfo.usage.images >= storageInfo.limits.images * 0.8 || storageInfo.usage.audios >= storageInfo.limits.audios * 0.8) && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded-lg\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n              size: 12,\n              className: \"text-yellow-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1563,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs text-yellow-700 font-medium\",\n              children: \"Approaching storage limits\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1564,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1562,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1561,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1524,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 pb-0\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex bg-gray-100 rounded-xl p-1\",\n          children: [{\n            id: \"videos\",\n            name: \"Videos\",\n            icon: Video\n          }, {\n            id: \"audios\",\n            name: \"Audio\",\n            icon: Music\n          }, {\n            id: \"images\",\n            name: \"Images\",\n            icon: Image\n          }].map(tab => {\n            const IconComponent = tab.icon;\n            const tabStorageInfo = storageInfo ? {\n              used: storageInfo.usage[tab.id],\n              limit: storageInfo.limits[tab.id]\n            } : null;\n            return /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setActiveTab(tab.id),\n              className: `flex-1 p-3 text-sm font-medium transition-all duration-200 rounded-lg relative ${activeTab === tab.id ? \"bg-white text-blue-600 shadow-sm\" : \"text-gray-600 hover:text-gray-800\"}`,\n              children: [/*#__PURE__*/_jsxDEV(IconComponent, {\n                size: 16,\n                className: \"mr-2 inline\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1596,\n                columnNumber: 19\n              }, this), tab.name, tabStorageInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `absolute -top-1 -right-1 w-4 h-4 rounded-full text-xs flex items-center justify-center ${tabStorageInfo.used >= tabStorageInfo.limit ? 'bg-red-500 text-white' : tabStorageInfo.used >= tabStorageInfo.limit * 0.8 ? 'bg-yellow-500 text-white' : 'bg-gray-300 text-gray-600'}`,\n                children: tabStorageInfo.used\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1599,\n                columnNumber: 21\n              }, this)]\n            }, tab.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1587,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1574,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1573,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            var _fileInputRef$current, _audioInputRef$curren, _imageInputRef$curren;\n            if (isUploading || !isStorageReady) return;\n            if (activeTab === \"videos\") (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();else if (activeTab === \"audios\") (_audioInputRef$curren = audioInputRef.current) === null || _audioInputRef$curren === void 0 ? void 0 : _audioInputRef$curren.click();else (_imageInputRef$curren = imageInputRef.current) === null || _imageInputRef$curren === void 0 ? void 0 : _imageInputRef$curren.click();\n          },\n          disabled: isUploading || !isStorageReady,\n          className: `w-full p-6 border-2 border-dashed rounded-2xl transition-all duration-200 text-center group ${isUploading || !isStorageReady ? \"border-gray-300 bg-gray-50 cursor-not-allowed\" : storageInfo && storageInfo.usage[activeTab] >= storageInfo.limits[activeTab] ? \"border-red-300 bg-red-50\" : \"border-gray-300 hover:border-blue-400 hover:bg-blue-50/50\"}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `w-12 h-12 bg-gray-100 rounded-xl flex items-center justify-center mx-auto mb-3 transition-colors ${isUploading ? \"bg-blue-100\" : \"group-hover:bg-blue-100\"}`,\n            children: isUploading ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1636,\n              columnNumber: 17\n            }, this) : !isStorageReady ? /*#__PURE__*/_jsxDEV(HardDrive, {\n              size: 20,\n              className: \"text-gray-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1638,\n              columnNumber: 17\n            }, this) : storageInfo && storageInfo.usage[activeTab] >= storageInfo.limits[activeTab] ? /*#__PURE__*/_jsxDEV(AlertTriangle, {\n              size: 20,\n              className: \"text-red-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1640,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(Upload, {\n              size: 20,\n              className: `text-gray-500 ${!isUploading && isStorageReady ? \"group-hover:text-blue-500\" : \"\"}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1642,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1632,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `text-sm font-medium transition-colors ${isUploading ? \"text-blue-600\" : !isStorageReady ? \"text-gray-500\" : storageInfo && storageInfo.usage[activeTab] >= storageInfo.limits[activeTab] ? \"text-red-600\" : \"text-gray-700 group-hover:text-blue-600\"}`,\n            children: isUploading ? `Uploading... ${Math.round(uploadProgress)}%` : !isStorageReady ? \"Initializing storage...\" : storageInfo && storageInfo.usage[activeTab] >= storageInfo.limits[activeTab] ? `Storage limit reached (${storageInfo.limits[activeTab]} max)` : `Upload ${activeTab === \"videos\" ? \"Video\" : activeTab === \"audios\" ? \"Audio\" : \"Images\"}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1648,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs text-gray-500 mt-1\",\n            children: isUploading ? \"Please wait while files are being saved locally\" : !isStorageReady ? \"Setting up local storage...\" : storageInfo && storageInfo.usage[activeTab] >= storageInfo.limits[activeTab] ? \"Delete some files to upload more\" : `${activeTab === \"videos\" ? \"MP4, AVI, MOV up to 100MB\" : activeTab === \"audios\" ? \"MP3, WAV, M4A up to 100MB\" : \"JPG, PNG, GIF up to 100MB\"} • Stored locally for 7 days`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1672,\n            columnNumber: 13\n          }, this), isUploading && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-full bg-gray-200 rounded-full h-2 mt-3\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-blue-500 h-2 rounded-full transition-all duration-300\",\n              style: {\n                width: `${uploadProgress}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1690,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1689,\n            columnNumber: 15\n          }, this), isStorageReady && storageInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2 text-xs\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `font-medium ${storageInfo.usage[activeTab] >= storageInfo.limits[activeTab] * 0.8 ? \"text-red-600\" : \"text-green-600\"}`,\n              children: [storageInfo.limits[activeTab] - storageInfo.usage[activeTab], \" slots remaining\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1700,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1699,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1616,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1615,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: fileInputRef,\n        type: \"file\",\n        accept: \"video/*\",\n        multiple: true,\n        onChange: handleVideoUpload,\n        className: \"hidden\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1712,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: audioInputRef,\n        type: \"file\",\n        accept: \"audio/*\",\n        multiple: true,\n        onChange: handleAudioUpload,\n        className: \"hidden\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1720,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: imageInputRef,\n        type: \"file\",\n        accept: \"image/*\",\n        multiple: true,\n        onChange: handleImageUpload,\n        className: \"hidden\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1728,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 overflow-y-auto px-4 pb-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2\",\n          children: [mediaLibrary[activeTab].map(item => {\n            var _item$metadata, _item$metadata2;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              draggable: \"true\",\n              onDragStart: e => handleDragStart(e, item),\n              onDragEnd: handleDragEnd,\n              className: `flex items-center p-3 bg-gray-50 rounded-xl hover:bg-gray-100 hover:shadow-sm transition-all duration-200 cursor-grab active:cursor-grabbing group relative ${(draggedItem === null || draggedItem === void 0 ? void 0 : draggedItem.id) === item.id ? \"opacity-50\" : \"\"}`,\n              onClick: () => addToTimeline(item),\n              children: [item.isPreview && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute top-1 right-1 bg-blue-500 text-white text-xs px-2 py-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity\",\n                children: \"Preview\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1752,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-12 h-12 bg-white rounded-xl flex items-center justify-center mr-3 shadow-sm group-hover:shadow relative overflow-hidden\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"absolute top-0 left-0 w-2 h-2 rounded-br-lg bg-gradient-to-br from-blue-500 to-indigo-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1759,\n                  columnNumber: 19\n                }, this), activeTab === \"videos\" && /*#__PURE__*/_jsxDEV(Video, {\n                  size: 20,\n                  className: \"text-blue-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1762,\n                  columnNumber: 21\n                }, this), activeTab === \"audios\" && /*#__PURE__*/_jsxDEV(Music, {\n                  size: 20,\n                  className: \"text-green-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1765,\n                  columnNumber: 21\n                }, this), activeTab === \"images\" && /*#__PURE__*/_jsxDEV(Image, {\n                  size: 20,\n                  className: \"text-purple-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1768,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1757,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1 min-w-0\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm font-medium text-gray-900 truncate\",\n                  children: item.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1772,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-2 text-xs text-gray-500\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: activeTab === \"images\" ? `${((_item$metadata = item.metadata) === null || _item$metadata === void 0 ? void 0 : _item$metadata.width) || '?'}×${((_item$metadata2 = item.metadata) === null || _item$metadata2 === void 0 ? void 0 : _item$metadata2.height) || '?'}` : formatTime(item.duration || 0)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1776,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"\\u2022\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1781,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [(item.size / (1024 * 1024)).toFixed(1), \"MB\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1782,\n                    columnNumber: 21\n                  }, this), item.isPreview && /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"\\u2022\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1785,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-blue-600 font-medium\",\n                      children: \"Cloud stored\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1786,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1775,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1771,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: e => {\n                  e.stopPropagation();\n                  removeFromLibrary(item.id, activeTab);\n                },\n                className: \"opacity-0 group-hover:opacity-100 p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200\",\n                children: /*#__PURE__*/_jsxDEV(Trash2, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1798,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1791,\n                columnNumber: 17\n              }, this)]\n            }, item.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1740,\n              columnNumber: 15\n            }, this);\n          }), mediaLibrary[activeTab].length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center py-8\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center mx-auto mb-3\",\n              children: [activeTab === \"videos\" && /*#__PURE__*/_jsxDEV(Video, {\n                size: 24,\n                className: \"text-gray-400\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1805,\n                columnNumber: 46\n              }, this), activeTab === \"audios\" && /*#__PURE__*/_jsxDEV(Music, {\n                size: 24,\n                className: \"text-gray-400\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1806,\n                columnNumber: 46\n              }, this), activeTab === \"images\" && /*#__PURE__*/_jsxDEV(Image, {\n                size: 24,\n                className: \"text-gray-400\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1807,\n                columnNumber: 46\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1804,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-500\",\n              children: [\"No \", activeTab, \" uploaded yet\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1809,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-400 mt-1\",\n              children: \"Files are stored in cloud for better performance\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1810,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-3 text-xs text-blue-600 bg-blue-50 px-3 py-2 rounded-lg inline-flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-2 h-2 bg-blue-500 rounded-full\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1814,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Hybrid storage: Local previews + Cloud originals\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1815,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1813,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1803,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1738,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1737,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1511,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex flex-col gap-4 min-w-0 overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        ref: videoContainerRef,\n        className: \"flex-1 bg-black rounded-2xl relative overflow-hidden shadow-sm min-h-0\",\n        title: \"Video Preview - Click overlays to select, drag to move, Ctrl+scroll to resize, use opacity slider\",\n        children: [currentVideoSource ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative w-full h-full\",\n          onClick: e => {\n            // Снимаем выделение overlay при клике на пустое место\n            if (e.target === e.currentTarget) {\n              setSelectedOverlay(null);\n            }\n          },\n          children: [getCurrentTimelineContent().mainVideo ? /*#__PURE__*/_jsxDEV(\"video\", {\n            ref: videoRef,\n            src: currentVideoSource,\n            className: \"w-full h-full object-contain rounded-2xl\",\n            muted: isMuted\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1842,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n            src: currentVideoSource,\n            alt: \"Timeline content\",\n            className: \"w-full h-full object-contain rounded-2xl\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1849,\n            columnNumber: 17\n          }, this), getCurrentTimelineContent().overlays.map((item, index) => {\n            const transform = getOverlayTransform(item.id);\n            const isSelected = (selectedOverlay === null || selectedOverlay === void 0 ? void 0 : selectedOverlay.id) === item.id;\n            const isDraggingThis = isDraggingOverlay && isSelected;\n            const isResizingThis = isResizingOverlay && isSelected;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `absolute select-none ${isSelected ? 'ring-2 ring-blue-400 ring-opacity-75 shadow-xl' : 'hover:ring-2 hover:ring-blue-300 hover:ring-opacity-50'} ${isDraggingThis ? 'cursor-grabbing z-50' : isResizingThis ? 'cursor-nw-resize' : 'cursor-grab hover:shadow-lg'}`,\n              style: {\n                left: `${200 + transform.x}px`,\n                top: `${50 + index * 120 + transform.y}px`,\n                width: `${128 * transform.scale}px`,\n                height: `${96 * transform.scale}px`,\n                opacity: transform.opacity,\n                zIndex: isSelected ? 1000 : 10 + index,\n                transform: isDraggingThis ? 'scale(1.02)' : 'scale(1)',\n                transition: isDraggingThis || isResizingThis ? 'none' : 'transform 0.2s ease, box-shadow 0.2s ease'\n              },\n              onMouseDown: e => handleOverlayMouseDown(e, {\n                ...item,\n                index\n              }),\n              onWheel: e => handleOverlayWheel(e, item.id),\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `relative w-full h-full border-2 rounded-lg overflow-hidden shadow-lg group ${isSelected ? 'border-blue-400' : 'border-white hover:border-blue-300'}`,\n                style: {\n                  transition: isDraggingThis || isResizingThis ? 'none' : 'border-color 0.2s ease'\n                },\n                children: [item.type === 'video' ? /*#__PURE__*/_jsxDEV(\"video\", {\n                  src: item.url,\n                  className: \"w-full h-full object-cover pointer-events-none\",\n                  muted: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1888,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: item.url,\n                  alt: item.name,\n                  className: \"w-full h-full object-cover pointer-events-none\",\n                  draggable: false\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1894,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `absolute inset-0 bg-blue-500 bg-opacity-0 hover:bg-opacity-10 ${isSelected ? 'bg-opacity-10' : ''}`,\n                  style: {\n                    transition: isDraggingThis || isResizingThis ? 'none' : 'background-color 0.2s ease'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1903,\n                  columnNumber: 23\n                }, this), isSelected && /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `resize-handle absolute -top-2 -left-2 w-4 h-4 bg-blue-500 rounded-full cursor-nw-resize opacity-90 hover:opacity-100 hover:scale-125 shadow-md border-2 border-white ${isResizingThis && resizeOverlayHandle === 'nw' ? 'scale-150 bg-red-500' : ''}`,\n                    onMouseDown: e => handleOverlayResizeStart(e, item, 'nw'),\n                    style: {\n                      transition: isDraggingThis || isResizingThis ? 'none' : 'all 0.2s ease'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1913,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `resize-handle absolute -top-2 -right-2 w-4 h-4 bg-blue-500 rounded-full cursor-ne-resize opacity-90 hover:opacity-100 hover:scale-125 shadow-md border-2 border-white ${isResizingThis && resizeOverlayHandle === 'ne' ? 'scale-150 bg-red-500' : ''}`,\n                    onMouseDown: e => handleOverlayResizeStart(e, item, 'ne'),\n                    style: {\n                      transition: isDraggingThis || isResizingThis ? 'none' : 'all 0.2s ease'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1922,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `resize-handle absolute -bottom-2 -left-2 w-4 h-4 bg-blue-500 rounded-full cursor-sw-resize opacity-90 hover:opacity-100 hover:scale-125 shadow-md border-2 border-white ${isResizingThis && resizeOverlayHandle === 'sw' ? 'scale-150 bg-red-500' : ''}`,\n                    onMouseDown: e => handleOverlayResizeStart(e, item, 'sw'),\n                    style: {\n                      transition: isDraggingThis || isResizingThis ? 'none' : 'all 0.2s ease'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1931,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `resize-handle absolute -bottom-2 -right-2 w-4 h-4 bg-blue-500 rounded-full cursor-se-resize opacity-90 hover:opacity-100 hover:scale-125 shadow-md border-2 border-white ${isResizingThis && resizeOverlayHandle === 'se' ? 'scale-150 bg-red-500' : ''}`,\n                    onMouseDown: e => handleOverlayResizeStart(e, item, 'se'),\n                    style: {\n                      transition: isDraggingThis || isResizingThis ? 'none' : 'all 0.2s ease'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1940,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-2 h-2 bg-blue-500 rounded-full opacity-60 pointer-events-none\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1951,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"absolute -bottom-12 left-0 right-0 bg-black/80 backdrop-blur-sm rounded-lg px-3 py-2 border border-white/20 shadow-lg\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center space-x-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-white text-xs font-medium min-w-fit\",\n                        children: \"Opacity:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1956,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"range\",\n                        min: \"0.1\",\n                        max: \"1\",\n                        step: \"0.05\",\n                        value: transform.opacity,\n                        onChange: e => updateOverlayTransform(item.id, {\n                          opacity: parseFloat(e.target.value)\n                        }),\n                        className: \"flex-1 h-2 accent-blue-500 cursor-pointer\",\n                        onMouseDown: e => e.stopPropagation()\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1957,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-white text-xs min-w-8 text-right font-mono\",\n                        children: [Math.round(transform.opacity * 100), \"%\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1967,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1955,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1954,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `absolute top-1 left-1 bg-black/70 text-white text-xs px-2 py-1 rounded pointer-events-none transition-opacity duration-300 ${isSelected && (isDraggingThis || isResizingThis || showOverlayInfo[item.id]) ? 'opacity-100' : isSelected ? 'opacity-0 group-hover:opacity-100' : 'opacity-0 group-hover:opacity-100'}`,\n                  style: {\n                    transition: isDraggingThis || isResizingThis ? 'none' : 'opacity 0.3s ease'\n                  },\n                  children: [item.name, \" \\u2022 \", Math.round(transform.scale * 100), \"% \\u2022 \", Math.round(transform.opacity * 100), \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1976,\n                  columnNumber: 23\n                }, this), isSelected && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"absolute -top-0.5 -left-0.5 -right-0.5 -bottom-0.5 border-2 border-blue-400 rounded-lg pointer-events-none animate-pulse\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1991,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1881,\n                columnNumber: 21\n              }, this)\n            }, item.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1863,\n              columnNumber: 19\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1832,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full h-full flex items-center justify-center text-white\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-20 h-20 bg-gray-800 rounded-2xl flex items-center justify-center mx-auto mb-4\",\n              children: /*#__PURE__*/_jsxDEV(Film, {\n                size: 40,\n                className: \"opacity-50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2002,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2001,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xl opacity-75 font-medium\",\n              children: \"No content at current time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2004,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm opacity-50 mb-4\",\n              children: \"Drag media to timeline tracks to start editing\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2007,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs opacity-40 space-y-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\uD83D\\uDCA1 Overlays are interactive \\u2022 Ripple mode enabled\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2011,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Press \", /*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-1 py-0.5 bg-gray-700 rounded text-xs\",\n                  children: \"?\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2012,\n                  columnNumber: 28\n                }, this), \" for help & shortcuts\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2012,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2010,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2000,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1999,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute bottom-6 left-1/2 transform -translate-x-1/2 bg-black/60 backdrop-blur-md rounded-2xl p-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => seekTo(Math.max(0, currentTime - 10)),\n              className: \"text-white hover:text-blue-400 transition-colors p-1 rounded-lg hover:bg-white/10\",\n              title: \"Skip back 10 seconds\",\n              children: /*#__PURE__*/_jsxDEV(SkipBack, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2025,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2020,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handlePlayPause,\n              className: \"w-12 h-12 bg-white/20 hover:bg-white/30 rounded-2xl flex items-center justify-center text-white transition-all hover:scale-105\",\n              title: \"Play/Pause (Space)\",\n              children: isPlaying ? /*#__PURE__*/_jsxDEV(Pause, {\n                size: 24\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2032,\n                columnNumber: 30\n              }, this) : /*#__PURE__*/_jsxDEV(Play, {\n                size: 24\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2032,\n                columnNumber: 52\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2027,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => seekTo(Math.min(videoDuration, currentTime + 10)),\n              className: \"text-white hover:text-blue-400 transition-colors p-1 rounded-lg hover:bg-white/10\",\n              title: \"Skip forward 10 seconds\",\n              children: /*#__PURE__*/_jsxDEV(SkipForward, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2041,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2034,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setIsMuted(!isMuted),\n                className: \"text-white hover:text-blue-400 transition-colors p-1 rounded-lg hover:bg-white/10\",\n                title: \"Toggle mute\",\n                children: isMuted ? /*#__PURE__*/_jsxDEV(VolumeX, {\n                  size: 20\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2049,\n                  columnNumber: 30\n                }, this) : /*#__PURE__*/_jsxDEV(Volume2, {\n                  size: 20\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2049,\n                  columnNumber: 54\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2044,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"range\",\n                min: \"0\",\n                max: \"1\",\n                step: \"0.1\",\n                value: volume,\n                onChange: e => setVolume(parseFloat(e.target.value)),\n                className: \"w-24 accent-blue-500\",\n                title: \"Volume control\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2051,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2043,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-white text-sm font-medium min-w-0\",\n              title: \"Current time / Total duration\",\n              children: [formatTime(currentTime), \" / \", formatTime(videoDuration)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2062,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2019,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2018,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1826,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `h-80 bg-white rounded-2xl shadow-sm border-2 transition-all duration-200 overflow-hidden flex flex-col flex-shrink-0 ${isDragging || isTimelineDragging || isResizing ? \"border-blue-400 bg-blue-50/20\" : \"border-gray-200\"}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-50 p-4 border-b border-gray-200 space-y-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"text-gray-800 font-semibold flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(Film, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2080,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Timeline Pro\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2081,\n                columnNumber: 17\n              }, this), isDragging && dropPreview && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-green-600\",\n                children: [\"- Adding \\\"\", draggedItem === null || draggedItem === void 0 ? void 0 : draggedItem.name, \"\\\" \", dropPreview.shouldRipple ? '⚡ ripple' : '📍 exact']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2083,\n                columnNumber: 19\n              }, this), isTimelineDragging && dropPreview && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-blue-600\",\n                children: [\"- Moving \\\"\", draggedTimelineItem === null || draggedTimelineItem === void 0 ? void 0 : draggedTimelineItem.name, \"\\\" \", dropPreview.shouldRipple ? '⚡ push blocks' : '📍 exact']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2088,\n                columnNumber: 19\n              }, this), isResizing && resizeItem && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-orange-600\",\n                children: [\"- Trimming \\\"\", resizeItem.name, \"\\\" (\", resizeHandle, \" edge)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2093,\n                columnNumber: 19\n              }, this), copiedItem && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-blue-600 text-sm\",\n                children: [\"- \\\"\", copiedItem.name, \"\\\" copied (Ctrl+V to paste)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2098,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2079,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setShowHelp(true),\n                className: \"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-xl transition-all duration-200\",\n                title: \"\\uD83D\\uDCD6 Help & Shortcuts Guide - Learn all controls and hotkeys (Press ? key)\",\n                children: /*#__PURE__*/_jsxDEV(HelpCircle, {\n                  size: 18\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2110,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2105,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2 bg-white rounded-xl p-2 border border-gray-200\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: zoomOut,\n                  className: \"p-1 text-gray-600 hover:text-blue-600 transition-colors\",\n                  title: \"Zoom Out (-)\",\n                  children: /*#__PURE__*/_jsxDEV(ZoomOut, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2119,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2114,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs text-gray-500 min-w-12 text-center\",\n                  children: [(timelineZoom * 100).toFixed(0), \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2121,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: zoomIn,\n                  className: \"p-1 text-gray-600 hover:text-blue-600 transition-colors\",\n                  title: \"Zoom In (+), or Ctrl+Wheel\",\n                  children: /*#__PURE__*/_jsxDEV(ZoomIn, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2129,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2124,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: resetZoom,\n                  className: \"p-1 text-gray-600 hover:text-blue-600 transition-colors\",\n                  title: \"Reset Zoom (0)\",\n                  children: /*#__PURE__*/_jsxDEV(RotateCcw, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2136,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2131,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2113,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2104,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2078,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-6\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: addOverlayTrack,\n                  className: \"p-2 text-purple-600 hover:text-purple-800 hover:bg-purple-50 rounded-xl transition-all duration-200\",\n                  title: \"Add Overlay Track\",\n                  children: /*#__PURE__*/_jsxDEV(Plus, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2150,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2145,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: addAudioTrack,\n                  className: \"p-2 text-green-600 hover:text-green-800 hover:bg-green-50 rounded-xl transition-all duration-200\",\n                  title: \"Add Audio Track\",\n                  children: /*#__PURE__*/_jsxDEV(Music, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2157,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2152,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: splitTimelineItem,\n                  disabled: !selectedTimelineItem,\n                  className: `p-2 rounded-xl transition-all duration-200 ${selectedTimelineItem ? \"text-red-600 hover:text-red-800 hover:bg-red-50\" : \"text-gray-400 cursor-not-allowed\"}`,\n                  title: \"Split Selected Item (Ctrl+B) - Cuts item at current time\",\n                  children: /*#__PURE__*/_jsxDEV(Scissors, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2169,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2159,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: copyTimelineItem,\n                  disabled: !selectedTimelineItem,\n                  className: `p-2 rounded-xl transition-all duration-200 ${selectedTimelineItem ? \"text-blue-600 hover:text-blue-800 hover:bg-blue-50\" : \"text-gray-400 cursor-not-allowed\"}`,\n                  title: \"Copy Selected Item (Ctrl+C) - Copy item to clipboard\",\n                  children: /*#__PURE__*/_jsxDEV(Copy, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2181,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2171,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: deleteSelectedItem,\n                  disabled: !selectedTimelineItem,\n                  className: `p-2 rounded-xl transition-all duration-200 ${selectedTimelineItem ? \"text-red-600 hover:text-red-800 hover:bg-red-50\" : \"text-gray-400 cursor-not-allowed\"}`,\n                  title: \"Delete Selected Item (Del/Backspace) - Remove from timeline\",\n                  children: /*#__PURE__*/_jsxDEV(Trash2, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2193,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2183,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2144,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2143,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2142,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2077,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 flex min-h-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-48 bg-gray-50 border-r border-gray-200 flex-shrink-0 flex flex-col\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-12 border-b border-gray-200 flex-shrink-0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2202,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: trackLabelsRef,\n              className: \"flex-1 overflow-y-auto overflow-x-hidden\",\n              onScroll: handleTrackLabelsScroll,\n              children: [tracks.overlays.map(track => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"h-15 flex items-center px-4 border-b border-gray-100 text-sm font-medium text-purple-700 bg-purple-50 flex-shrink-0\",\n                style: {\n                  height: '60px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(Layers, {\n                  size: 16,\n                  className: \"mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2215,\n                  columnNumber: 21\n                }, this), track.name]\n              }, track.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2210,\n                columnNumber: 19\n              }, this)), tracks.main.map(track => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"h-15 flex items-center px-4 border-b border-gray-100 text-sm font-medium text-blue-700 bg-blue-50 flex-shrink-0\",\n                style: {\n                  height: '60px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(Video, {\n                  size: 16,\n                  className: \"mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2226,\n                  columnNumber: 21\n                }, this), track.name]\n              }, track.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2221,\n                columnNumber: 19\n              }, this)), tracks.audio.map(track => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"h-15 flex items-center px-4 border-b border-gray-100 text-sm font-medium text-green-700 bg-green-50 flex-shrink-0\",\n                style: {\n                  height: '60px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(Music, {\n                  size: 16,\n                  className: \"mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2237,\n                  columnNumber: 21\n                }, this), track.name]\n              }, track.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2232,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2204,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2201,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: el => {\n              timelineRef.current = el;\n              timelineScrollRef.current = el;\n            },\n            className: \"flex-1 relative overflow-auto bg-white\",\n            onScroll: handleTrackAreaScroll,\n            onDragOver: handleDragOver,\n            onDrop: handleDrop,\n            onDragLeave: handleDragLeave,\n            style: {\n              overflowX: 'auto',\n              overflowY: 'auto',\n              scrollbarWidth: 'thin'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: `${getTimelineWidth()}px`,\n                minHeight: '100%',\n                position: 'relative'\n              },\n              onClick: handleTimelineClick,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"h-12 bg-gray-50 border-b border-gray-200 relative flex-shrink-0\",\n                children: [Array.from({\n                  length: Math.ceil(videoDuration * timelineZoom / 5) + 1\n                }, (_, i) => {\n                  const timeValue = i * 5 / timelineZoom;\n                  const pixelsPerSecond = getPixelsPerSecond();\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"absolute top-0 h-full border-l border-gray-300\",\n                    style: {\n                      left: `${timeValue * pixelsPerSecond}px`\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-xs text-gray-600 ml-2 mt-2 inline-block font-medium\",\n                      children: formatTime(timeValue)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2278,\n                      columnNumber: 25\n                    }, this)\n                  }, i, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2273,\n                    columnNumber: 23\n                  }, this);\n                }), timelineZoom > 2 && Array.from({\n                  length: Math.ceil(videoDuration * timelineZoom) + 1\n                }, (_, i) => {\n                  const timeValue = i / timelineZoom;\n                  const pixelsPerSecond = getPixelsPerSecond();\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"absolute top-8 w-0 h-4 border-l border-gray-200\",\n                    style: {\n                      left: `${timeValue * pixelsPerSecond}px`\n                    }\n                  }, `sub-${i}`, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2289,\n                    columnNumber: 23\n                  }, this);\n                }), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"absolute top-0 w-0.5 h-full bg-red-500 z-20 shadow-sm\",\n                  style: {\n                    left: `${currentTime * getPixelsPerSecond()}px`\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2297,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2268,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative flex-1\",\n                style: {\n                  height: `${(tracks.overlays.length + tracks.main.length + tracks.audio.length) * 60}px`,\n                  minHeight: '100%'\n                },\n                children: [timelineItems.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `absolute h-10 rounded-lg border-2 cursor-grab active:cursor-grabbing transition-all shadow-sm hover:shadow-md group ${getTrackColor(item.trackType)} ${(selectedTimelineItem === null || selectedTimelineItem === void 0 ? void 0 : selectedTimelineItem.id) === item.id ? \"ring-2 ring-blue-300\" : \"\"} ${(draggedTimelineItem === null || draggedTimelineItem === void 0 ? void 0 : draggedTimelineItem.id) === item.id ? \"opacity-50 z-30\" : \"\"} ${(copiedItem === null || copiedItem === void 0 ? void 0 : copiedItem.id) === item.id ? \"ring-2 ring-green-300 ring-dashed\" : \"\"}`,\n                  style: getTimelineItemStyle(item),\n                  onClick: e => {\n                    e.stopPropagation();\n                    setSelectedTimelineItem(item);\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"absolute left-0 top-0 w-3 h-full cursor-ew-resize opacity-0 group-hover:opacity-100 bg-white/50 rounded-l-lg z-10 flex items-center justify-center\",\n                    onMouseDown: e => handleResizeStart(e, item, 'left'),\n                    title: \"Trim start - Drag to adjust start time\",\n                    style: {\n                      background: 'linear-gradient(to right, rgba(255,255,255,0.8), transparent)'\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-0.5 h-6 bg-white rounded-full opacity-80\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2336,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2330,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    draggable: \"true\",\n                    onDragStart: e => handleTimelineItemDragStart(e, item),\n                    onDragEnd: handleTimelineItemDragEnd,\n                    className: \"p-2 text-white text-xs truncate font-medium flex items-center h-full mx-3 cursor-grab active:cursor-grabbing\",\n                    title: \"Drag to move item on timeline - Ripple mode: pushes other blocks\",\n                    children: [item.name, (copiedItem === null || copiedItem === void 0 ? void 0 : copiedItem.id) === item.id && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"ml-2 text-green-200\",\n                      children: \"\\uD83D\\uDCCB\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2348,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2339,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"absolute right-0 top-0 w-3 h-full cursor-ew-resize opacity-0 group-hover:opacity-100 bg-white/50 rounded-r-lg z-10 flex items-center justify-center\",\n                    onMouseDown: e => handleResizeStart(e, item, 'right'),\n                    title: \"Trim end - Drag to adjust duration\",\n                    style: {\n                      background: 'linear-gradient(to left, rgba(255,255,255,0.8), transparent)'\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-0.5 h-6 bg-white rounded-full opacity-80\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2358,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2352,\n                    columnNumber: 23\n                  }, this)]\n                }, item.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2313,\n                  columnNumber: 21\n                }, this)), dropPreview && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `absolute h-10 rounded-lg border-2 transition-all ${dropPreview.isValid ? dropPreview.isExact ? `${getTrackColor(dropPreview.trackType)} bg-opacity-60 border-solid` : `${getTrackColor(dropPreview.trackType)} bg-opacity-40 border-dashed animate-pulse` : \"bg-red-300 border-red-500 border-dashed\"}`,\n                  style: getDropPreviewStyle(),\n                  children: dropPreview.isValid && !dropPreview.isExact && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-center h-full text-white text-xs font-bold\",\n                    children: \"\\uD83E\\uDDF2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2375,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2364,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2305,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2260,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2244,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2200,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2070,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1824,\n      columnNumber: 7\n    }, this), showHelp && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-y-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 border-b border-gray-200 flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl font-bold text-gray-800 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(HelpCircle, {\n              size: 24,\n              className: \"mr-3 text-blue-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2394,\n              columnNumber: 17\n            }, this), \"CapCut Pro - Help & Shortcuts\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2393,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowHelp(false),\n            className: \"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-xl transition-all\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2401,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2397,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2392,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-semibold text-gray-800 mb-3 flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(Film, {\n                size: 18,\n                className: \"mr-2 text-blue-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2409,\n                columnNumber: 19\n              }, this), \"Timeline Controls\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2408,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 gap-3 text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Drag center:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2414,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Move item\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2415,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2413,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Drag edges:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2418,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Trim duration\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2419,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2417,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Auto ripple:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2422,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Push other blocks\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2423,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2421,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Ctrl + Wheel:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2426,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Zoom timeline\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2427,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2425,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2412,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2407,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-semibold text-gray-800 mb-3 flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(Layers, {\n                size: 18,\n                className: \"mr-2 text-purple-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2435,\n                columnNumber: 19\n              }, this), \"Video Overlays (CapCut Style)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2434,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 gap-3 text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Click overlay:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2440,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Select & show controls\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2441,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2439,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Drag anywhere:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2444,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Move position\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2445,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2443,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Drag corner dots:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2448,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Resize overlay\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2449,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2447,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Ctrl + Scroll:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2452,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Smooth zoom\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2453,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2451,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Opacity slider:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2456,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"0-100% transparency\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2457,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2455,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Auto bounds:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2460,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Stays in view area\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2461,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2459,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2438,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2433,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-semibold text-gray-800 mb-3 flex items-center\",\n              children: \"\\u2328\\uFE0F Keyboard Shortcuts\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2468,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 gap-3 text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-2 py-1 bg-gray-100 rounded text-xs font-mono\",\n                  children: \"Space\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2473,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Play / Pause\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2474,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2472,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-2 py-1 bg-gray-100 rounded text-xs font-mono\",\n                  children: \"\\u2190 \\u2192\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2477,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Seek (0.1s)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2478,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2476,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-2 py-1 bg-gray-100 rounded text-xs font-mono\",\n                  children: \"Shift + \\u2190 \\u2192\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2481,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Seek (1s)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2482,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2480,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-2 py-1 bg-gray-100 rounded text-xs font-mono\",\n                  children: \"Ctrl + \\u2190 \\u2192\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2485,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Seek (5s)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2486,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2484,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-2 py-1 bg-gray-100 rounded text-xs font-mono\",\n                  children: \"Ctrl + B\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2489,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Split item\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2490,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2488,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-2 py-1 bg-gray-100 rounded text-xs font-mono\",\n                  children: \"Ctrl + C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2493,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Copy item\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2494,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2492,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-2 py-1 bg-gray-100 rounded text-xs font-mono\",\n                  children: \"Ctrl + V\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2497,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Paste item\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2498,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2496,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-2 py-1 bg-gray-100 rounded text-xs font-mono\",\n                  children: \"Del\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2501,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Delete item\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2502,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2500,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-2 py-1 bg-gray-100 rounded text-xs font-mono\",\n                  children: \"+ -\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2505,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Zoom in/out\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2506,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2504,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                  className: \"px-2 py-1 bg-gray-100 rounded text-xs font-mono\",\n                  children: \"0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2509,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: \"Reset zoom\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2510,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2508,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2471,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2467,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-semibold text-gray-800 mb-3 flex items-center\",\n              children: \"\\uD83D\\uDCA1 Pro Tips\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2517,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"space-y-2 text-sm text-gray-600\",\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"flex items-start\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"inline-block w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3 flex-shrink-0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2522,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Drag media from library directly to timeline tracks for quick editing\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2523,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2521,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"flex items-start\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"inline-block w-2 h-2 bg-purple-500 rounded-full mt-2 mr-3 flex-shrink-0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2526,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Overlays can be dragged anywhere on video area - they auto-fit within bounds\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2527,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2525,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"flex items-start\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"inline-block w-2 h-2 bg-orange-500 rounded-full mt-2 mr-3 flex-shrink-0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2530,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Resize handles appear when overlay selected - drag corners for proportional scaling\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2531,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2529,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"flex items-start\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"inline-block w-2 h-2 bg-green-500 rounded-full mt-2 mr-3 flex-shrink-0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2534,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Ripple mode automatically pushes blocks when inserting new content\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2535,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2533,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"flex items-start\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"inline-block w-2 h-2 bg-red-500 rounded-full mt-2 mr-3 flex-shrink-0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2538,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Use Ctrl+scroll over overlays for precise size control like in CapCut\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2539,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2537,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2520,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2516,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2405,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 border-t border-gray-200 bg-gray-50 rounded-b-2xl\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-center text-sm text-gray-500\",\n            children: [\"\\uD83C\\uDFAC Made with CapCut Pro styling \\u2022 Press \", /*#__PURE__*/_jsxDEV(\"kbd\", {\n              className: \"px-1 py-0.5 bg-white rounded text-xs font-mono border\",\n              children: \"?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2547,\n              columnNumber: 57\n            }, this), \" or click help icon anytime\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2546,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2545,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2391,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2390,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1506,\n    columnNumber: 5\n  }, this);\n};\n_s(VideoEditor, \"Zrjs+kneMyLAsbkm0XLwok03bNA=\");\n_c = VideoEditor;\nexport default VideoEditor;\nvar _c;\n$RefreshReg$(_c, \"VideoEditor\");","map":{"version":3,"names":["useState","useRef","useEffect","useCallback","MediaStorage","NotificationSystem","showNotification","Upload","Play","Pause","Volume2","Video","Music","SkipBack","SkipForward","VolumeX","Copy","Trash2","Scissors","Image","Film","Plus","Layers","ZoomIn","ZoomOut","RotateCcw","HelpCircle","X","HardDrive","Clock","AlertTriangle","jsxDEV","_jsxDEV","Fragment","_Fragment","VideoEditor","_s","mediaLibrary","setMediaLibrary","videos","audios","images","timelineItems","setTimelineItems","currentTime","setCurrentTime","videoDuration","setVideoDuration","selectedTimelineItem","setSelectedTimelineItem","timelineZoom","setTimelineZoom","activeTab","setActiveTab","volume","setVolume","isMuted","setIsMuted","isPlaying","setIsPlaying","currentVideoSource","setCurrentVideoSource","draggedItem","setDraggedItem","draggedTimelineItem","setDraggedTimelineItem","dropPreview","setDropPreview","isDragging","setIsDragging","isTimelineDragging","setIsTimelineDragging","dragOffset","setDragOffset","copiedItem","setCopiedItem","isUploading","setIsUploading","uploadProgress","setUploadProgress","storageInfo","setStorageInfo","isStorageReady","setIsStorageReady","isResizing","setIsResizing","resizeHandle","setResizeHandle","resizeItem","setResizeItem","originalItemData","setOriginalItemData","selectedOverlay","setSelectedOverlay","overlayTransforms","setOverlayTransforms","isDraggingOverlay","setIsDraggingOverlay","isResizingOverlay","setIsResizingOverlay","overlayDragStart","setOverlayDragStart","x","y","resizeOverlayHandle","setResizeOverlayHandle","initialOverlayTransform","setInitialOverlayTransform","showOverlayInfo","setShowOverlayInfo","showHelp","setShowHelp","tracks","setTracks","overlays","id","name","type","main","audio","timelineRef","timelineScrollRef","trackLabelsRef","intervalRef","audioElementsRef","Map","fileInputRef","audioInputRef","imageInputRef","videoRef","autoScrollIntervalRef","videoContainerRef","initStorage","init","loadMediaFromStorage","cleanedCount","cleanupExpiredFiles","title","message","duration","error","console","handleStorageUpdate","event","detail","window","addEventListener","removeEventListener","files","getAllFiles","info","getStorageInfo","saveFileToStorage","file","canUpload","remaining","getRemainingSpace","Error","savedFile","saveFile","prev","deleteFileFromStorage","fileId","deleteFile","filter","formatTime","seconds","mins","Math","floor","secs","ms","toString","padStart","handlePlayPause","seekTo","time","newTime","max","min","content","getCurrentTimelineContent","forEach","audioItem","audioElement","current","get","relativeTime","startTime","currentItems","item","mainVideo","find","trackType","createAudioElement","has","document","createElement","src","url","muted","preload","set","syncAudioTime","timeDiff","abs","checkCollision","newItem","excludeId","some","trackId","itemStart","itemEnd","newStart","newEnd","insertWithRipple","insertTime","trackItems","sort","a","b","length","shouldRipple","affectedItems","insertPosition","blockAtPosition","blocksToShift","nextBlock","availableSpace","shiftAmount","findNearestValidPosition","dropTime","result","isExact","applyRippleEffect","log","affectedCount","map","oldStart","affectedItem","affected","maxEndTime","findNextAvailablePosition","preferredStart","testItem","i","currentItem","nextItem","gapStart","gapEnd","gapSize","lastItem","removeFromTimeline","itemId","pause","delete","getOverlayTransform","overlayId","scale","opacity","updateOverlayTransform","updates","showOverlayInfoTemporary","overlayInfoTimers","clearTimeout","setTimeout","handleOverlayMouseDown","e","overlay","target","closest","preventDefault","stopPropagation","container","containerRect","getBoundingClientRect","overlayElement","currentTarget","overlayRect","transform","clientX","left","clientY","top","containerX","containerY","handleOverlayResizeStart","handle","currentTransform","startScale","startX","startY","handleOverlayMouseMove","rect","overlaySize","newX","newY","padding","limitedX","width","limitedY","height","baseX","baseY","index","undefined","deltaX","deltaY","scaleFactor","sensitivity","newScale","handleOverlayMouseUp","handleOverlayWheel","ctrlKey","scaleDelta","splitTimelineItem","splitTime","firstPartDuration","secondPartStart","secondPartDuration","secondPart","Date","now","random","updatedFirstPart","timelineItem","concat","copyTimelineItem","pasteTimelineItem","_insertResult$affecte","targetTrackId","insertResult","newEndTime","deleteSelectedItem","stopAutoScroll","clearInterval","startAutoScroll","direction","speed","setInterval","scrollAmount","currentScrollLeft","scrollLeft","maxScroll","scrollWidth","clientWidth","checkAutoScroll","scrollZoneWidth","relativeX","zoomIn","zoomOut","resetZoom","handleResizeStart","handleResizeEnd","handleTrackAreaScroll","scrollTop","handleTrackLabelsScroll","getTimelineWidth","baseWidth","getPixelsPerSecond","body","style","cursor","handleMouseMove","mouseX","pixelsPerSecond","minDuration","rightEdge","newStartTime","newDuration","leftEdge","handleMouseUp","o","firstImage","currentAudioIds","Set","paused","play","catch","Object","values","timer","handleKeyDown","tagName","key","code","step","shiftKey","handleWheel","_timelineRef$current","contains","passive","handleVideoUpload","Array","from","handleAudioUpload","handleImageUpload","addToTimeline","mediaItem","finalUrl","isPreview","loadingToast","className","textContent","appendChild","originalUrl","getOriginalFileUrl","removeChild","alert","startsWith","finalStartTime","newTimelineItem","mediaId","addOverlayTrack","newTrackId","addAudioTrack","removeFromLibrary","success","deleteMediaFromServer","handleTimelineClick","clickX","clickTime","handleDragStart","dataTransfer","effectAllowed","setData","handleDragEnd","handleTimelineItemDragStart","itemRect","handleTimelineItemDragEnd","handleDragOver","dropEffect","timelineRect","dragX","dragY","trackHeight","timeRulerHeight","relativeY","trackIndex","allTracks","targetTrack","isValid","handleDrop","_dropPreview$affected","_dropPreview$affected2","_dropPreview$affected3","handleDragLeave","_timelineRef$current2","relatedTarget","getTimelineItemStyle","findIndex","track","getDropPreviewStyle","getTrackColor","children","fileName","_jsxFileName","lineNumber","columnNumber","size","usage","limits","totalSizeMB","icon","tab","IconComponent","tabStorageInfo","used","limit","onClick","_fileInputRef$current","_audioInputRef$curren","_imageInputRef$curren","click","disabled","round","ref","accept","multiple","onChange","_item$metadata","_item$metadata2","draggable","onDragStart","onDragEnd","metadata","toFixed","alt","isSelected","isDraggingThis","isResizingThis","zIndex","transition","onMouseDown","onWheel","value","parseFloat","onScroll","el","onDragOver","onDrop","onDragLeave","overflowX","overflowY","scrollbarWidth","minHeight","position","ceil","_","timeValue","background","_c","$RefreshReg$"],"sources":["C:/Scriptify/ai-content-studio/frontend/src/components/pages/VideoEditorAppPage.jsx"],"sourcesContent":["import { useState, useRef, useEffect, useCallback } from \"react\";\r\nimport MediaStorage from \"../../utils/MediaStorage\";\r\nimport NotificationSystem, { showNotification } from \"../NotificationSystem\";\r\nimport {\r\n  Upload,\r\n  Play,\r\n  Pause,\r\n  Volume2,\r\n  Video,\r\n  Music,\r\n  SkipBack,\r\n  SkipForward,\r\n  VolumeX,\r\n  Copy,\r\n  Trash2,\r\n  Scissors,\r\n  Image,\r\n  Film,\r\n  Plus,\r\n  Layers,\r\n  ZoomIn,\r\n  ZoomOut,\r\n  RotateCcw,\r\n  HelpCircle,\r\n  X,\r\n  HardDrive,\r\n  Clock,\r\n  AlertTriangle\r\n} from \"lucide-react\";\r\n\r\nconst VideoEditor = () => {\r\n  const [mediaLibrary, setMediaLibrary] = useState({\r\n    videos: [],\r\n    audios: [],\r\n    images: [],\r\n  });\r\n  const [timelineItems, setTimelineItems] = useState([]);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [videoDuration, setVideoDuration] = useState(60);\r\n  const [selectedTimelineItem, setSelectedTimelineItem] = useState(null);\r\n  const [timelineZoom, setTimelineZoom] = useState(1);\r\n  const [activeTab, setActiveTab] = useState(\"videos\");\r\n  const [volume, setVolume] = useState(1);\r\n  const [isMuted, setIsMuted] = useState(false);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [currentVideoSource, setCurrentVideoSource] = useState(null);\r\n  const [draggedItem, setDraggedItem] = useState(null);\r\n  const [draggedTimelineItem, setDraggedTimelineItem] = useState(null);\r\n  const [dropPreview, setDropPreview] = useState(null);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [isTimelineDragging, setIsTimelineDragging] = useState(false);\r\n  const [dragOffset, setDragOffset] = useState(0);\r\n  const [copiedItem, setCopiedItem] = useState(null);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n  \r\n  // Состояния для локального хранилища\r\n  const [storageInfo, setStorageInfo] = useState(null);\r\n  const [isStorageReady, setIsStorageReady] = useState(false);\r\n  \r\n  // Новые состояния для resize\r\n  const [isResizing, setIsResizing] = useState(false);\r\n  const [resizeHandle, setResizeHandle] = useState(null); // 'left' | 'right'\r\n  const [resizeItem, setResizeItem] = useState(null);\r\n  const [originalItemData, setOriginalItemData] = useState(null);\r\n  \r\n  // Состояния для управления overlays на видео\r\n  const [selectedOverlay, setSelectedOverlay] = useState(null);\r\n  const [overlayTransforms, setOverlayTransforms] = useState({}); // { overlayId: { x, y, scale, opacity } }\r\n  const [isDraggingOverlay, setIsDraggingOverlay] = useState(false);\r\n  const [isResizingOverlay, setIsResizingOverlay] = useState(false);\r\n  const [overlayDragStart, setOverlayDragStart] = useState({ x: 0, y: 0 });\r\n  const [resizeOverlayHandle, setResizeOverlayHandle] = useState(null);\r\n  const [initialOverlayTransform, setInitialOverlayTransform] = useState(null);\r\n  const [showOverlayInfo, setShowOverlayInfo] = useState({}); // { overlayId: boolean }\r\n  \r\n  // Модальное окно помощи\r\n  const [showHelp, setShowHelp] = useState(false);\r\n  \r\n  // Треки как в CapCut\r\n  const [tracks, setTracks] = useState({\r\n    overlays: [\r\n      { id: 'overlay-1', name: 'Overlay 1', type: 'overlay' },\r\n      { id: 'overlay-2', name: 'Overlay 2', type: 'overlay' }\r\n    ],\r\n    main: [\r\n      { id: 'main-video', name: 'Main Video', type: 'main' }\r\n    ],\r\n    audio: [\r\n      { id: 'audio-1', name: 'Audio 1', type: 'audio' },\r\n      { id: 'audio-2', name: 'Audio 2', type: 'audio' }\r\n    ]\r\n  });\r\n\r\n  const timelineRef = useRef(null);\r\n  const timelineScrollRef = useRef(null);\r\n  const trackLabelsRef = useRef(null);\r\n  const intervalRef = useRef(null);\r\n  const audioElementsRef = useRef(new Map());\r\n  const fileInputRef = useRef(null);\r\n  const audioInputRef = useRef(null);\r\n  const imageInputRef = useRef(null);\r\n  const videoRef = useRef(null);\r\n  const autoScrollIntervalRef = useRef(null);\r\n  const videoContainerRef = useRef(null);\r\n\r\n  // Инициализация локального хранилища\r\n  useEffect(() => {\r\n    const initStorage = async () => {\r\n      try {\r\n        await MediaStorage.init();\r\n        setIsStorageReady(true);\r\n        \r\n        // Загружаем файлы\r\n        await loadMediaFromStorage();\r\n        \r\n        // Очищаем истекшие файлы\r\n        const cleanedCount = await MediaStorage.cleanupExpiredFiles();\r\n        if (cleanedCount > 0) {\r\n          showNotification({\r\n            type: 'info',\r\n            title: 'Storage Cleanup',\r\n            message: `Removed ${cleanedCount} expired files`,\r\n            duration: 3000\r\n          });\r\n        }\r\n        \r\n        // Показываем welcome уведомление\r\n        showNotification({\r\n          type: 'info',\r\n          title: 'Local Storage Ready',\r\n          message: 'Your media files are stored locally for 7 days',\r\n          duration: 4000\r\n        });\r\n        \r\n      } catch (error) {\r\n        console.error('Storage initialization failed:', error);\r\n        showNotification({\r\n          type: 'error',\r\n          title: 'Storage Error',\r\n          message: 'Failed to initialize local storage',\r\n          duration: 5000\r\n        });\r\n      }\r\n    };\r\n\r\n    initStorage();\r\n  }, []);\r\n\r\n  // Слушаем обновления хранилища\r\n  useEffect(() => {\r\n    const handleStorageUpdate = (event) => {\r\n      setStorageInfo(event.detail);\r\n    };\r\n\r\n    window.addEventListener('storageUpdated', handleStorageUpdate);\r\n    return () => window.removeEventListener('storageUpdated', handleStorageUpdate);\r\n  }, []);\r\n\r\n  // Загрузка медиафайлов из локального хранилища\r\n  const loadMediaFromStorage = async () => {\r\n    try {\r\n      const files = await MediaStorage.getAllFiles();\r\n      setMediaLibrary(files);\r\n      \r\n      // Обновляем информацию о хранилище\r\n      const info = await MediaStorage.getStorageInfo();\r\n      setStorageInfo(info);\r\n      \r\n    } catch (error) {\r\n      console.error('Load media error:', error);\r\n      showNotification({\r\n        type: 'error',\r\n        title: 'Load Error',\r\n        message: 'Failed to load media files',\r\n        duration: 4000\r\n      });\r\n    }\r\n  };\r\n\r\n  // Сохранение файла в локальное хранилище\r\n  const saveFileToStorage = async (file, type) => {\r\n    try {\r\n      // Проверяем лимиты перед загрузкой\r\n      const canUpload = await MediaStorage.canUpload(type);\r\n      if (!canUpload) {\r\n        const remaining = await MediaStorage.getRemainingSpace(type);\r\n        throw new Error(`Storage limit reached! You can upload ${remaining} more ${type}.`);\r\n      }\r\n\r\n      const savedFile = await MediaStorage.saveFile(file, type);\r\n      \r\n      // Добавляем в библиотеку\r\n      setMediaLibrary(prev => ({\r\n        ...prev,\r\n        [type]: [...prev[type], savedFile]\r\n      }));\r\n\r\n      // Показываем уведомление об успехе\r\n      showNotification({\r\n        type: 'success',\r\n        title: 'File Uploaded',\r\n        message: `${savedFile.name} saved successfully`,\r\n        duration: 3000\r\n      });\r\n\r\n      return savedFile;\r\n      \r\n    } catch (error) {\r\n      console.error('Save file error:', error);\r\n      \r\n      // Показываем уведомление об ошибке\r\n      showNotification({\r\n        type: 'error',\r\n        title: 'Upload Failed',\r\n        message: error.message,\r\n        duration: 5000\r\n      });\r\n      \r\n      throw error;\r\n    }\r\n  };\r\n\r\n  // Удаление файла из локального хранилища\r\n  const deleteFileFromStorage = async (fileId, type) => {\r\n    try {\r\n      await MediaStorage.deleteFile(fileId);\r\n      \r\n      // Удаляем из библиотеки\r\n      setMediaLibrary(prev => ({\r\n        ...prev,\r\n        [type]: prev[type].filter(file => file.id !== fileId)\r\n      }));\r\n\r\n      showNotification({\r\n        type: 'success',\r\n        title: 'File Deleted',\r\n        message: 'File removed from library',\r\n        duration: 2000\r\n      });\r\n\r\n      return true;\r\n      \r\n    } catch (error) {\r\n      console.error('Delete file error:', error);\r\n      showNotification({\r\n        type: 'error',\r\n        title: 'Delete Failed',\r\n        message: 'Failed to delete file',\r\n        duration: 4000\r\n      });\r\n      return false;\r\n    }\r\n  };\r\n  const formatTime = (seconds) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = Math.floor(seconds % 60);\r\n    const ms = Math.floor((seconds % 1) * 100);\r\n    return timelineZoom > 5 ? `${mins}:${secs.toString().padStart(2, \"0\")}.${ms.toString().padStart(2, \"0\")}` : `${mins}:${secs.toString().padStart(2, \"0\")}`;\r\n  };\r\n\r\n  const handlePlayPause = () => {\r\n    setIsPlaying(!isPlaying);\r\n  };\r\n\r\n  const seekTo = (time) => {\r\n    const newTime = Math.max(0, Math.min(videoDuration, time));\r\n    setCurrentTime(newTime);\r\n    \r\n    const content = getCurrentTimelineContent();\r\n    content.audio.forEach(audioItem => {\r\n      const audioElement = audioElementsRef.current.get(audioItem.id);\r\n      if (audioElement) {\r\n        const relativeTime = newTime - audioItem.startTime;\r\n        audioElement.currentTime = Math.max(0, relativeTime);\r\n      }\r\n    });\r\n  };\r\n\r\n  const getCurrentTimelineContent = useCallback(() => {\r\n    const currentItems = timelineItems.filter(\r\n      (item) =>\r\n        currentTime >= item.startTime &&\r\n        currentTime < item.startTime + item.duration\r\n    );\r\n\r\n    return {\r\n      mainVideo: currentItems.find(item => item.trackType === 'main' && item.type === 'video'),\r\n      overlays: currentItems.filter(item => item.trackType === 'overlay'),\r\n      audio: currentItems.filter(item => item.trackType === 'audio'),\r\n    };\r\n  }, [currentTime, timelineItems]);\r\n\r\n  const createAudioElement = useCallback((audioItem) => {\r\n    if (!audioElementsRef.current.has(audioItem.id)) {\r\n      const audio = document.createElement('audio');\r\n      audio.src = audioItem.url;\r\n      audio.volume = (audioItem.volume || 1) * volume;\r\n      audio.muted = isMuted;\r\n      audio.preload = \"metadata\";\r\n      audioElementsRef.current.set(audioItem.id, audio);\r\n    }\r\n    return audioElementsRef.current.get(audioItem.id);\r\n  }, [volume, isMuted]);\r\n\r\n  const syncAudioTime = useCallback((audioItem, relativeTime) => {\r\n    const audioElement = audioElementsRef.current.get(audioItem.id);\r\n    if (audioElement) {\r\n      const timeDiff = Math.abs(audioElement.currentTime - relativeTime);\r\n      if (timeDiff > 0.2) {\r\n        audioElement.currentTime = Math.max(0, relativeTime);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  const checkCollision = useCallback((newItem, excludeId = null) => {\r\n    return timelineItems.some(item => {\r\n      if (item.id === excludeId) return false;\r\n      if (item.trackId !== newItem.trackId) return false;\r\n      \r\n      const itemStart = item.startTime;\r\n      const itemEnd = item.startTime + item.duration;\r\n      const newStart = newItem.startTime;\r\n      const newEnd = newItem.startTime + newItem.duration;\r\n      \r\n      return (newStart < itemEnd && newEnd > itemStart);\r\n    });\r\n  }, [timelineItems]);\r\n\r\n  // Функция для вставки с автоматическим сдвигом блоков (как в CapCut)\r\n  const insertWithRipple = useCallback((trackId, insertTime, duration, excludeId = null) => {\r\n    const trackItems = timelineItems\r\n      .filter(item => item.trackId === trackId && item.id !== excludeId)\r\n      .sort((a, b) => a.startTime - b.startTime);\r\n\r\n    // Если трек пустой\r\n    if (trackItems.length === 0) {\r\n      return { time: Math.max(0, insertTime), shouldRipple: false, affectedItems: [] };\r\n    }\r\n\r\n    // Ищем где вставить\r\n    let insertPosition = insertTime;\r\n    let shouldRipple = false;\r\n    let affectedItems = [];\r\n\r\n    // Проверяем есть ли точно в этом месте блок\r\n    const blockAtPosition = trackItems.find(item => \r\n      insertTime >= item.startTime && insertTime < item.startTime + item.duration\r\n    );\r\n\r\n    if (blockAtPosition) {\r\n      // Вставляем в начало этого блока и сдвигаем все что справа\r\n      insertPosition = blockAtPosition.startTime;\r\n      shouldRipple = true;\r\n      affectedItems = trackItems.filter(item => item.startTime >= insertPosition);\r\n    } else {\r\n      // Ищем блоки которые нужно сдвинуть\r\n      const blocksToShift = trackItems.filter(item => item.startTime >= insertTime);\r\n      \r\n      if (blocksToShift.length > 0) {\r\n        // Проверяем, есть ли место без сдвига\r\n        const nextBlock = blocksToShift[0];\r\n        const availableSpace = nextBlock.startTime - insertTime;\r\n        \r\n        if (availableSpace >= duration) {\r\n          // Помещается без сдвига\r\n          insertPosition = insertTime;\r\n          shouldRipple = false;\r\n        } else {\r\n          // Нужно сдвинуть\r\n          insertPosition = insertTime;\r\n          shouldRipple = true;\r\n          affectedItems = blocksToShift;\r\n        }\r\n      } else {\r\n        // Вставляем в конец\r\n        insertPosition = insertTime;\r\n        shouldRipple = false;\r\n      }\r\n    }\r\n\r\n    return {\r\n      time: Math.max(0, insertPosition),\r\n      shouldRipple,\r\n      affectedItems,\r\n      shiftAmount: shouldRipple ? duration : 0\r\n    };\r\n  }, [timelineItems]);\r\n\r\n  // Функция для поиска ближайшего свободного места (обратная совместимость)\r\n  const findNearestValidPosition = useCallback((trackId, dropTime, duration, excludeId = null) => {\r\n    const result = insertWithRipple(trackId, dropTime, duration, excludeId);\r\n    return {\r\n      time: result.time,\r\n      isExact: !result.shouldRipple\r\n    };\r\n  }, [insertWithRipple]);\r\n\r\n  // Функция для применения ripple effect\r\n  const applyRippleEffect = useCallback((affectedItems, shiftAmount) => {\r\n    if (!affectedItems.length || shiftAmount <= 0) return;\r\n\r\n    console.log('Applying ripple effect:', { \r\n      affectedCount: affectedItems.length, \r\n      shiftAmount,\r\n      affectedItems: affectedItems.map(item => ({ name: item.name, oldStart: item.startTime }))\r\n    });\r\n\r\n    setTimelineItems(prev => prev.map(item => {\r\n      const affectedItem = affectedItems.find(affected => affected.id === item.id);\r\n      if (affectedItem) {\r\n        console.log(`Shifting ${item.name} from ${item.startTime} to ${item.startTime + shiftAmount}`);\r\n        return {\r\n          ...item,\r\n          startTime: item.startTime + shiftAmount\r\n        };\r\n      }\r\n      return item;\r\n    }));\r\n\r\n    // Обновляем общую длительность если нужно\r\n    if (affectedItems.length > 0) {\r\n      const maxEndTime = Math.max(...affectedItems.map(item => item.startTime + item.duration + shiftAmount));\r\n      if (maxEndTime > videoDuration) {\r\n        setVideoDuration(maxEndTime + 10);\r\n      }\r\n    }\r\n  }, [videoDuration]);\r\n\r\n  const findNextAvailablePosition = useCallback((trackId, duration, preferredStart = 0) => {\r\n    const trackItems = timelineItems\r\n      .filter(item => item.trackId === trackId)\r\n      .sort((a, b) => a.startTime - b.startTime);\r\n    \r\n    if (preferredStart >= 0) {\r\n      const testItem = { trackId, startTime: preferredStart, duration };\r\n      if (!checkCollision(testItem)) {\r\n        return preferredStart;\r\n      }\r\n    }\r\n    \r\n    for (let i = 0; i < trackItems.length; i++) {\r\n      const currentItem = trackItems[i];\r\n      const nextItem = trackItems[i + 1];\r\n      \r\n      if (i === 0 && currentItem.startTime >= duration) {\r\n        return 0;\r\n      }\r\n      \r\n      if (nextItem) {\r\n        const gapStart = currentItem.startTime + currentItem.duration;\r\n        const gapEnd = nextItem.startTime;\r\n        const gapSize = gapEnd - gapStart;\r\n        \r\n        if (gapSize >= duration) {\r\n          return gapStart;\r\n        }\r\n      }\r\n    }\r\n    \r\n    if (trackItems.length === 0) return 0;\r\n    const lastItem = trackItems[trackItems.length - 1];\r\n    return lastItem.startTime + lastItem.duration;\r\n  }, [timelineItems, checkCollision]);\r\n\r\n  const removeFromTimeline = (itemId) => {\r\n    const audioElement = audioElementsRef.current.get(itemId);\r\n    if (audioElement) {\r\n      audioElement.pause();\r\n      audioElement.src = '';\r\n      audioElementsRef.current.delete(itemId);\r\n    }\r\n    \r\n    setTimelineItems((prev) => prev.filter((item) => item.id !== itemId));\r\n    setSelectedTimelineItem(null);\r\n  };\r\n\r\n  // Функции для управления overlays на видео\r\n  const getOverlayTransform = useCallback((overlayId) => {\r\n    return overlayTransforms[overlayId] || { x: 0, y: 0, scale: 1, opacity: 1 };\r\n  }, [overlayTransforms]);\r\n\r\n  const updateOverlayTransform = useCallback((overlayId, updates) => {\r\n    setOverlayTransforms(prev => ({\r\n      ...prev,\r\n      [overlayId]: { ...getOverlayTransform(overlayId), ...updates }\r\n    }));\r\n  }, [getOverlayTransform]);\r\n\r\n  // Функция для показа информации об overlay на несколько секунд\r\n  const showOverlayInfoTemporary = useCallback((overlayId, duration = 2000) => {\r\n    setShowOverlayInfo(prev => ({ ...prev, [overlayId]: true }));\r\n    \r\n    // Очищаем предыдущий таймер если есть\r\n    if (window.overlayInfoTimers && window.overlayInfoTimers[overlayId]) {\r\n      clearTimeout(window.overlayInfoTimers[overlayId]);\r\n    }\r\n    \r\n    // Создаем новый таймер\r\n    if (!window.overlayInfoTimers) window.overlayInfoTimers = {};\r\n    window.overlayInfoTimers[overlayId] = setTimeout(() => {\r\n      setShowOverlayInfo(prev => ({ ...prev, [overlayId]: false }));\r\n      delete window.overlayInfoTimers[overlayId];\r\n    }, duration);\r\n  }, []);\r\n\r\n  const handleOverlayMouseDown = useCallback((e, overlay) => {\r\n    if (e.target.closest('.resize-handle')) return; // Не начинаем drag если кликнули на resize handle\r\n    \r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    \r\n    setSelectedOverlay(overlay);\r\n    setIsDraggingOverlay(true);\r\n    \r\n    const container = videoContainerRef.current;\r\n    if (!container) return;\r\n    \r\n    const containerRect = container.getBoundingClientRect();\r\n    const overlayElement = e.currentTarget;\r\n    const overlayRect = overlayElement.getBoundingClientRect();\r\n    const transform = getOverlayTransform(overlay.id);\r\n    \r\n    // Запоминаем точный offset от позиции мыши до текущей позиции элемента\r\n    setOverlayDragStart({\r\n      x: e.clientX - overlayRect.left,\r\n      y: e.clientY - overlayRect.top,\r\n      containerX: containerRect.left,\r\n      containerY: containerRect.top\r\n    });\r\n  }, [getOverlayTransform]);\r\n\r\n  const handleOverlayResizeStart = useCallback((e, overlay, handle) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    \r\n    console.log('Starting resize:', handle); // Для отладки\r\n    \r\n    setSelectedOverlay(overlay);\r\n    setIsResizingOverlay(true);\r\n    setResizeOverlayHandle(handle);\r\n    \r\n    const currentTransform = getOverlayTransform(overlay.id);\r\n    setInitialOverlayTransform(currentTransform);\r\n    \r\n    setOverlayDragStart({\r\n      x: e.clientX,\r\n      y: e.clientY,\r\n      startScale: currentTransform.scale,\r\n      startX: currentTransform.x,\r\n      startY: currentTransform.y\r\n    });\r\n  }, [getOverlayTransform]);\r\n\r\n  const handleOverlayMouseMove = useCallback((e) => {\r\n    if (!selectedOverlay) return;\r\n    \r\n    if (isDraggingOverlay) {\r\n      // Перетаскивание с максимальной плавностью\r\n      const container = videoContainerRef.current;\r\n      if (!container) return;\r\n      \r\n      const rect = container.getBoundingClientRect();\r\n      const overlaySize = 128 * getOverlayTransform(selectedOverlay.id).scale;\r\n      \r\n      // Вычисляем новую позицию с учетом начального offset\r\n      const newX = e.clientX - overlayDragStart.containerX - overlayDragStart.x;\r\n      const newY = e.clientY - overlayDragStart.containerY - overlayDragStart.y;\r\n      \r\n      // Ограничиваем движение границами контейнера с учетом размера overlay\r\n      const padding = 5; // Минимальный отступ\r\n      const limitedX = Math.max(padding, Math.min(rect.width - overlaySize - padding, newX));\r\n      const limitedY = Math.max(padding, Math.min(rect.height - overlaySize - padding, newY));\r\n      \r\n      // Обновляем позицию относительно базовой позиции\r\n      const baseX = 200;\r\n      const baseY = 50 + selectedOverlay.index * 120;\r\n      \r\n      // Мгновенное обновление без debounce для плавности\r\n      updateOverlayTransform(selectedOverlay.id, { \r\n        x: limitedX - baseX, \r\n        y: limitedY - baseY \r\n      });\r\n      \r\n    } else if (isResizingOverlay && overlayDragStart.startScale !== undefined && resizeOverlayHandle) {\r\n      console.log('Resizing...', resizeOverlayHandle); // Для отладки\r\n      \r\n      // Простая логика resize\r\n      const deltaX = e.clientX - overlayDragStart.x;\r\n      const deltaY = e.clientY - overlayDragStart.y;\r\n      \r\n      // Определяем направление и чувствительность\r\n      let scaleFactor = 1;\r\n      const sensitivity = 0.005; // Базовая чувствительность\r\n      \r\n      switch (resizeOverlayHandle) {\r\n        case 'nw': // Северо-запад: тянем влево-вверх = уменьшаем\r\n          scaleFactor = 1 - (deltaX + deltaY) * sensitivity;\r\n          break;\r\n        case 'ne': // Северо-восток: тянем вправо-вверх = увеличиваем вправо, уменьшаем вверх  \r\n          scaleFactor = 1 + (deltaX - deltaY) * sensitivity;\r\n          break;\r\n        case 'sw': // Юго-запад: тянем влево-вниз = уменьшаем влево, увеличиваем вниз\r\n          scaleFactor = 1 + (-deltaX + deltaY) * sensitivity;\r\n          break;\r\n        case 'se': // Юго-восток: тянем вправо-вниз = увеличиваем\r\n          scaleFactor = 1 + (deltaX + deltaY) * sensitivity;\r\n          break;\r\n      }\r\n      \r\n      // Применяем новый масштаб\r\n      const newScale = Math.max(0.2, Math.min(4, overlayDragStart.startScale * scaleFactor));\r\n      \r\n      // Простое обновление без сложной компенсации позиции\r\n      updateOverlayTransform(selectedOverlay.id, { \r\n        scale: newScale\r\n      });\r\n    }\r\n  }, [selectedOverlay, isDraggingOverlay, isResizingOverlay, overlayDragStart, initialOverlayTransform, updateOverlayTransform, getOverlayTransform, resizeOverlayHandle]);\r\n\r\n  const handleOverlayMouseUp = useCallback(() => {\r\n    console.log('Mouse up - stopping drag/resize'); // Для отладки\r\n    \r\n    // Если завершили изменение размера, показываем инфо на 2 секунды\r\n    if (isResizingOverlay && selectedOverlay) {\r\n      showOverlayInfoTemporary(selectedOverlay.id, 2000);\r\n    }\r\n    \r\n    setIsDraggingOverlay(false);\r\n    setIsResizingOverlay(false);\r\n    setResizeOverlayHandle(null);\r\n    setInitialOverlayTransform(null);\r\n  }, [isResizingOverlay, selectedOverlay, showOverlayInfoTemporary]);\r\n\r\n  const handleOverlayWheel = useCallback((e, overlayId) => {\r\n    if (!e.ctrlKey) return;\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    \r\n    const transform = getOverlayTransform(overlayId);\r\n    const scaleDelta = e.deltaY > 0 ? -0.05 : 0.05; // Более плавное масштабирование\r\n    const newScale = Math.max(0.2, Math.min(4, transform.scale + scaleDelta));\r\n    \r\n    updateOverlayTransform(overlayId, { scale: newScale });\r\n    \r\n    // Показываем информацию временно при масштабировании колесиком\r\n    showOverlayInfoTemporary(overlayId, 1500);\r\n  }, [getOverlayTransform, updateOverlayTransform, showOverlayInfoTemporary]);\r\n\r\n  // Функции для работы с элементами таймлайна\r\n  const splitTimelineItem = useCallback(() => {\r\n    if (!selectedTimelineItem) return;\r\n    \r\n    const item = selectedTimelineItem;\r\n    const splitTime = currentTime;\r\n    \r\n    if (splitTime <= item.startTime || splitTime >= item.startTime + item.duration) {\r\n      return;\r\n    }\r\n    \r\n    const firstPartDuration = splitTime - item.startTime;\r\n    const secondPartStart = splitTime;\r\n    const secondPartDuration = item.duration - firstPartDuration;\r\n    \r\n    const secondPart = {\r\n      ...item,\r\n      id: Date.now() + Math.random(),\r\n      startTime: secondPartStart,\r\n      duration: secondPartDuration,\r\n    };\r\n    \r\n    const updatedFirstPart = {\r\n      ...item,\r\n      duration: firstPartDuration,\r\n    };\r\n    \r\n    setTimelineItems(prev => prev.map(timelineItem => \r\n      timelineItem.id === item.id ? updatedFirstPart : timelineItem\r\n    ).concat(secondPart));\r\n    \r\n    setSelectedTimelineItem(null);\r\n  }, [selectedTimelineItem, currentTime]);\r\n\r\n  const copyTimelineItem = useCallback(() => {\r\n    if (!selectedTimelineItem) return;\r\n    setCopiedItem(selectedTimelineItem);\r\n  }, [selectedTimelineItem]);\r\n\r\n  const pasteTimelineItem = useCallback(() => {\r\n    if (!copiedItem) return;\r\n    \r\n    const targetTrackId = copiedItem.trackId;\r\n    const insertResult = insertWithRipple(targetTrackId, currentTime, copiedItem.duration);\r\n    \r\n    // Применяем ripple effect если нужно\r\n    if (insertResult.shouldRipple && insertResult.affectedItems?.length > 0) {\r\n      applyRippleEffect(insertResult.affectedItems, copiedItem.duration);\r\n    }\r\n    \r\n    const newItem = {\r\n      ...copiedItem,\r\n      id: Date.now() + Math.random(),\r\n      startTime: insertResult.time,\r\n    };\r\n\r\n    setTimelineItems(prev => [...prev, newItem]);\r\n\r\n    const newEndTime = newItem.startTime + newItem.duration;\r\n    if (newEndTime > videoDuration) {\r\n      setVideoDuration(newEndTime + 10);\r\n    }\r\n    \r\n    setSelectedTimelineItem(newItem);\r\n  }, [copiedItem, currentTime, insertWithRipple, applyRippleEffect, videoDuration]);\r\n\r\n  const deleteSelectedItem = useCallback(() => {\r\n    if (!selectedTimelineItem) return;\r\n    removeFromTimeline(selectedTimelineItem.id);\r\n  }, [selectedTimelineItem]);\r\n\r\n  // Автопрокрутка и зум\r\n  const stopAutoScroll = useCallback(() => {\r\n    if (autoScrollIntervalRef.current) {\r\n      clearInterval(autoScrollIntervalRef.current);\r\n      autoScrollIntervalRef.current = null;\r\n    }\r\n  }, []);\r\n\r\n  const startAutoScroll = useCallback((direction, speed = 1) => {\r\n    stopAutoScroll();\r\n    \r\n    autoScrollIntervalRef.current = setInterval(() => {\r\n      if (timelineScrollRef.current) {\r\n        const scrollAmount = 15 * speed;\r\n        const currentScrollLeft = timelineScrollRef.current.scrollLeft;\r\n        const maxScroll = timelineScrollRef.current.scrollWidth - timelineScrollRef.current.clientWidth;\r\n        \r\n        if (direction === 'left' && currentScrollLeft > 0) {\r\n          timelineScrollRef.current.scrollLeft = Math.max(0, currentScrollLeft - scrollAmount);\r\n        } else if (direction === 'right' && currentScrollLeft < maxScroll) {\r\n          timelineScrollRef.current.scrollLeft = Math.min(maxScroll, currentScrollLeft + scrollAmount);\r\n        }\r\n      }\r\n    }, 16); // 60fps для плавности\r\n  }, [stopAutoScroll]);\r\n\r\n  const checkAutoScroll = useCallback((clientX) => {\r\n    if (!timelineScrollRef.current) return;\r\n    \r\n    const rect = timelineScrollRef.current.getBoundingClientRect();\r\n    const scrollZoneWidth = 120;\r\n    const relativeX = clientX - rect.left;\r\n    \r\n    if (relativeX < scrollZoneWidth && timelineScrollRef.current.scrollLeft > 0) {\r\n      const speed = (scrollZoneWidth - relativeX) / scrollZoneWidth * 3;\r\n      startAutoScroll('left', speed);\r\n    }\r\n    else if (relativeX > rect.width - scrollZoneWidth) {\r\n      const maxScroll = timelineScrollRef.current.scrollWidth - timelineScrollRef.current.clientWidth;\r\n      if (timelineScrollRef.current.scrollLeft < maxScroll) {\r\n        const speed = (relativeX - (rect.width - scrollZoneWidth)) / scrollZoneWidth * 3;\r\n        startAutoScroll('right', speed);\r\n      }\r\n    }\r\n    else {\r\n      stopAutoScroll();\r\n    }\r\n  }, [startAutoScroll, stopAutoScroll]);\r\n\r\n  // Функции зума\r\n  const zoomIn = () => {\r\n    setTimelineZoom(prev => Math.min(20, prev * 1.5));\r\n  };\r\n\r\n  const zoomOut = () => {\r\n    setTimelineZoom(prev => Math.max(0.1, prev / 1.5));\r\n  };\r\n\r\n  const resetZoom = () => {\r\n    setTimelineZoom(1);\r\n  };\r\n\r\n  // Функции для resize\r\n  const handleResizeStart = useCallback((e, item, handle) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setIsResizing(true);\r\n    setResizeHandle(handle);\r\n    setResizeItem(item);\r\n    setOriginalItemData({\r\n      startTime: item.startTime,\r\n      duration: item.duration\r\n    });\r\n    \r\n    // Предотвращаем drag\r\n    setIsTimelineDragging(false);\r\n    setDraggedTimelineItem(null);\r\n  }, []);\r\n\r\n  const handleResizeEnd = useCallback(() => {\r\n    setIsResizing(false);\r\n    setResizeHandle(null);\r\n    setResizeItem(null);\r\n    setOriginalItemData(null);\r\n    stopAutoScroll();\r\n  }, [stopAutoScroll]);\r\n\r\n  // Синхронизация скролла\r\n  const handleTrackAreaScroll = (e) => {\r\n    if (trackLabelsRef.current) {\r\n      trackLabelsRef.current.scrollTop = e.target.scrollTop;\r\n    }\r\n  };\r\n\r\n  const handleTrackLabelsScroll = (e) => {\r\n    if (timelineScrollRef.current) {\r\n      timelineScrollRef.current.scrollTop = e.target.scrollTop;\r\n    }\r\n  };\r\n\r\n  const getTimelineWidth = () => {\r\n    const baseWidth = videoDuration * 50 * timelineZoom;\r\n    return Math.max(baseWidth, 2000);\r\n  };\r\n\r\n  const getPixelsPerSecond = () => {\r\n    return 50 * timelineZoom;\r\n  };\r\n\r\n  // Эффекты для управления overlays\r\n  useEffect(() => {\r\n    if (isDraggingOverlay || isResizingOverlay) {\r\n      document.addEventListener('mousemove', handleOverlayMouseMove);\r\n      document.addEventListener('mouseup', handleOverlayMouseUp);\r\n      document.body.style.cursor = isDraggingOverlay ? 'grabbing' : 'nw-resize';\r\n      \r\n      return () => {\r\n        document.removeEventListener('mousemove', handleOverlayMouseMove);\r\n        document.removeEventListener('mouseup', handleOverlayMouseUp);\r\n        document.body.style.cursor = '';\r\n      };\r\n    }\r\n  }, [isDraggingOverlay, isResizingOverlay, handleOverlayMouseMove, handleOverlayMouseUp]);\r\n\r\n  // Обработка resize во время движения мыши\r\n  useEffect(() => {\r\n    const handleMouseMove = (e) => {\r\n      if (!isResizing || !resizeItem || !timelineScrollRef.current) return;\r\n      \r\n      checkAutoScroll(e.clientX);\r\n      \r\n      const rect = timelineScrollRef.current.getBoundingClientRect();\r\n      const mouseX = e.clientX - rect.left + timelineScrollRef.current.scrollLeft;\r\n      const pixelsPerSecond = getPixelsPerSecond();\r\n      const newTime = mouseX / pixelsPerSecond;\r\n      \r\n      setTimelineItems(prev => prev.map(item => {\r\n        if (item.id !== resizeItem.id) return item;\r\n        \r\n        const minDuration = 0.1;\r\n        \r\n        if (resizeHandle === 'left') {\r\n          const rightEdge = originalItemData.startTime + originalItemData.duration;\r\n          const newStartTime = Math.max(0, Math.min(rightEdge - minDuration, newTime));\r\n          const newDuration = rightEdge - newStartTime;\r\n          \r\n          return {\r\n            ...item,\r\n            startTime: newStartTime,\r\n            duration: newDuration\r\n          };\r\n          \r\n        } else if (resizeHandle === 'right') {\r\n          const leftEdge = originalItemData.startTime;\r\n          const newEndTime = Math.max(leftEdge + minDuration, newTime);\r\n          const newDuration = newEndTime - leftEdge;\r\n          \r\n          return {\r\n            ...item,\r\n            duration: newDuration\r\n          };\r\n        }\r\n        \r\n        return item;\r\n      }));\r\n    };\r\n\r\n    const handleMouseUp = () => {\r\n      if (isResizing) {\r\n        handleResizeEnd();\r\n      }\r\n    };\r\n\r\n    if (isResizing) {\r\n      document.addEventListener('mousemove', handleMouseMove);\r\n      document.addEventListener('mouseup', handleMouseUp);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener('mousemove', handleMouseMove);\r\n      document.removeEventListener('mouseup', handleMouseUp);\r\n    };\r\n  }, [isResizing, resizeItem, resizeHandle, originalItemData, getPixelsPerSecond, checkAutoScroll, handleResizeEnd]);\r\n\r\n  // Основные эффекты\r\n  useEffect(() => {\r\n    const content = getCurrentTimelineContent();\r\n\r\n    if (content.mainVideo && content.mainVideo.url !== currentVideoSource) {\r\n      setCurrentVideoSource(content.mainVideo.url);\r\n      if (videoRef.current) {\r\n        const relativeTime = currentTime - content.mainVideo.startTime;\r\n        videoRef.current.currentTime = Math.max(0, relativeTime);\r\n      }\r\n    } else if (!content.mainVideo && content.overlays.find(o => o.type === 'image')) {\r\n      const firstImage = content.overlays.find(o => o.type === 'image');\r\n      setCurrentVideoSource(firstImage.url);\r\n    } else if (!content.mainVideo && !content.overlays.find(o => o.type === 'image')) {\r\n      setCurrentVideoSource(null);\r\n    }\r\n\r\n    const currentAudioIds = new Set(content.audio.map(item => item.id));\r\n    \r\n    audioElementsRef.current.forEach((audioElement, id) => {\r\n      if (!currentAudioIds.has(id)) {\r\n        if (!audioElement.paused) {\r\n          audioElement.pause();\r\n        }\r\n      }\r\n    });\r\n\r\n    content.audio.forEach(audioItem => {\r\n      const audioElement = createAudioElement(audioItem);\r\n      const relativeTime = currentTime - audioItem.startTime;\r\n      \r\n      audioElement.volume = (audioItem.volume || 1) * volume;\r\n      audioElement.muted = isMuted;\r\n      \r\n      if (isPlaying && relativeTime >= 0) {\r\n        syncAudioTime(audioItem, relativeTime);\r\n        if (audioElement.paused) {\r\n          audioElement.play().catch(console.error);\r\n        }\r\n      } else {\r\n        if (!audioElement.paused) {\r\n          audioElement.pause();\r\n        }\r\n      }\r\n    });\r\n\r\n  }, [currentTime, timelineItems, getCurrentTimelineContent, isPlaying, volume, isMuted, createAudioElement, syncAudioTime, currentVideoSource]);\r\n\r\n  useEffect(() => {\r\n    if (isPlaying) {\r\n      intervalRef.current = setInterval(() => {\r\n        setCurrentTime((prev) => {\r\n          const newTime = prev + 0.1;\r\n          if (newTime >= videoDuration) {\r\n            setIsPlaying(false);\r\n            return videoDuration;\r\n          }\r\n          return newTime;\r\n        });\r\n      }, 100);\r\n    } else {\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n      }\r\n    }\r\n\r\n    return () => {\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n      }\r\n    };\r\n  }, [isPlaying, videoDuration]);\r\n\r\n  useEffect(() => {\r\n    if (videoRef.current && currentVideoSource) {\r\n      const content = getCurrentTimelineContent();\r\n      if (content.mainVideo) {\r\n        const relativeTime = currentTime - content.mainVideo.startTime;\r\n        const timeDiff = Math.abs(videoRef.current.currentTime - relativeTime);\r\n\r\n        if (timeDiff > 0.5) {\r\n          videoRef.current.currentTime = Math.max(0, relativeTime);\r\n        }\r\n\r\n        if (isPlaying && videoRef.current.paused) {\r\n          videoRef.current.play().catch(console.error);\r\n        } else if (!isPlaying && !videoRef.current.paused) {\r\n          videoRef.current.pause();\r\n        }\r\n      }\r\n    }\r\n  }, [currentTime, currentVideoSource, getCurrentTimelineContent, isPlaying]);\r\n\r\n  useEffect(() => {\r\n    const currentAudioIds = new Set(\r\n      timelineItems\r\n        .filter(item => item.type === \"audio\")\r\n        .map(item => item.id)\r\n    );\r\n\r\n    audioElementsRef.current.forEach((audioElement, id) => {\r\n      if (!currentAudioIds.has(id)) {\r\n        audioElement.pause();\r\n        audioElement.src = '';\r\n        audioElementsRef.current.delete(id);\r\n      }\r\n    });\r\n  }, [timelineItems]);\r\n\r\n  // Очистка при размонтировании\r\n  useEffect(() => {\r\n    return () => {\r\n      stopAutoScroll();\r\n      // Очищаем все таймеры overlay info\r\n      if (window.overlayInfoTimers) {\r\n        Object.values(window.overlayInfoTimers).forEach(timer => clearTimeout(timer));\r\n        window.overlayInfoTimers = {};\r\n      }\r\n    };\r\n  }, [stopAutoScroll]);\r\n\r\n  // Обработка клавиатурных шорткатов\r\n  useEffect(() => {\r\n    const handleKeyDown = (e) => {\r\n      if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {\r\n        return;\r\n      }\r\n\r\n      if (e.key === 'Delete' || e.key === 'Backspace') {\r\n        e.preventDefault();\r\n        deleteSelectedItem();\r\n      }\r\n\r\n      if (e.ctrlKey && e.key === 'b') {\r\n        e.preventDefault();\r\n        splitTimelineItem();\r\n      }\r\n\r\n      if (e.ctrlKey && e.key === 'c') {\r\n        e.preventDefault();\r\n        copyTimelineItem();\r\n      }\r\n\r\n      if (e.ctrlKey && e.key === 'v') {\r\n        e.preventDefault();\r\n        pasteTimelineItem();\r\n      }\r\n\r\n      if (e.key === ' ' || e.code === 'Space') {\r\n        e.preventDefault();\r\n        setIsPlaying(prev => !prev);\r\n      }\r\n\r\n      if (e.key === 'ArrowLeft') {\r\n        e.preventDefault();\r\n        const step = e.ctrlKey ? 5 : e.shiftKey ? 1 : 0.1;\r\n        seekTo(Math.max(0, currentTime - step));\r\n      }\r\n      if (e.key === 'ArrowRight') {\r\n        e.preventDefault();\r\n        const step = e.ctrlKey ? 5 : e.shiftKey ? 1 : 0.1;\r\n        seekTo(Math.min(videoDuration, currentTime + step));\r\n      }\r\n\r\n      if (e.key === '=' || e.key === '+') {\r\n        e.preventDefault();\r\n        zoomIn();\r\n      }\r\n      if (e.key === '-') {\r\n        e.preventDefault();\r\n        zoomOut();\r\n      }\r\n      if (e.key === '0') {\r\n        e.preventDefault();\r\n        resetZoom();\r\n      }\r\n      \r\n      if (e.key === '?' || (e.shiftKey && e.key === '/')) {\r\n        e.preventDefault();\r\n        setShowHelp(true);\r\n      }\r\n      \r\n      if (e.key === 'Escape') {\r\n        e.preventDefault();\r\n        if (showHelp) {\r\n          setShowHelp(false);\r\n        } else if (selectedOverlay) {\r\n          setSelectedOverlay(null);\r\n        }\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => window.removeEventListener('keydown', handleKeyDown);\r\n  }, [selectedTimelineItem, copiedItem, currentTime, videoDuration, showHelp, selectedOverlay, deleteSelectedItem, splitTimelineItem, copyTimelineItem, pasteTimelineItem]);\r\n\r\n  // Обработка колесика мыши для зума\r\n  useEffect(() => {\r\n    const handleWheel = (e) => {\r\n      if (e.ctrlKey && timelineRef.current?.contains(e.target)) {\r\n        e.preventDefault();\r\n        if (e.deltaY < 0) {\r\n          zoomIn();\r\n        } else {\r\n          zoomOut();\r\n        }\r\n      }\r\n    };\r\n\r\n    document.addEventListener('wheel', handleWheel, { passive: false });\r\n    return () => document.removeEventListener('wheel', handleWheel);\r\n  }, []);\r\n\r\n  const handleVideoUpload = async (event) => {\r\n    const files = event.target.files ? Array.from(event.target.files) : [];\r\n    \r\n    if (files.length === 0) return;\r\n\r\n    setIsUploading(true);\r\n    setUploadProgress(0);\r\n\r\n    try {\r\n      for (let i = 0; i < files.length; i++) {\r\n        const file = files[i];\r\n        setUploadProgress(((i + 1) / files.length) * 100);\r\n        \r\n        await saveFileToStorage(file, 'videos');\r\n      }\r\n    } catch (error) {\r\n      console.error('Video upload error:', error);\r\n    } finally {\r\n      setIsUploading(false);\r\n      setUploadProgress(0);\r\n    }\r\n  };\r\n\r\n  const handleAudioUpload = async (event) => {\r\n    const files = event.target.files ? Array.from(event.target.files) : [];\r\n    \r\n    if (files.length === 0) return;\r\n\r\n    setIsUploading(true);\r\n    setUploadProgress(0);\r\n\r\n    try {\r\n      for (let i = 0; i < files.length; i++) {\r\n        const file = files[i];\r\n        setUploadProgress(((i + 1) / files.length) * 100);\r\n        \r\n        await saveFileToStorage(file, 'audios');\r\n      }\r\n    } catch (error) {\r\n      console.error('Audio upload error:', error);\r\n    } finally {\r\n      setIsUploading(false);\r\n      setUploadProgress(0);\r\n    }\r\n  };\r\n\r\n  const handleImageUpload = async (event) => {\r\n    const files = event.target.files ? Array.from(event.target.files) : [];\r\n    \r\n    if (files.length === 0) return;\r\n\r\n    setIsUploading(true);\r\n    setUploadProgress(0);\r\n\r\n    try {\r\n      for (let i = 0; i < files.length; i++) {\r\n        const file = files[i];\r\n        setUploadProgress(((i + 1) / files.length) * 100);\r\n        \r\n        await saveFileToStorage(file, 'images');\r\n      }\r\n    } catch (error) {\r\n      console.error('Image upload error:', error);\r\n    } finally {\r\n      setIsUploading(false);\r\n      setUploadProgress(0);\r\n    }\r\n  };\r\n\r\n  const addToTimeline = async (mediaItem, startTime = null, targetTrackId = null) => {\r\n    // Если это превью, загружаем оригинал\r\n    let finalUrl = mediaItem.url;\r\n    \r\n    if (mediaItem.isPreview) {\r\n      try {\r\n        // Показываем индикатор загрузки\r\n        const loadingToast = document.createElement('div');\r\n        loadingToast.className = 'fixed top-4 right-4 bg-blue-500 text-white px-4 py-2 rounded-lg shadow-lg z-50';\r\n        loadingToast.textContent = `Loading ${mediaItem.name}...`;\r\n        document.body.appendChild(loadingToast);\r\n        \r\n        // Получаем оригинальный файл из S3\r\n        const originalUrl = await getOriginalFileUrl(mediaItem.id);\r\n        if (originalUrl) {\r\n          finalUrl = originalUrl;\r\n        }\r\n        \r\n        // Убираем индикатор загрузки\r\n        document.body.removeChild(loadingToast);\r\n        \r\n      } catch (error) {\r\n        console.error('Failed to load original file:', error);\r\n        alert('Failed to load original file. Using preview instead.');\r\n      }\r\n    }\r\n    \r\n    let trackType, trackId;\r\n    \r\n    if (mediaItem.type === \"video\") {\r\n      trackType = targetTrackId && targetTrackId.startsWith('overlay') ? 'overlay' : 'main';\r\n      trackId = targetTrackId || 'main-video';\r\n    } else if (mediaItem.type === \"image\") {\r\n      trackType = 'overlay';\r\n      trackId = targetTrackId || 'overlay-1';\r\n    } else if (mediaItem.type === \"audio\") {\r\n      trackType = 'audio';\r\n      trackId = targetTrackId || 'audio-1';\r\n    }\r\n    \r\n    const duration = mediaItem.duration || (mediaItem.type === \"image\" ? 5 : 10);\r\n    \r\n    const finalStartTime = startTime !== null ? \r\n      startTime : \r\n      findNextAvailablePosition(trackId, duration);\r\n\r\n    const newTimelineItem = {\r\n      id: Date.now() + Math.random(),\r\n      mediaId: mediaItem.id,\r\n      type: mediaItem.type,\r\n      name: mediaItem.name,\r\n      url: finalUrl, // Используем оригинальный URL\r\n      startTime: finalStartTime,\r\n      duration: duration,\r\n      trackId: trackId,\r\n      trackType: trackType,\r\n      volume: 1,\r\n      opacity: 1,\r\n    };\r\n\r\n    setTimelineItems((prev) => [...prev, newTimelineItem]);\r\n\r\n    const newEndTime = newTimelineItem.startTime + newTimelineItem.duration;\r\n    if (newEndTime > videoDuration) {\r\n      setVideoDuration(newEndTime + 10);\r\n    }\r\n  };\r\n\r\n  const addOverlayTrack = () => {\r\n    const newTrackId = `overlay-${Date.now()}`;\r\n    setTracks(prev => ({\r\n      ...prev,\r\n      overlays: [...prev.overlays, {\r\n        id: newTrackId,\r\n        name: `Overlay ${prev.overlays.length + 1}`,\r\n        type: 'overlay'\r\n      }]\r\n    }));\r\n  };\r\n\r\n  const addAudioTrack = () => {\r\n    const newTrackId = `audio-${Date.now()}`;\r\n    setTracks(prev => ({\r\n      ...prev,\r\n      audio: [...prev.audio, {\r\n        id: newTrackId,\r\n        name: `Audio ${prev.audio.length + 1}`,\r\n        type: 'audio'\r\n      }]\r\n    }));\r\n  };\r\n\r\n  const removeFromLibrary = async (itemId, type) => {\r\n    // Сначала удаляем с сервера\r\n    const success = await deleteMediaFromServer(itemId);\r\n    \r\n    if (success) {\r\n      // Затем удаляем из локального состояния\r\n      setMediaLibrary((prev) => ({\r\n        ...prev,\r\n        [type]: prev[type].filter((item) => item.id !== itemId),\r\n      }));\r\n    } else {\r\n      alert('Failed to delete media file. Please try again.');\r\n    }\r\n  };\r\n\r\n  const handleTimelineClick = (e) => {\r\n    if (isDragging || isTimelineDragging || isResizing) return;\r\n    \r\n    const rect = timelineScrollRef.current.getBoundingClientRect();\r\n    const clickX = e.clientX - rect.left + timelineScrollRef.current.scrollLeft;\r\n    const pixelsPerSecond = getPixelsPerSecond();\r\n    const clickTime = clickX / pixelsPerSecond;\r\n    seekTo(clickTime);\r\n  };\r\n\r\n  const handleDragStart = (e, mediaItem) => {\r\n    setDraggedItem(mediaItem);\r\n    setIsDragging(true);\r\n    e.dataTransfer.effectAllowed = \"copy\";\r\n    e.dataTransfer.setData(\"text/plain\", \"\");\r\n  };\r\n\r\n  const handleDragEnd = () => {\r\n    setDraggedItem(null);\r\n    setDropPreview(null);\r\n    setIsDragging(false);\r\n  };\r\n\r\n  const handleTimelineItemDragStart = (e, timelineItem) => {\r\n    if (isResizing) {\r\n      e.preventDefault();\r\n      return;\r\n    }\r\n    \r\n    e.stopPropagation();\r\n    setDraggedTimelineItem(timelineItem);\r\n    setIsTimelineDragging(true);\r\n    \r\n    const rect = timelineScrollRef.current.getBoundingClientRect();\r\n    const itemRect = e.target.getBoundingClientRect();\r\n    setDragOffset(e.clientX - itemRect.left + timelineScrollRef.current.scrollLeft);\r\n    \r\n    e.dataTransfer.effectAllowed = \"move\";\r\n    e.dataTransfer.setData(\"text/plain\", \"\");\r\n  };\r\n\r\n  const handleTimelineItemDragEnd = () => {\r\n    setDraggedTimelineItem(null);\r\n    setDropPreview(null);\r\n    setIsTimelineDragging(false);\r\n    setDragOffset(0);\r\n    stopAutoScroll();\r\n  };\r\n\r\n  const handleDragOver = (e) => {\r\n    if (!draggedItem && !draggedTimelineItem) return;\r\n    \r\n    e.preventDefault();\r\n    e.dataTransfer.dropEffect = draggedItem ? \"copy\" : \"move\";\r\n    \r\n    if (draggedTimelineItem || isResizing) {\r\n      checkAutoScroll(e.clientX);\r\n    }\r\n    \r\n    const timelineRect = timelineScrollRef.current.getBoundingClientRect();\r\n    const dragX = e.clientX - timelineRect.left + timelineScrollRef.current.scrollLeft - (draggedTimelineItem ? dragOffset : 0);\r\n    const pixelsPerSecond = getPixelsPerSecond();\r\n    const dropTime = Math.max(0, dragX / pixelsPerSecond);\r\n    \r\n    const dragY = e.clientY - timelineRect.top + timelineScrollRef.current.scrollTop;\r\n    const trackHeight = 60;\r\n    const timeRulerHeight = 48;\r\n    \r\n    const relativeY = dragY - timeRulerHeight;\r\n    const trackIndex = Math.floor(relativeY / trackHeight);\r\n    \r\n    const allTracks = [...tracks.overlays, ...tracks.main, ...tracks.audio];\r\n    const targetTrack = allTracks[trackIndex];\r\n    \r\n    if (draggedItem && targetTrack) {\r\n      // Новый элемент из библиотеки\r\n      const duration = draggedItem.duration || (draggedItem.type === \"image\" ? 5 : 10);\r\n      const insertResult = insertWithRipple(targetTrack.id, dropTime, duration);\r\n      \r\n      setDropPreview({\r\n        time: insertResult.time,\r\n        duration: duration,\r\n        trackId: targetTrack.id,\r\n        trackType: targetTrack.type,\r\n        isValid: true,\r\n        shouldRipple: insertResult.shouldRipple,\r\n        affectedItems: insertResult.affectedItems || []\r\n      });\r\n    } else if (draggedTimelineItem && targetTrack) {\r\n      // Существующий элемент\r\n      const insertResult = insertWithRipple(\r\n        targetTrack.id, \r\n        dropTime, \r\n        draggedTimelineItem.duration, \r\n        draggedTimelineItem.id\r\n      );\r\n      \r\n      setDropPreview({\r\n        time: insertResult.time,\r\n        duration: draggedTimelineItem.duration,\r\n        trackId: targetTrack.id,\r\n        trackType: targetTrack.type,\r\n        isValid: true,\r\n        shouldRipple: insertResult.shouldRipple,\r\n        affectedItems: insertResult.affectedItems || []\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleDrop = (e) => {\r\n    if ((!draggedItem && !draggedTimelineItem) || !dropPreview) return;\r\n    \r\n    e.preventDefault();\r\n    stopAutoScroll();\r\n    \r\n    console.log('Dropping with ripple:', { \r\n      dropPreview,\r\n      shouldRipple: dropPreview.shouldRipple,\r\n      affectedItems: dropPreview.affectedItems?.length || 0\r\n    });\r\n    \r\n    if (dropPreview.isValid) {\r\n      if (draggedItem) {\r\n        // Новый элемент из библиотеки\r\n        if (dropPreview.shouldRipple && dropPreview.affectedItems?.length > 0) {\r\n          // Сначала сдвигаем существующие блоки\r\n          applyRippleEffect(dropPreview.affectedItems, dropPreview.duration);\r\n        }\r\n        \r\n        // Добавляем новый элемент\r\n        addToTimeline(draggedItem, dropPreview.time, dropPreview.trackId);\r\n        \r\n        console.log('Added with ripple effect:', dropPreview.shouldRipple);\r\n        \r\n      } else if (draggedTimelineItem) {\r\n        // Перемещение существующего элемента\r\n        if (dropPreview.shouldRipple && dropPreview.affectedItems?.length > 0) {\r\n          // Сначала сдвигаем блоки, которые нужно освободить место\r\n          applyRippleEffect(dropPreview.affectedItems, draggedTimelineItem.duration);\r\n        }\r\n        \r\n        // Перемещаем элемент\r\n        setTimelineItems(prev => prev.map(item => \r\n          item.id === draggedTimelineItem.id \r\n            ? { \r\n                ...item, \r\n                startTime: dropPreview.time, \r\n                trackId: dropPreview.trackId, \r\n                trackType: dropPreview.trackType \r\n              }\r\n            : item\r\n        ));\r\n        \r\n        console.log('Moved with ripple effect:', dropPreview.shouldRipple);\r\n        \r\n        const newEndTime = dropPreview.time + draggedTimelineItem.duration;\r\n        if (newEndTime > videoDuration) {\r\n          setVideoDuration(newEndTime + 10);\r\n        }\r\n      }\r\n    }\r\n    \r\n    setDropPreview(null);\r\n    setDraggedItem(null);\r\n    setDraggedTimelineItem(null);\r\n    setIsDragging(false);\r\n    setIsTimelineDragging(false);\r\n  };\r\n\r\n  const handleDragLeave = (e) => {\r\n    if (!timelineRef.current?.contains(e.relatedTarget)) {\r\n      setDropPreview(null);\r\n      stopAutoScroll();\r\n    }\r\n  };\r\n\r\n  const getTimelineItemStyle = (item) => {\r\n    const allTracks = [...tracks.overlays, ...tracks.main, ...tracks.audio];\r\n    const trackIndex = allTracks.findIndex(track => track.id === item.trackId);\r\n    const pixelsPerSecond = getPixelsPerSecond();\r\n    \r\n    return {\r\n      left: `${item.startTime * pixelsPerSecond}px`,\r\n      width: `${item.duration * pixelsPerSecond}px`,\r\n      top: `${trackIndex * 60 + 10}px`,\r\n    };\r\n  };\r\n\r\n  const getDropPreviewStyle = () => {\r\n    if (!dropPreview) return {};\r\n    \r\n    const allTracks = [...tracks.overlays, ...tracks.main, ...tracks.audio];\r\n    const trackIndex = allTracks.findIndex(track => track.id === dropPreview.trackId);\r\n    const pixelsPerSecond = getPixelsPerSecond();\r\n    \r\n    return {\r\n      left: `${dropPreview.time * pixelsPerSecond}px`,\r\n      width: `${dropPreview.duration * pixelsPerSecond}px`,\r\n      top: `${trackIndex * 60 + 10}px`,\r\n    };\r\n  };\r\n\r\n  const getTrackColor = (trackType) => {\r\n    switch (trackType) {\r\n      case 'overlay': return 'bg-purple-500 border-purple-400';\r\n      case 'main': return 'bg-blue-500 border-blue-400';\r\n      case 'audio': return 'bg-green-500 border-green-400';\r\n      default: return 'bg-gray-500 border-gray-400';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen w-full gap-4 p-4 bg-gray-100 overflow-hidden\">\r\n      {/* Notification System */}\r\n      <NotificationSystem />\r\n      \r\n      {/* Media Library */}\r\n      <div className=\"w-80 min-w-72 max-w-80 bg-white border-2 border-blue-200 flex flex-col rounded-2xl shadow-lg overflow-hidden flex-shrink-0\">\r\n        <div className=\"bg-blue-50 px-4 py-3 border-b border-blue-100\">\r\n          <h3 className=\"font-bold text-blue-800 flex items-center\">\r\n            <Upload size={18} className=\"mr-2\" />\r\n            Media Library (Local MVP)\r\n          </h3>\r\n          {!isStorageReady && (\r\n            <p className=\"text-xs text-blue-600 mt-1\">Initializing storage...</p>\r\n          )}\r\n        </div>\r\n\r\n        {/* Storage Statistics */}\r\n        {storageInfo && (\r\n          <div className=\"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-blue-100\">\r\n            <div className=\"grid grid-cols-3 gap-2 text-center mb-3\">\r\n              <div>\r\n                <div className=\"text-sm font-bold text-blue-600\">\r\n                  {storageInfo.usage.videos}/{storageInfo.limits.videos}\r\n                </div>\r\n                <div className=\"text-xs text-gray-600\">Videos</div>\r\n              </div>\r\n              <div>\r\n                <div className=\"text-sm font-bold text-purple-600\">\r\n                  {storageInfo.usage.images}/{storageInfo.limits.images}\r\n                </div>\r\n                <div className=\"text-xs text-gray-600\">Images</div>\r\n              </div>\r\n              <div>\r\n                <div className=\"text-sm font-bold text-green-600\">\r\n                  {storageInfo.usage.audios}/{storageInfo.limits.audios}\r\n                </div>\r\n                <div className=\"text-xs text-gray-600\">Audios</div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center justify-between text-xs\">\r\n              <div className=\"flex items-center space-x-1\">\r\n                <HardDrive size={12} className=\"text-gray-500\" />\r\n                <span className=\"text-gray-600\">{storageInfo.usage.totalSizeMB}MB used</span>\r\n              </div>\r\n              <div className=\"flex items-center space-x-1\">\r\n                <Clock size={12} className=\"text-orange-500\" />\r\n                <span className=\"text-orange-600\">7 days retention</span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Warning when approaching limits */}\r\n            {(storageInfo.usage.videos >= storageInfo.limits.videos * 0.8 ||\r\n              storageInfo.usage.images >= storageInfo.limits.images * 0.8 ||\r\n              storageInfo.usage.audios >= storageInfo.limits.audios * 0.8) && (\r\n              <div className=\"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded-lg\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <AlertTriangle size={12} className=\"text-yellow-500\" />\r\n                  <span className=\"text-xs text-yellow-700 font-medium\">\r\n                    Approaching storage limits\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n        \r\n        <div className=\"p-4 pb-0\">\r\n          <div className=\"flex bg-gray-100 rounded-xl p-1\">\r\n            {[\r\n              { id: \"videos\", name: \"Videos\", icon: Video },\r\n              { id: \"audios\", name: \"Audio\", icon: Music },\r\n              { id: \"images\", name: \"Images\", icon: Image },\r\n            ].map((tab) => {\r\n              const IconComponent = tab.icon;\r\n              const tabStorageInfo = storageInfo ? {\r\n                used: storageInfo.usage[tab.id],\r\n                limit: storageInfo.limits[tab.id]\r\n              } : null;\r\n              \r\n              return (\r\n                <button\r\n                  key={tab.id}\r\n                  onClick={() => setActiveTab(tab.id)}\r\n                  className={`flex-1 p-3 text-sm font-medium transition-all duration-200 rounded-lg relative ${\r\n                    activeTab === tab.id\r\n                      ? \"bg-white text-blue-600 shadow-sm\"\r\n                      : \"text-gray-600 hover:text-gray-800\"\r\n                  }`}\r\n                >\r\n                  <IconComponent size={16} className=\"mr-2 inline\" />\r\n                  {tab.name}\r\n                  {tabStorageInfo && (\r\n                    <div className={`absolute -top-1 -right-1 w-4 h-4 rounded-full text-xs flex items-center justify-center ${\r\n                      tabStorageInfo.used >= tabStorageInfo.limit \r\n                        ? 'bg-red-500 text-white' \r\n                        : tabStorageInfo.used >= tabStorageInfo.limit * 0.8\r\n                        ? 'bg-yellow-500 text-white'\r\n                        : 'bg-gray-300 text-gray-600'\r\n                    }`}>\r\n                      {tabStorageInfo.used}\r\n                    </div>\r\n                  )}\r\n                </button>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"p-4\">\r\n          <button\r\n            onClick={() => {\r\n              if (isUploading || !isStorageReady) return;\r\n              if (activeTab === \"videos\") fileInputRef.current?.click();\r\n              else if (activeTab === \"audios\") audioInputRef.current?.click();\r\n              else imageInputRef.current?.click();\r\n            }}\r\n            disabled={isUploading || !isStorageReady}\r\n            className={`w-full p-6 border-2 border-dashed rounded-2xl transition-all duration-200 text-center group ${\r\n              isUploading || !isStorageReady\r\n                ? \"border-gray-300 bg-gray-50 cursor-not-allowed\" \r\n                : storageInfo && storageInfo.usage[activeTab] >= storageInfo.limits[activeTab]\r\n                ? \"border-red-300 bg-red-50\"\r\n                : \"border-gray-300 hover:border-blue-400 hover:bg-blue-50/50\"\r\n            }`}\r\n          >\r\n            <div className={`w-12 h-12 bg-gray-100 rounded-xl flex items-center justify-center mx-auto mb-3 transition-colors ${\r\n              isUploading ? \"bg-blue-100\" : \"group-hover:bg-blue-100\"\r\n            }`}>\r\n              {isUploading ? (\r\n                <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-500\"></div>\r\n              ) : !isStorageReady ? (\r\n                <HardDrive size={20} className=\"text-gray-400\" />\r\n              ) : storageInfo && storageInfo.usage[activeTab] >= storageInfo.limits[activeTab] ? (\r\n                <AlertTriangle size={20} className=\"text-red-500\" />\r\n              ) : (\r\n                <Upload\r\n                  size={20}\r\n                  className={`text-gray-500 ${!isUploading && isStorageReady ? \"group-hover:text-blue-500\" : \"\"}`}\r\n                />\r\n              )}\r\n            </div>\r\n            <span className={`text-sm font-medium transition-colors ${\r\n              isUploading \r\n                ? \"text-blue-600\" \r\n                : !isStorageReady\r\n                ? \"text-gray-500\"\r\n                : storageInfo && storageInfo.usage[activeTab] >= storageInfo.limits[activeTab]\r\n                ? \"text-red-600\"\r\n                : \"text-gray-700 group-hover:text-blue-600\"\r\n            }`}>\r\n              {isUploading \r\n                ? `Uploading... ${Math.round(uploadProgress)}%`\r\n                : !isStorageReady\r\n                ? \"Initializing storage...\"\r\n                : storageInfo && storageInfo.usage[activeTab] >= storageInfo.limits[activeTab]\r\n                ? `Storage limit reached (${storageInfo.limits[activeTab]} max)`\r\n                : `Upload ${\r\n                    activeTab === \"videos\"\r\n                      ? \"Video\"\r\n                      : activeTab === \"audios\"\r\n                      ? \"Audio\"\r\n                      : \"Images\"\r\n                  }`\r\n              }\r\n            </span>\r\n            <p className=\"text-xs text-gray-500 mt-1\">\r\n              {isUploading \r\n                ? \"Please wait while files are being saved locally\"\r\n                : !isStorageReady\r\n                ? \"Setting up local storage...\"\r\n                : storageInfo && storageInfo.usage[activeTab] >= storageInfo.limits[activeTab]\r\n                ? \"Delete some files to upload more\"\r\n                : `${\r\n                    activeTab === \"videos\"\r\n                      ? \"MP4, AVI, MOV up to 100MB\"\r\n                      : activeTab === \"audios\"\r\n                      ? \"MP3, WAV, M4A up to 100MB\"\r\n                      : \"JPG, PNG, GIF up to 100MB\"\r\n                  } • Stored locally for 7 days`\r\n              }\r\n            </p>\r\n            {isUploading && (\r\n              <div className=\"w-full bg-gray-200 rounded-full h-2 mt-3\">\r\n                <div \r\n                  className=\"bg-blue-500 h-2 rounded-full transition-all duration-300\"\r\n                  style={{ width: `${uploadProgress}%` }}\r\n                ></div>\r\n              </div>\r\n            )}\r\n            \r\n            {/* Показываем оставшееся место */}\r\n            {isStorageReady && storageInfo && (\r\n              <div className=\"mt-2 text-xs\">\r\n                <span className={`font-medium ${\r\n                  storageInfo.usage[activeTab] >= storageInfo.limits[activeTab] * 0.8\r\n                    ? \"text-red-600\"\r\n                    : \"text-green-600\"\r\n                }`}>\r\n                  {storageInfo.limits[activeTab] - storageInfo.usage[activeTab]} slots remaining\r\n                </span>\r\n              </div>\r\n            )}\r\n          </button>\r\n        </div>\r\n\r\n        <input\r\n          ref={fileInputRef}\r\n          type=\"file\"\r\n          accept=\"video/*\"\r\n          multiple\r\n          onChange={handleVideoUpload}\r\n          className=\"hidden\"\r\n        />\r\n        <input\r\n          ref={audioInputRef}\r\n          type=\"file\"\r\n          accept=\"audio/*\"\r\n          multiple\r\n          onChange={handleAudioUpload}\r\n          className=\"hidden\"\r\n        />\r\n        <input\r\n          ref={imageInputRef}\r\n          type=\"file\"\r\n          accept=\"image/*\"\r\n          multiple\r\n          onChange={handleImageUpload}\r\n          className=\"hidden\"\r\n        />\r\n\r\n        <div className=\"flex-1 overflow-y-auto px-4 pb-4\">\r\n          <div className=\"space-y-2\">\r\n            {mediaLibrary[activeTab].map((item) => (\r\n              <div\r\n                key={item.id}\r\n                draggable=\"true\"\r\n                onDragStart={(e) => handleDragStart(e, item)}\r\n                onDragEnd={handleDragEnd}\r\n                className={`flex items-center p-3 bg-gray-50 rounded-xl hover:bg-gray-100 hover:shadow-sm transition-all duration-200 cursor-grab active:cursor-grabbing group relative ${\r\n                  draggedItem?.id === item.id ? \"opacity-50\" : \"\"\r\n                }`}\r\n                onClick={() => addToTimeline(item)}\r\n              >\r\n                {/* Preview indicator */}\r\n                {item.isPreview && (\r\n                  <div className=\"absolute top-1 right-1 bg-blue-500 text-white text-xs px-2 py-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                    Preview\r\n                  </div>\r\n                )}\r\n                \r\n                <div className=\"w-12 h-12 bg-white rounded-xl flex items-center justify-center mr-3 shadow-sm group-hover:shadow relative overflow-hidden\">\r\n                  {/* Тип файла и размер в углу */}\r\n                  <div className=\"absolute top-0 left-0 w-2 h-2 rounded-br-lg bg-gradient-to-br from-blue-500 to-indigo-500\"></div>\r\n                  \r\n                  {activeTab === \"videos\" && (\r\n                    <Video size={20} className=\"text-blue-500\" />\r\n                  )}\r\n                  {activeTab === \"audios\" && (\r\n                    <Music size={20} className=\"text-green-500\" />\r\n                  )}\r\n                  {activeTab === \"images\" && (\r\n                    <Image size={20} className=\"text-purple-500\" />\r\n                  )}\r\n                </div>\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <p className=\"text-sm font-medium text-gray-900 truncate\">\r\n                    {item.name}\r\n                  </p>\r\n                  <div className=\"flex items-center space-x-2 text-xs text-gray-500\">\r\n                    <span>\r\n                      {activeTab === \"images\"\r\n                        ? `${item.metadata?.width || '?'}×${item.metadata?.height || '?'}`\r\n                        : formatTime(item.duration || 0)}\r\n                    </span>\r\n                    <span>•</span>\r\n                    <span>{(item.size / (1024 * 1024)).toFixed(1)}MB</span>\r\n                    {item.isPreview && (\r\n                      <>\r\n                        <span>•</span>\r\n                        <span className=\"text-blue-600 font-medium\">Cloud stored</span>\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    removeFromLibrary(item.id, activeTab);\r\n                  }}\r\n                  className=\"opacity-0 group-hover:opacity-100 p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200\"\r\n                >\r\n                  <Trash2 size={14} />\r\n                </button>\r\n              </div>\r\n            ))}\r\n            {mediaLibrary[activeTab].length === 0 && (\r\n              <div className=\"text-center py-8\">\r\n                <div className=\"w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center mx-auto mb-3\">\r\n                  {activeTab === \"videos\" && <Video size={24} className=\"text-gray-400\" />}\r\n                  {activeTab === \"audios\" && <Music size={24} className=\"text-gray-400\" />}\r\n                  {activeTab === \"images\" && <Image size={24} className=\"text-gray-400\" />}\r\n                </div>\r\n                <p className=\"text-sm text-gray-500\">No {activeTab} uploaded yet</p>\r\n                <p className=\"text-xs text-gray-400 mt-1\">\r\n                  Files are stored in cloud for better performance\r\n                </p>\r\n                <div className=\"mt-3 text-xs text-blue-600 bg-blue-50 px-3 py-2 rounded-lg inline-flex items-center space-x-2\">\r\n                  <div className=\"w-2 h-2 bg-blue-500 rounded-full\"></div>\r\n                  <span>Hybrid storage: Local previews + Cloud originals</span>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 flex flex-col gap-4 min-w-0 overflow-hidden\">\r\n        {/* Video Preview */}\r\n        <div \r\n          ref={videoContainerRef}\r\n          className=\"flex-1 bg-black rounded-2xl relative overflow-hidden shadow-sm min-h-0\" \r\n          title=\"Video Preview - Click overlays to select, drag to move, Ctrl+scroll to resize, use opacity slider\"\r\n        >\r\n          {currentVideoSource ? (\r\n            <div \r\n              className=\"relative w-full h-full\"\r\n              onClick={(e) => {\r\n                // Снимаем выделение overlay при клике на пустое место\r\n                if (e.target === e.currentTarget) {\r\n                  setSelectedOverlay(null);\r\n                }\r\n              }}\r\n            >\r\n              {getCurrentTimelineContent().mainVideo ? (\r\n                <video\r\n                  ref={videoRef}\r\n                  src={currentVideoSource}\r\n                  className=\"w-full h-full object-contain rounded-2xl\"\r\n                  muted={isMuted}\r\n                />\r\n              ) : (\r\n                <img\r\n                  src={currentVideoSource}\r\n                  alt=\"Timeline content\"\r\n                  className=\"w-full h-full object-contain rounded-2xl\"\r\n                />\r\n              )}\r\n              \r\n              {getCurrentTimelineContent().overlays.map((item, index) => {\r\n                const transform = getOverlayTransform(item.id);\r\n                const isSelected = selectedOverlay?.id === item.id;\r\n                const isDraggingThis = isDraggingOverlay && isSelected;\r\n                const isResizingThis = isResizingOverlay && isSelected;\r\n                \r\n                return (\r\n                  <div\r\n                    key={item.id}\r\n                    className={`absolute select-none ${\r\n                      isSelected ? 'ring-2 ring-blue-400 ring-opacity-75 shadow-xl' : 'hover:ring-2 hover:ring-blue-300 hover:ring-opacity-50'\r\n                    } ${isDraggingThis ? 'cursor-grabbing z-50' : isResizingThis ? 'cursor-nw-resize' : 'cursor-grab hover:shadow-lg'}`}\r\n                    style={{ \r\n                      left: `${200 + transform.x}px`,\r\n                      top: `${50 + index * 120 + transform.y}px`,\r\n                      width: `${128 * transform.scale}px`,\r\n                      height: `${96 * transform.scale}px`,\r\n                      opacity: transform.opacity,\r\n                      zIndex: isSelected ? 1000 : 10 + index,\r\n                      transform: isDraggingThis ? 'scale(1.02)' : 'scale(1)',\r\n                      transition: isDraggingThis || isResizingThis ? 'none' : 'transform 0.2s ease, box-shadow 0.2s ease',\r\n                    }}\r\n                    onMouseDown={(e) => handleOverlayMouseDown(e, {...item, index})}\r\n                    onWheel={(e) => handleOverlayWheel(e, item.id)}\r\n                  >\r\n                    <div className={`relative w-full h-full border-2 rounded-lg overflow-hidden shadow-lg group ${\r\n                      isSelected ? 'border-blue-400' : 'border-white hover:border-blue-300'\r\n                    }`}\r\n                    style={{\r\n                      transition: isDraggingThis || isResizingThis ? 'none' : 'border-color 0.2s ease',\r\n                    }}>\r\n                      {item.type === 'video' ? (\r\n                        <video\r\n                          src={item.url}\r\n                          className=\"w-full h-full object-cover pointer-events-none\"\r\n                          muted\r\n                        />\r\n                      ) : (\r\n                        <img\r\n                          src={item.url}\r\n                          alt={item.name}\r\n                          className=\"w-full h-full object-cover pointer-events-none\"\r\n                          draggable={false}\r\n                        />\r\n                      )}\r\n                      \r\n                      {/* Overlay hover effect */}\r\n                      <div className={`absolute inset-0 bg-blue-500 bg-opacity-0 hover:bg-opacity-10 ${\r\n                        isSelected ? 'bg-opacity-10' : ''\r\n                      }`}\r\n                      style={{\r\n                        transition: isDraggingThis || isResizingThis ? 'none' : 'background-color 0.2s ease',\r\n                      }}></div>\r\n                      \r\n                      {isSelected && (\r\n                        <>\r\n                          {/* Resize handles - с визуальной обратной связью */}\r\n                          <div \r\n                            className={`resize-handle absolute -top-2 -left-2 w-4 h-4 bg-blue-500 rounded-full cursor-nw-resize opacity-90 hover:opacity-100 hover:scale-125 shadow-md border-2 border-white ${\r\n                              isResizingThis && resizeOverlayHandle === 'nw' ? 'scale-150 bg-red-500' : ''\r\n                            }`}\r\n                            onMouseDown={(e) => handleOverlayResizeStart(e, item, 'nw')}\r\n                            style={{\r\n                              transition: isDraggingThis || isResizingThis ? 'none' : 'all 0.2s ease',\r\n                            }}\r\n                          ></div>\r\n                          <div \r\n                            className={`resize-handle absolute -top-2 -right-2 w-4 h-4 bg-blue-500 rounded-full cursor-ne-resize opacity-90 hover:opacity-100 hover:scale-125 shadow-md border-2 border-white ${\r\n                              isResizingThis && resizeOverlayHandle === 'ne' ? 'scale-150 bg-red-500' : ''\r\n                            }`}\r\n                            onMouseDown={(e) => handleOverlayResizeStart(e, item, 'ne')}\r\n                            style={{\r\n                              transition: isDraggingThis || isResizingThis ? 'none' : 'all 0.2s ease',\r\n                            }}\r\n                          ></div>\r\n                          <div \r\n                            className={`resize-handle absolute -bottom-2 -left-2 w-4 h-4 bg-blue-500 rounded-full cursor-sw-resize opacity-90 hover:opacity-100 hover:scale-125 shadow-md border-2 border-white ${\r\n                              isResizingThis && resizeOverlayHandle === 'sw' ? 'scale-150 bg-red-500' : ''\r\n                            }`}\r\n                            onMouseDown={(e) => handleOverlayResizeStart(e, item, 'sw')}\r\n                            style={{\r\n                              transition: isDraggingThis || isResizingThis ? 'none' : 'all 0.2s ease',\r\n                            }}\r\n                          ></div>\r\n                          <div \r\n                            className={`resize-handle absolute -bottom-2 -right-2 w-4 h-4 bg-blue-500 rounded-full cursor-se-resize opacity-90 hover:opacity-100 hover:scale-125 shadow-md border-2 border-white ${\r\n                              isResizingThis && resizeOverlayHandle === 'se' ? 'scale-150 bg-red-500' : ''\r\n                            }`}\r\n                            onMouseDown={(e) => handleOverlayResizeStart(e, item, 'se')}\r\n                            style={{\r\n                              transition: isDraggingThis || isResizingThis ? 'none' : 'all 0.2s ease',\r\n                            }}\r\n                          ></div>\r\n                          \r\n                          {/* Центральная точка для перетаскивания */}\r\n                          <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-2 h-2 bg-blue-500 rounded-full opacity-60 pointer-events-none\"></div>\r\n                          \r\n                          {/* Opacity slider - улучшенный */}\r\n                          <div className=\"absolute -bottom-12 left-0 right-0 bg-black/80 backdrop-blur-sm rounded-lg px-3 py-2 border border-white/20 shadow-lg\">\r\n                            <div className=\"flex items-center space-x-2\">\r\n                              <span className=\"text-white text-xs font-medium min-w-fit\">Opacity:</span>\r\n                              <input\r\n                                type=\"range\"\r\n                                min=\"0.1\"\r\n                                max=\"1\"\r\n                                step=\"0.05\"\r\n                                value={transform.opacity}\r\n                                onChange={(e) => updateOverlayTransform(item.id, { opacity: parseFloat(e.target.value) })}\r\n                                className=\"flex-1 h-2 accent-blue-500 cursor-pointer\"\r\n                                onMouseDown={(e) => e.stopPropagation()}\r\n                              />\r\n                              <span className=\"text-white text-xs min-w-8 text-right font-mono\">\r\n                                {Math.round(transform.opacity * 100)}%\r\n                              </span>\r\n                            </div>\r\n                          </div>\r\n                        </>\r\n                      )}\r\n                      \r\n                      {/* Layer info - улучшенная с автоскрытием */}\r\n                      <div className={`absolute top-1 left-1 bg-black/70 text-white text-xs px-2 py-1 rounded pointer-events-none transition-opacity duration-300 ${\r\n                        isSelected && (isDraggingThis || isResizingThis || showOverlayInfo[item.id]) \r\n                          ? 'opacity-100' \r\n                          : isSelected \r\n                            ? 'opacity-0 group-hover:opacity-100' \r\n                            : 'opacity-0 group-hover:opacity-100'\r\n                      }`}\r\n                      style={{\r\n                        transition: isDraggingThis || isResizingThis ? 'none' : 'opacity 0.3s ease',\r\n                      }}>\r\n                        {item.name} • {Math.round(transform.scale * 100)}% • {Math.round(transform.opacity * 100)}%\r\n                      </div>\r\n                      \r\n                      {/* Индикатор выделения */}\r\n                      {isSelected && (\r\n                        <div className=\"absolute -top-0.5 -left-0.5 -right-0.5 -bottom-0.5 border-2 border-blue-400 rounded-lg pointer-events-none animate-pulse\"></div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          ) : (\r\n            <div className=\"w-full h-full flex items-center justify-center text-white\">\r\n              <div className=\"text-center\">\r\n                <div className=\"w-20 h-20 bg-gray-800 rounded-2xl flex items-center justify-center mx-auto mb-4\">\r\n                  <Film size={40} className=\"opacity-50\" />\r\n                </div>\r\n                <p className=\"text-xl opacity-75 font-medium\">\r\n                  No content at current time\r\n                </p>\r\n                <p className=\"text-sm opacity-50 mb-4\">\r\n                  Drag media to timeline tracks to start editing\r\n                </p>\r\n                <div className=\"text-xs opacity-40 space-y-1\">\r\n                  <p>💡 Overlays are interactive • Ripple mode enabled</p>\r\n                  <p>Press <kbd className=\"px-1 py-0.5 bg-gray-700 rounded text-xs\">?</kbd> for help & shortcuts</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"absolute bottom-6 left-1/2 transform -translate-x-1/2 bg-black/60 backdrop-blur-md rounded-2xl p-4\">\r\n            <div className=\"flex items-center space-x-6\">\r\n              <button\r\n                onClick={() => seekTo(Math.max(0, currentTime - 10))}\r\n                className=\"text-white hover:text-blue-400 transition-colors p-1 rounded-lg hover:bg-white/10\"\r\n                title=\"Skip back 10 seconds\"\r\n              >\r\n                <SkipBack size={20} />\r\n              </button>\r\n              <button\r\n                onClick={handlePlayPause}\r\n                className=\"w-12 h-12 bg-white/20 hover:bg-white/30 rounded-2xl flex items-center justify-center text-white transition-all hover:scale-105\"\r\n                title=\"Play/Pause (Space)\"\r\n              >\r\n                {isPlaying ? <Pause size={24} /> : <Play size={24} />}\r\n              </button>\r\n              <button\r\n                onClick={() =>\r\n                  seekTo(Math.min(videoDuration, currentTime + 10))\r\n                }\r\n                className=\"text-white hover:text-blue-400 transition-colors p-1 rounded-lg hover:bg-white/10\"\r\n                title=\"Skip forward 10 seconds\"\r\n              >\r\n                <SkipForward size={20} />\r\n              </button>\r\n              <div className=\"flex items-center space-x-3\">\r\n                <button\r\n                  onClick={() => setIsMuted(!isMuted)}\r\n                  className=\"text-white hover:text-blue-400 transition-colors p-1 rounded-lg hover:bg-white/10\"\r\n                  title=\"Toggle mute\"\r\n                >\r\n                  {isMuted ? <VolumeX size={20} /> : <Volume2 size={20} />}\r\n                </button>\r\n                <input\r\n                  type=\"range\"\r\n                  min=\"0\"\r\n                  max=\"1\"\r\n                  step=\"0.1\"\r\n                  value={volume}\r\n                  onChange={(e) => setVolume(parseFloat(e.target.value))}\r\n                  className=\"w-24 accent-blue-500\"\r\n                  title=\"Volume control\"\r\n                />\r\n              </div>\r\n              <span className=\"text-white text-sm font-medium min-w-0\" title=\"Current time / Total duration\">\r\n                {formatTime(currentTime)} / {formatTime(videoDuration)}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Timeline */}\r\n        <div \r\n          className={`h-80 bg-white rounded-2xl shadow-sm border-2 transition-all duration-200 overflow-hidden flex flex-col flex-shrink-0 ${\r\n            isDragging || isTimelineDragging || isResizing\r\n              ? \"border-blue-400 bg-blue-50/20\" \r\n              : \"border-gray-200\"\r\n          }`}\r\n        >\r\n          <div className=\"bg-gray-50 p-4 border-b border-gray-200 space-y-3\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h4 className=\"text-gray-800 font-semibold flex items-center space-x-2\">\r\n                <Film size={18} />\r\n                <span>Timeline Pro</span>\r\n                {isDragging && dropPreview && (\r\n                  <span className=\"text-green-600\">\r\n                    - Adding \"{draggedItem?.name}\" {dropPreview.shouldRipple ? '⚡ ripple' : '📍 exact'}\r\n                  </span>\r\n                )}\r\n                {isTimelineDragging && dropPreview && (\r\n                  <span className=\"text-blue-600\">\r\n                    - Moving \"{draggedTimelineItem?.name}\" {dropPreview.shouldRipple ? '⚡ push blocks' : '📍 exact'}\r\n                  </span>\r\n                )}\r\n                {isResizing && resizeItem && (\r\n                  <span className=\"text-orange-600\">\r\n                    - Trimming \"{resizeItem.name}\" ({resizeHandle} edge)\r\n                  </span>\r\n                )}\r\n                {copiedItem && (\r\n                  <span className=\"text-blue-600 text-sm\">\r\n                    - \"{copiedItem.name}\" copied (Ctrl+V to paste)\r\n                  </span>\r\n                )}\r\n              </h4>\r\n              \r\n              <div className=\"flex items-center space-x-3\">\r\n                <button\r\n                  onClick={() => setShowHelp(true)}\r\n                  className=\"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-xl transition-all duration-200\"\r\n                  title=\"📖 Help & Shortcuts Guide - Learn all controls and hotkeys (Press ? key)\"\r\n                >\r\n                  <HelpCircle size={18} />\r\n                </button>\r\n                \r\n                <div className=\"flex items-center space-x-2 bg-white rounded-xl p-2 border border-gray-200\">\r\n                  <button\r\n                    onClick={zoomOut}\r\n                    className=\"p-1 text-gray-600 hover:text-blue-600 transition-colors\"\r\n                    title=\"Zoom Out (-)\"\r\n                  >\r\n                    <ZoomOut size={16} />\r\n                  </button>\r\n                  <span className=\"text-xs text-gray-500 min-w-12 text-center\">\r\n                    {(timelineZoom * 100).toFixed(0)}%\r\n                  </span>\r\n                  <button\r\n                    onClick={zoomIn}\r\n                    className=\"p-1 text-gray-600 hover:text-blue-600 transition-colors\"\r\n                    title=\"Zoom In (+), or Ctrl+Wheel\"\r\n                  >\r\n                    <ZoomIn size={16} />\r\n                  </button>\r\n                  <button\r\n                    onClick={resetZoom}\r\n                    className=\"p-1 text-gray-600 hover:text-blue-600 transition-colors\"\r\n                    title=\"Reset Zoom (0)\"\r\n                  >\r\n                    <RotateCcw size={16} />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center space-x-6\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <button\r\n                    onClick={addOverlayTrack}\r\n                    className=\"p-2 text-purple-600 hover:text-purple-800 hover:bg-purple-50 rounded-xl transition-all duration-200\"\r\n                    title=\"Add Overlay Track\"\r\n                  >\r\n                    <Plus size={16} />\r\n                  </button>\r\n                  <button\r\n                    onClick={addAudioTrack}\r\n                    className=\"p-2 text-green-600 hover:text-green-800 hover:bg-green-50 rounded-xl transition-all duration-200\"\r\n                    title=\"Add Audio Track\"\r\n                  >\r\n                    <Music size={16} />\r\n                  </button>\r\n                  <button\r\n                    onClick={splitTimelineItem}\r\n                    disabled={!selectedTimelineItem}\r\n                    className={`p-2 rounded-xl transition-all duration-200 ${\r\n                      selectedTimelineItem \r\n                        ? \"text-red-600 hover:text-red-800 hover:bg-red-50\" \r\n                        : \"text-gray-400 cursor-not-allowed\"\r\n                    }`}\r\n                    title=\"Split Selected Item (Ctrl+B) - Cuts item at current time\"\r\n                  >\r\n                    <Scissors size={16} />\r\n                  </button>\r\n                  <button \r\n                    onClick={copyTimelineItem}\r\n                    disabled={!selectedTimelineItem}\r\n                    className={`p-2 rounded-xl transition-all duration-200 ${\r\n                      selectedTimelineItem \r\n                        ? \"text-blue-600 hover:text-blue-800 hover:bg-blue-50\" \r\n                        : \"text-gray-400 cursor-not-allowed\"\r\n                    }`}\r\n                    title=\"Copy Selected Item (Ctrl+C) - Copy item to clipboard\"\r\n                  >\r\n                    <Copy size={16} />\r\n                  </button>\r\n                  <button \r\n                    onClick={deleteSelectedItem}\r\n                    disabled={!selectedTimelineItem}\r\n                    className={`p-2 rounded-xl transition-all duration-200 ${\r\n                      selectedTimelineItem \r\n                        ? \"text-red-600 hover:text-red-800 hover:bg-red-50\" \r\n                        : \"text-gray-400 cursor-not-allowed\"\r\n                    }`}\r\n                    title=\"Delete Selected Item (Del/Backspace) - Remove from timeline\"\r\n                  >\r\n                    <Trash2 size={16} />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex-1 flex min-h-0\">\r\n            <div className=\"w-48 bg-gray-50 border-r border-gray-200 flex-shrink-0 flex flex-col\">\r\n              <div className=\"h-12 border-b border-gray-200 flex-shrink-0\"></div>\r\n              \r\n              <div \r\n                ref={trackLabelsRef}\r\n                className=\"flex-1 overflow-y-auto overflow-x-hidden\"\r\n                onScroll={handleTrackLabelsScroll}\r\n              >\r\n                {tracks.overlays.map((track) => (\r\n                  <div\r\n                    key={track.id}\r\n                    className=\"h-15 flex items-center px-4 border-b border-gray-100 text-sm font-medium text-purple-700 bg-purple-50 flex-shrink-0\"\r\n                    style={{ height: '60px' }}\r\n                  >\r\n                    <Layers size={16} className=\"mr-2\" />\r\n                    {track.name}\r\n                  </div>\r\n                ))}\r\n                \r\n                {tracks.main.map((track) => (\r\n                  <div\r\n                    key={track.id}\r\n                    className=\"h-15 flex items-center px-4 border-b border-gray-100 text-sm font-medium text-blue-700 bg-blue-50 flex-shrink-0\"\r\n                    style={{ height: '60px' }}\r\n                  >\r\n                    <Video size={16} className=\"mr-2\" />\r\n                    {track.name}\r\n                  </div>\r\n                ))}\r\n                \r\n                {tracks.audio.map((track) => (\r\n                  <div\r\n                    key={track.id}\r\n                    className=\"h-15 flex items-center px-4 border-b border-gray-100 text-sm font-medium text-green-700 bg-green-50 flex-shrink-0\"\r\n                    style={{ height: '60px' }}\r\n                  >\r\n                    <Music size={16} className=\"mr-2\" />\r\n                    {track.name}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <div \r\n              ref={(el) => {\r\n                timelineRef.current = el;\r\n                timelineScrollRef.current = el;\r\n              }}\r\n              className=\"flex-1 relative overflow-auto bg-white\"\r\n              onScroll={handleTrackAreaScroll}\r\n              onDragOver={handleDragOver}\r\n              onDrop={handleDrop}\r\n              onDragLeave={handleDragLeave}\r\n              style={{ \r\n                overflowX: 'auto', \r\n                overflowY: 'auto',\r\n                scrollbarWidth: 'thin'\r\n              }}\r\n            >\r\n              <div \r\n                style={{ \r\n                  width: `${getTimelineWidth()}px`, \r\n                  minHeight: '100%',\r\n                  position: 'relative'\r\n                }}\r\n                onClick={handleTimelineClick}\r\n              >\r\n                <div className=\"h-12 bg-gray-50 border-b border-gray-200 relative flex-shrink-0\">\r\n                  {Array.from({ length: Math.ceil(videoDuration * timelineZoom / 5) + 1 }, (_, i) => {\r\n                    const timeValue = i * 5 / timelineZoom;\r\n                    const pixelsPerSecond = getPixelsPerSecond();\r\n                    return (\r\n                      <div\r\n                        key={i}\r\n                        className=\"absolute top-0 h-full border-l border-gray-300\"\r\n                        style={{ left: `${timeValue * pixelsPerSecond}px` }}\r\n                      >\r\n                        <span className=\"text-xs text-gray-600 ml-2 mt-2 inline-block font-medium\">\r\n                          {formatTime(timeValue)}\r\n                        </span>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                  \r\n                  {timelineZoom > 2 && Array.from({ length: Math.ceil(videoDuration * timelineZoom) + 1 }, (_, i) => {\r\n                    const timeValue = i / timelineZoom;\r\n                    const pixelsPerSecond = getPixelsPerSecond();\r\n                    return (\r\n                      <div\r\n                        key={`sub-${i}`}\r\n                        className=\"absolute top-8 w-0 h-4 border-l border-gray-200\"\r\n                        style={{ left: `${timeValue * pixelsPerSecond}px` }}\r\n                      />\r\n                    );\r\n                  })}\r\n                  \r\n                  <div\r\n                    className=\"absolute top-0 w-0.5 h-full bg-red-500 z-20 shadow-sm\"\r\n                    style={{\r\n                      left: `${currentTime * getPixelsPerSecond()}px`,\r\n                    }}\r\n                  />\r\n                </div>\r\n\r\n                <div \r\n                  className=\"relative flex-1\" \r\n                  style={{ \r\n                    height: `${(tracks.overlays.length + tracks.main.length + tracks.audio.length) * 60}px`,\r\n                    minHeight: '100%'\r\n                  }}\r\n                >\r\n                  {timelineItems.map((item) => (\r\n                    <div\r\n                      key={item.id}\r\n                      className={`absolute h-10 rounded-lg border-2 cursor-grab active:cursor-grabbing transition-all shadow-sm hover:shadow-md group ${\r\n                        getTrackColor(item.trackType)\r\n                      } ${\r\n                        selectedTimelineItem?.id === item.id ? \"ring-2 ring-blue-300\" : \"\"\r\n                      } ${\r\n                        draggedTimelineItem?.id === item.id ? \"opacity-50 z-30\" : \"\"\r\n                      } ${\r\n                        copiedItem?.id === item.id ? \"ring-2 ring-green-300 ring-dashed\" : \"\"\r\n                      }`}\r\n                      style={getTimelineItemStyle(item)}\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        setSelectedTimelineItem(item);\r\n                      }}\r\n                    >\r\n                      <div\r\n                        className=\"absolute left-0 top-0 w-3 h-full cursor-ew-resize opacity-0 group-hover:opacity-100 bg-white/50 rounded-l-lg z-10 flex items-center justify-center\"\r\n                        onMouseDown={(e) => handleResizeStart(e, item, 'left')}\r\n                        title=\"Trim start - Drag to adjust start time\"\r\n                        style={{ background: 'linear-gradient(to right, rgba(255,255,255,0.8), transparent)' }}\r\n                      >\r\n                        <div className=\"w-0.5 h-6 bg-white rounded-full opacity-80\"></div>\r\n                      </div>\r\n                      \r\n                      <div\r\n                        draggable=\"true\"\r\n                        onDragStart={(e) => handleTimelineItemDragStart(e, item)}\r\n                        onDragEnd={handleTimelineItemDragEnd}\r\n                        className=\"p-2 text-white text-xs truncate font-medium flex items-center h-full mx-3 cursor-grab active:cursor-grabbing\"\r\n                        title=\"Drag to move item on timeline - Ripple mode: pushes other blocks\"\r\n                      >\r\n                        {item.name}\r\n                        {copiedItem?.id === item.id && (\r\n                          <span className=\"ml-2 text-green-200\">📋</span>\r\n                        )}\r\n                      </div>\r\n                      \r\n                      <div\r\n                        className=\"absolute right-0 top-0 w-3 h-full cursor-ew-resize opacity-0 group-hover:opacity-100 bg-white/50 rounded-r-lg z-10 flex items-center justify-center\"\r\n                        onMouseDown={(e) => handleResizeStart(e, item, 'right')}\r\n                        title=\"Trim end - Drag to adjust duration\"\r\n                        style={{ background: 'linear-gradient(to left, rgba(255,255,255,0.8), transparent)' }}\r\n                      >\r\n                        <div className=\"w-0.5 h-6 bg-white rounded-full opacity-80\"></div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                  \r\n                  {dropPreview && (\r\n                    <div\r\n                      className={`absolute h-10 rounded-lg border-2 transition-all ${\r\n                        dropPreview.isValid \r\n                          ? dropPreview.isExact \r\n                            ? `${getTrackColor(dropPreview.trackType)} bg-opacity-60 border-solid` \r\n                            : `${getTrackColor(dropPreview.trackType)} bg-opacity-40 border-dashed animate-pulse`\r\n                          : \"bg-red-300 border-red-500 border-dashed\"\r\n                      }`}\r\n                      style={getDropPreviewStyle()}\r\n                    >\r\n                      {dropPreview.isValid && !dropPreview.isExact && (\r\n                        <div className=\"flex items-center justify-center h-full text-white text-xs font-bold\">\r\n                          🧲\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Help Modal */}\r\n      {showHelp && (\r\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n          <div className=\"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-y-auto\">\r\n            <div className=\"p-6 border-b border-gray-200 flex items-center justify-between\">\r\n              <h3 className=\"text-xl font-bold text-gray-800 flex items-center\">\r\n                <HelpCircle size={24} className=\"mr-3 text-blue-600\" />\r\n                CapCut Pro - Help & Shortcuts\r\n              </h3>\r\n              <button\r\n                onClick={() => setShowHelp(false)}\r\n                className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-xl transition-all\"\r\n              >\r\n                <X size={20} />\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"p-6 space-y-6\">\r\n              {/* Timeline Controls */}\r\n              <div>\r\n                <h4 className=\"font-semibold text-gray-800 mb-3 flex items-center\">\r\n                  <Film size={18} className=\"mr-2 text-blue-600\" />\r\n                  Timeline Controls\r\n                </h4>\r\n                <div className=\"grid grid-cols-2 gap-3 text-sm\">\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Drag center:</span>\r\n                    <span className=\"font-medium\">Move item</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Drag edges:</span>\r\n                    <span className=\"font-medium\">Trim duration</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Auto ripple:</span>\r\n                    <span className=\"font-medium\">Push other blocks</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Ctrl + Wheel:</span>\r\n                    <span className=\"font-medium\">Zoom timeline</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Video Overlays */}\r\n              <div>\r\n                <h4 className=\"font-semibold text-gray-800 mb-3 flex items-center\">\r\n                  <Layers size={18} className=\"mr-2 text-purple-600\" />\r\n                  Video Overlays (CapCut Style)\r\n                </h4>\r\n                <div className=\"grid grid-cols-2 gap-3 text-sm\">\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Click overlay:</span>\r\n                    <span className=\"font-medium\">Select & show controls</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Drag anywhere:</span>\r\n                    <span className=\"font-medium\">Move position</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Drag corner dots:</span>\r\n                    <span className=\"font-medium\">Resize overlay</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Ctrl + Scroll:</span>\r\n                    <span className=\"font-medium\">Smooth zoom</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Opacity slider:</span>\r\n                    <span className=\"font-medium\">0-100% transparency</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Auto bounds:</span>\r\n                    <span className=\"font-medium\">Stays in view area</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Keyboard Shortcuts */}\r\n              <div>\r\n                <h4 className=\"font-semibold text-gray-800 mb-3 flex items-center\">\r\n                  ⌨️ Keyboard Shortcuts\r\n                </h4>\r\n                <div className=\"grid grid-cols-2 gap-3 text-sm\">\r\n                  <div className=\"flex justify-between\">\r\n                    <kbd className=\"px-2 py-1 bg-gray-100 rounded text-xs font-mono\">Space</kbd>\r\n                    <span className=\"font-medium\">Play / Pause</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <kbd className=\"px-2 py-1 bg-gray-100 rounded text-xs font-mono\">← →</kbd>\r\n                    <span className=\"font-medium\">Seek (0.1s)</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <kbd className=\"px-2 py-1 bg-gray-100 rounded text-xs font-mono\">Shift + ← →</kbd>\r\n                    <span className=\"font-medium\">Seek (1s)</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <kbd className=\"px-2 py-1 bg-gray-100 rounded text-xs font-mono\">Ctrl + ← →</kbd>\r\n                    <span className=\"font-medium\">Seek (5s)</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <kbd className=\"px-2 py-1 bg-gray-100 rounded text-xs font-mono\">Ctrl + B</kbd>\r\n                    <span className=\"font-medium\">Split item</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <kbd className=\"px-2 py-1 bg-gray-100 rounded text-xs font-mono\">Ctrl + C</kbd>\r\n                    <span className=\"font-medium\">Copy item</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <kbd className=\"px-2 py-1 bg-gray-100 rounded text-xs font-mono\">Ctrl + V</kbd>\r\n                    <span className=\"font-medium\">Paste item</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <kbd className=\"px-2 py-1 bg-gray-100 rounded text-xs font-mono\">Del</kbd>\r\n                    <span className=\"font-medium\">Delete item</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <kbd className=\"px-2 py-1 bg-gray-100 rounded text-xs font-mono\">+ -</kbd>\r\n                    <span className=\"font-medium\">Zoom in/out</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <kbd className=\"px-2 py-1 bg-gray-100 rounded text-xs font-mono\">0</kbd>\r\n                    <span className=\"font-medium\">Reset zoom</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Tips & Tricks */}\r\n              <div>\r\n                <h4 className=\"font-semibold text-gray-800 mb-3 flex items-center\">\r\n                  💡 Pro Tips\r\n                </h4>\r\n                <ul className=\"space-y-2 text-sm text-gray-600\">\r\n                  <li className=\"flex items-start\">\r\n                    <span className=\"inline-block w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\r\n                    <span>Drag media from library directly to timeline tracks for quick editing</span>\r\n                  </li>\r\n                  <li className=\"flex items-start\">\r\n                    <span className=\"inline-block w-2 h-2 bg-purple-500 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\r\n                    <span>Overlays can be dragged anywhere on video area - they auto-fit within bounds</span>\r\n                  </li>\r\n                  <li className=\"flex items-start\">\r\n                    <span className=\"inline-block w-2 h-2 bg-orange-500 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\r\n                    <span>Resize handles appear when overlay selected - drag corners for proportional scaling</span>\r\n                  </li>\r\n                  <li className=\"flex items-start\">\r\n                    <span className=\"inline-block w-2 h-2 bg-green-500 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\r\n                    <span>Ripple mode automatically pushes blocks when inserting new content</span>\r\n                  </li>\r\n                  <li className=\"flex items-start\">\r\n                    <span className=\"inline-block w-2 h-2 bg-red-500 rounded-full mt-2 mr-3 flex-shrink-0\"></span>\r\n                    <span>Use Ctrl+scroll over overlays for precise size control like in CapCut</span>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"p-6 border-t border-gray-200 bg-gray-50 rounded-b-2xl\">\r\n              <p className=\"text-center text-sm text-gray-500\">\r\n                🎬 Made with CapCut Pro styling • Press <kbd className=\"px-1 py-0.5 bg-white rounded text-xs font-mono border\">?</kbd> or click help icon anytime\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoEditor;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}