{"ast":null,"code":"var _jsxFileName = \"C:\\\\Scriptify\\\\ai-content-studio\\\\frontend\\\\src\\\\components\\\\Timeline\\\\OptimizedFFmpegExporter.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { X, Download, Check, AlertCircle, Settings, Play, Film, Zap, Monitor, Clock } from \"lucide-react\";\n\n// Импортируем менеджер воркеров\n// import VideoExportWorkerManager from './WorkerManager.js';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst OptimizedFFmpegExporter = ({\n  isOpen,\n  onClose,\n  timelineItems = [],\n  videoDuration = 60\n}) => {\n  _s();\n  const [exportSettings, setExportSettings] = useState({\n    resolution: \"1280x720\",\n    fps: 24,\n    bitrate: 2000,\n    format: \"mp4\",\n    quality: \"medium\",\n    filename: `video_${Date.now()}`,\n    compatibilityMode: \"standard\",\n    audioQuality: \"standard\",\n    // Новые настройки оптимизации\n    workerCount: Math.min(navigator.hardwareConcurrency || 2, 4),\n    batchSize: 50,\n    // Кадров в батче\n    parallelEncoding: true,\n    useGPU: false // Для будущего использования WebGPU\n  });\n  const [ffmpeg, setFfmpeg] = useState(null);\n  const [workerManager, setWorkerManager] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isExporting, setIsExporting] = useState(false);\n  const [exportProgress, setExportProgress] = useState(0);\n  const [exportStage, setExportStage] = useState(\"idle\");\n  const [previewFrame, setPreviewFrame] = useState(null);\n  const [error, setError] = useState(null);\n\n  // Статистика производительности\n  const [perfStats, setPerfStats] = useState({\n    framesRendered: 0,\n    renderingSpeed: 0,\n    estimatedTimeRemaining: 0,\n    memoryUsage: 0,\n    workerStats: []\n  });\n  const canvasRef = useRef(null);\n  const previewCanvasRef = useRef(null);\n  const renderStartTime = useRef(null);\n\n  // Симуляция WorkerManager для демонстрации\n  const createMockWorkerManager = () => ({\n    initialize: async config => {\n      console.log('🚀 Инициализация воркеров (мок):', config);\n      await new Promise(resolve => setTimeout(resolve, 2000));\n    },\n    preloadMedia: async mediaItems => {\n      console.log('📦 Предзагрузка медиа (мок):', mediaItems.length);\n      await new Promise(resolve => setTimeout(resolve, 1000));\n    },\n    renderVideo: async (timelineItems, totalFrames, fps) => {\n      console.log('🎬 Рендеринг видео (мок):', totalFrames, 'кадров');\n      const frames = [];\n      for (let i = 0; i < totalFrames; i++) {\n        // Симуляция рендеринга\n        await new Promise(resolve => setTimeout(resolve, 10));\n        frames.push({\n          frameIndex: i,\n          blob: new Blob(['mock frame data'], {\n            type: 'image/jpeg'\n          }),\n          timestamp: i / fps\n        });\n\n        // Обновляем прогресс\n        if (i % 10 === 0) {\n          const progress = i / totalFrames * 100;\n          setExportProgress(30 + progress * 0.4); // 30-70% для рендеринга\n\n          setPerfStats(prev => ({\n            ...prev,\n            framesRendered: i,\n            renderingSpeed: i / ((Date.now() - renderStartTime.current) / 1000),\n            estimatedTimeRemaining: (totalFrames - i) / (i / ((Date.now() - renderStartTime.current) / 1000)) || 0\n          }));\n        }\n      }\n      return frames;\n    },\n    cleanup: async () => {\n      console.log('🧹 Очистка воркеров (мок)');\n    },\n    getWorkerStats: () => ({\n      workerCount: exportSettings.workerCount,\n      isInitialized: true,\n      framesCached: 0,\n      workers: Array.from({\n        length: exportSettings.workerCount\n      }, (_, i) => ({\n        id: i,\n        busy: false,\n        lastActivity: 0\n      }))\n    })\n  });\n\n  // Инициализация FFmpeg и воркеров\n  useEffect(() => {\n    const initializeExporter = async () => {\n      if (!isOpen || workerManager) return;\n      setIsLoading(true);\n      setExportStage(\"loading\");\n      setError(null);\n      try {\n        console.log(\"🔄 Инициализация оптимизированного экспортера...\");\n\n        // Инициализируем FFmpeg\n        const ffmpegModule = await import(\"@ffmpeg/ffmpeg\");\n        const utilModule = await import(\"@ffmpeg/util\");\n        const FFmpegClass = ffmpegModule.FFmpeg;\n        const fetchFile = utilModule.fetchFile;\n        const ffmpegInstance = new FFmpegClass();\n        await ffmpegInstance.load({\n          coreURL: \"https://unpkg.com/@ffmpeg/core@0.12.6/dist/umd/ffmpeg-core.js\",\n          wasmURL: \"https://unpkg.com/@ffmpeg/core@0.12.6/dist/umd/ffmpeg-core.wasm\"\n        });\n        window.fetchFile = fetchFile;\n        setFfmpeg(ffmpegInstance);\n\n        // Инициализируем менеджер воркеров\n        const manager = createMockWorkerManager(); // В реальном проекте: new VideoExportWorkerManager();\n\n        const [width, height] = exportSettings.resolution.split(\"x\").map(Number);\n        await manager.initialize({\n          width,\n          height,\n          fps: exportSettings.fps,\n          workerCount: exportSettings.workerCount\n        });\n        setWorkerManager(manager);\n        setExportStage(\"ready\");\n        console.log(\"✅ Оптимизированный экспортер готов\");\n      } catch (error) {\n        console.error(\"❌ Ошибка инициализации:\", error);\n        setError(error.message);\n        setExportStage(\"error\");\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    if (isOpen) {\n      initializeExporter();\n    }\n    return () => {\n      if (workerManager) {\n        workerManager.cleanup();\n      }\n    };\n  }, [isOpen, exportSettings.workerCount]);\n\n  // Основная функция экспорта\n  const startOptimizedExport = async () => {\n    if (!ffmpeg || !workerManager || isExporting || timelineItems.length === 0) return;\n    setIsExporting(true);\n    setExportProgress(0);\n    setExportStage(\"preparing\");\n    setError(null);\n    renderStartTime.current = Date.now();\n    try {\n      console.log(\"🚀 Начинаем оптимизированный экспорт...\");\n      const totalDuration = calculateTotalDuration();\n      const totalFrames = Math.ceil(totalDuration * exportSettings.fps);\n      console.log(`📊 Параметры экспорта:\n        • Кадров: ${totalFrames}\n        • FPS: ${exportSettings.fps}\n        • Воркеров: ${exportSettings.workerCount}\n        • Батч размер: ${exportSettings.batchSize}`);\n\n      // Этап 1: Предзагрузка медиа\n      setExportStage(\"preloading_media\");\n      setExportProgress(5);\n      const videoItems = timelineItems.filter(item => item.trackType !== \"audio\");\n      await workerManager.preloadMedia(videoItems);\n      setExportProgress(15);\n\n      // Этап 2: Параллельный рендеринг кадров\n      setExportStage(\"parallel_rendering\");\n      setExportProgress(20);\n      const renderedFrames = await workerManager.renderVideo(timelineItems, totalFrames, exportSettings.fps);\n      setExportProgress(70);\n\n      // Этап 3: Подготовка аудио\n      setExportStage(\"processing_audio\");\n      const audioFiles = await prepareAudioFiles();\n      setExportProgress(75);\n\n      // Этап 4: Кодирование с FFmpeg\n      setExportStage(\"encoding\");\n      const videoBlob = await encodeWithOptimizedFFmpeg(renderedFrames, audioFiles, totalDuration);\n      setExportProgress(95);\n\n      // Этап 5: Загрузка\n      setExportStage(\"downloading\");\n      await downloadVideo(videoBlob);\n      setExportProgress(100);\n      setExportStage(\"completed\");\n      const totalTime = (Date.now() - renderStartTime.current) / 1000;\n      console.log(`✅ Экспорт завершен за ${totalTime.toFixed(1)}с (${(totalFrames / totalTime).toFixed(1)} FPS)`);\n      setTimeout(() => {\n        setExportStage(\"ready\");\n        setExportProgress(0);\n      }, 3000);\n    } catch (error) {\n      console.error(\"❌ Ошибка оптимизированного экспорта:\", error);\n      setError(error.message);\n      setExportStage(\"error\");\n    } finally {\n      setIsExporting(false);\n    }\n  };\n  const calculateTotalDuration = () => {\n    if (timelineItems.length === 0) return videoDuration;\n    const maxEndTime = Math.max(...timelineItems.map(item => (item.startTime || 0) + (item.duration || 0)));\n    return Math.max(maxEndTime, videoDuration);\n  };\n  const prepareAudioFiles = async () => {\n    const audioItems = timelineItems.filter(item => item.trackType === \"audio\");\n    const audioFiles = [];\n    for (let i = 0; i < Math.min(audioItems.length, 3); i++) {\n      const item = audioItems[i];\n      try {\n        const response = await fetch(item.url);\n        if (!response.ok) throw new Error(`HTTP ${response.status}`);\n        const blob = await response.blob();\n        audioFiles.push({\n          blob,\n          startTime: item.startTime || 0,\n          duration: item.duration || videoDuration,\n          name: item.name,\n          index: i\n        });\n      } catch (error) {\n        console.warn(`⚠️ Ошибка загрузки аудио ${item.name}:`, error);\n      }\n    }\n    return audioFiles;\n  };\n  const encodeWithOptimizedFFmpeg = async (frames, audioFiles, duration) => {\n    if (!window.fetchFile || frames.length === 0) {\n      throw new Error(\"Нет кадров для кодирования\");\n    }\n    try {\n      console.log(`🎞️ Оптимизированное кодирование ${frames.length} кадров...`);\n\n      // Параллельная запись кадров\n      const writePromises = frames.map(async (frame, index) => {\n        const frameData = await window.fetchFile(frame.blob);\n        const filename = `frame_${index.toString().padStart(6, \"0\")}.jpg`;\n        await ffmpeg.writeFile(filename, frameData);\n        if (index % 100 === 0) {\n          const progress = 75 + Math.round(index / frames.length * 15);\n          setExportProgress(progress);\n        }\n      });\n      await Promise.all(writePromises);\n\n      // Запись аудио\n      for (let i = 0; i < audioFiles.length; i++) {\n        const audioFile = audioFiles[i];\n        const audioFileName = `audio_${i}.mp3`;\n        await ffmpeg.writeFile(audioFileName, await window.fetchFile(audioFile.blob));\n      }\n      setExportProgress(90);\n\n      // Оптимизированные аргументы FFmpeg\n      const args = [\"-framerate\", exportSettings.fps.toString(), \"-i\", \"frame_%06d.jpg\", \"-t\", Math.min(duration, frames.length / exportSettings.fps).toString()];\n      if (audioFiles.length > 0) {\n        args.push(\"-i\", \"audio_0.mp3\");\n        args.push(\"-c:a\", \"aac\");\n        args.push(\"-b:a\", \"128k\");\n        args.push(\"-ar\", \"44100\");\n        args.push(\"-shortest\");\n      }\n\n      // Оптимизированное кодирование\n      args.push(\"-c:v\", \"libx264\", \"-preset\", exportSettings.parallelEncoding ? \"ultrafast\" : \"medium\", \"-crf\", \"23\", \"-pix_fmt\", \"yuv420p\", \"-threads\", exportSettings.workerCount.toString(), \"-movflags\", \"+faststart\", \"output.mp4\");\n      console.log(\"🔧 Оптимизированная команда FFmpeg:\", args.join(\" \"));\n      await ffmpeg.exec(args);\n      const data = await ffmpeg.readFile(\"output.mp4\");\n      const videoBlob = new Blob([data.buffer], {\n        type: \"video/mp4\"\n      });\n\n      // Очистка\n      await cleanupTempFiles(frames.length, audioFiles.length);\n      return videoBlob;\n    } catch (error) {\n      throw new Error(`Ошибка оптимизированного кодирования: ${error.message}`);\n    }\n  };\n  const cleanupTempFiles = async (frameCount, audioCount) => {\n    console.log(\"🧹 Очистка временных файлов...\");\n    for (let i = 0; i < frameCount; i++) {\n      try {\n        await ffmpeg.deleteFile(`frame_${i.toString().padStart(6, \"0\")}.jpg`);\n      } catch (e) {}\n    }\n    for (let i = 0; i < audioCount; i++) {\n      try {\n        await ffmpeg.deleteFile(`audio_${i}.mp3`);\n      } catch (e) {}\n    }\n    try {\n      await ffmpeg.deleteFile(\"output.mp4\");\n    } catch (e) {}\n  };\n  const downloadVideo = async blob => {\n    const filename = `${exportSettings.filename}.${exportSettings.format}`;\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n  const getStageText = () => {\n    switch (exportStage) {\n      case \"loading\":\n        return \"🔄 Инициализация воркеров и FFmpeg...\";\n      case \"preparing\":\n        return \"📋 Анализ timeline и подготовка...\";\n      case \"preloading_media\":\n        return \"📦 Предзагрузка медиа в воркеры...\";\n      case \"parallel_rendering\":\n        return `🎭 Параллельный рендеринг (${exportSettings.workerCount} воркеров)...`;\n      case \"processing_audio\":\n        return \"🎵 Обработка аудио треков...\";\n      case \"encoding\":\n        return \"⚡ Быстрое кодирование...\";\n      case \"downloading\":\n        return \"💾 Сохранение файла...\";\n      case \"completed\":\n        return \"✅ Оптимизированный экспорт завершен!\";\n      case \"error\":\n        return \"❌ Произошла ошибка\";\n      case \"ready\":\n        return `🚀 Готов к быстрому экспорту (${timelineItems.length} элементов)`;\n      default:\n        return \"⏳ Ожидание...\";\n    }\n  };\n  const formatTime = seconds => {\n    const minutes = Math.floor(seconds / 60);\n    const secs = Math.floor(seconds % 60);\n    return `${minutes}:${secs.toString().padStart(2, '0')}`;\n  };\n  const canExport = ffmpeg && workerManager && !isExporting && !isLoading && timelineItems.length > 0 && exportStage === \"ready\";\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-2xl shadow-xl max-w-5xl w-full max-h-[95vh] overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between p-6 border-b border-gray-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-semibold text-gray-800 flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(Zap, {\n            size: 24,\n            className: \"mr-3 text-yellow-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 447,\n            columnNumber: 13\n          }, this), \"\\u26A1 \\u0411\\u042B\\u0421\\u0422\\u0420\\u042B\\u0419 \\u042D\\u041A\\u0421\\u041F\\u041E\\u0420\\u0422 \\u0421 \\u0412\\u041E\\u0420\\u041A\\u0415\\u0420\\u0410\\u041C\\u0418\", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ml-3 text-sm bg-green-100 text-green-800 px-2 py-1 rounded-full\",\n            children: [exportSettings.workerCount, \"x \\u0431\\u044B\\u0441\\u0442\\u0440\\u0435\\u0435\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"p-2 hover:bg-gray-100 rounded-full transition-colors\",\n          disabled: isExporting,\n          children: /*#__PURE__*/_jsxDEV(X, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-6 space-y-6 max-h-[calc(95vh-140px)] overflow-y-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `rounded-xl p-4 border ${exportStage === \"error\" ? \"bg-red-50 border-red-200\" : exportStage === \"completed\" ? \"bg-green-50 border-green-200\" : exportStage === \"loading\" ? \"bg-yellow-50 border-yellow-200\" : \"bg-blue-50 border-blue-200\"}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center\",\n              children: [exportStage === \"completed\" ? /*#__PURE__*/_jsxDEV(Check, {\n                size: 20,\n                className: \"text-green-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 473,\n                columnNumber: 19\n              }, this) : exportStage === \"error\" ? /*#__PURE__*/_jsxDEV(AlertCircle, {\n                size: 20,\n                className: \"text-red-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 475,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ml-3 font-medium text-gray-900\",\n                children: getStageText()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 478,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 471,\n              columnNumber: 15\n            }, this), (isExporting || isLoading) && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-medium text-blue-700\",\n              children: [exportProgress, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 483,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 470,\n            columnNumber: 13\n          }, this), (isExporting || isLoading) && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-full rounded-full h-2 bg-blue-200\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-2 rounded-full transition-all duration-300 bg-blue-600\",\n              style: {\n                width: `${exportProgress}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 490,\n            columnNumber: 15\n          }, this), isExporting && perfStats.framesRendered > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 grid grid-cols-3 gap-4 text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-600\",\n                children: \"\\u0421\\u043A\\u043E\\u0440\\u043E\\u0441\\u0442\\u044C:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 502,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ml-1 font-medium\",\n                children: [perfStats.renderingSpeed.toFixed(1), \" FPS\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 503,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 501,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-600\",\n                children: \"\\u041E\\u0441\\u0442\\u0430\\u043B\\u043E\\u0441\\u044C:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 508,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ml-1 font-medium\",\n                children: formatTime(perfStats.estimatedTimeRemaining)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 509,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 507,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-600\",\n                children: \"\\u041A\\u0430\\u0434\\u0440\\u043E\\u0432:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 514,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ml-1 font-medium\",\n                children: perfStats.framesRendered\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 515,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 513,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 500,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-50 rounded-xl p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-sm font-medium text-gray-700 mb-3 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(Monitor, {\n              size: 16,\n              className: \"mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 526,\n              columnNumber: 15\n            }, this), \"\\u26A1 \\u041D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0439\\u043A\\u0438 \\u043E\\u043F\\u0442\\u0438\\u043C\\u0438\\u0437\\u0430\\u0446\\u0438\\u0438\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 525,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-3 gap-4 mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-xs font-medium text-gray-700 mb-1\",\n                children: \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u0432\\u043E\\u0440\\u043A\\u0435\\u0440\\u043E\\u0432\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 532,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: exportSettings.workerCount,\n                onChange: e => setExportSettings(prev => ({\n                  ...prev,\n                  workerCount: parseInt(e.target.value)\n                })),\n                className: \"w-full p-2 text-sm border border-gray-300 rounded-lg\",\n                disabled: isExporting || isLoading,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"1\",\n                  children: \"1 \\u0432\\u043E\\u0440\\u043A\\u0435\\u0440 (\\u043C\\u0435\\u0434\\u043B\\u0435\\u043D\\u043D\\u043E)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 544,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"2\",\n                  children: \"2 \\u0432\\u043E\\u0440\\u043A\\u0435\\u0440\\u0430 (\\u0431\\u044B\\u0441\\u0442\\u0440\\u043E)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 545,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"4\",\n                  children: \"4 \\u0432\\u043E\\u0440\\u043A\\u0435\\u0440\\u0430 (\\u043E\\u0447\\u0435\\u043D\\u044C \\u0431\\u044B\\u0441\\u0442\\u0440\\u043E)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 546,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"6\",\n                  children: \"6 \\u0432\\u043E\\u0440\\u043A\\u0435\\u0440\\u043E\\u0432 (\\u043C\\u0430\\u043A\\u0441\\u0438\\u043C\\u0443\\u043C)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 547,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 535,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 531,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-xs font-medium text-gray-700 mb-1\",\n                children: \"\\u0420\\u0430\\u0437\\u043C\\u0435\\u0440 \\u0431\\u0430\\u0442\\u0447\\u0430\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 552,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: exportSettings.batchSize,\n                onChange: e => setExportSettings(prev => ({\n                  ...prev,\n                  batchSize: parseInt(e.target.value)\n                })),\n                className: \"w-full p-2 text-sm border border-gray-300 rounded-lg\",\n                disabled: isExporting || isLoading,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"25\",\n                  children: \"25 \\u043A\\u0430\\u0434\\u0440\\u043E\\u0432 (\\u043C\\u0435\\u043D\\u044C\\u0448\\u0435 \\u043F\\u0430\\u043C\\u044F\\u0442\\u0438)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 564,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"50\",\n                  children: \"50 \\u043A\\u0430\\u0434\\u0440\\u043E\\u0432 (\\u043E\\u043F\\u0442\\u0438\\u043C\\u0430\\u043B\\u044C\\u043D\\u043E)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 565,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"100\",\n                  children: \"100 \\u043A\\u0430\\u0434\\u0440\\u043E\\u0432 (\\u0431\\u044B\\u0441\\u0442\\u0440\\u0435\\u0435)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 566,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 555,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 551,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-xs font-medium text-gray-700 mb-1\",\n                children: \"\\u0420\\u0435\\u0436\\u0438\\u043C \\u043A\\u043E\\u0434\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u044F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 571,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: exportSettings.parallelEncoding,\n                onChange: e => setExportSettings(prev => ({\n                  ...prev,\n                  parallelEncoding: e.target.value === 'true'\n                })),\n                className: \"w-full p-2 text-sm border border-gray-300 rounded-lg\",\n                disabled: isExporting || isLoading,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"true\",\n                  children: \"\\u0411\\u044B\\u0441\\u0442\\u0440\\u043E\\u0435 (ultrafast)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 583,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"false\",\n                  children: \"\\u041A\\u0430\\u0447\\u0435\\u0441\\u0442\\u0432\\u0435\\u043D\\u043D\\u043E\\u0435 (medium)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 584,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 574,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 570,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 530,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-4 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-xs font-medium text-gray-700 mb-1\",\n                children: \"\\u0420\\u0430\\u0437\\u0440\\u0435\\u0448\\u0435\\u043D\\u0438\\u0435\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 592,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: exportSettings.resolution,\n                onChange: e => setExportSettings(prev => ({\n                  ...prev,\n                  resolution: e.target.value\n                })),\n                className: \"w-full p-2 text-sm border border-gray-300 rounded-lg\",\n                disabled: isExporting || isLoading,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"640x480\",\n                  children: \"480p (\\u0441\\u0430\\u043C\\u044B\\u0439 \\u0431\\u044B\\u0441\\u0442\\u0440\\u044B\\u0439)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 604,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"1280x720\",\n                  children: \"720p (\\u0431\\u044B\\u0441\\u0442\\u0440\\u043E)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 605,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"1920x1080\",\n                  children: \"1080p (\\u043C\\u0435\\u0434\\u043B\\u0435\\u043D\\u043D\\u0435\\u0435)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 606,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 595,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 591,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-xs font-medium text-gray-700 mb-1\",\n                children: \"FPS\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 611,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: exportSettings.fps,\n                onChange: e => setExportSettings(prev => ({\n                  ...prev,\n                  fps: parseInt(e.target.value)\n                })),\n                className: \"w-full p-2 text-sm border border-gray-300 rounded-lg\",\n                disabled: isExporting || isLoading,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"24\",\n                  children: \"24 FPS\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 623,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"30\",\n                  children: \"30 FPS\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 624,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"60\",\n                  children: \"60 FPS\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 625,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 614,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 610,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-xs font-medium text-gray-700 mb-1\",\n                children: \"\\u0421\\u043E\\u0432\\u043C\\u0435\\u0441\\u0442\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 630,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: exportSettings.compatibilityMode,\n                onChange: e => setExportSettings(prev => ({\n                  ...prev,\n                  compatibilityMode: e.target.value\n                })),\n                className: \"w-full p-2 text-sm border border-gray-300 rounded-lg\",\n                disabled: isExporting || isLoading,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"standard\",\n                  children: \"\\u0421\\u0442\\u0430\\u043D\\u0434\\u0430\\u0440\\u0442\\u043D\\u0430\\u044F\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 642,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"baseline\",\n                  children: \"\\u041C\\u0430\\u043A\\u0441\\u0438\\u043C\\u0430\\u043B\\u044C\\u043D\\u0430\\u044F\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 643,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 633,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 629,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-xs font-medium text-gray-700 mb-1\",\n                children: \"\\u0418\\u043C\\u044F \\u0444\\u0430\\u0439\\u043B\\u0430\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 648,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: exportSettings.filename,\n                onChange: e => setExportSettings(prev => ({\n                  ...prev,\n                  filename: e.target.value\n                })),\n                className: \"w-full p-2 text-sm border border-gray-300 rounded-lg\",\n                disabled: isExporting || isLoading\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 651,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 647,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 590,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 524,\n          columnNumber: 11\n        }, this), timelineItems.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-blue-50 border border-blue-200 rounded-xl p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-medium text-blue-800 mb-2 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(Clock, {\n              size: 16,\n              className: \"mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 669,\n              columnNumber: 17\n            }, this), \"\\uD83D\\uDCCA \\u041E\\u0446\\u0435\\u043D\\u043A\\u0430 \\u043F\\u0440\\u043E\\u0438\\u0437\\u0432\\u043E\\u0434\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u0438\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 668,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 gap-4 text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"\\u042D\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442\\u043E\\u0432:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 675,\n                  columnNumber: 22\n                }, this), \" \", timelineItems.length]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 675,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"\\u0414\\u043B\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u044C:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 676,\n                  columnNumber: 22\n                }, this), \" \", calculateTotalDuration().toFixed(1), \"\\u0441\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 676,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"\\u041A\\u0430\\u0434\\u0440\\u043E\\u0432 \\u0432\\u0441\\u0435\\u0433\\u043E:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 677,\n                  columnNumber: 22\n                }, this), \" \", Math.ceil(calculateTotalDuration() * exportSettings.fps)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 677,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"\\u0412\\u043E\\u0440\\u043A\\u0435\\u0440\\u043E\\u0432:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 678,\n                  columnNumber: 22\n                }, this), \" \", exportSettings.workerCount]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 678,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 674,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"\\u041E\\u0446\\u0435\\u043D\\u043A\\u0430 \\u0432\\u0440\\u0435\\u043C\\u0435\\u043D\\u0438:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 682,\n                  columnNumber: 22\n                }, this), \" ~\", Math.ceil(calculateTotalDuration() * exportSettings.fps / (exportSettings.workerCount * 30)), \"\\u0441\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 682,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"\\u0423\\u0441\\u043A\\u043E\\u0440\\u0435\\u043D\\u0438\\u0435:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 683,\n                  columnNumber: 22\n                }, this), \" \", exportSettings.workerCount, \"x\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 683,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"\\u041F\\u0430\\u043C\\u044F\\u0442\\u044C:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 684,\n                  columnNumber: 22\n                }, this), \" ~\", Math.ceil(calculateTotalDuration() * exportSettings.fps * 0.1), \"MB\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 684,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"\\u0420\\u0435\\u0436\\u0438\\u043C:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 685,\n                  columnNumber: 22\n                }, this), \" \", exportSettings.parallelEncoding ? 'Быстрый' : 'Качественный']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 685,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 681,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 673,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 667,\n          columnNumber: 13\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-red-50 border border-red-200 rounded-xl p-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-start\",\n            children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n              size: 20,\n              className: \"text-red-600 mr-3 mt-0.5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 694,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-medium text-red-800\",\n                children: \"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u044D\\u043A\\u0441\\u043F\\u043E\\u0440\\u0442\\u0430\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 696,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-red-600 mt-1\",\n                children: error\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 697,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 695,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 693,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 692,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center p-6 border-t border-gray-200 bg-gray-50\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs text-gray-500\",\n          children: exportStage === \"ready\" && timelineItems.length > 0 ? `⚡ Готов к быстрому экспорту • ${exportSettings.workerCount} воркеров • ${exportSettings.parallelEncoding ? 'Быстрый' : 'Качественный'} режим` : exportStage === \"loading\" ? \"🔄 Инициализация воркеров...\" : \"⏳ Подготовка системы\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 705,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onClose,\n            className: \"px-6 py-2 text-sm text-gray-600 hover:text-gray-800 transition-colors\",\n            disabled: isExporting,\n            children: \"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 714,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: startOptimizedExport,\n            disabled: !canExport,\n            className: `px-6 py-2 text-sm rounded-lg font-medium transition-all flex items-center ${!canExport ? \"bg-gray-300 text-gray-500 cursor-not-allowed\" : \"bg-gradient-to-r from-yellow-500 to-orange-500 text-white hover:from-yellow-600 hover:to-orange-600 shadow-lg\"}`,\n            children: isExporting ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 733,\n                columnNumber: 19\n              }, this), \"\\u042D\\u043A\\u0441\\u043F\\u043E\\u0440\\u0442... \", exportProgress, \"%\"]\n            }, void 0, true) : isLoading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 738,\n                columnNumber: 19\n              }, this), \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Zap, {\n                size: 16,\n                className: \"mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 743,\n                columnNumber: 19\n              }, this), \"\\u26A1 \\u0411\\u044B\\u0441\\u0442\\u0440\\u044B\\u0439 \\u044D\\u043A\\u0441\\u043F\\u043E\\u0440\\u0442\"]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 722,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 713,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 704,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        style: {\n          display: \"none\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 751,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: previewCanvasRef,\n        style: {\n          display: \"none\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 752,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 444,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 443,\n    columnNumber: 5\n  }, this);\n};\n_s(OptimizedFFmpegExporter, \"AkT2Ee9K67UGSVcLuder0UuuOpI=\");\n_c = OptimizedFFmpegExporter;\nexport default OptimizedFFmpegExporter;\nvar _c;\n$RefreshReg$(_c, \"OptimizedFFmpegExporter\");","map":{"version":3,"names":["React","useState","useRef","useEffect","X","Download","Check","AlertCircle","Settings","Play","Film","Zap","Monitor","Clock","jsxDEV","_jsxDEV","Fragment","_Fragment","OptimizedFFmpegExporter","isOpen","onClose","timelineItems","videoDuration","_s","exportSettings","setExportSettings","resolution","fps","bitrate","format","quality","filename","Date","now","compatibilityMode","audioQuality","workerCount","Math","min","navigator","hardwareConcurrency","batchSize","parallelEncoding","useGPU","ffmpeg","setFfmpeg","workerManager","setWorkerManager","isLoading","setIsLoading","isExporting","setIsExporting","exportProgress","setExportProgress","exportStage","setExportStage","previewFrame","setPreviewFrame","error","setError","perfStats","setPerfStats","framesRendered","renderingSpeed","estimatedTimeRemaining","memoryUsage","workerStats","canvasRef","previewCanvasRef","renderStartTime","createMockWorkerManager","initialize","config","console","log","Promise","resolve","setTimeout","preloadMedia","mediaItems","length","renderVideo","totalFrames","frames","i","push","frameIndex","blob","Blob","type","timestamp","progress","prev","current","cleanup","getWorkerStats","isInitialized","framesCached","workers","Array","from","_","id","busy","lastActivity","initializeExporter","ffmpegModule","utilModule","FFmpegClass","FFmpeg","fetchFile","ffmpegInstance","load","coreURL","wasmURL","window","manager","width","height","split","map","Number","message","startOptimizedExport","totalDuration","calculateTotalDuration","ceil","videoItems","filter","item","trackType","renderedFrames","audioFiles","prepareAudioFiles","videoBlob","encodeWithOptimizedFFmpeg","downloadVideo","totalTime","toFixed","maxEndTime","max","startTime","duration","audioItems","response","fetch","url","ok","Error","status","name","index","warn","writePromises","frame","frameData","toString","padStart","writeFile","round","all","audioFile","audioFileName","args","join","exec","data","readFile","buffer","cleanupTempFiles","frameCount","audioCount","deleteFile","e","URL","createObjectURL","a","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","getStageText","formatTime","seconds","minutes","floor","secs","canExport","className","children","size","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","style","value","onChange","parseInt","target","ref","display","_c","$RefreshReg$"],"sources":["C:/Scriptify/ai-content-studio/frontend/src/components/Timeline/OptimizedFFmpegExporter.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport {\r\n  X,\r\n  Download,\r\n  Check,\r\n  AlertCircle,\r\n  Settings,\r\n  Play,\r\n  Film,\r\n  Zap,\r\n  Monitor,\r\n  Clock\r\n} from \"lucide-react\";\r\n\r\n// Импортируем менеджер воркеров\r\n// import VideoExportWorkerManager from './WorkerManager.js';\r\n\r\nconst OptimizedFFmpegExporter = ({\r\n  isOpen,\r\n  onClose,\r\n  timelineItems = [],\r\n  videoDuration = 60,\r\n}) => {\r\n  const [exportSettings, setExportSettings] = useState({\r\n    resolution: \"1280x720\",\r\n    fps: 24,\r\n    bitrate: 2000,\r\n    format: \"mp4\",\r\n    quality: \"medium\",\r\n    filename: `video_${Date.now()}`,\r\n    compatibilityMode: \"standard\",\r\n    audioQuality: \"standard\",\r\n    // Новые настройки оптимизации\r\n    workerCount: Math.min(navigator.hardwareConcurrency || 2, 4),\r\n    batchSize: 50, // Кадров в батче\r\n    parallelEncoding: true,\r\n    useGPU: false, // Для будущего использования WebGPU\r\n  });\r\n\r\n  const [ffmpeg, setFfmpeg] = useState(null);\r\n  const [workerManager, setWorkerManager] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isExporting, setIsExporting] = useState(false);\r\n  const [exportProgress, setExportProgress] = useState(0);\r\n  const [exportStage, setExportStage] = useState(\"idle\");\r\n  const [previewFrame, setPreviewFrame] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  \r\n  // Статистика производительности\r\n  const [perfStats, setPerfStats] = useState({\r\n    framesRendered: 0,\r\n    renderingSpeed: 0,\r\n    estimatedTimeRemaining: 0,\r\n    memoryUsage: 0,\r\n    workerStats: []\r\n  });\r\n\r\n  const canvasRef = useRef(null);\r\n  const previewCanvasRef = useRef(null);\r\n  const renderStartTime = useRef(null);\r\n\r\n  // Симуляция WorkerManager для демонстрации\r\n  const createMockWorkerManager = () => ({\r\n    initialize: async (config) => {\r\n      console.log('🚀 Инициализация воркеров (мок):', config);\r\n      await new Promise(resolve => setTimeout(resolve, 2000));\r\n    },\r\n    preloadMedia: async (mediaItems) => {\r\n      console.log('📦 Предзагрузка медиа (мок):', mediaItems.length);\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n    },\r\n    renderVideo: async (timelineItems, totalFrames, fps) => {\r\n      console.log('🎬 Рендеринг видео (мок):', totalFrames, 'кадров');\r\n      const frames = [];\r\n      \r\n      for (let i = 0; i < totalFrames; i++) {\r\n        // Симуляция рендеринга\r\n        await new Promise(resolve => setTimeout(resolve, 10));\r\n        \r\n        frames.push({\r\n          frameIndex: i,\r\n          blob: new Blob(['mock frame data'], { type: 'image/jpeg' }),\r\n          timestamp: i / fps\r\n        });\r\n\r\n        // Обновляем прогресс\r\n        if (i % 10 === 0) {\r\n          const progress = (i / totalFrames) * 100;\r\n          setExportProgress(30 + progress * 0.4); // 30-70% для рендеринга\r\n          \r\n          setPerfStats(prev => ({\r\n            ...prev,\r\n            framesRendered: i,\r\n            renderingSpeed: i / ((Date.now() - renderStartTime.current) / 1000),\r\n            estimatedTimeRemaining: ((totalFrames - i) / (i / ((Date.now() - renderStartTime.current) / 1000))) || 0\r\n          }));\r\n        }\r\n      }\r\n      \r\n      return frames;\r\n    },\r\n    cleanup: async () => {\r\n      console.log('🧹 Очистка воркеров (мок)');\r\n    },\r\n    getWorkerStats: () => ({\r\n      workerCount: exportSettings.workerCount,\r\n      isInitialized: true,\r\n      framesCached: 0,\r\n      workers: Array.from({ length: exportSettings.workerCount }, (_, i) => ({\r\n        id: i,\r\n        busy: false,\r\n        lastActivity: 0\r\n      }))\r\n    })\r\n  });\r\n\r\n  // Инициализация FFmpeg и воркеров\r\n  useEffect(() => {\r\n    const initializeExporter = async () => {\r\n      if (!isOpen || workerManager) return;\r\n\r\n      setIsLoading(true);\r\n      setExportStage(\"loading\");\r\n      setError(null);\r\n\r\n      try {\r\n        console.log(\"🔄 Инициализация оптимизированного экспортера...\");\r\n\r\n        // Инициализируем FFmpeg\r\n        const ffmpegModule = await import(\"@ffmpeg/ffmpeg\");\r\n        const utilModule = await import(\"@ffmpeg/util\");\r\n        const FFmpegClass = ffmpegModule.FFmpeg;\r\n        const fetchFile = utilModule.fetchFile;\r\n\r\n        const ffmpegInstance = new FFmpegClass();\r\n        await ffmpegInstance.load({\r\n          coreURL: \"https://unpkg.com/@ffmpeg/core@0.12.6/dist/umd/ffmpeg-core.js\",\r\n          wasmURL: \"https://unpkg.com/@ffmpeg/core@0.12.6/dist/umd/ffmpeg-core.wasm\",\r\n        });\r\n\r\n        window.fetchFile = fetchFile;\r\n        setFfmpeg(ffmpegInstance);\r\n\r\n        // Инициализируем менеджер воркеров\r\n        const manager = createMockWorkerManager(); // В реальном проекте: new VideoExportWorkerManager();\r\n        \r\n        const [width, height] = exportSettings.resolution.split(\"x\").map(Number);\r\n        await manager.initialize({\r\n          width,\r\n          height,\r\n          fps: exportSettings.fps,\r\n          workerCount: exportSettings.workerCount\r\n        });\r\n\r\n        setWorkerManager(manager);\r\n        setExportStage(\"ready\");\r\n        \r\n        console.log(\"✅ Оптимизированный экспортер готов\");\r\n        \r\n      } catch (error) {\r\n        console.error(\"❌ Ошибка инициализации:\", error);\r\n        setError(error.message);\r\n        setExportStage(\"error\");\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    if (isOpen) {\r\n      initializeExporter();\r\n    }\r\n\r\n    return () => {\r\n      if (workerManager) {\r\n        workerManager.cleanup();\r\n      }\r\n    };\r\n  }, [isOpen, exportSettings.workerCount]);\r\n\r\n  // Основная функция экспорта\r\n  const startOptimizedExport = async () => {\r\n    if (!ffmpeg || !workerManager || isExporting || timelineItems.length === 0) return;\r\n\r\n    setIsExporting(true);\r\n    setExportProgress(0);\r\n    setExportStage(\"preparing\");\r\n    setError(null);\r\n    renderStartTime.current = Date.now();\r\n\r\n    try {\r\n      console.log(\"🚀 Начинаем оптимизированный экспорт...\");\r\n\r\n      const totalDuration = calculateTotalDuration();\r\n      const totalFrames = Math.ceil(totalDuration * exportSettings.fps);\r\n      \r\n      console.log(`📊 Параметры экспорта:\r\n        • Кадров: ${totalFrames}\r\n        • FPS: ${exportSettings.fps}\r\n        • Воркеров: ${exportSettings.workerCount}\r\n        • Батч размер: ${exportSettings.batchSize}`);\r\n\r\n      // Этап 1: Предзагрузка медиа\r\n      setExportStage(\"preloading_media\");\r\n      setExportProgress(5);\r\n      \r\n      const videoItems = timelineItems.filter(item => item.trackType !== \"audio\");\r\n      await workerManager.preloadMedia(videoItems);\r\n      setExportProgress(15);\r\n\r\n      // Этап 2: Параллельный рендеринг кадров\r\n      setExportStage(\"parallel_rendering\");\r\n      setExportProgress(20);\r\n\r\n      const renderedFrames = await workerManager.renderVideo(\r\n        timelineItems,\r\n        totalFrames,\r\n        exportSettings.fps\r\n      );\r\n      setExportProgress(70);\r\n\r\n      // Этап 3: Подготовка аудио\r\n      setExportStage(\"processing_audio\");\r\n      const audioFiles = await prepareAudioFiles();\r\n      setExportProgress(75);\r\n\r\n      // Этап 4: Кодирование с FFmpeg\r\n      setExportStage(\"encoding\");\r\n      const videoBlob = await encodeWithOptimizedFFmpeg(\r\n        renderedFrames,\r\n        audioFiles,\r\n        totalDuration\r\n      );\r\n      setExportProgress(95);\r\n\r\n      // Этап 5: Загрузка\r\n      setExportStage(\"downloading\");\r\n      await downloadVideo(videoBlob);\r\n      setExportProgress(100);\r\n\r\n      setExportStage(\"completed\");\r\n      \r\n      const totalTime = (Date.now() - renderStartTime.current) / 1000;\r\n      console.log(`✅ Экспорт завершен за ${totalTime.toFixed(1)}с (${(totalFrames / totalTime).toFixed(1)} FPS)`);\r\n\r\n      setTimeout(() => {\r\n        setExportStage(\"ready\");\r\n        setExportProgress(0);\r\n      }, 3000);\r\n\r\n    } catch (error) {\r\n      console.error(\"❌ Ошибка оптимизированного экспорта:\", error);\r\n      setError(error.message);\r\n      setExportStage(\"error\");\r\n    } finally {\r\n      setIsExporting(false);\r\n    }\r\n  };\r\n\r\n  const calculateTotalDuration = () => {\r\n    if (timelineItems.length === 0) return videoDuration;\r\n    \r\n    const maxEndTime = Math.max(\r\n      ...timelineItems.map(item => (item.startTime || 0) + (item.duration || 0))\r\n    );\r\n    \r\n    return Math.max(maxEndTime, videoDuration);\r\n  };\r\n\r\n  const prepareAudioFiles = async () => {\r\n    const audioItems = timelineItems.filter(item => item.trackType === \"audio\");\r\n    const audioFiles = [];\r\n\r\n    for (let i = 0; i < Math.min(audioItems.length, 3); i++) {\r\n      const item = audioItems[i];\r\n      try {\r\n        const response = await fetch(item.url);\r\n        if (!response.ok) throw new Error(`HTTP ${response.status}`);\r\n\r\n        const blob = await response.blob();\r\n        audioFiles.push({\r\n          blob,\r\n          startTime: item.startTime || 0,\r\n          duration: item.duration || videoDuration,\r\n          name: item.name,\r\n          index: i,\r\n        });\r\n      } catch (error) {\r\n        console.warn(`⚠️ Ошибка загрузки аудио ${item.name}:`, error);\r\n      }\r\n    }\r\n\r\n    return audioFiles;\r\n  };\r\n\r\n  const encodeWithOptimizedFFmpeg = async (frames, audioFiles, duration) => {\r\n    if (!window.fetchFile || frames.length === 0) {\r\n      throw new Error(\"Нет кадров для кодирования\");\r\n    }\r\n\r\n    try {\r\n      console.log(`🎞️ Оптимизированное кодирование ${frames.length} кадров...`);\r\n\r\n      // Параллельная запись кадров\r\n      const writePromises = frames.map(async (frame, index) => {\r\n        const frameData = await window.fetchFile(frame.blob);\r\n        const filename = `frame_${index.toString().padStart(6, \"0\")}.jpg`;\r\n        await ffmpeg.writeFile(filename, frameData);\r\n        \r\n        if (index % 100 === 0) {\r\n          const progress = 75 + Math.round((index / frames.length) * 15);\r\n          setExportProgress(progress);\r\n        }\r\n      });\r\n\r\n      await Promise.all(writePromises);\r\n\r\n      // Запись аудио\r\n      for (let i = 0; i < audioFiles.length; i++) {\r\n        const audioFile = audioFiles[i];\r\n        const audioFileName = `audio_${i}.mp3`;\r\n        await ffmpeg.writeFile(\r\n          audioFileName,\r\n          await window.fetchFile(audioFile.blob)\r\n        );\r\n      }\r\n\r\n      setExportProgress(90);\r\n\r\n      // Оптимизированные аргументы FFmpeg\r\n      const args = [\r\n        \"-framerate\", exportSettings.fps.toString(),\r\n        \"-i\", \"frame_%06d.jpg\",\r\n        \"-t\", Math.min(duration, frames.length / exportSettings.fps).toString()\r\n      ];\r\n\r\n      if (audioFiles.length > 0) {\r\n        args.push(\"-i\", \"audio_0.mp3\");\r\n        args.push(\"-c:a\", \"aac\");\r\n        args.push(\"-b:a\", \"128k\");\r\n        args.push(\"-ar\", \"44100\");\r\n        args.push(\"-shortest\");\r\n      }\r\n\r\n      // Оптимизированное кодирование\r\n      args.push(\r\n        \"-c:v\", \"libx264\",\r\n        \"-preset\", exportSettings.parallelEncoding ? \"ultrafast\" : \"medium\",\r\n        \"-crf\", \"23\",\r\n        \"-pix_fmt\", \"yuv420p\",\r\n        \"-threads\", exportSettings.workerCount.toString(),\r\n        \"-movflags\", \"+faststart\",\r\n        \"output.mp4\"\r\n      );\r\n\r\n      console.log(\"🔧 Оптимизированная команда FFmpeg:\", args.join(\" \"));\r\n\r\n      await ffmpeg.exec(args);\r\n\r\n      const data = await ffmpeg.readFile(\"output.mp4\");\r\n      const videoBlob = new Blob([data.buffer], { type: \"video/mp4\" });\r\n\r\n      // Очистка\r\n      await cleanupTempFiles(frames.length, audioFiles.length);\r\n      \r\n      return videoBlob;\r\n\r\n    } catch (error) {\r\n      throw new Error(`Ошибка оптимизированного кодирования: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const cleanupTempFiles = async (frameCount, audioCount) => {\r\n    console.log(\"🧹 Очистка временных файлов...\");\r\n\r\n    for (let i = 0; i < frameCount; i++) {\r\n      try {\r\n        await ffmpeg.deleteFile(`frame_${i.toString().padStart(6, \"0\")}.jpg`);\r\n      } catch (e) {}\r\n    }\r\n\r\n    for (let i = 0; i < audioCount; i++) {\r\n      try {\r\n        await ffmpeg.deleteFile(`audio_${i}.mp3`);\r\n      } catch (e) {}\r\n    }\r\n\r\n    try {\r\n      await ffmpeg.deleteFile(\"output.mp4\");\r\n    } catch (e) {}\r\n  };\r\n\r\n  const downloadVideo = async (blob) => {\r\n    const filename = `${exportSettings.filename}.${exportSettings.format}`;\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement(\"a\");\r\n    a.href = url;\r\n    a.download = filename;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  const getStageText = () => {\r\n    switch (exportStage) {\r\n      case \"loading\":\r\n        return \"🔄 Инициализация воркеров и FFmpeg...\";\r\n      case \"preparing\":\r\n        return \"📋 Анализ timeline и подготовка...\";\r\n      case \"preloading_media\":\r\n        return \"📦 Предзагрузка медиа в воркеры...\";\r\n      case \"parallel_rendering\":\r\n        return `🎭 Параллельный рендеринг (${exportSettings.workerCount} воркеров)...`;\r\n      case \"processing_audio\":\r\n        return \"🎵 Обработка аудио треков...\";\r\n      case \"encoding\":\r\n        return \"⚡ Быстрое кодирование...\";\r\n      case \"downloading\":\r\n        return \"💾 Сохранение файла...\";\r\n      case \"completed\":\r\n        return \"✅ Оптимизированный экспорт завершен!\";\r\n      case \"error\":\r\n        return \"❌ Произошла ошибка\";\r\n      case \"ready\":\r\n        return `🚀 Готов к быстрому экспорту (${timelineItems.length} элементов)`;\r\n      default:\r\n        return \"⏳ Ожидание...\";\r\n    }\r\n  };\r\n\r\n  const formatTime = (seconds) => {\r\n    const minutes = Math.floor(seconds / 60);\r\n    const secs = Math.floor(seconds % 60);\r\n    return `${minutes}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  const canExport = ffmpeg && workerManager && !isExporting && !isLoading && \r\n                   timelineItems.length > 0 && exportStage === \"ready\";\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4\">\r\n      <div className=\"bg-white rounded-2xl shadow-xl max-w-5xl w-full max-h-[95vh] overflow-hidden\">\r\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\r\n          <h2 className=\"text-xl font-semibold text-gray-800 flex items-center\">\r\n            <Zap size={24} className=\"mr-3 text-yellow-500\" />\r\n            ⚡ БЫСТРЫЙ ЭКСПОРТ С ВОРКЕРАМИ\r\n            <span className=\"ml-3 text-sm bg-green-100 text-green-800 px-2 py-1 rounded-full\">\r\n              {exportSettings.workerCount}x быстрее\r\n            </span>\r\n          </h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\r\n            disabled={isExporting}\r\n          >\r\n            <X size={20} />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"p-6 space-y-6 max-h-[calc(95vh-140px)] overflow-y-auto\">\r\n          {/* Статус и прогресс */}\r\n          <div className={`rounded-xl p-4 border ${\r\n            exportStage === \"error\" ? \"bg-red-50 border-red-200\" :\r\n            exportStage === \"completed\" ? \"bg-green-50 border-green-200\" :\r\n            exportStage === \"loading\" ? \"bg-yellow-50 border-yellow-200\" :\r\n            \"bg-blue-50 border-blue-200\"\r\n          }`}>\r\n            <div className=\"flex items-center justify-between mb-3\">\r\n              <div className=\"flex items-center\">\r\n                {exportStage === \"completed\" ? \r\n                  <Check size={20} className=\"text-green-600\" /> :\r\n                  exportStage === \"error\" ? \r\n                  <AlertCircle size={20} className=\"text-red-600\" /> :\r\n                  <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600\"></div>\r\n                }\r\n                <span className=\"ml-3 font-medium text-gray-900\">\r\n                  {getStageText()}\r\n                </span>\r\n              </div>\r\n              {(isExporting || isLoading) && (\r\n                <span className=\"text-sm font-medium text-blue-700\">\r\n                  {exportProgress}%\r\n                </span>\r\n              )}\r\n            </div>\r\n\r\n            {(isExporting || isLoading) && (\r\n              <div className=\"w-full rounded-full h-2 bg-blue-200\">\r\n                <div\r\n                  className=\"h-2 rounded-full transition-all duration-300 bg-blue-600\"\r\n                  style={{ width: `${exportProgress}%` }}\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            {/* Статистика производительности */}\r\n            {isExporting && perfStats.framesRendered > 0 && (\r\n              <div className=\"mt-3 grid grid-cols-3 gap-4 text-sm\">\r\n                <div>\r\n                  <span className=\"text-gray-600\">Скорость:</span>\r\n                  <span className=\"ml-1 font-medium\">\r\n                    {perfStats.renderingSpeed.toFixed(1)} FPS\r\n                  </span>\r\n                </div>\r\n                <div>\r\n                  <span className=\"text-gray-600\">Осталось:</span>\r\n                  <span className=\"ml-1 font-medium\">\r\n                    {formatTime(perfStats.estimatedTimeRemaining)}\r\n                  </span>\r\n                </div>\r\n                <div>\r\n                  <span className=\"text-gray-600\">Кадров:</span>\r\n                  <span className=\"ml-1 font-medium\">\r\n                    {perfStats.framesRendered}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Настройки оптимизации */}\r\n          <div className=\"bg-gray-50 rounded-xl p-4\">\r\n            <h3 className=\"text-sm font-medium text-gray-700 mb-3 flex items-center\">\r\n              <Monitor size={16} className=\"mr-2\" />\r\n              ⚡ Настройки оптимизации\r\n            </h3>\r\n            \r\n            <div className=\"grid grid-cols-3 gap-4 mb-4\">\r\n              <div>\r\n                <label className=\"block text-xs font-medium text-gray-700 mb-1\">\r\n                  Количество воркеров\r\n                </label>\r\n                <select\r\n                  value={exportSettings.workerCount}\r\n                  onChange={(e) => setExportSettings(prev => ({\r\n                    ...prev,\r\n                    workerCount: parseInt(e.target.value)\r\n                  }))}\r\n                  className=\"w-full p-2 text-sm border border-gray-300 rounded-lg\"\r\n                  disabled={isExporting || isLoading}\r\n                >\r\n                  <option value=\"1\">1 воркер (медленно)</option>\r\n                  <option value=\"2\">2 воркера (быстро)</option>\r\n                  <option value=\"4\">4 воркера (очень быстро)</option>\r\n                  <option value=\"6\">6 воркеров (максимум)</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-xs font-medium text-gray-700 mb-1\">\r\n                  Размер батча\r\n                </label>\r\n                <select\r\n                  value={exportSettings.batchSize}\r\n                  onChange={(e) => setExportSettings(prev => ({\r\n                    ...prev,\r\n                    batchSize: parseInt(e.target.value)\r\n                  }))}\r\n                  className=\"w-full p-2 text-sm border border-gray-300 rounded-lg\"\r\n                  disabled={isExporting || isLoading}\r\n                >\r\n                  <option value=\"25\">25 кадров (меньше памяти)</option>\r\n                  <option value=\"50\">50 кадров (оптимально)</option>\r\n                  <option value=\"100\">100 кадров (быстрее)</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-xs font-medium text-gray-700 mb-1\">\r\n                  Режим кодирования\r\n                </label>\r\n                <select\r\n                  value={exportSettings.parallelEncoding}\r\n                  onChange={(e) => setExportSettings(prev => ({\r\n                    ...prev,\r\n                    parallelEncoding: e.target.value === 'true'\r\n                  }))}\r\n                  className=\"w-full p-2 text-sm border border-gray-300 rounded-lg\"\r\n                  disabled={isExporting || isLoading}\r\n                >\r\n                  <option value=\"true\">Быстрое (ultrafast)</option>\r\n                  <option value=\"false\">Качественное (medium)</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Основные настройки */}\r\n            <div className=\"grid grid-cols-4 gap-4\">\r\n              <div>\r\n                <label className=\"block text-xs font-medium text-gray-700 mb-1\">\r\n                  Разрешение\r\n                </label>\r\n                <select\r\n                  value={exportSettings.resolution}\r\n                  onChange={(e) => setExportSettings(prev => ({\r\n                    ...prev,\r\n                    resolution: e.target.value\r\n                  }))}\r\n                  className=\"w-full p-2 text-sm border border-gray-300 rounded-lg\"\r\n                  disabled={isExporting || isLoading}\r\n                >\r\n                  <option value=\"640x480\">480p (самый быстрый)</option>\r\n                  <option value=\"1280x720\">720p (быстро)</option>\r\n                  <option value=\"1920x1080\">1080p (медленнее)</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-xs font-medium text-gray-700 mb-1\">\r\n                  FPS\r\n                </label>\r\n                <select\r\n                  value={exportSettings.fps}\r\n                  onChange={(e) => setExportSettings(prev => ({\r\n                    ...prev,\r\n                    fps: parseInt(e.target.value)\r\n                  }))}\r\n                  className=\"w-full p-2 text-sm border border-gray-300 rounded-lg\"\r\n                  disabled={isExporting || isLoading}\r\n                >\r\n                  <option value=\"24\">24 FPS</option>\r\n                  <option value=\"30\">30 FPS</option>\r\n                  <option value=\"60\">60 FPS</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-xs font-medium text-gray-700 mb-1\">\r\n                  Совместимость\r\n                </label>\r\n                <select\r\n                  value={exportSettings.compatibilityMode}\r\n                  onChange={(e) => setExportSettings(prev => ({\r\n                    ...prev,\r\n                    compatibilityMode: e.target.value\r\n                  }))}\r\n                  className=\"w-full p-2 text-sm border border-gray-300 rounded-lg\"\r\n                  disabled={isExporting || isLoading}\r\n                >\r\n                  <option value=\"standard\">Стандартная</option>\r\n                  <option value=\"baseline\">Максимальная</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-xs font-medium text-gray-700 mb-1\">\r\n                  Имя файла\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={exportSettings.filename}\r\n                  onChange={(e) => setExportSettings(prev => ({\r\n                    ...prev,\r\n                    filename: e.target.value\r\n                  }))}\r\n                  className=\"w-full p-2 text-sm border border-gray-300 rounded-lg\"\r\n                  disabled={isExporting || isLoading}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Диагностика */}\r\n          {timelineItems.length > 0 && (\r\n            <div className=\"bg-blue-50 border border-blue-200 rounded-xl p-4\">\r\n              <h4 className=\"font-medium text-blue-800 mb-2 flex items-center\">\r\n                <Clock size={16} className=\"mr-2\" />\r\n                📊 Оценка производительности\r\n              </h4>\r\n              \r\n              <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n                <div className=\"space-y-1\">\r\n                  <p><strong>Элементов:</strong> {timelineItems.length}</p>\r\n                  <p><strong>Длительность:</strong> {calculateTotalDuration().toFixed(1)}с</p>\r\n                  <p><strong>Кадров всего:</strong> {Math.ceil(calculateTotalDuration() * exportSettings.fps)}</p>\r\n                  <p><strong>Воркеров:</strong> {exportSettings.workerCount}</p>\r\n                </div>\r\n                \r\n                <div className=\"space-y-1\">\r\n                  <p><strong>Оценка времени:</strong> ~{Math.ceil(calculateTotalDuration() * exportSettings.fps / (exportSettings.workerCount * 30))}с</p>\r\n                  <p><strong>Ускорение:</strong> {exportSettings.workerCount}x</p>\r\n                  <p><strong>Память:</strong> ~{Math.ceil(calculateTotalDuration() * exportSettings.fps * 0.1)}MB</p>\r\n                  <p><strong>Режим:</strong> {exportSettings.parallelEncoding ? 'Быстрый' : 'Качественный'}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {error && (\r\n            <div className=\"bg-red-50 border border-red-200 rounded-xl p-4\">\r\n              <div className=\"flex items-start\">\r\n                <AlertCircle size={20} className=\"text-red-600 mr-3 mt-0.5\" />\r\n                <div>\r\n                  <h4 className=\"font-medium text-red-800\">Ошибка экспорта</h4>\r\n                  <p className=\"text-sm text-red-600 mt-1\">{error}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"flex justify-between items-center p-6 border-t border-gray-200 bg-gray-50\">\r\n          <div className=\"text-xs text-gray-500\">\r\n            {exportStage === \"ready\" && timelineItems.length > 0\r\n              ? `⚡ Готов к быстрому экспорту • ${exportSettings.workerCount} воркеров • ${exportSettings.parallelEncoding ? 'Быстрый' : 'Качественный'} режим`\r\n              : exportStage === \"loading\"\r\n              ? \"🔄 Инициализация воркеров...\"\r\n              : \"⏳ Подготовка системы\"}\r\n          </div>\r\n          \r\n          <div className=\"flex space-x-3\">\r\n            <button\r\n              onClick={onClose}\r\n              className=\"px-6 py-2 text-sm text-gray-600 hover:text-gray-800 transition-colors\"\r\n              disabled={isExporting}\r\n            >\r\n              Закрыть\r\n            </button>\r\n            \r\n            <button\r\n              onClick={startOptimizedExport}\r\n              disabled={!canExport}\r\n              className={`px-6 py-2 text-sm rounded-lg font-medium transition-all flex items-center ${\r\n                !canExport\r\n                  ? \"bg-gray-300 text-gray-500 cursor-not-allowed\"\r\n                  : \"bg-gradient-to-r from-yellow-500 to-orange-500 text-white hover:from-yellow-600 hover:to-orange-600 shadow-lg\"\r\n              }`}\r\n            >\r\n              {isExporting ? (\r\n                <>\r\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\r\n                  Экспорт... {exportProgress}%\r\n                </>\r\n              ) : isLoading ? (\r\n                <>\r\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\r\n                  Загрузка...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Zap size={16} className=\"mr-2\" />\r\n                  ⚡ Быстрый экспорт\r\n                </>\r\n              )}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <canvas ref={canvasRef} style={{ display: \"none\" }} />\r\n        <canvas ref={previewCanvasRef} style={{ display: \"none\" }} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OptimizedFFmpegExporter;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}