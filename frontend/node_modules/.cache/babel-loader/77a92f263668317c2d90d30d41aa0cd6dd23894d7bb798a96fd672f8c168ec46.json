{"ast":null,"code":"var _jsxFileName = \"C:\\\\Scriptify\\\\ai-content-studio\\\\frontend\\\\src\\\\components\\\\Timeline.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport { useState, useRef, useEffect, useCallback } from \"react\";\nimport { Video, Music, Copy, Trash2, Scissors, Film, Plus, Layers, ZoomIn, ZoomOut, RotateCcw, HelpCircle, Play, Pause, SkipBack, SkipForward, Volume2, Image, FileText } from \"lucide-react\";\n\n// Компонент VideoPlayer\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VideoPlayer = ({\n  timelineItems,\n  currentTime,\n  videoDuration,\n  isPlaying,\n  setIsPlaying,\n  seekTo,\n  formatTime\n}) => {\n  _s();\n  const videoRef = useRef(null);\n  const [volume, setVolume] = useState(1);\n\n  // Получаем активные элементы в текущем времени\n  const getActiveItems = useCallback(() => {\n    return timelineItems.filter(item => {\n      const itemStart = item.startTime;\n      const itemEnd = item.startTime + item.duration;\n      return currentTime >= itemStart && currentTime < itemEnd;\n    }).sort((a, b) => {\n      // Сортируем по типу дорожки: main -> overlays -> audio\n      const trackOrder = {\n        main: 0,\n        overlay: 1,\n        audio: 2\n      };\n      const aOrder = trackOrder[a.trackType] || 3;\n      const bOrder = trackOrder[b.trackType] || 3;\n      return aOrder - bOrder;\n    });\n  }, [timelineItems, currentTime]);\n  const activeItems = getActiveItems();\n  const mainVideoItem = activeItems.find(item => item.trackType === 'main');\n  const overlayItems = activeItems.filter(item => item.trackType === 'overlay');\n  const audioItems = activeItems.filter(item => item.trackType === 'audio');\n\n  // Обновляем время видео при изменении currentTime\n  useEffect(() => {\n    if (videoRef.current && mainVideoItem) {\n      const videoElement = videoRef.current;\n      const relativeTime = currentTime - mainVideoItem.startTime;\n      if (Math.abs(videoElement.currentTime - relativeTime) > 0.1) {\n        videoElement.currentTime = Math.max(0, relativeTime);\n      }\n    }\n  }, [currentTime, mainVideoItem]);\n\n  // Управление воспроизведением\n  useEffect(() => {\n    if (videoRef.current && mainVideoItem) {\n      if (isPlaying) {\n        videoRef.current.play().catch(console.error);\n      } else {\n        videoRef.current.pause();\n      }\n    }\n  }, [isPlaying, mainVideoItem]);\n\n  // Обновление громкости\n  useEffect(() => {\n    if (videoRef.current) {\n      videoRef.current.volume = volume;\n    }\n  }, [volume]);\n  const handlePlayPause = () => {\n    setIsPlaying(!isPlaying);\n  };\n  const handleSeekBackward = () => {\n    seekTo(Math.max(0, currentTime - 10));\n  };\n  const handleSeekForward = () => {\n    seekTo(Math.min(videoDuration, currentTime + 10));\n  };\n  const renderVideoContent = () => {\n    if (!mainVideoItem) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full h-full bg-gray-900 flex items-center justify-center text-white\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(Video, {\n            size: 64,\n            className: \"mx-auto mb-4 text-gray-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-lg\",\n            children: \"No video content at current time\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-400 mt-2\",\n            children: \"Add video to timeline or move playhead to video content\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative w-full h-full bg-black\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        className: \"w-full h-full object-contain\",\n        src: mainVideoItem.src,\n        onTimeUpdate: e => {\n          if (isPlaying) {\n            const videoTime = e.target.currentTime;\n            const timelineTime = mainVideoItem.startTime + videoTime;\n            if (timelineTime <= mainVideoItem.startTime + mainVideoItem.duration) {\n              seekTo(timelineTime);\n            } else {\n              setIsPlaying(false);\n            }\n          }\n        },\n        onLoadedMetadata: () => {\n          if (videoRef.current) {\n            const relativeTime = currentTime - mainVideoItem.startTime;\n            videoRef.current.currentTime = Math.max(0, relativeTime);\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), overlayItems.map((overlay, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute inset-0 flex items-center justify-center pointer-events-none\",\n        style: {\n          zIndex: 10 + index\n        },\n        children: overlay.type === 'image' ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: overlay.src,\n          alt: overlay.name,\n          className: \"max-w-full max-h-full object-contain\",\n          style: {\n            opacity: overlay.opacity || 1,\n            transform: `scale(${overlay.scale || 1})`\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 15\n        }, this) : overlay.type === 'text' ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-white text-center p-4 bg-black bg-opacity-50 rounded\",\n          style: {\n            fontSize: overlay.fontSize || '24px',\n            color: overlay.color || 'white'\n          },\n          children: overlay.text || overlay.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 15\n        }, this) : null\n      }, overlay.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 11\n      }, this)), overlayItems.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute top-4 right-4 bg-black bg-opacity-50 text-white px-2 py-1 rounded text-sm\",\n        children: [overlayItems.length, \" overlay\", overlayItems.length > 1 ? 's' : '']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-2xl shadow-sm border-2 border-gray-200 overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-50 p-4 border-b border-gray-200\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-gray-800 font-semibold flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(Video, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Video Player\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 13\n          }, this), mainVideoItem && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-blue-600 text-sm\",\n            children: [\"- Playing: \\\"\", mainVideoItem.name, \"\\\"\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 15\n          }, this), overlayItems.length > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-purple-600 text-sm\",\n            children: [\"+ \", overlayItems.length, \" overlay\", overlayItems.length > 1 ? 's' : '']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 15\n          }, this), audioItems.length > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-green-600 text-sm\",\n            children: [\"+ \", audioItems.length, \" audio track\", audioItems.length > 1 ? 's' : '']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-gray-600\",\n          children: [formatTime(currentTime), \" / \", formatTime(videoDuration)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"aspect-video bg-gray-900 relative\",\n      children: [renderVideoContent(), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute bottom-4 left-4 right-4 bg-black bg-opacity-50 rounded-lg p-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between text-white\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleSeekBackward,\n              className: \"p-2 hover:bg-white hover:bg-opacity-20 rounded transition-colors\",\n              title: \"Rewind 10s\",\n              children: /*#__PURE__*/_jsxDEV(SkipBack, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handlePlayPause,\n              className: \"p-3 bg-blue-600 hover:bg-blue-700 rounded-full transition-colors\",\n              title: isPlaying ? \"Pause\" : \"Play\",\n              children: isPlaying ? /*#__PURE__*/_jsxDEV(Pause, {\n                size: 24\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 30\n              }, this) : /*#__PURE__*/_jsxDEV(Play, {\n                size: 24\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 52\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleSeekForward,\n              className: \"p-2 hover:bg-white hover:bg-opacity-20 rounded transition-colors\",\n              title: \"Forward 10s\",\n              children: /*#__PURE__*/_jsxDEV(SkipForward, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(Volume2, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"range\",\n              min: \"0\",\n              max: \"1\",\n              step: \"0.1\",\n              value: volume,\n              onChange: e => setVolume(parseFloat(e.target.value)),\n              className: \"w-20\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }, this), activeItems.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-3 bg-gray-50 border-t border-gray-200\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm text-gray-600\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Active items:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-1 space-y-1\",\n          children: activeItems.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [item.type === 'video' && /*#__PURE__*/_jsxDEV(Video, {\n              size: 14,\n              className: \"text-blue-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 45\n            }, this), item.type === 'audio' && /*#__PURE__*/_jsxDEV(Music, {\n              size: 14,\n              className: \"text-green-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 45\n            }, this), item.type === 'image' && /*#__PURE__*/_jsxDEV(Image, {\n              size: 14,\n              className: \"text-purple-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 45\n            }, this), item.type === 'text' && /*#__PURE__*/_jsxDEV(FileText, {\n              size: 14,\n              className: \"text-orange-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 44\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-400\",\n              children: [\"(\", formatTime(item.startTime), \" - \", formatTime(item.startTime + item.duration), \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 19\n            }, this)]\n          }, item.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 181,\n    columnNumber: 5\n  }, this);\n};\n\n// Обновленный компонент Timeline\n_s(VideoPlayer, \"o3OJzTJKsfm+MZ7Y/Q1OhQlmUq4=\");\n_c = VideoPlayer;\nconst Timeline = ({\n  timelineItems,\n  setTimelineItems,\n  currentTime,\n  videoDuration,\n  setVideoDuration,\n  selectedTimelineItem,\n  setSelectedTimelineItem,\n  timelineZoom,\n  setTimelineZoom,\n  tracks,\n  setTracks,\n  draggedItem,\n  draggedTimelineItem,\n  setDraggedTimelineItem,\n  dropPreview,\n  setDropPreview,\n  isDragging,\n  isTimelineDragging,\n  setIsTimelineDragging,\n  isResizing,\n  setIsResizing,\n  copiedItem,\n  formatTime,\n  seekTo,\n  splitTimelineItem,\n  copyTimelineItem,\n  pasteTimelineItem,\n  deleteSelectedItem,\n  addToTimeline,\n  insertWithRipple,\n  applyRippleEffect,\n  removeFromTimeline\n}) => {\n  _s2();\n  const timelineRef = useRef(null);\n  const timelineScrollRef = useRef(null);\n  const trackLabelsRef = useRef(null);\n  const autoScrollIntervalRef = useRef(null);\n\n  // Timeline-specific states\n  const [dragOffset, setDragOffset] = useState(0);\n  const [resizeHandle, setResizeHandle] = useState(null);\n  const [resizeItem, setResizeItem] = useState(null);\n  const [originalItemData, setOriginalItemData] = useState(null);\n\n  // Автопрокрутка\n  const stopAutoScroll = useCallback(() => {\n    if (autoScrollIntervalRef.current) {\n      clearInterval(autoScrollIntervalRef.current);\n      autoScrollIntervalRef.current = null;\n    }\n  }, []);\n  const startAutoScroll = useCallback((direction, speed = 1) => {\n    stopAutoScroll();\n    autoScrollIntervalRef.current = setInterval(() => {\n      if (timelineScrollRef.current) {\n        const scrollAmount = 15 * speed;\n        const currentScrollLeft = timelineScrollRef.current.scrollLeft;\n        const maxScroll = timelineScrollRef.current.scrollWidth - timelineScrollRef.current.clientWidth;\n        if (direction === \"left\" && currentScrollLeft > 0) {\n          timelineScrollRef.current.scrollLeft = Math.max(0, currentScrollLeft - scrollAmount);\n        } else if (direction === \"right\" && currentScrollLeft < maxScroll) {\n          timelineScrollRef.current.scrollLeft = Math.min(maxScroll, currentScrollLeft + scrollAmount);\n        }\n      }\n    }, 16);\n  }, [stopAutoScroll]);\n  const checkAutoScroll = useCallback(clientX => {\n    if (!timelineScrollRef.current) return;\n    const rect = timelineScrollRef.current.getBoundingClientRect();\n    const scrollZoneWidth = 120;\n    const relativeX = clientX - rect.left;\n    if (relativeX < scrollZoneWidth && timelineScrollRef.current.scrollLeft > 0) {\n      const speed = (scrollZoneWidth - relativeX) / scrollZoneWidth * 3;\n      startAutoScroll(\"left\", speed);\n    } else if (relativeX > rect.width - scrollZoneWidth) {\n      const maxScroll = timelineScrollRef.current.scrollWidth - timelineScrollRef.current.clientWidth;\n      if (timelineScrollRef.current.scrollLeft < maxScroll) {\n        const speed = (relativeX - (rect.width - scrollZoneWidth)) / scrollZoneWidth * 3;\n        startAutoScroll(\"right\", speed);\n      }\n    } else {\n      stopAutoScroll();\n    }\n  }, [startAutoScroll, stopAutoScroll]);\n\n  // Автоматическое определение дорожки по типу медиа\n  const getTargetTrackForType = useCallback(mediaType => {\n    var _tracks$main, _tracks$audio, _tracks$overlays, _tracks$main2, _tracks$main2$;\n    switch (mediaType) {\n      case \"video\":\n        const mainTrack = (_tracks$main = tracks.main) === null || _tracks$main === void 0 ? void 0 : _tracks$main[0];\n        console.log(`Main дорожка для видео:`, mainTrack);\n        return mainTrack === null || mainTrack === void 0 ? void 0 : mainTrack.id;\n      case \"audio\":\n      case \"music\":\n        const audioTrack = (_tracks$audio = tracks.audio) === null || _tracks$audio === void 0 ? void 0 : _tracks$audio[0];\n        console.log(`Audio дорожка для аудио:`, audioTrack);\n        return audioTrack === null || audioTrack === void 0 ? void 0 : audioTrack.id;\n      case \"image\":\n      case \"text\":\n        const overlayTrack = (_tracks$overlays = tracks.overlays) === null || _tracks$overlays === void 0 ? void 0 : _tracks$overlays[0];\n        console.log(`Overlay дорожка для картинки/текста:`, overlayTrack);\n        return overlayTrack === null || overlayTrack === void 0 ? void 0 : overlayTrack.id;\n      default:\n        console.log(`Неизвестный тип ${mediaType}, используем main дорожку`);\n        return (_tracks$main2 = tracks.main) === null || _tracks$main2 === void 0 ? void 0 : (_tracks$main2$ = _tracks$main2[0]) === null || _tracks$main2$ === void 0 ? void 0 : _tracks$main2$.id;\n    }\n  }, [tracks]);\n\n  // Умное размещение элемента на правильной дорожке\n  const addToTimelineAtCurrentTime = useCallback(() => {\n    if (!draggedItem) return;\n    const targetTrackId = getTargetTrackForType(draggedItem.type);\n    if (!targetTrackId) return;\n\n    // Находим лучшую позицию для размещения\n    const bestPosition = findBestPositionForItem(draggedItem, targetTrackId);\n    addToTimeline(draggedItem, bestPosition, targetTrackId);\n  }, [draggedItem, getTargetTrackForType, addToTimeline]);\n\n  // Находим лучшую позицию для размещения элемента\n  const findBestPositionForItem = useCallback((item, targetTrackId) => {\n    const duration = item.duration || (item.type === \"image\" ? 5 : 10);\n\n    // Получаем все элементы на целевой дорожке\n    const itemsOnTrack = timelineItems.filter(timelineItem => timelineItem.trackId === targetTrackId).sort((a, b) => a.startTime - b.startTime);\n\n    // Если нет элементов на дорожке, размещаем в текущей позиции\n    if (itemsOnTrack.length === 0) {\n      return currentTime;\n    }\n\n    // Проверяем, есть ли место в текущей позиции\n    const hasSpaceAtCurrentTime = !itemsOnTrack.some(existingItem => {\n      const existingStart = existingItem.startTime;\n      const existingEnd = existingItem.startTime + existingItem.duration;\n      const newStart = currentTime;\n      const newEnd = currentTime + duration;\n\n      // Проверяем пересечение\n      return !(newEnd <= existingStart || newStart >= existingEnd);\n    });\n    if (hasSpaceAtCurrentTime) {\n      return currentTime;\n    }\n\n    // Если в текущей позиции нет места, размещаем после последнего элемента\n    const lastItem = itemsOnTrack[itemsOnTrack.length - 1];\n    return lastItem.startTime + lastItem.duration;\n  }, [timelineItems, currentTime]);\n\n  // Зум и прокрутка колесом мыши как в CapCut\n  const handleWheel = useCallback(e => {\n    if (e.ctrlKey) {\n      // Ctrl + колесо = зум с фокусом на курсор\n      e.preventDefault();\n      if (!timelineScrollRef.current) return;\n      const rect = timelineScrollRef.current.getBoundingClientRect();\n      const mouseX = e.clientX - rect.left + timelineScrollRef.current.scrollLeft;\n      const currentPixelsPerSecond = 50 * timelineZoom;\n      const timeAtMouse = mouseX / currentPixelsPerSecond;\n      const zoomDirection = e.deltaY < 0 ? 1 : -1;\n      const zoomStep = 1.2;\n      setTimelineZoom(prevZoom => {\n        let newZoom;\n        if (zoomDirection > 0) {\n          newZoom = Math.min(20, prevZoom * zoomStep);\n        } else {\n          newZoom = Math.max(0.1, prevZoom / zoomStep);\n        }\n        requestAnimationFrame(() => {\n          if (timelineScrollRef.current) {\n            const newPixelsPerSecond = 50 * newZoom;\n            const newMouseX = timeAtMouse * newPixelsPerSecond;\n            const targetScrollLeft = newMouseX - (e.clientX - rect.left);\n            timelineScrollRef.current.scrollLeft = Math.max(0, targetScrollLeft);\n          }\n        });\n        return newZoom;\n      });\n    } else if (e.shiftKey) {\n      // Shift + колесо = горизонтальная прокрутка\n      e.preventDefault();\n      if (timelineScrollRef.current) {\n        const scrollAmount = e.deltaY * 2;\n        timelineScrollRef.current.scrollLeft += scrollAmount;\n      }\n    }\n  }, [timelineZoom, setTimelineZoom]);\n\n  // Функции зума\n  const zoomIn = () => {\n    setTimelineZoom(prev => Math.min(20, prev * 1.5));\n  };\n  const zoomOut = () => {\n    setTimelineZoom(prev => Math.max(0.1, prev / 1.5));\n  };\n  const resetZoom = () => {\n    setTimelineZoom(1);\n  };\n\n  // Функции для resize\n  const handleResizeStart = useCallback((e, item, handle) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsResizing(true);\n    setResizeHandle(handle);\n    setResizeItem(item);\n    setOriginalItemData({\n      startTime: item.startTime,\n      duration: item.duration\n    });\n    setIsTimelineDragging(false);\n    setDraggedTimelineItem(null);\n  }, [setIsResizing, setIsTimelineDragging, setDraggedTimelineItem]);\n  const handleResizeEnd = useCallback(() => {\n    setIsResizing(false);\n    setResizeHandle(null);\n    setResizeItem(null);\n    setOriginalItemData(null);\n    stopAutoScroll();\n  }, [setIsResizing, stopAutoScroll]);\n\n  // Добавление треков\n  const addOverlayTrack = () => {\n    const newTrackId = `overlay-${Date.now()}`;\n    setTracks(prev => ({\n      ...prev,\n      overlays: [...prev.overlays, {\n        id: newTrackId,\n        name: `Overlay ${prev.overlays.length + 1}`,\n        type: \"overlay\"\n      }]\n    }));\n  };\n  const addAudioTrack = () => {\n    const newTrackId = `audio-${Date.now()}`;\n    setTracks(prev => ({\n      ...prev,\n      audio: [...prev.audio, {\n        id: newTrackId,\n        name: `Audio ${prev.audio.length + 1}`,\n        type: \"audio\"\n      }]\n    }));\n  };\n\n  // Синхронизация скролла\n  const handleTrackAreaScroll = e => {\n    if (trackLabelsRef.current) {\n      trackLabelsRef.current.scrollTop = e.target.scrollTop;\n    }\n  };\n  const handleTrackLabelsScroll = e => {\n    if (timelineScrollRef.current) {\n      timelineScrollRef.current.scrollTop = e.target.scrollTop;\n    }\n  };\n  const getTimelineWidth = () => {\n    const baseWidth = videoDuration * 50 * timelineZoom;\n    return Math.max(baseWidth, 2000);\n  };\n  const getPixelsPerSecond = () => {\n    return 50 * timelineZoom;\n  };\n\n  // Обработчики событий\n  const handleTimelineClick = e => {\n    if (isDragging || isTimelineDragging || isResizing) return;\n    const rect = timelineScrollRef.current.getBoundingClientRect();\n    const clickX = e.clientX - rect.left + timelineScrollRef.current.scrollLeft;\n    const pixelsPerSecond = getPixelsPerSecond();\n    const clickTime = clickX / pixelsPerSecond;\n    seekTo(clickTime);\n  };\n  const handleTimelineDoubleClick = useCallback(e => {\n    if (isDragging || isTimelineDragging || isResizing || !draggedItem) return;\n    const rect = timelineScrollRef.current.getBoundingClientRect();\n    const clickX = e.clientX - rect.left + timelineScrollRef.current.scrollLeft;\n    const pixelsPerSecond = getPixelsPerSecond();\n    const clickTime = clickX / pixelsPerSecond;\n    const targetTrackId = getTargetTrackForType(draggedItem.type);\n    if (targetTrackId) {\n      // Используем точную позицию клика для двойного клика\n      addToTimeline(draggedItem, clickTime, targetTrackId);\n    }\n  }, [isDragging, isTimelineDragging, isResizing, draggedItem, getTargetTrackForType, addToTimeline]);\n  const handleTimelineItemDragStart = (e, timelineItem) => {\n    if (isResizing) {\n      e.preventDefault();\n      return;\n    }\n    e.stopPropagation();\n    setDraggedTimelineItem(timelineItem);\n    setIsTimelineDragging(true);\n    const rect = timelineScrollRef.current.getBoundingClientRect();\n    const itemRect = e.target.getBoundingClientRect();\n    setDragOffset(e.clientX - itemRect.left + timelineScrollRef.current.scrollLeft);\n    e.dataTransfer.effectAllowed = \"move\";\n    e.dataTransfer.setData(\"text/plain\", \"\");\n  };\n  const handleTimelineItemDragEnd = () => {\n    setDraggedTimelineItem(null);\n    setDropPreview(null);\n    setIsTimelineDragging(false);\n    setDragOffset(0);\n    stopAutoScroll();\n  };\n  const handleDragOver = e => {\n    if (!draggedItem && !draggedTimelineItem) return;\n    e.preventDefault();\n    e.dataTransfer.dropEffect = draggedItem ? \"copy\" : \"move\";\n    if (draggedTimelineItem || isResizing) {\n      checkAutoScroll(e.clientX);\n    }\n    const timelineRect = timelineScrollRef.current.getBoundingClientRect();\n    const dragX = e.clientX - timelineRect.left + timelineScrollRef.current.scrollLeft - (draggedTimelineItem ? dragOffset : 0);\n    const pixelsPerSecond = getPixelsPerSecond();\n    const dropTime = Math.max(0, dragX / pixelsPerSecond);\n    const dragY = e.clientY - timelineRect.top + timelineScrollRef.current.scrollTop;\n    const trackHeight = 60;\n    const timeRulerHeight = 48;\n    const relativeY = dragY - timeRulerHeight;\n    const trackIndex = Math.floor(relativeY / trackHeight);\n    const allTracks = [...tracks.overlays, ...tracks.main, ...tracks.audio];\n    const targetTrack = allTracks[trackIndex];\n    if (draggedItem && targetTrack) {\n      const duration = draggedItem.duration || (draggedItem.type === \"image\" ? 5 : 10);\n      const insertResult = insertWithRipple(targetTrack.id, dropTime, duration);\n      setDropPreview({\n        time: insertResult.time,\n        duration: duration,\n        trackId: targetTrack.id,\n        trackType: targetTrack.type,\n        isValid: true,\n        shouldRipple: insertResult.shouldRipple,\n        affectedItems: insertResult.affectedItems || []\n      });\n    } else if (draggedTimelineItem && targetTrack) {\n      const insertResult = insertWithRipple(targetTrack.id, dropTime, draggedTimelineItem.duration, draggedTimelineItem.id);\n      setDropPreview({\n        time: insertResult.time,\n        duration: draggedTimelineItem.duration,\n        trackId: targetTrack.id,\n        trackType: targetTrack.type,\n        isValid: true,\n        shouldRipple: insertResult.shouldRipple,\n        affectedItems: insertResult.affectedItems || []\n      });\n    }\n  };\n  const handleDrop = e => {\n    e.preventDefault();\n    stopAutoScroll();\n\n    // Если нет валидного preview, но есть draggedItem - используем умную логику размещения\n    if (!dropPreview && draggedItem) {\n      const targetTrackId = getTargetTrackForType(draggedItem.type);\n      if (targetTrackId) {\n        const bestPosition = findBestPositionForItem(draggedItem, targetTrackId);\n        addToTimeline(draggedItem, bestPosition, targetTrackId);\n      }\n      setDropPreview(null);\n      setIsTimelineDragging(false);\n      return;\n    }\n    if (!draggedItem && !draggedTimelineItem || !dropPreview) return;\n    if (dropPreview.isValid) {\n      if (draggedItem) {\n        var _dropPreview$affected;\n        if (dropPreview.shouldRipple && ((_dropPreview$affected = dropPreview.affectedItems) === null || _dropPreview$affected === void 0 ? void 0 : _dropPreview$affected.length) > 0) {\n          applyRippleEffect(dropPreview.affectedItems, dropPreview.duration);\n        }\n        addToTimeline(draggedItem, dropPreview.time, dropPreview.trackId);\n      } else if (draggedTimelineItem) {\n        var _dropPreview$affected2;\n        if (dropPreview.shouldRipple && ((_dropPreview$affected2 = dropPreview.affectedItems) === null || _dropPreview$affected2 === void 0 ? void 0 : _dropPreview$affected2.length) > 0) {\n          applyRippleEffect(dropPreview.affectedItems, draggedTimelineItem.duration);\n        }\n        setTimelineItems(prev => prev.map(item => item.id === draggedTimelineItem.id ? {\n          ...item,\n          startTime: dropPreview.time,\n          trackId: dropPreview.trackId,\n          trackType: dropPreview.trackType\n        } : item));\n        const newEndTime = dropPreview.time + draggedTimelineItem.duration;\n        if (newEndTime > videoDuration) {\n          setVideoDuration(newEndTime + 10);\n        }\n      }\n    }\n    setDropPreview(null);\n    setIsTimelineDragging(false);\n  };\n  const handleDragLeave = e => {\n    var _timelineRef$current;\n    if (!((_timelineRef$current = timelineRef.current) !== null && _timelineRef$current !== void 0 && _timelineRef$current.contains(e.relatedTarget))) {\n      setDropPreview(null);\n      stopAutoScroll();\n    }\n  };\n  const getTimelineItemStyle = item => {\n    const allTracks = [...tracks.overlays, ...tracks.main, ...tracks.audio];\n    const trackIndex = allTracks.findIndex(track => track.id === item.trackId);\n    const pixelsPerSecond = getPixelsPerSecond();\n    return {\n      left: `${item.startTime * pixelsPerSecond}px`,\n      width: `${item.duration * pixelsPerSecond}px`,\n      top: `${trackIndex * 60 + 10}px`\n    };\n  };\n  const getDropPreviewStyle = () => {\n    if (!dropPreview) return {};\n    const allTracks = [...tracks.overlays, ...tracks.main, ...tracks.audio];\n    const trackIndex = allTracks.findIndex(track => track.id === dropPreview.trackId);\n    const pixelsPerSecond = getPixelsPerSecond();\n    return {\n      left: `${dropPreview.time * pixelsPerSecond}px`,\n      width: `${dropPreview.duration * pixelsPerSecond}px`,\n      top: `${trackIndex * 60 + 10}px`\n    };\n  };\n  const getTrackColor = trackType => {\n    switch (trackType) {\n      case \"overlay\":\n        return \"bg-purple-500 border-purple-400\";\n      case \"main\":\n        return \"bg-blue-500 border-blue-400\";\n      case \"audio\":\n        return \"bg-green-500 border-green-400\";\n      default:\n        return \"bg-gray-500 border-gray-400\";\n    }\n  };\n\n  // Эффекты\n  useEffect(() => {\n    const handleMouseMove = e => {\n      if (!isResizing || !resizeItem || !timelineScrollRef.current) return;\n      checkAutoScroll(e.clientX);\n      const rect = timelineScrollRef.current.getBoundingClientRect();\n      const mouseX = e.clientX - rect.left + timelineScrollRef.current.scrollLeft;\n      const pixelsPerSecond = getPixelsPerSecond();\n      const newTime = mouseX / pixelsPerSecond;\n      setTimelineItems(prev => prev.map(item => {\n        if (item.id !== resizeItem.id) return item;\n        const minDuration = 0.1;\n        if (resizeHandle === \"left\") {\n          const rightEdge = originalItemData.startTime + originalItemData.duration;\n          const newStartTime = Math.max(0, Math.min(rightEdge - minDuration, newTime));\n          const newDuration = rightEdge - newStartTime;\n          return {\n            ...item,\n            startTime: newStartTime,\n            duration: newDuration\n          };\n        } else if (resizeHandle === \"right\") {\n          const leftEdge = originalItemData.startTime;\n          const newEndTime = Math.max(leftEdge + minDuration, newTime);\n          const newDuration = newEndTime - leftEdge;\n          return {\n            ...item,\n            duration: newDuration\n          };\n        }\n        return item;\n      }));\n    };\n    const handleMouseUp = () => {\n      if (isResizing) {\n        handleResizeEnd();\n      }\n    };\n    if (isResizing) {\n      document.addEventListener(\"mousemove\", handleMouseMove);\n      document.addEventListener(\"mouseup\", handleMouseUp);\n    }\n    return () => {\n      document.removeEventListener(\"mousemove\", handleMouseMove);\n      document.removeEventListener(\"mouseup\", handleMouseUp);\n    };\n  }, [isResizing, resizeItem, resizeHandle, originalItemData, getPixelsPerSecond, checkAutoScroll, handleResizeEnd, setTimelineItems]);\n  useEffect(() => {\n    return () => {\n      stopAutoScroll();\n    };\n  }, [stopAutoScroll]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `h-80 bg-white rounded-2xl shadow-sm border-2 transition-all duration-200 overflow-hidden flex flex-col flex-shrink-0 ${isDragging || isTimelineDragging || isResizing ? \"border-blue-400 bg-blue-50/20\" : \"border-gray-200\"}`,\n    onWheel: handleWheel,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-50 p-4 border-b border-gray-200 space-y-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-gray-800 font-semibold flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(Film, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 926,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Timeline Pro\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 927,\n            columnNumber: 13\n          }, this), draggedItem && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-blue-600 text-sm\",\n            children: [\"- \\u0413\\u043E\\u0442\\u043E\\u0432 \\u0434\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C: \\\"\", draggedItem.name, \"\\\" \\u043D\\u0430 \", draggedItem.type === 'video' ? 'Main Video' : draggedItem.type === 'audio' || draggedItem.type === 'music' ? 'Audio' : 'Overlay', \" \\u0434\\u043E\\u0440\\u043E\\u0436\\u043A\\u0443\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 929,\n            columnNumber: 15\n          }, this), isDragging && dropPreview && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-green-600\",\n            children: [\"- Adding \\\"\", draggedItem === null || draggedItem === void 0 ? void 0 : draggedItem.name, \"\\\"\", \" \", dropPreview.shouldRipple ? \"⚡ ripple\" : \"📍 exact\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 938,\n            columnNumber: 15\n          }, this), isTimelineDragging && dropPreview && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-blue-600\",\n            children: [\"- Moving \\\"\", draggedTimelineItem === null || draggedTimelineItem === void 0 ? void 0 : draggedTimelineItem.name, \"\\\"\", \" \", dropPreview.shouldRipple ? \"⚡ push blocks\" : \"📍 exact\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 944,\n            columnNumber: 15\n          }, this), isResizing && resizeItem && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-orange-600\",\n            children: [\"- Trimming \\\"\", resizeItem.name, \"\\\" (\", resizeHandle, \" edge)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 950,\n            columnNumber: 15\n          }, this), copiedItem && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-blue-600 text-sm\",\n            children: [\"- \\\"\", copiedItem.name, \"\\\" copied (Ctrl+V to paste)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 955,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 925,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-3\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2 bg-white rounded-xl p-2 border border-gray-200\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: zoomOut,\n              className: \"p-1 text-gray-600 hover:text-blue-600 transition-colors\",\n              title: \"Zoom Out (-)\",\n              children: /*#__PURE__*/_jsxDEV(ZoomOut, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 968,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 963,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs text-gray-500 min-w-12 text-center\",\n              children: [(timelineZoom * 100).toFixed(0), \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 970,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: zoomIn,\n              className: \"p-1 text-gray-600 hover:text-blue-600 transition-colors\",\n              title: \"Zoom In (+), or Ctrl+Wheel\",\n              children: /*#__PURE__*/_jsxDEV(ZoomIn, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 978,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 973,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: resetZoom,\n              className: \"p-1 text-gray-600 hover:text-blue-600 transition-colors\",\n              title: \"Reset Zoom (0)\",\n              children: /*#__PURE__*/_jsxDEV(RotateCcw, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 985,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 980,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"p-1 text-gray-600 hover:text-blue-600 transition-colors\",\n              title: \"Timeline Controls Help\",\n              children: /*#__PURE__*/_jsxDEV(HelpCircle, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 991,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 987,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 962,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 961,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 924,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-6\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: addOverlayTrack,\n              className: \"p-2 text-purple-600 hover:text-purple-800 hover:bg-purple-50 rounded-xl transition-all duration-200\",\n              title: \"Add Overlay Track\",\n              children: /*#__PURE__*/_jsxDEV(Plus, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1005,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1000,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: addAudioTrack,\n              className: \"p-2 text-green-600 hover:text-green-800 hover:bg-green-50 rounded-xl transition-all duration-200\",\n              title: \"Add Audio Track\",\n              children: /*#__PURE__*/_jsxDEV(Music, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1012,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1007,\n              columnNumber: 15\n            }, this), draggedItem && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: addToTimelineAtCurrentTime,\n              className: \"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-xl transition-all duration-200 animate-pulse bg-blue-100\",\n              title: `Добавить \"${draggedItem.name}\" на ${draggedItem.type === 'video' ? 'Main Video' : draggedItem.type === 'audio' || draggedItem.type === 'music' ? 'Audio' : 'Overlay'} дорожку в оптимальную позицию`,\n              children: /*#__PURE__*/_jsxDEV(Plus, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1024,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1015,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: splitTimelineItem,\n              disabled: !selectedTimelineItem,\n              className: `p-2 rounded-xl transition-all duration-200 ${selectedTimelineItem ? \"text-red-600 hover:text-red-800 hover:bg-red-50\" : \"text-gray-400 cursor-not-allowed\"}`,\n              title: \"Split Selected Item (Ctrl+B) - Cuts item at current time\",\n              children: /*#__PURE__*/_jsxDEV(Scissors, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1037,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1027,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: copyTimelineItem,\n              disabled: !selectedTimelineItem,\n              className: `p-2 rounded-xl transition-all duration-200 ${selectedTimelineItem ? \"text-blue-600 hover:text-blue-800 hover:bg-blue-50\" : \"text-gray-400 cursor-not-allowed\"}`,\n              title: \"Copy Selected Item (Ctrl+C) - Copy item to clipboard\",\n              children: /*#__PURE__*/_jsxDEV(Copy, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1049,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1039,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: pasteTimelineItem,\n              disabled: !copiedItem,\n              className: `p-2 rounded-xl transition-all duration-200 ${copiedItem ? \"text-green-600 hover:text-green-800 hover:bg-green-50\" : \"text-gray-400 cursor-not-allowed\"}`,\n              title: \"Paste Item (Ctrl+V) - Paste copied item\",\n              children: /*#__PURE__*/_jsxDEV(Copy, {\n                size: 16,\n                className: \"rotate-180\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1061,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1051,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: deleteSelectedItem,\n              disabled: !selectedTimelineItem,\n              className: `p-2 rounded-xl transition-all duration-200 ${selectedTimelineItem ? \"text-red-600 hover:text-red-800 hover:bg-red-50\" : \"text-gray-400 cursor-not-allowed\"}`,\n              title: \"Delete Selected Item (Del/Backspace) - Remove from timeline\",\n              children: /*#__PURE__*/_jsxDEV(Trash2, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1073,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1063,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 999,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 998,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 997,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 923,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex min-h-0\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-48 bg-gray-50 border-r border-gray-200 flex-shrink-0 flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-12 border-b border-gray-200 flex-shrink-0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1082,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: trackLabelsRef,\n          className: \"flex-1 overflow-y-auto overflow-x-hidden\",\n          onScroll: handleTrackLabelsScroll,\n          children: [tracks.overlays.map(track => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h-15 flex items-center px-4 border-b border-gray-100 text-sm font-medium text-purple-700 bg-purple-50 flex-shrink-0\",\n            style: {\n              height: \"60px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(Layers, {\n              size: 16,\n              className: \"mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1095,\n              columnNumber: 17\n            }, this), track.name]\n          }, track.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1090,\n            columnNumber: 15\n          }, this)), tracks.main.map(track => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h-15 flex items-center px-4 border-b border-gray-100 text-sm font-medium text-blue-700 bg-blue-50 flex-shrink-0\",\n            style: {\n              height: \"60px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(Video, {\n              size: 16,\n              className: \"mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1106,\n              columnNumber: 17\n            }, this), track.name]\n          }, track.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1101,\n            columnNumber: 15\n          }, this)), tracks.audio.map(track => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h-15 flex items-center px-4 border-b border-gray-100 text-sm font-medium text-green-700 bg-green-50 flex-shrink-0\",\n            style: {\n              height: \"60px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(Music, {\n              size: 16,\n              className: \"mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1117,\n              columnNumber: 17\n            }, this), track.name]\n          }, track.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1112,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1084,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1081,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: el => {\n          timelineRef.current = el;\n          timelineScrollRef.current = el;\n        },\n        className: \"flex-1 relative overflow-auto bg-white\",\n        onScroll: handleTrackAreaScroll,\n        onDragOver: handleDragOver,\n        onDrop: handleDrop,\n        onDragLeave: handleDragLeave,\n        style: {\n          overflowX: \"auto\",\n          overflowY: \"auto\",\n          scrollbarWidth: \"thin\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: `${getTimelineWidth()}px`,\n            minHeight: \"100%\",\n            position: \"relative\"\n          },\n          onClick: handleTimelineClick,\n          onDoubleClick: handleTimelineDoubleClick,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h-12 bg-gray-50 border-b border-gray-200 relative flex-shrink-0\",\n            children: [Array.from({\n              length: Math.ceil(videoDuration * timelineZoom / 5) + 1\n            }, (_, i) => {\n              const timeValue = i * 5 / timelineZoom;\n              const pixelsPerSecond = getPixelsPerSecond();\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute top-0 h-full border-l border-gray-300\",\n                style: {\n                  left: `${timeValue * pixelsPerSecond}px`\n                },\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs text-gray-600 ml-2 mt-2 inline-block font-medium\",\n                  children: formatTime(timeValue)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1161,\n                  columnNumber: 23\n                }, this)\n              }, i, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1156,\n                columnNumber: 21\n              }, this);\n            }), timelineZoom > 2 && Array.from({\n              length: Math.ceil(videoDuration * timelineZoom) + 1\n            }, (_, i) => {\n              const timeValue = i / timelineZoom;\n              const pixelsPerSecond = getPixelsPerSecond();\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute top-8 w-0 h-4 border-l border-gray-200\",\n                style: {\n                  left: `${timeValue * pixelsPerSecond}px`\n                }\n              }, `sub-${i}`, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1176,\n                columnNumber: 23\n              }, this);\n            }), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute top-0 w-0.5 h-full bg-red-500 z-20 shadow-sm\",\n              style: {\n                left: `${currentTime * getPixelsPerSecond()}px`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1185,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1149,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative flex-1\",\n            style: {\n              height: `${(tracks.overlays.length + tracks.main.length + tracks.audio.length) * 60}px`,\n              minHeight: \"100%\"\n            },\n            children: [timelineItems.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `absolute h-10 rounded-lg border-2 cursor-grab active:cursor-grabbing transition-all shadow-sm hover:shadow-md group ${getTrackColor(item.trackType)} ${(selectedTimelineItem === null || selectedTimelineItem === void 0 ? void 0 : selectedTimelineItem.id) === item.id ? \"ring-2 ring-blue-300\" : \"\"} ${(draggedTimelineItem === null || draggedTimelineItem === void 0 ? void 0 : draggedTimelineItem.id) === item.id ? \"opacity-50 z-30\" : \"\"} ${(copiedItem === null || copiedItem === void 0 ? void 0 : copiedItem.id) === item.id ? \"ring-2 ring-green-300 ring-dashed\" : \"\"}`,\n              style: getTimelineItemStyle(item),\n              onClick: e => {\n                e.stopPropagation();\n                setSelectedTimelineItem(item);\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute left-0 top-0 w-3 h-full cursor-ew-resize opacity-0 group-hover:opacity-100 bg-white/50 rounded-l-lg z-10 flex items-center justify-center\",\n                onMouseDown: e => handleResizeStart(e, item, \"left\"),\n                title: \"Trim start - Drag to adjust start time\",\n                style: {\n                  background: \"linear-gradient(to right, rgba(255,255,255,0.8), transparent)\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-0.5 h-6 bg-white rounded-full opacity-80\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1236,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1227,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                draggable: \"true\",\n                onDragStart: e => handleTimelineItemDragStart(e, item),\n                onDragEnd: handleTimelineItemDragEnd,\n                className: \"p-2 text-white text-xs truncate font-medium flex items-center h-full mx-3 cursor-grab active:cursor-grabbing\",\n                title: \"Drag to move item on timeline - Ripple mode: pushes other blocks\",\n                children: [item.name, (copiedItem === null || copiedItem === void 0 ? void 0 : copiedItem.id) === item.id && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"ml-2 text-green-200\",\n                  children: \"\\uD83D\\uDCCB\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1248,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1239,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute right-0 top-0 w-3 h-full cursor-ew-resize opacity-0 group-hover:opacity-100 bg-white/50 rounded-r-lg z-10 flex items-center justify-center\",\n                onMouseDown: e => handleResizeStart(e, item, \"right\"),\n                title: \"Trim end - Drag to adjust duration\",\n                style: {\n                  background: \"linear-gradient(to left, rgba(255,255,255,0.8), transparent)\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-0.5 h-6 bg-white rounded-full opacity-80\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1261,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1252,\n                columnNumber: 19\n              }, this)]\n            }, item.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1206,\n              columnNumber: 17\n            }, this)), dropPreview && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `absolute h-10 rounded-lg border-2 transition-all ${dropPreview.isValid ? dropPreview.isExact ? `${getTrackColor(dropPreview.trackType)} bg-opacity-60 border-solid` : `${getTrackColor(dropPreview.trackType)} bg-opacity-40 border-dashed animate-pulse` : \"bg-red-300 border-red-500 border-dashed\"}`,\n              style: getDropPreviewStyle(),\n              children: dropPreview.isValid && !dropPreview.isExact && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-center h-full text-white text-xs font-bold\",\n                children: \"\\uD83E\\uDDF2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1282,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1267,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1193,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1140,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1124,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1080,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 915,\n    columnNumber: 5\n  }, this);\n};\n\n// Демонстрационное приложение\n_s2(Timeline, \"zmd69gmvngS2iEpw9tIEBe2PPrg=\");\n_c2 = Timeline;\nconst VideoTimelineDemo = () => {\n  _s3();\n  // Состояния для timeline\n  const [timelineItems, setTimelineItems] = useState([]);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [videoDuration, setVideoDuration] = useState(60);\n  const [selectedTimelineItem, setSelectedTimelineItem] = useState(null);\n  const [timelineZoom, setTimelineZoom] = useState(1);\n  const [isPlaying, setIsPlaying] = useState(false);\n\n  // Состояния для drag & drop\n  const [draggedItem, setDraggedItem] = useState(null);\n  const [draggedTimelineItem, setDraggedTimelineItem] = useState(null);\n  const [dropPreview, setDropPreview] = useState(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [isTimelineDragging, setIsTimelineDragging] = useState(false);\n  const [isResizing, setIsResizing] = useState(false);\n  const [copiedItem, setCopiedItem] = useState(null);\n\n  // Дорожки\n  const [tracks, setTracks] = useState({\n    overlays: [{\n      id: \"overlay-1\",\n      name: \"Overlay 1\",\n      type: \"overlay\"\n    }],\n    main: [{\n      id: \"main-1\",\n      name: \"Main Video\",\n      type: \"main\"\n    }],\n    audio: [{\n      id: \"audio-1\",\n      name: \"Audio 1\",\n      type: \"audio\"\n    }]\n  });\n\n  // Тестовые медиа файлы\n  const [mediaLibrary] = useState([{\n    id: \"video-1\",\n    name: \"Sample Video 1\",\n    type: \"video\",\n    duration: 15,\n    src: \"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4\",\n    thumbnail: \"https://via.placeholder.com/200x112/3b82f6/ffffff?text=Video+1\"\n  }, {\n    id: \"video-2\",\n    name: \"Sample Video 2\",\n    type: \"video\",\n    duration: 12,\n    src: \"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4\",\n    thumbnail: \"https://via.placeholder.com/200x112/3b82f6/ffffff?text=Video+2\"\n  }, {\n    id: \"audio-1\",\n    name: \"Background Music\",\n    type: \"audio\",\n    duration: 30,\n    src: \"https://www.soundjay.com/misc/sounds/bell-ringing-05.wav\",\n    thumbnail: \"https://via.placeholder.com/200x112/10b981/ffffff?text=Audio\"\n  }, {\n    id: \"image-1\",\n    name: \"Logo Overlay\",\n    type: \"image\",\n    duration: 5,\n    src: \"https://via.placeholder.com/400x300/8b5cf6/ffffff?text=Logo\",\n    thumbnail: \"https://via.placeholder.com/200x112/8b5cf6/ffffff?text=Image\"\n  }, {\n    id: \"text-1\",\n    name: \"Title Text\",\n    type: \"text\",\n    duration: 3,\n    text: \"Welcome to Our Video\",\n    fontSize: \"32px\",\n    color: \"#ffffff\",\n    thumbnail: \"https://via.placeholder.com/200x112/f59e0b/ffffff?text=Text\"\n  }]);\n\n  // Автообновление времени при воспроизведении\n  useEffect(() => {\n    let interval = null;\n    if (isPlaying) {\n      interval = setInterval(() => {\n        setCurrentTime(prevTime => {\n          const newTime = prevTime + 0.1;\n          if (newTime >= videoDuration) {\n            setIsPlaying(false);\n            return videoDuration;\n          }\n          return newTime;\n        });\n      }, 100);\n    }\n    return () => {\n      if (interval) clearInterval(interval);\n    };\n  }, [isPlaying, videoDuration]);\n\n  // Утилитарные функции\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = Math.floor(seconds % 60);\n    const frames = Math.floor(seconds % 1 * 30);\n    return `${mins.toString().padStart(2, \"0\")}:${secs.toString().padStart(2, \"0\")}:${frames.toString().padStart(2, \"0\")}`;\n  };\n  const seekTo = time => {\n    setCurrentTime(Math.max(0, Math.min(videoDuration, time)));\n  };\n\n  // Функции timeline\n  const addToTimeline = (item, startTime, trackId) => {\n    const trackType = tracks.overlays.find(t => t.id === trackId) ? 'overlay' : tracks.main.find(t => t.id === trackId) ? 'main' : 'audio';\n    const newTimelineItem = {\n      ...item,\n      id: `timeline-${Date.now()}`,\n      originalId: item.id,\n      startTime,\n      trackId,\n      trackType\n    };\n    setTimelineItems(prev => [...prev, newTimelineItem]);\n\n    // Расширяем duration если нужно\n    const newEndTime = startTime + item.duration;\n    if (newEndTime > videoDuration) {\n      setVideoDuration(newEndTime + 10);\n    }\n  };\n  const insertWithRipple = (trackId, time, duration, excludeId = null) => {\n    return {\n      time,\n      shouldRipple: false,\n      affectedItems: []\n    };\n  };\n  const applyRippleEffect = (affectedItems, shiftDuration) => {\n    // Логика ripple effect\n  };\n  const removeFromTimeline = itemId => {\n    setTimelineItems(prev => prev.filter(item => item.id !== itemId));\n  };\n  const splitTimelineItem = () => {\n    if (!selectedTimelineItem) return;\n    const item = selectedTimelineItem;\n    const splitTime = currentTime - item.startTime;\n    if (splitTime <= 0 || splitTime >= item.duration) return;\n    const firstPart = {\n      ...item,\n      id: `timeline-${Date.now()}-1`,\n      duration: splitTime\n    };\n    const secondPart = {\n      ...item,\n      id: `timeline-${Date.now()}-2`,\n      startTime: item.startTime + splitTime,\n      duration: item.duration - splitTime\n    };\n    setTimelineItems(prev => prev.map(timelineItem => timelineItem.id === item.id ? firstPart : timelineItem).concat(secondPart));\n    setSelectedTimelineItem(firstPart);\n  };\n  const copyTimelineItem = () => {\n    if (selectedTimelineItem) {\n      setCopiedItem(selectedTimelineItem);\n    }\n  };\n  const pasteTimelineItem = () => {\n    if (!copiedItem) return;\n    const newItem = {\n      ...copiedItem,\n      id: `timeline-${Date.now()}`,\n      startTime: currentTime\n    };\n    setTimelineItems(prev => [...prev, newItem]);\n  };\n  const deleteSelectedItem = () => {\n    if (selectedTimelineItem) {\n      removeFromTimeline(selectedTimelineItem.id);\n      setSelectedTimelineItem(null);\n    }\n  };\n\n  // Обработчики drag & drop для медиа библиотеки\n  const handleMediaDragStart = (e, item) => {\n    setDraggedItem(item);\n    setIsDragging(true);\n    e.dataTransfer.effectAllowed = \"copy\";\n  };\n  const handleMediaDragEnd = () => {\n    setDraggedItem(null);\n    setIsDragging(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-100 p-6\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto space-y-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-bold text-gray-900 mb-2\",\n          children: \"Video Timeline System\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1518,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"\\u041F\\u0435\\u0440\\u0435\\u0442\\u0430\\u0449\\u0438\\u0442\\u0435 \\u0432\\u0438\\u0434\\u0435\\u043E \\u0432 timeline \\u0438 \\u043D\\u0430\\u0436\\u043C\\u0438\\u0442\\u0435 Play \\u0434\\u043B\\u044F \\u0432\\u043E\\u0441\\u043F\\u0440\\u043E\\u0438\\u0437\\u0432\\u0435\\u0434\\u0435\\u043D\\u0438\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1521,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1517,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(VideoPlayer, {\n        timelineItems: timelineItems,\n        currentTime: currentTime,\n        videoDuration: videoDuration,\n        isPlaying: isPlaying,\n        setIsPlaying: setIsPlaying,\n        seekTo: seekTo,\n        formatTime: formatTime\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1527,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-2xl shadow-sm border-2 border-gray-200 p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-gray-800 mb-4 flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(Film, {\n            size: 20,\n            className: \"mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1540,\n            columnNumber: 13\n          }, this), \"Media Library\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1539,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4\",\n          children: mediaLibrary.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `bg-gray-50 rounded-xl p-3 cursor-grab active:cursor-grabbing border-2 transition-all hover:shadow-md ${(draggedItem === null || draggedItem === void 0 ? void 0 : draggedItem.id) === item.id ? 'border-blue-400 bg-blue-50' : 'border-gray-200'}`,\n            draggable: \"true\",\n            onDragStart: e => handleMediaDragStart(e, item),\n            onDragEnd: handleMediaDragEnd,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"aspect-video bg-gray-200 rounded-lg mb-2 overflow-hidden\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: item.thumbnail,\n                alt: item.name,\n                className: \"w-full h-full object-cover\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1555,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1554,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"font-medium text-gray-900 truncate\",\n                children: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1562,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-gray-500 text-xs mt-1 flex items-center justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"capitalize\",\n                  children: item.type\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1566,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: formatTime(item.duration)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1567,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1565,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1561,\n              columnNumber: 17\n            }, this)]\n          }, item.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1545,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1543,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1538,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Timeline, {\n        timelineItems: timelineItems,\n        setTimelineItems: setTimelineItems,\n        currentTime: currentTime,\n        videoDuration: videoDuration,\n        setVideoDuration: setVideoDuration,\n        selectedTimelineItem: selectedTimelineItem,\n        setSelectedTimelineItem: setSelectedTimelineItem,\n        timelineZoom: timelineZoom,\n        setTimelineZoom: setTimelineZoom,\n        tracks: tracks,\n        setTracks: setTracks,\n        draggedItem: draggedItem,\n        draggedTimelineItem: draggedTimelineItem,\n        setDraggedTimelineItem: setDraggedTimelineItem,\n        dropPreview: dropPreview,\n        setDropPreview: setDropPreview,\n        isDragging: isDragging,\n        isTimelineDragging: isTimelineDragging,\n        setIsTimelineDragging: setIsTimelineDragging,\n        isResizing: isResizing,\n        setIsResizing: setIsResizing,\n        copiedItem: copiedItem,\n        formatTime: formatTime,\n        seekTo: seekTo,\n        splitTimelineItem: splitTimelineItem,\n        copyTimelineItem: copyTimelineItem,\n        pasteTimelineItem: pasteTimelineItem,\n        deleteSelectedItem: deleteSelectedItem,\n        addToTimeline: addToTimeline,\n        insertWithRipple: insertWithRipple,\n        applyRippleEffect: applyRippleEffect,\n        removeFromTimeline: removeFromTimeline\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1576,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-blue-50 border border-blue-200 rounded-2xl p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"font-semibold text-blue-900 mb-2\",\n          children: \"\\u041A\\u0430\\u043A \\u0438\\u0441\\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u044C:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1613,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"text-blue-800 text-sm space-y-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"\\u2022 \\u041F\\u0435\\u0440\\u0435\\u0442\\u0430\\u0449\\u0438\\u0442\\u0435 \\u0432\\u0438\\u0434\\u0435\\u043E \\u0438\\u0437 Media Library \\u043D\\u0430 timeline\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1615,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"\\u2022 \\u041D\\u0430\\u0436\\u043C\\u0438\\u0442\\u0435 Play \\u0432 \\u0432\\u0438\\u0434\\u0435\\u043E\\u043F\\u043B\\u0435\\u0435\\u0440\\u0435 \\u0434\\u043B\\u044F \\u0432\\u043E\\u0441\\u043F\\u0440\\u043E\\u0438\\u0437\\u0432\\u0435\\u0434\\u0435\\u043D\\u0438\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1616,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"\\u2022 \\u041A\\u043B\\u0438\\u043A\\u043D\\u0438\\u0442\\u0435 \\u043F\\u043E timeline \\u0434\\u043B\\u044F \\u043F\\u0435\\u0440\\u0435\\u043C\\u0435\\u0449\\u0435\\u043D\\u0438\\u044F \\u043F\\u043E \\u0432\\u0440\\u0435\\u043C\\u0435\\u043D\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1617,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"\\u2022 Overlay \\u044D\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442\\u044B \\u043E\\u0442\\u043E\\u0431\\u0440\\u0430\\u0436\\u0430\\u044E\\u0442\\u0441\\u044F \\u043F\\u043E\\u0432\\u0435\\u0440\\u0445 \\u043E\\u0441\\u043D\\u043E\\u0432\\u043D\\u043E\\u0433\\u043E \\u0432\\u0438\\u0434\\u0435\\u043E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1618,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"\\u2022 Audio \\u0434\\u043E\\u0440\\u043E\\u0436\\u043A\\u0438 \\u0432\\u043E\\u0441\\u043F\\u0440\\u043E\\u0438\\u0437\\u0432\\u043E\\u0434\\u044F\\u0442\\u0441\\u044F \\u0432\\u043C\\u0435\\u0441\\u0442\\u0435 \\u0441 \\u0432\\u0438\\u0434\\u0435\\u043E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1619,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1614,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1612,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1516,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1515,\n    columnNumber: 5\n  }, this);\n};\n_s3(VideoTimelineDemo, \"zwkTT7sW1NNrnsK9w96gX0HNnSM=\");\n_c3 = VideoTimelineDemo;\nexport default VideoTimelineDemo;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"VideoPlayer\");\n$RefreshReg$(_c2, \"Timeline\");\n$RefreshReg$(_c3, \"VideoTimelineDemo\");","map":{"version":3,"names":["useState","useRef","useEffect","useCallback","Video","Music","Copy","Trash2","Scissors","Film","Plus","Layers","ZoomIn","ZoomOut","RotateCcw","HelpCircle","Play","Pause","SkipBack","SkipForward","Volume2","Image","FileText","jsxDEV","_jsxDEV","VideoPlayer","timelineItems","currentTime","videoDuration","isPlaying","setIsPlaying","seekTo","formatTime","_s","videoRef","volume","setVolume","getActiveItems","filter","item","itemStart","startTime","itemEnd","duration","sort","a","b","trackOrder","main","overlay","audio","aOrder","trackType","bOrder","activeItems","mainVideoItem","find","overlayItems","audioItems","current","videoElement","relativeTime","Math","abs","max","play","catch","console","error","pause","handlePlayPause","handleSeekBackward","handleSeekForward","min","renderVideoContent","className","children","size","fileName","_jsxFileName","lineNumber","columnNumber","ref","src","onTimeUpdate","e","videoTime","target","timelineTime","onLoadedMetadata","map","index","style","zIndex","type","alt","name","opacity","transform","scale","fontSize","color","text","id","length","onClick","title","step","value","onChange","parseFloat","_c","Timeline","setTimelineItems","setVideoDuration","selectedTimelineItem","setSelectedTimelineItem","timelineZoom","setTimelineZoom","tracks","setTracks","draggedItem","draggedTimelineItem","setDraggedTimelineItem","dropPreview","setDropPreview","isDragging","isTimelineDragging","setIsTimelineDragging","isResizing","setIsResizing","copiedItem","splitTimelineItem","copyTimelineItem","pasteTimelineItem","deleteSelectedItem","addToTimeline","insertWithRipple","applyRippleEffect","removeFromTimeline","_s2","timelineRef","timelineScrollRef","trackLabelsRef","autoScrollIntervalRef","dragOffset","setDragOffset","resizeHandle","setResizeHandle","resizeItem","setResizeItem","originalItemData","setOriginalItemData","stopAutoScroll","clearInterval","startAutoScroll","direction","speed","setInterval","scrollAmount","currentScrollLeft","scrollLeft","maxScroll","scrollWidth","clientWidth","checkAutoScroll","clientX","rect","getBoundingClientRect","scrollZoneWidth","relativeX","left","width","getTargetTrackForType","mediaType","_tracks$main","_tracks$audio","_tracks$overlays","_tracks$main2","_tracks$main2$","mainTrack","log","audioTrack","overlayTrack","overlays","addToTimelineAtCurrentTime","targetTrackId","bestPosition","findBestPositionForItem","itemsOnTrack","timelineItem","trackId","hasSpaceAtCurrentTime","some","existingItem","existingStart","existingEnd","newStart","newEnd","lastItem","handleWheel","ctrlKey","preventDefault","mouseX","currentPixelsPerSecond","timeAtMouse","zoomDirection","deltaY","zoomStep","prevZoom","newZoom","requestAnimationFrame","newPixelsPerSecond","newMouseX","targetScrollLeft","shiftKey","zoomIn","prev","zoomOut","resetZoom","handleResizeStart","handle","stopPropagation","handleResizeEnd","addOverlayTrack","newTrackId","Date","now","addAudioTrack","handleTrackAreaScroll","scrollTop","handleTrackLabelsScroll","getTimelineWidth","baseWidth","getPixelsPerSecond","handleTimelineClick","clickX","pixelsPerSecond","clickTime","handleTimelineDoubleClick","handleTimelineItemDragStart","itemRect","dataTransfer","effectAllowed","setData","handleTimelineItemDragEnd","handleDragOver","dropEffect","timelineRect","dragX","dropTime","dragY","clientY","top","trackHeight","timeRulerHeight","relativeY","trackIndex","floor","allTracks","targetTrack","insertResult","time","isValid","shouldRipple","affectedItems","handleDrop","_dropPreview$affected","_dropPreview$affected2","newEndTime","handleDragLeave","_timelineRef$current","contains","relatedTarget","getTimelineItemStyle","findIndex","track","getDropPreviewStyle","getTrackColor","handleMouseMove","newTime","minDuration","rightEdge","newStartTime","newDuration","leftEdge","handleMouseUp","document","addEventListener","removeEventListener","onWheel","toFixed","disabled","onScroll","height","el","onDragOver","onDrop","onDragLeave","overflowX","overflowY","scrollbarWidth","minHeight","position","onDoubleClick","Array","from","ceil","_","i","timeValue","onMouseDown","background","draggable","onDragStart","onDragEnd","isExact","_c2","VideoTimelineDemo","_s3","setCurrentTime","setDraggedItem","setIsDragging","setCopiedItem","mediaLibrary","thumbnail","interval","prevTime","seconds","mins","secs","frames","toString","padStart","t","newTimelineItem","originalId","excludeId","shiftDuration","itemId","splitTime","firstPart","secondPart","concat","newItem","handleMediaDragStart","handleMediaDragEnd","_c3","$RefreshReg$"],"sources":["C:/Scriptify/ai-content-studio/frontend/src/components/Timeline.jsx"],"sourcesContent":["import { useState, useRef, useEffect, useCallback } from \"react\";\r\nimport {\r\n  Video,\r\n  Music,\r\n  Copy,\r\n  Trash2,\r\n  Scissors,\r\n  Film,\r\n  Plus,\r\n  Layers,\r\n  ZoomIn,\r\n  ZoomOut,\r\n  RotateCcw,\r\n  HelpCircle,\r\n  Play,\r\n  Pause,\r\n  SkipBack,\r\n  SkipForward,\r\n  Volume2,\r\n  Image,\r\n  FileText,\r\n} from \"lucide-react\";\r\n\r\n// Компонент VideoPlayer\r\nconst VideoPlayer = ({\r\n  timelineItems,\r\n  currentTime,\r\n  videoDuration,\r\n  isPlaying,\r\n  setIsPlaying,\r\n  seekTo,\r\n  formatTime,\r\n}) => {\r\n  const videoRef = useRef(null);\r\n  const [volume, setVolume] = useState(1);\r\n  \r\n  // Получаем активные элементы в текущем времени\r\n  const getActiveItems = useCallback(() => {\r\n    return timelineItems.filter(item => {\r\n      const itemStart = item.startTime;\r\n      const itemEnd = item.startTime + item.duration;\r\n      return currentTime >= itemStart && currentTime < itemEnd;\r\n    }).sort((a, b) => {\r\n      // Сортируем по типу дорожки: main -> overlays -> audio\r\n      const trackOrder = { main: 0, overlay: 1, audio: 2 };\r\n      const aOrder = trackOrder[a.trackType] || 3;\r\n      const bOrder = trackOrder[b.trackType] || 3;\r\n      return aOrder - bOrder;\r\n    });\r\n  }, [timelineItems, currentTime]);\r\n\r\n  const activeItems = getActiveItems();\r\n  const mainVideoItem = activeItems.find(item => item.trackType === 'main');\r\n  const overlayItems = activeItems.filter(item => item.trackType === 'overlay');\r\n  const audioItems = activeItems.filter(item => item.trackType === 'audio');\r\n\r\n  // Обновляем время видео при изменении currentTime\r\n  useEffect(() => {\r\n    if (videoRef.current && mainVideoItem) {\r\n      const videoElement = videoRef.current;\r\n      const relativeTime = currentTime - mainVideoItem.startTime;\r\n      \r\n      if (Math.abs(videoElement.currentTime - relativeTime) > 0.1) {\r\n        videoElement.currentTime = Math.max(0, relativeTime);\r\n      }\r\n    }\r\n  }, [currentTime, mainVideoItem]);\r\n\r\n  // Управление воспроизведением\r\n  useEffect(() => {\r\n    if (videoRef.current && mainVideoItem) {\r\n      if (isPlaying) {\r\n        videoRef.current.play().catch(console.error);\r\n      } else {\r\n        videoRef.current.pause();\r\n      }\r\n    }\r\n  }, [isPlaying, mainVideoItem]);\r\n\r\n  // Обновление громкости\r\n  useEffect(() => {\r\n    if (videoRef.current) {\r\n      videoRef.current.volume = volume;\r\n    }\r\n  }, [volume]);\r\n\r\n  const handlePlayPause = () => {\r\n    setIsPlaying(!isPlaying);\r\n  };\r\n\r\n  const handleSeekBackward = () => {\r\n    seekTo(Math.max(0, currentTime - 10));\r\n  };\r\n\r\n  const handleSeekForward = () => {\r\n    seekTo(Math.min(videoDuration, currentTime + 10));\r\n  };\r\n\r\n  const renderVideoContent = () => {\r\n    if (!mainVideoItem) {\r\n      return (\r\n        <div className=\"w-full h-full bg-gray-900 flex items-center justify-center text-white\">\r\n          <div className=\"text-center\">\r\n            <Video size={64} className=\"mx-auto mb-4 text-gray-500\" />\r\n            <p className=\"text-lg\">No video content at current time</p>\r\n            <p className=\"text-sm text-gray-400 mt-2\">\r\n              Add video to timeline or move playhead to video content\r\n            </p>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"relative w-full h-full bg-black\">\r\n        <video\r\n          ref={videoRef}\r\n          className=\"w-full h-full object-contain\"\r\n          src={mainVideoItem.src}\r\n          onTimeUpdate={(e) => {\r\n            if (isPlaying) {\r\n              const videoTime = e.target.currentTime;\r\n              const timelineTime = mainVideoItem.startTime + videoTime;\r\n              if (timelineTime <= mainVideoItem.startTime + mainVideoItem.duration) {\r\n                seekTo(timelineTime);\r\n              } else {\r\n                setIsPlaying(false);\r\n              }\r\n            }\r\n          }}\r\n          onLoadedMetadata={() => {\r\n            if (videoRef.current) {\r\n              const relativeTime = currentTime - mainVideoItem.startTime;\r\n              videoRef.current.currentTime = Math.max(0, relativeTime);\r\n            }\r\n          }}\r\n        />\r\n        \r\n        {/* Overlays */}\r\n        {overlayItems.map((overlay, index) => (\r\n          <div\r\n            key={overlay.id}\r\n            className=\"absolute inset-0 flex items-center justify-center pointer-events-none\"\r\n            style={{ zIndex: 10 + index }}\r\n          >\r\n            {overlay.type === 'image' ? (\r\n              <img\r\n                src={overlay.src}\r\n                alt={overlay.name}\r\n                className=\"max-w-full max-h-full object-contain\"\r\n                style={{\r\n                  opacity: overlay.opacity || 1,\r\n                  transform: `scale(${overlay.scale || 1})`,\r\n                }}\r\n              />\r\n            ) : overlay.type === 'text' ? (\r\n              <div\r\n                className=\"text-white text-center p-4 bg-black bg-opacity-50 rounded\"\r\n                style={{\r\n                  fontSize: overlay.fontSize || '24px',\r\n                  color: overlay.color || 'white',\r\n                }}\r\n              >\r\n                {overlay.text || overlay.name}\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n        ))}\r\n        \r\n        {/* Индикатор активных overlay элементов */}\r\n        {overlayItems.length > 0 && (\r\n          <div className=\"absolute top-4 right-4 bg-black bg-opacity-50 text-white px-2 py-1 rounded text-sm\">\r\n            {overlayItems.length} overlay{overlayItems.length > 1 ? 's' : ''}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl shadow-sm border-2 border-gray-200 overflow-hidden\">\r\n      {/* Заголовок */}\r\n      <div className=\"bg-gray-50 p-4 border-b border-gray-200\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <h4 className=\"text-gray-800 font-semibold flex items-center space-x-2\">\r\n            <Video size={18} />\r\n            <span>Video Player</span>\r\n            {mainVideoItem && (\r\n              <span className=\"text-blue-600 text-sm\">\r\n                - Playing: \"{mainVideoItem.name}\"\r\n              </span>\r\n            )}\r\n            {overlayItems.length > 0 && (\r\n              <span className=\"text-purple-600 text-sm\">\r\n                + {overlayItems.length} overlay{overlayItems.length > 1 ? 's' : ''}\r\n              </span>\r\n            )}\r\n            {audioItems.length > 0 && (\r\n              <span className=\"text-green-600 text-sm\">\r\n                + {audioItems.length} audio track{audioItems.length > 1 ? 's' : ''}\r\n              </span>\r\n            )}\r\n          </h4>\r\n          \r\n          <div className=\"text-sm text-gray-600\">\r\n            {formatTime(currentTime)} / {formatTime(videoDuration)}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Видео область */}\r\n      <div className=\"aspect-video bg-gray-900 relative\">\r\n        {renderVideoContent()}\r\n        \r\n        {/* Элементы управления поверх видео */}\r\n        <div className=\"absolute bottom-4 left-4 right-4 bg-black bg-opacity-50 rounded-lg p-3\">\r\n          <div className=\"flex items-center justify-between text-white\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <button\r\n                onClick={handleSeekBackward}\r\n                className=\"p-2 hover:bg-white hover:bg-opacity-20 rounded transition-colors\"\r\n                title=\"Rewind 10s\"\r\n              >\r\n                <SkipBack size={20} />\r\n              </button>\r\n              \r\n              <button\r\n                onClick={handlePlayPause}\r\n                className=\"p-3 bg-blue-600 hover:bg-blue-700 rounded-full transition-colors\"\r\n                title={isPlaying ? \"Pause\" : \"Play\"}\r\n              >\r\n                {isPlaying ? <Pause size={24} /> : <Play size={24} />}\r\n              </button>\r\n              \r\n              <button\r\n                onClick={handleSeekForward}\r\n                className=\"p-2 hover:bg-white hover:bg-opacity-20 rounded transition-colors\"\r\n                title=\"Forward 10s\"\r\n              >\r\n                <SkipForward size={20} />\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center space-x-2\">\r\n              <Volume2 size={16} />\r\n              <input\r\n                type=\"range\"\r\n                min=\"0\"\r\n                max=\"1\"\r\n                step=\"0.1\"\r\n                value={volume}\r\n                onChange={(e) => setVolume(parseFloat(e.target.value))}\r\n                className=\"w-20\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Информация о активных элементах */}\r\n      {activeItems.length > 0 && (\r\n        <div className=\"p-3 bg-gray-50 border-t border-gray-200\">\r\n          <div className=\"text-sm text-gray-600\">\r\n            <strong>Active items:</strong>\r\n            <div className=\"mt-1 space-y-1\">\r\n              {activeItems.map(item => (\r\n                <div key={item.id} className=\"flex items-center space-x-2\">\r\n                  {item.type === 'video' && <Video size={14} className=\"text-blue-600\" />}\r\n                  {item.type === 'audio' && <Music size={14} className=\"text-green-600\" />}\r\n                  {item.type === 'image' && <Image size={14} className=\"text-purple-600\" />}\r\n                  {item.type === 'text' && <FileText size={14} className=\"text-orange-600\" />}\r\n                  <span>{item.name}</span>\r\n                  <span className=\"text-gray-400\">\r\n                    ({formatTime(item.startTime)} - {formatTime(item.startTime + item.duration)})\r\n                  </span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Обновленный компонент Timeline\r\nconst Timeline = ({\r\n  timelineItems,\r\n  setTimelineItems,\r\n  currentTime,\r\n  videoDuration,\r\n  setVideoDuration,\r\n  selectedTimelineItem,\r\n  setSelectedTimelineItem,\r\n  timelineZoom,\r\n  setTimelineZoom,\r\n  tracks,\r\n  setTracks,\r\n  draggedItem,\r\n  draggedTimelineItem,\r\n  setDraggedTimelineItem,\r\n  dropPreview,\r\n  setDropPreview,\r\n  isDragging,\r\n  isTimelineDragging,\r\n  setIsTimelineDragging,\r\n  isResizing,\r\n  setIsResizing,\r\n  copiedItem,\r\n  formatTime,\r\n  seekTo,\r\n  splitTimelineItem,\r\n  copyTimelineItem,\r\n  pasteTimelineItem,\r\n  deleteSelectedItem,\r\n  addToTimeline,\r\n  insertWithRipple,\r\n  applyRippleEffect,\r\n  removeFromTimeline,\r\n}) => {\r\n  const timelineRef = useRef(null);\r\n  const timelineScrollRef = useRef(null);\r\n  const trackLabelsRef = useRef(null);\r\n  const autoScrollIntervalRef = useRef(null);\r\n\r\n  // Timeline-specific states\r\n  const [dragOffset, setDragOffset] = useState(0);\r\n  const [resizeHandle, setResizeHandle] = useState(null);\r\n  const [resizeItem, setResizeItem] = useState(null);\r\n  const [originalItemData, setOriginalItemData] = useState(null);\r\n\r\n  // Автопрокрутка\r\n  const stopAutoScroll = useCallback(() => {\r\n    if (autoScrollIntervalRef.current) {\r\n      clearInterval(autoScrollIntervalRef.current);\r\n      autoScrollIntervalRef.current = null;\r\n    }\r\n  }, []);\r\n\r\n  const startAutoScroll = useCallback(\r\n    (direction, speed = 1) => {\r\n      stopAutoScroll();\r\n\r\n      autoScrollIntervalRef.current = setInterval(() => {\r\n        if (timelineScrollRef.current) {\r\n          const scrollAmount = 15 * speed;\r\n          const currentScrollLeft = timelineScrollRef.current.scrollLeft;\r\n          const maxScroll =\r\n            timelineScrollRef.current.scrollWidth -\r\n            timelineScrollRef.current.clientWidth;\r\n\r\n          if (direction === \"left\" && currentScrollLeft > 0) {\r\n            timelineScrollRef.current.scrollLeft = Math.max(\r\n              0,\r\n              currentScrollLeft - scrollAmount\r\n            );\r\n          } else if (direction === \"right\" && currentScrollLeft < maxScroll) {\r\n            timelineScrollRef.current.scrollLeft = Math.min(\r\n              maxScroll,\r\n              currentScrollLeft + scrollAmount\r\n            );\r\n          }\r\n        }\r\n      }, 16);\r\n    },\r\n    [stopAutoScroll]\r\n  );\r\n\r\n  const checkAutoScroll = useCallback(\r\n    (clientX) => {\r\n      if (!timelineScrollRef.current) return;\r\n\r\n      const rect = timelineScrollRef.current.getBoundingClientRect();\r\n      const scrollZoneWidth = 120;\r\n      const relativeX = clientX - rect.left;\r\n\r\n      if (\r\n        relativeX < scrollZoneWidth &&\r\n        timelineScrollRef.current.scrollLeft > 0\r\n      ) {\r\n        const speed = ((scrollZoneWidth - relativeX) / scrollZoneWidth) * 3;\r\n        startAutoScroll(\"left\", speed);\r\n      } else if (relativeX > rect.width - scrollZoneWidth) {\r\n        const maxScroll =\r\n          timelineScrollRef.current.scrollWidth -\r\n          timelineScrollRef.current.clientWidth;\r\n        if (timelineScrollRef.current.scrollLeft < maxScroll) {\r\n          const speed =\r\n            ((relativeX - (rect.width - scrollZoneWidth)) / scrollZoneWidth) *\r\n            3;\r\n          startAutoScroll(\"right\", speed);\r\n        }\r\n      } else {\r\n        stopAutoScroll();\r\n      }\r\n    },\r\n    [startAutoScroll, stopAutoScroll]\r\n  );\r\n\r\n  // Автоматическое определение дорожки по типу медиа\r\n  const getTargetTrackForType = useCallback((mediaType) => {\r\n    \r\n    switch (mediaType) {\r\n      case \"video\":\r\n        const mainTrack = tracks.main?.[0];\r\n        console.log(`Main дорожка для видео:`, mainTrack);\r\n        return mainTrack?.id;\r\n      case \"audio\":\r\n      case \"music\":\r\n        const audioTrack = tracks.audio?.[0];\r\n        console.log(`Audio дорожка для аудио:`, audioTrack);\r\n        return audioTrack?.id;\r\n      case \"image\":\r\n      case \"text\":\r\n        const overlayTrack = tracks.overlays?.[0];\r\n        console.log(`Overlay дорожка для картинки/текста:`, overlayTrack);\r\n        return overlayTrack?.id;\r\n      default:\r\n        console.log(`Неизвестный тип ${mediaType}, используем main дорожку`);\r\n        return tracks.main?.[0]?.id;\r\n    }\r\n  }, [tracks]);\r\n\r\n  // Умное размещение элемента на правильной дорожке\r\n  const addToTimelineAtCurrentTime = useCallback(() => {\r\n    if (!draggedItem) return;\r\n    \r\n    const targetTrackId = getTargetTrackForType(draggedItem.type);\r\n    if (!targetTrackId) return;\r\n    \r\n    // Находим лучшую позицию для размещения\r\n    const bestPosition = findBestPositionForItem(draggedItem, targetTrackId);\r\n    addToTimeline(draggedItem, bestPosition, targetTrackId);\r\n  }, [draggedItem, getTargetTrackForType, addToTimeline]);\r\n\r\n  // Находим лучшую позицию для размещения элемента\r\n  const findBestPositionForItem = useCallback((item, targetTrackId) => {\r\n    const duration = item.duration || (item.type === \"image\" ? 5 : 10);\r\n    \r\n    // Получаем все элементы на целевой дорожке\r\n    const itemsOnTrack = timelineItems\r\n      .filter(timelineItem => timelineItem.trackId === targetTrackId)\r\n      .sort((a, b) => a.startTime - b.startTime);\r\n    \r\n    // Если нет элементов на дорожке, размещаем в текущей позиции\r\n    if (itemsOnTrack.length === 0) {\r\n      return currentTime;\r\n    }\r\n    \r\n    // Проверяем, есть ли место в текущей позиции\r\n    const hasSpaceAtCurrentTime = !itemsOnTrack.some(existingItem => {\r\n      const existingStart = existingItem.startTime;\r\n      const existingEnd = existingItem.startTime + existingItem.duration;\r\n      const newStart = currentTime;\r\n      const newEnd = currentTime + duration;\r\n      \r\n      // Проверяем пересечение\r\n      return !(newEnd <= existingStart || newStart >= existingEnd);\r\n    });\r\n    \r\n    if (hasSpaceAtCurrentTime) {\r\n      return currentTime;\r\n    }\r\n    \r\n    // Если в текущей позиции нет места, размещаем после последнего элемента\r\n    const lastItem = itemsOnTrack[itemsOnTrack.length - 1];\r\n    return lastItem.startTime + lastItem.duration;\r\n  }, [timelineItems, currentTime]);\r\n\r\n  // Зум и прокрутка колесом мыши как в CapCut\r\n  const handleWheel = useCallback((e) => {\r\n    if (e.ctrlKey) {\r\n      // Ctrl + колесо = зум с фокусом на курсор\r\n      e.preventDefault();\r\n      \r\n      if (!timelineScrollRef.current) return;\r\n      \r\n      const rect = timelineScrollRef.current.getBoundingClientRect();\r\n      const mouseX = e.clientX - rect.left + timelineScrollRef.current.scrollLeft;\r\n      const currentPixelsPerSecond = 50 * timelineZoom;\r\n      const timeAtMouse = mouseX / currentPixelsPerSecond;\r\n      \r\n      const zoomDirection = e.deltaY < 0 ? 1 : -1;\r\n      const zoomStep = 1.2;\r\n      \r\n      setTimelineZoom((prevZoom) => {\r\n        let newZoom;\r\n        if (zoomDirection > 0) {\r\n          newZoom = Math.min(20, prevZoom * zoomStep);\r\n        } else {\r\n          newZoom = Math.max(0.1, prevZoom / zoomStep);\r\n        }\r\n        \r\n        requestAnimationFrame(() => {\r\n          if (timelineScrollRef.current) {\r\n            const newPixelsPerSecond = 50 * newZoom;\r\n            const newMouseX = timeAtMouse * newPixelsPerSecond;\r\n            const targetScrollLeft = newMouseX - (e.clientX - rect.left);\r\n            timelineScrollRef.current.scrollLeft = Math.max(0, targetScrollLeft);\r\n          }\r\n        });\r\n        \r\n        return newZoom;\r\n      });\r\n    } else if (e.shiftKey) {\r\n      // Shift + колесо = горизонтальная прокрутка\r\n      e.preventDefault();\r\n      \r\n      if (timelineScrollRef.current) {\r\n        const scrollAmount = e.deltaY * 2;\r\n        timelineScrollRef.current.scrollLeft += scrollAmount;\r\n      }\r\n    }\r\n  }, [timelineZoom, setTimelineZoom]);\r\n\r\n  // Функции зума\r\n  const zoomIn = () => {\r\n    setTimelineZoom((prev) => Math.min(20, prev * 1.5));\r\n  };\r\n\r\n  const zoomOut = () => {\r\n    setTimelineZoom((prev) => Math.max(0.1, prev / 1.5));\r\n  };\r\n\r\n  const resetZoom = () => {\r\n    setTimelineZoom(1);\r\n  };\r\n\r\n  // Функции для resize\r\n  const handleResizeStart = useCallback(\r\n    (e, item, handle) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      setIsResizing(true);\r\n      setResizeHandle(handle);\r\n      setResizeItem(item);\r\n      setOriginalItemData({\r\n        startTime: item.startTime,\r\n        duration: item.duration,\r\n      });\r\n\r\n      setIsTimelineDragging(false);\r\n      setDraggedTimelineItem(null);\r\n    },\r\n    [setIsResizing, setIsTimelineDragging, setDraggedTimelineItem]\r\n  );\r\n\r\n  const handleResizeEnd = useCallback(() => {\r\n    setIsResizing(false);\r\n    setResizeHandle(null);\r\n    setResizeItem(null);\r\n    setOriginalItemData(null);\r\n    stopAutoScroll();\r\n  }, [setIsResizing, stopAutoScroll]);\r\n\r\n  // Добавление треков\r\n  const addOverlayTrack = () => {\r\n    const newTrackId = `overlay-${Date.now()}`;\r\n    setTracks((prev) => ({\r\n      ...prev,\r\n      overlays: [\r\n        ...prev.overlays,\r\n        {\r\n          id: newTrackId,\r\n          name: `Overlay ${prev.overlays.length + 1}`,\r\n          type: \"overlay\",\r\n        },\r\n      ],\r\n    }));\r\n  };\r\n\r\n  const addAudioTrack = () => {\r\n    const newTrackId = `audio-${Date.now()}`;\r\n    setTracks((prev) => ({\r\n      ...prev,\r\n      audio: [\r\n        ...prev.audio,\r\n        {\r\n          id: newTrackId,\r\n          name: `Audio ${prev.audio.length + 1}`,\r\n          type: \"audio\",\r\n        },\r\n      ],\r\n    }));\r\n  };\r\n\r\n  // Синхронизация скролла\r\n  const handleTrackAreaScroll = (e) => {\r\n    if (trackLabelsRef.current) {\r\n      trackLabelsRef.current.scrollTop = e.target.scrollTop;\r\n    }\r\n  };\r\n\r\n  const handleTrackLabelsScroll = (e) => {\r\n    if (timelineScrollRef.current) {\r\n      timelineScrollRef.current.scrollTop = e.target.scrollTop;\r\n    }\r\n  };\r\n\r\n  const getTimelineWidth = () => {\r\n    const baseWidth = videoDuration * 50 * timelineZoom;\r\n    return Math.max(baseWidth, 2000);\r\n  };\r\n\r\n  const getPixelsPerSecond = () => {\r\n    return 50 * timelineZoom;\r\n  };\r\n\r\n  // Обработчики событий\r\n  const handleTimelineClick = (e) => {\r\n    if (isDragging || isTimelineDragging || isResizing) return;\r\n\r\n    const rect = timelineScrollRef.current.getBoundingClientRect();\r\n    const clickX = e.clientX - rect.left + timelineScrollRef.current.scrollLeft;\r\n    const pixelsPerSecond = getPixelsPerSecond();\r\n    const clickTime = clickX / pixelsPerSecond;\r\n    seekTo(clickTime);\r\n  };\r\n\r\n  const handleTimelineDoubleClick = useCallback((e) => {\r\n    if (isDragging || isTimelineDragging || isResizing || !draggedItem) return;\r\n    \r\n    const rect = timelineScrollRef.current.getBoundingClientRect();\r\n    const clickX = e.clientX - rect.left + timelineScrollRef.current.scrollLeft;\r\n    const pixelsPerSecond = getPixelsPerSecond();\r\n    const clickTime = clickX / pixelsPerSecond;\r\n    \r\n    const targetTrackId = getTargetTrackForType(draggedItem.type);\r\n    if (targetTrackId) {\r\n      // Используем точную позицию клика для двойного клика\r\n      addToTimeline(draggedItem, clickTime, targetTrackId);\r\n    }\r\n  }, [isDragging, isTimelineDragging, isResizing, draggedItem, getTargetTrackForType, addToTimeline]);\r\n\r\n  const handleTimelineItemDragStart = (e, timelineItem) => {\r\n    if (isResizing) {\r\n      e.preventDefault();\r\n      return;\r\n    }\r\n\r\n    e.stopPropagation();\r\n    setDraggedTimelineItem(timelineItem);\r\n    setIsTimelineDragging(true);\r\n\r\n    const rect = timelineScrollRef.current.getBoundingClientRect();\r\n    const itemRect = e.target.getBoundingClientRect();\r\n    setDragOffset(\r\n      e.clientX - itemRect.left + timelineScrollRef.current.scrollLeft\r\n    );\r\n\r\n    e.dataTransfer.effectAllowed = \"move\";\r\n    e.dataTransfer.setData(\"text/plain\", \"\");\r\n  };\r\n\r\n  const handleTimelineItemDragEnd = () => {\r\n    setDraggedTimelineItem(null);\r\n    setDropPreview(null);\r\n    setIsTimelineDragging(false);\r\n    setDragOffset(0);\r\n    stopAutoScroll();\r\n  };\r\n\r\n  const handleDragOver = (e) => {\r\n    if (!draggedItem && !draggedTimelineItem) return;\r\n\r\n    e.preventDefault();\r\n    e.dataTransfer.dropEffect = draggedItem ? \"copy\" : \"move\";\r\n\r\n    if (draggedTimelineItem || isResizing) {\r\n      checkAutoScroll(e.clientX);\r\n    }\r\n\r\n    const timelineRect = timelineScrollRef.current.getBoundingClientRect();\r\n    const dragX =\r\n      e.clientX -\r\n      timelineRect.left +\r\n      timelineScrollRef.current.scrollLeft -\r\n      (draggedTimelineItem ? dragOffset : 0);\r\n    const pixelsPerSecond = getPixelsPerSecond();\r\n    const dropTime = Math.max(0, dragX / pixelsPerSecond);\r\n\r\n    const dragY =\r\n      e.clientY - timelineRect.top + timelineScrollRef.current.scrollTop;\r\n    const trackHeight = 60;\r\n    const timeRulerHeight = 48;\r\n\r\n    const relativeY = dragY - timeRulerHeight;\r\n    const trackIndex = Math.floor(relativeY / trackHeight);\r\n\r\n    const allTracks = [...tracks.overlays, ...tracks.main, ...tracks.audio];\r\n    const targetTrack = allTracks[trackIndex];\r\n\r\n    if (draggedItem && targetTrack) {\r\n      const duration =\r\n        draggedItem.duration || (draggedItem.type === \"image\" ? 5 : 10);\r\n      const insertResult = insertWithRipple(targetTrack.id, dropTime, duration);\r\n\r\n      setDropPreview({\r\n        time: insertResult.time,\r\n        duration: duration,\r\n        trackId: targetTrack.id,\r\n        trackType: targetTrack.type,\r\n        isValid: true,\r\n        shouldRipple: insertResult.shouldRipple,\r\n        affectedItems: insertResult.affectedItems || [],\r\n      });\r\n    } else if (draggedTimelineItem && targetTrack) {\r\n      const insertResult = insertWithRipple(\r\n        targetTrack.id,\r\n        dropTime,\r\n        draggedTimelineItem.duration,\r\n        draggedTimelineItem.id\r\n      );\r\n\r\n      setDropPreview({\r\n        time: insertResult.time,\r\n        duration: draggedTimelineItem.duration,\r\n        trackId: targetTrack.id,\r\n        trackType: targetTrack.type,\r\n        isValid: true,\r\n        shouldRipple: insertResult.shouldRipple,\r\n        affectedItems: insertResult.affectedItems || [],\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleDrop = (e) => {\r\n    e.preventDefault();\r\n    stopAutoScroll();\r\n\r\n    // Если нет валидного preview, но есть draggedItem - используем умную логику размещения\r\n    if (!dropPreview && draggedItem) {\r\n      const targetTrackId = getTargetTrackForType(draggedItem.type);\r\n      if (targetTrackId) {\r\n        const bestPosition = findBestPositionForItem(draggedItem, targetTrackId);\r\n        addToTimeline(draggedItem, bestPosition, targetTrackId);\r\n      }\r\n      setDropPreview(null);\r\n      setIsTimelineDragging(false);\r\n      return;\r\n    }\r\n\r\n    if ((!draggedItem && !draggedTimelineItem) || !dropPreview) return;\r\n\r\n    if (dropPreview.isValid) {\r\n      if (draggedItem) {\r\n        if (dropPreview.shouldRipple && dropPreview.affectedItems?.length > 0) {\r\n          applyRippleEffect(dropPreview.affectedItems, dropPreview.duration);\r\n        }\r\n        addToTimeline(draggedItem, dropPreview.time, dropPreview.trackId);\r\n      } else if (draggedTimelineItem) {\r\n        if (dropPreview.shouldRipple && dropPreview.affectedItems?.length > 0) {\r\n          applyRippleEffect(\r\n            dropPreview.affectedItems,\r\n            draggedTimelineItem.duration\r\n          );\r\n        }\r\n\r\n        setTimelineItems((prev) =>\r\n          prev.map((item) =>\r\n            item.id === draggedTimelineItem.id\r\n              ? {\r\n                  ...item,\r\n                  startTime: dropPreview.time,\r\n                  trackId: dropPreview.trackId,\r\n                  trackType: dropPreview.trackType,\r\n                }\r\n              : item\r\n          )\r\n        );\r\n\r\n        const newEndTime = dropPreview.time + draggedTimelineItem.duration;\r\n        if (newEndTime > videoDuration) {\r\n          setVideoDuration(newEndTime + 10);\r\n        }\r\n      }\r\n    }\r\n\r\n    setDropPreview(null);\r\n    setIsTimelineDragging(false);\r\n  };\r\n\r\n  const handleDragLeave = (e) => {\r\n    if (!timelineRef.current?.contains(e.relatedTarget)) {\r\n      setDropPreview(null);\r\n      stopAutoScroll();\r\n    }\r\n  };\r\n\r\n  const getTimelineItemStyle = (item) => {\r\n    const allTracks = [...tracks.overlays, ...tracks.main, ...tracks.audio];\r\n    const trackIndex = allTracks.findIndex(\r\n      (track) => track.id === item.trackId\r\n    );\r\n    const pixelsPerSecond = getPixelsPerSecond();\r\n\r\n    return {\r\n      left: `${item.startTime * pixelsPerSecond}px`,\r\n      width: `${item.duration * pixelsPerSecond}px`,\r\n      top: `${trackIndex * 60 + 10}px`,\r\n    };\r\n  };\r\n\r\n  const getDropPreviewStyle = () => {\r\n    if (!dropPreview) return {};\r\n\r\n    const allTracks = [...tracks.overlays, ...tracks.main, ...tracks.audio];\r\n    const trackIndex = allTracks.findIndex(\r\n      (track) => track.id === dropPreview.trackId\r\n    );\r\n    const pixelsPerSecond = getPixelsPerSecond();\r\n\r\n    return {\r\n      left: `${dropPreview.time * pixelsPerSecond}px`,\r\n      width: `${dropPreview.duration * pixelsPerSecond}px`,\r\n      top: `${trackIndex * 60 + 10}px`,\r\n    };\r\n  };\r\n\r\n  const getTrackColor = (trackType) => {\r\n    switch (trackType) {\r\n      case \"overlay\":\r\n        return \"bg-purple-500 border-purple-400\";\r\n      case \"main\":\r\n        return \"bg-blue-500 border-blue-400\";\r\n      case \"audio\":\r\n        return \"bg-green-500 border-green-400\";\r\n      default:\r\n        return \"bg-gray-500 border-gray-400\";\r\n    }\r\n  };\r\n\r\n  // Эффекты\r\n  useEffect(() => {\r\n    const handleMouseMove = (e) => {\r\n      if (!isResizing || !resizeItem || !timelineScrollRef.current) return;\r\n\r\n      checkAutoScroll(e.clientX);\r\n\r\n      const rect = timelineScrollRef.current.getBoundingClientRect();\r\n      const mouseX =\r\n        e.clientX - rect.left + timelineScrollRef.current.scrollLeft;\r\n      const pixelsPerSecond = getPixelsPerSecond();\r\n      const newTime = mouseX / pixelsPerSecond;\r\n\r\n      setTimelineItems((prev) =>\r\n        prev.map((item) => {\r\n          if (item.id !== resizeItem.id) return item;\r\n\r\n          const minDuration = 0.1;\r\n\r\n          if (resizeHandle === \"left\") {\r\n            const rightEdge =\r\n              originalItemData.startTime + originalItemData.duration;\r\n            const newStartTime = Math.max(\r\n              0,\r\n              Math.min(rightEdge - minDuration, newTime)\r\n            );\r\n            const newDuration = rightEdge - newStartTime;\r\n\r\n            return {\r\n              ...item,\r\n              startTime: newStartTime,\r\n              duration: newDuration,\r\n            };\r\n          } else if (resizeHandle === \"right\") {\r\n            const leftEdge = originalItemData.startTime;\r\n            const newEndTime = Math.max(leftEdge + minDuration, newTime);\r\n            const newDuration = newEndTime - leftEdge;\r\n\r\n            return {\r\n              ...item,\r\n              duration: newDuration,\r\n            };\r\n          }\r\n\r\n          return item;\r\n        })\r\n      );\r\n    };\r\n\r\n    const handleMouseUp = () => {\r\n      if (isResizing) {\r\n        handleResizeEnd();\r\n      }\r\n    };\r\n\r\n    if (isResizing) {\r\n      document.addEventListener(\"mousemove\", handleMouseMove);\r\n      document.addEventListener(\"mouseup\", handleMouseUp);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener(\"mousemove\", handleMouseMove);\r\n      document.removeEventListener(\"mouseup\", handleMouseUp);\r\n    };\r\n  }, [\r\n    isResizing,\r\n    resizeItem,\r\n    resizeHandle,\r\n    originalItemData,\r\n    getPixelsPerSecond,\r\n    checkAutoScroll,\r\n    handleResizeEnd,\r\n    setTimelineItems,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      stopAutoScroll();\r\n    };\r\n  }, [stopAutoScroll]);\r\n\r\n  return (\r\n    <div\r\n      className={`h-80 bg-white rounded-2xl shadow-sm border-2 transition-all duration-200 overflow-hidden flex flex-col flex-shrink-0 ${\r\n        isDragging || isTimelineDragging || isResizing\r\n          ? \"border-blue-400 bg-blue-50/20\"\r\n          : \"border-gray-200\"\r\n      }`}\r\n      onWheel={handleWheel}\r\n    >\r\n      <div className=\"bg-gray-50 p-4 border-b border-gray-200 space-y-3\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <h4 className=\"text-gray-800 font-semibold flex items-center space-x-2\">\r\n            <Film size={18} />\r\n            <span>Timeline Pro</span>\r\n            {draggedItem && (\r\n              <span className=\"text-blue-600 text-sm\">\r\n                - Готов добавить: \"{draggedItem.name}\" на {\r\n                  draggedItem.type === 'video' ? 'Main Video' :\r\n                  draggedItem.type === 'audio' || draggedItem.type === 'music' ? 'Audio' :\r\n                  'Overlay'\r\n                } дорожку\r\n              </span>\r\n            )}\r\n            {isDragging && dropPreview && (\r\n              <span className=\"text-green-600\">\r\n                - Adding \"{draggedItem?.name}\"{\" \"}\r\n                {dropPreview.shouldRipple ? \"⚡ ripple\" : \"📍 exact\"}\r\n              </span>\r\n            )}\r\n            {isTimelineDragging && dropPreview && (\r\n              <span className=\"text-blue-600\">\r\n                - Moving \"{draggedTimelineItem?.name}\"{\" \"}\r\n                {dropPreview.shouldRipple ? \"⚡ push blocks\" : \"📍 exact\"}\r\n              </span>\r\n            )}\r\n            {isResizing && resizeItem && (\r\n              <span className=\"text-orange-600\">\r\n                - Trimming \"{resizeItem.name}\" ({resizeHandle} edge)\r\n              </span>\r\n            )}\r\n            {copiedItem && (\r\n              <span className=\"text-blue-600 text-sm\">\r\n                - \"{copiedItem.name}\" copied (Ctrl+V to paste)\r\n              </span>\r\n            )}\r\n          </h4>\r\n\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className=\"flex items-center space-x-2 bg-white rounded-xl p-2 border border-gray-200\">\r\n              <button\r\n                onClick={zoomOut}\r\n                className=\"p-1 text-gray-600 hover:text-blue-600 transition-colors\"\r\n                title=\"Zoom Out (-)\"\r\n              >\r\n                <ZoomOut size={16} />\r\n              </button>\r\n              <span className=\"text-xs text-gray-500 min-w-12 text-center\">\r\n                {(timelineZoom * 100).toFixed(0)}%\r\n              </span>\r\n              <button\r\n                onClick={zoomIn}\r\n                className=\"p-1 text-gray-600 hover:text-blue-600 transition-colors\"\r\n                title=\"Zoom In (+), or Ctrl+Wheel\"\r\n              >\r\n                <ZoomIn size={16} />\r\n              </button>\r\n              <button\r\n                onClick={resetZoom}\r\n                className=\"p-1 text-gray-600 hover:text-blue-600 transition-colors\"\r\n                title=\"Reset Zoom (0)\"\r\n              >\r\n                <RotateCcw size={16} />\r\n              </button>\r\n              <button\r\n                className=\"p-1 text-gray-600 hover:text-blue-600 transition-colors\"\r\n                title=\"Timeline Controls Help\"\r\n              >\r\n                <HelpCircle size={16} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center space-x-6\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              <button\r\n                onClick={addOverlayTrack}\r\n                className=\"p-2 text-purple-600 hover:text-purple-800 hover:bg-purple-50 rounded-xl transition-all duration-200\"\r\n                title=\"Add Overlay Track\"\r\n              >\r\n                <Plus size={16} />\r\n              </button>\r\n              <button\r\n                onClick={addAudioTrack}\r\n                className=\"p-2 text-green-600 hover:text-green-800 hover:bg-green-50 rounded-xl transition-all duration-200\"\r\n                title=\"Add Audio Track\"\r\n              >\r\n                <Music size={16} />\r\n              </button>\r\n              {draggedItem && (\r\n                <button\r\n                  onClick={addToTimelineAtCurrentTime}\r\n                  className=\"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-xl transition-all duration-200 animate-pulse bg-blue-100\"\r\n                  title={`Добавить \"${draggedItem.name}\" на ${\r\n                    draggedItem.type === 'video' ? 'Main Video' :\r\n                    draggedItem.type === 'audio' || draggedItem.type === 'music' ? 'Audio' :\r\n                    'Overlay'\r\n                  } дорожку в оптимальную позицию`}\r\n                >\r\n                  <Plus size={16} />\r\n                </button>\r\n              )}\r\n              <button\r\n                onClick={splitTimelineItem}\r\n                disabled={!selectedTimelineItem}\r\n                className={`p-2 rounded-xl transition-all duration-200 ${\r\n                  selectedTimelineItem\r\n                    ? \"text-red-600 hover:text-red-800 hover:bg-red-50\"\r\n                    : \"text-gray-400 cursor-not-allowed\"\r\n                }`}\r\n                title=\"Split Selected Item (Ctrl+B) - Cuts item at current time\"\r\n              >\r\n                <Scissors size={16} />\r\n              </button>\r\n              <button\r\n                onClick={copyTimelineItem}\r\n                disabled={!selectedTimelineItem}\r\n                className={`p-2 rounded-xl transition-all duration-200 ${\r\n                  selectedTimelineItem\r\n                    ? \"text-blue-600 hover:text-blue-800 hover:bg-blue-50\"\r\n                    : \"text-gray-400 cursor-not-allowed\"\r\n                }`}\r\n                title=\"Copy Selected Item (Ctrl+C) - Copy item to clipboard\"\r\n              >\r\n                <Copy size={16} />\r\n              </button>\r\n              <button\r\n                onClick={pasteTimelineItem}\r\n                disabled={!copiedItem}\r\n                className={`p-2 rounded-xl transition-all duration-200 ${\r\n                  copiedItem\r\n                    ? \"text-green-600 hover:text-green-800 hover:bg-green-50\"\r\n                    : \"text-gray-400 cursor-not-allowed\"\r\n                }`}\r\n                title=\"Paste Item (Ctrl+V) - Paste copied item\"\r\n              >\r\n                <Copy size={16} className=\"rotate-180\" />\r\n              </button>\r\n              <button\r\n                onClick={deleteSelectedItem}\r\n                disabled={!selectedTimelineItem}\r\n                className={`p-2 rounded-xl transition-all duration-200 ${\r\n                  selectedTimelineItem\r\n                    ? \"text-red-600 hover:text-red-800 hover:bg-red-50\"\r\n                    : \"text-gray-400 cursor-not-allowed\"\r\n                }`}\r\n                title=\"Delete Selected Item (Del/Backspace) - Remove from timeline\"\r\n              >\r\n                <Trash2 size={16} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex min-h-0\">\r\n        <div className=\"w-48 bg-gray-50 border-r border-gray-200 flex-shrink-0 flex flex-col\">\r\n          <div className=\"h-12 border-b border-gray-200 flex-shrink-0\"></div>\r\n\r\n          <div\r\n            ref={trackLabelsRef}\r\n            className=\"flex-1 overflow-y-auto overflow-x-hidden\"\r\n            onScroll={handleTrackLabelsScroll}\r\n          >\r\n            {tracks.overlays.map((track) => (\r\n              <div\r\n                key={track.id}\r\n                className=\"h-15 flex items-center px-4 border-b border-gray-100 text-sm font-medium text-purple-700 bg-purple-50 flex-shrink-0\"\r\n                style={{ height: \"60px\" }}\r\n              >\r\n                <Layers size={16} className=\"mr-2\" />\r\n                {track.name}\r\n              </div>\r\n            ))}\r\n\r\n            {tracks.main.map((track) => (\r\n              <div\r\n                key={track.id}\r\n                className=\"h-15 flex items-center px-4 border-b border-gray-100 text-sm font-medium text-blue-700 bg-blue-50 flex-shrink-0\"\r\n                style={{ height: \"60px\" }}\r\n              >\r\n                <Video size={16} className=\"mr-2\" />\r\n                {track.name}\r\n              </div>\r\n            ))}\r\n\r\n            {tracks.audio.map((track) => (\r\n              <div\r\n                key={track.id}\r\n                className=\"h-15 flex items-center px-4 border-b border-gray-100 text-sm font-medium text-green-700 bg-green-50 flex-shrink-0\"\r\n                style={{ height: \"60px\" }}\r\n              >\r\n                <Music size={16} className=\"mr-2\" />\r\n                {track.name}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          ref={(el) => {\r\n            timelineRef.current = el;\r\n            timelineScrollRef.current = el;\r\n          }}\r\n          className=\"flex-1 relative overflow-auto bg-white\"\r\n          onScroll={handleTrackAreaScroll}\r\n          onDragOver={handleDragOver}\r\n          onDrop={handleDrop}\r\n          onDragLeave={handleDragLeave}\r\n          style={{\r\n            overflowX: \"auto\",\r\n            overflowY: \"auto\",\r\n            scrollbarWidth: \"thin\",\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              width: `${getTimelineWidth()}px`,\r\n              minHeight: \"100%\",\r\n              position: \"relative\",\r\n            }}\r\n            onClick={handleTimelineClick}\r\n            onDoubleClick={handleTimelineDoubleClick}\r\n          >\r\n            <div className=\"h-12 bg-gray-50 border-b border-gray-200 relative flex-shrink-0\">\r\n              {Array.from(\r\n                { length: Math.ceil((videoDuration * timelineZoom) / 5) + 1 },\r\n                (_, i) => {\r\n                  const timeValue = (i * 5) / timelineZoom;\r\n                  const pixelsPerSecond = getPixelsPerSecond();\r\n                  return (\r\n                    <div\r\n                      key={i}\r\n                      className=\"absolute top-0 h-full border-l border-gray-300\"\r\n                      style={{ left: `${timeValue * pixelsPerSecond}px` }}\r\n                    >\r\n                      <span className=\"text-xs text-gray-600 ml-2 mt-2 inline-block font-medium\">\r\n                        {formatTime(timeValue)}\r\n                      </span>\r\n                    </div>\r\n                  );\r\n                }\r\n              )}\r\n\r\n              {timelineZoom > 2 &&\r\n                Array.from(\r\n                  { length: Math.ceil(videoDuration * timelineZoom) + 1 },\r\n                  (_, i) => {\r\n                    const timeValue = i / timelineZoom;\r\n                    const pixelsPerSecond = getPixelsPerSecond();\r\n                    return (\r\n                      <div\r\n                        key={`sub-${i}`}\r\n                        className=\"absolute top-8 w-0 h-4 border-l border-gray-200\"\r\n                        style={{ left: `${timeValue * pixelsPerSecond}px` }}\r\n                      />\r\n                    );\r\n                  }\r\n                )}\r\n\r\n              <div\r\n                className=\"absolute top-0 w-0.5 h-full bg-red-500 z-20 shadow-sm\"\r\n                style={{\r\n                  left: `${currentTime * getPixelsPerSecond()}px`,\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div\r\n              className=\"relative flex-1\"\r\n              style={{\r\n                height: `${\r\n                  (tracks.overlays.length +\r\n                    tracks.main.length +\r\n                    tracks.audio.length) *\r\n                  60\r\n                }px`,\r\n                minHeight: \"100%\",\r\n              }}\r\n            >\r\n              {timelineItems.map((item) => (\r\n                <div\r\n                  key={item.id}\r\n                  className={`absolute h-10 rounded-lg border-2 cursor-grab active:cursor-grabbing transition-all shadow-sm hover:shadow-md group ${getTrackColor(\r\n                    item.trackType\r\n                  )} ${\r\n                    selectedTimelineItem?.id === item.id\r\n                      ? \"ring-2 ring-blue-300\"\r\n                      : \"\"\r\n                  } ${\r\n                    draggedTimelineItem?.id === item.id ? \"opacity-50 z-30\" : \"\"\r\n                  } ${\r\n                    copiedItem?.id === item.id\r\n                      ? \"ring-2 ring-green-300 ring-dashed\"\r\n                      : \"\"\r\n                  }`}\r\n                  style={getTimelineItemStyle(item)}\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    setSelectedTimelineItem(item);\r\n                  }}\r\n                >\r\n                  <div\r\n                    className=\"absolute left-0 top-0 w-3 h-full cursor-ew-resize opacity-0 group-hover:opacity-100 bg-white/50 rounded-l-lg z-10 flex items-center justify-center\"\r\n                    onMouseDown={(e) => handleResizeStart(e, item, \"left\")}\r\n                    title=\"Trim start - Drag to adjust start time\"\r\n                    style={{\r\n                      background:\r\n                        \"linear-gradient(to right, rgba(255,255,255,0.8), transparent)\",\r\n                    }}\r\n                  >\r\n                    <div className=\"w-0.5 h-6 bg-white rounded-full opacity-80\"></div>\r\n                  </div>\r\n\r\n                  <div\r\n                    draggable=\"true\"\r\n                    onDragStart={(e) => handleTimelineItemDragStart(e, item)}\r\n                    onDragEnd={handleTimelineItemDragEnd}\r\n                    className=\"p-2 text-white text-xs truncate font-medium flex items-center h-full mx-3 cursor-grab active:cursor-grabbing\"\r\n                    title=\"Drag to move item on timeline - Ripple mode: pushes other blocks\"\r\n                  >\r\n                    {item.name}\r\n                    {copiedItem?.id === item.id && (\r\n                      <span className=\"ml-2 text-green-200\">📋</span>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div\r\n                    className=\"absolute right-0 top-0 w-3 h-full cursor-ew-resize opacity-0 group-hover:opacity-100 bg-white/50 rounded-r-lg z-10 flex items-center justify-center\"\r\n                    onMouseDown={(e) => handleResizeStart(e, item, \"right\")}\r\n                    title=\"Trim end - Drag to adjust duration\"\r\n                    style={{\r\n                      background:\r\n                        \"linear-gradient(to left, rgba(255,255,255,0.8), transparent)\",\r\n                    }}\r\n                  >\r\n                    <div className=\"w-0.5 h-6 bg-white rounded-full opacity-80\"></div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n\r\n              {dropPreview && (\r\n                <div\r\n                  className={`absolute h-10 rounded-lg border-2 transition-all ${\r\n                    dropPreview.isValid\r\n                      ? dropPreview.isExact\r\n                        ? `${getTrackColor(\r\n                            dropPreview.trackType\r\n                          )} bg-opacity-60 border-solid`\r\n                        : `${getTrackColor(\r\n                            dropPreview.trackType\r\n                          )} bg-opacity-40 border-dashed animate-pulse`\r\n                      : \"bg-red-300 border-red-500 border-dashed\"\r\n                  }`}\r\n                  style={getDropPreviewStyle()}\r\n                >\r\n                  {dropPreview.isValid && !dropPreview.isExact && (\r\n                    <div className=\"flex items-center justify-center h-full text-white text-xs font-bold\">\r\n                      🧲\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Демонстрационное приложение\r\nconst VideoTimelineDemo = () => {\r\n  // Состояния для timeline\r\n  const [timelineItems, setTimelineItems] = useState([]);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [videoDuration, setVideoDuration] = useState(60);\r\n  const [selectedTimelineItem, setSelectedTimelineItem] = useState(null);\r\n  const [timelineZoom, setTimelineZoom] = useState(1);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  \r\n  // Состояния для drag & drop\r\n  const [draggedItem, setDraggedItem] = useState(null);\r\n  const [draggedTimelineItem, setDraggedTimelineItem] = useState(null);\r\n  const [dropPreview, setDropPreview] = useState(null);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [isTimelineDragging, setIsTimelineDragging] = useState(false);\r\n  const [isResizing, setIsResizing] = useState(false);\r\n  const [copiedItem, setCopiedItem] = useState(null);\r\n\r\n  // Дорожки\r\n  const [tracks, setTracks] = useState({\r\n    overlays: [\r\n      { id: \"overlay-1\", name: \"Overlay 1\", type: \"overlay\" },\r\n    ],\r\n    main: [\r\n      { id: \"main-1\", name: \"Main Video\", type: \"main\" },\r\n    ],\r\n    audio: [\r\n      { id: \"audio-1\", name: \"Audio 1\", type: \"audio\" },\r\n    ],\r\n  });\r\n\r\n  // Тестовые медиа файлы\r\n  const [mediaLibrary] = useState([\r\n    {\r\n      id: \"video-1\",\r\n      name: \"Sample Video 1\",\r\n      type: \"video\",\r\n      duration: 15,\r\n      src: \"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4\",\r\n      thumbnail: \"https://via.placeholder.com/200x112/3b82f6/ffffff?text=Video+1\",\r\n    },\r\n    {\r\n      id: \"video-2\", \r\n      name: \"Sample Video 2\",\r\n      type: \"video\",\r\n      duration: 12,\r\n      src: \"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4\",\r\n      thumbnail: \"https://via.placeholder.com/200x112/3b82f6/ffffff?text=Video+2\",\r\n    },\r\n    {\r\n      id: \"audio-1\",\r\n      name: \"Background Music\",\r\n      type: \"audio\",\r\n      duration: 30,\r\n      src: \"https://www.soundjay.com/misc/sounds/bell-ringing-05.wav\",\r\n      thumbnail: \"https://via.placeholder.com/200x112/10b981/ffffff?text=Audio\",\r\n    },\r\n    {\r\n      id: \"image-1\",\r\n      name: \"Logo Overlay\",\r\n      type: \"image\",\r\n      duration: 5,\r\n      src: \"https://via.placeholder.com/400x300/8b5cf6/ffffff?text=Logo\",\r\n      thumbnail: \"https://via.placeholder.com/200x112/8b5cf6/ffffff?text=Image\",\r\n    },\r\n    {\r\n      id: \"text-1\",\r\n      name: \"Title Text\",\r\n      type: \"text\",\r\n      duration: 3,\r\n      text: \"Welcome to Our Video\",\r\n      fontSize: \"32px\",\r\n      color: \"#ffffff\",\r\n      thumbnail: \"https://via.placeholder.com/200x112/f59e0b/ffffff?text=Text\",\r\n    },\r\n  ]);\r\n\r\n  // Автообновление времени при воспроизведении\r\n  useEffect(() => {\r\n    let interval = null;\r\n    if (isPlaying) {\r\n      interval = setInterval(() => {\r\n        setCurrentTime(prevTime => {\r\n          const newTime = prevTime + 0.1;\r\n          if (newTime >= videoDuration) {\r\n            setIsPlaying(false);\r\n            return videoDuration;\r\n          }\r\n          return newTime;\r\n        });\r\n      }, 100);\r\n    }\r\n    return () => {\r\n      if (interval) clearInterval(interval);\r\n    };\r\n  }, [isPlaying, videoDuration]);\r\n\r\n  // Утилитарные функции\r\n  const formatTime = (seconds) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = Math.floor(seconds % 60);\r\n    const frames = Math.floor((seconds % 1) * 30);\r\n    return `${mins.toString().padStart(2, \"0\")}:${secs\r\n      .toString()\r\n      .padStart(2, \"0\")}:${frames.toString().padStart(2, \"0\")}`;\r\n  };\r\n\r\n  const seekTo = (time) => {\r\n    setCurrentTime(Math.max(0, Math.min(videoDuration, time)));\r\n  };\r\n\r\n  // Функции timeline\r\n  const addToTimeline = (item, startTime, trackId) => {\r\n    const trackType = tracks.overlays.find(t => t.id === trackId) ? 'overlay' :\r\n                     tracks.main.find(t => t.id === trackId) ? 'main' : 'audio';\r\n    \r\n    const newTimelineItem = {\r\n      ...item,\r\n      id: `timeline-${Date.now()}`,\r\n      originalId: item.id,\r\n      startTime,\r\n      trackId,\r\n      trackType,\r\n    };\r\n\r\n    setTimelineItems(prev => [...prev, newTimelineItem]);\r\n    \r\n    // Расширяем duration если нужно\r\n    const newEndTime = startTime + item.duration;\r\n    if (newEndTime > videoDuration) {\r\n      setVideoDuration(newEndTime + 10);\r\n    }\r\n  };\r\n\r\n  const insertWithRipple = (trackId, time, duration, excludeId = null) => {\r\n    return {\r\n      time,\r\n      shouldRipple: false,\r\n      affectedItems: [],\r\n    };\r\n  };\r\n\r\n  const applyRippleEffect = (affectedItems, shiftDuration) => {\r\n    // Логика ripple effect\r\n  };\r\n\r\n  const removeFromTimeline = (itemId) => {\r\n    setTimelineItems(prev => prev.filter(item => item.id !== itemId));\r\n  };\r\n\r\n  const splitTimelineItem = () => {\r\n    if (!selectedTimelineItem) return;\r\n    \r\n    const item = selectedTimelineItem;\r\n    const splitTime = currentTime - item.startTime;\r\n    \r\n    if (splitTime <= 0 || splitTime >= item.duration) return;\r\n    \r\n    const firstPart = {\r\n      ...item,\r\n      id: `timeline-${Date.now()}-1`,\r\n      duration: splitTime,\r\n    };\r\n    \r\n    const secondPart = {\r\n      ...item,\r\n      id: `timeline-${Date.now()}-2`,\r\n      startTime: item.startTime + splitTime,\r\n      duration: item.duration - splitTime,\r\n    };\r\n    \r\n    setTimelineItems(prev => \r\n      prev.map(timelineItem => \r\n        timelineItem.id === item.id ? firstPart : timelineItem\r\n      ).concat(secondPart)\r\n    );\r\n    \r\n    setSelectedTimelineItem(firstPart);\r\n  };\r\n\r\n  const copyTimelineItem = () => {\r\n    if (selectedTimelineItem) {\r\n      setCopiedItem(selectedTimelineItem);\r\n    }\r\n  };\r\n\r\n  const pasteTimelineItem = () => {\r\n    if (!copiedItem) return;\r\n    \r\n    const newItem = {\r\n      ...copiedItem,\r\n      id: `timeline-${Date.now()}`,\r\n      startTime: currentTime,\r\n    };\r\n    \r\n    setTimelineItems(prev => [...prev, newItem]);\r\n  };\r\n\r\n  const deleteSelectedItem = () => {\r\n    if (selectedTimelineItem) {\r\n      removeFromTimeline(selectedTimelineItem.id);\r\n      setSelectedTimelineItem(null);\r\n    }\r\n  };\r\n\r\n  // Обработчики drag & drop для медиа библиотеки\r\n  const handleMediaDragStart = (e, item) => {\r\n    setDraggedItem(item);\r\n    setIsDragging(true);\r\n    e.dataTransfer.effectAllowed = \"copy\";\r\n  };\r\n\r\n  const handleMediaDragEnd = () => {\r\n    setDraggedItem(null);\r\n    setIsDragging(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100 p-6\">\r\n      <div className=\"max-w-7xl mx-auto space-y-6\">\r\n        <div className=\"text-center\">\r\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\r\n            Video Timeline System\r\n          </h1>\r\n          <p className=\"text-gray-600\">\r\n            Перетащите видео в timeline и нажмите Play для воспроизведения\r\n          </p>\r\n        </div>\r\n\r\n        {/* Video Player */}\r\n        <VideoPlayer\r\n          timelineItems={timelineItems}\r\n          currentTime={currentTime}\r\n          videoDuration={videoDuration}\r\n          isPlaying={isPlaying}\r\n          setIsPlaying={setIsPlaying}\r\n          seekTo={seekTo}\r\n          formatTime={formatTime}\r\n        />\r\n\r\n        {/* Media Library */}\r\n        <div className=\"bg-white rounded-2xl shadow-sm border-2 border-gray-200 p-4\">\r\n          <h3 className=\"text-lg font-semibold text-gray-800 mb-4 flex items-center\">\r\n            <Film size={20} className=\"mr-2\" />\r\n            Media Library\r\n          </h3>\r\n          <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4\">\r\n            {mediaLibrary.map(item => (\r\n              <div\r\n                key={item.id}\r\n                className={`bg-gray-50 rounded-xl p-3 cursor-grab active:cursor-grabbing border-2 transition-all hover:shadow-md ${\r\n                  draggedItem?.id === item.id ? 'border-blue-400 bg-blue-50' : 'border-gray-200'\r\n                }`}\r\n                draggable=\"true\"\r\n                onDragStart={(e) => handleMediaDragStart(e, item)}\r\n                onDragEnd={handleMediaDragEnd}\r\n              >\r\n                <div className=\"aspect-video bg-gray-200 rounded-lg mb-2 overflow-hidden\">\r\n                  <img \r\n                    src={item.thumbnail} \r\n                    alt={item.name}\r\n                    className=\"w-full h-full object-cover\"\r\n                  />\r\n                </div>\r\n                <div className=\"text-sm\">\r\n                  <div className=\"font-medium text-gray-900 truncate\">\r\n                    {item.name}\r\n                  </div>\r\n                  <div className=\"text-gray-500 text-xs mt-1 flex items-center justify-between\">\r\n                    <span className=\"capitalize\">{item.type}</span>\r\n                    <span>{formatTime(item.duration)}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Timeline */}\r\n        <Timeline\r\n          timelineItems={timelineItems}\r\n          setTimelineItems={setTimelineItems}\r\n          currentTime={currentTime}\r\n          videoDuration={videoDuration}\r\n          setVideoDuration={setVideoDuration}\r\n          selectedTimelineItem={selectedTimelineItem}\r\n          setSelectedTimelineItem={setSelectedTimelineItem}\r\n          timelineZoom={timelineZoom}\r\n          setTimelineZoom={setTimelineZoom}\r\n          tracks={tracks}\r\n          setTracks={setTracks}\r\n          draggedItem={draggedItem}\r\n          draggedTimelineItem={draggedTimelineItem}\r\n          setDraggedTimelineItem={setDraggedTimelineItem}\r\n          dropPreview={dropPreview}\r\n          setDropPreview={setDropPreview}\r\n          isDragging={isDragging}\r\n          isTimelineDragging={isTimelineDragging}\r\n          setIsTimelineDragging={setIsTimelineDragging}\r\n          isResizing={isResizing}\r\n          setIsResizing={setIsResizing}\r\n          copiedItem={copiedItem}\r\n          formatTime={formatTime}\r\n          seekTo={seekTo}\r\n          splitTimelineItem={splitTimelineItem}\r\n          copyTimelineItem={copyTimelineItem}\r\n          pasteTimelineItem={pasteTimelineItem}\r\n          deleteSelectedItem={deleteSelectedItem}\r\n          addToTimeline={addToTimeline}\r\n          insertWithRipple={insertWithRipple}\r\n          applyRippleEffect={applyRippleEffect}\r\n          removeFromTimeline={removeFromTimeline}\r\n        />\r\n\r\n        {/* Инструкции */}\r\n        <div className=\"bg-blue-50 border border-blue-200 rounded-2xl p-4\">\r\n          <h4 className=\"font-semibold text-blue-900 mb-2\">Как использовать:</h4>\r\n          <ul className=\"text-blue-800 text-sm space-y-1\">\r\n            <li>• Перетащите видео из Media Library на timeline</li>\r\n            <li>• Нажмите Play в видеоплеере для воспроизведения</li>\r\n            <li>• Кликните по timeline для перемещения по времени</li>\r\n            <li>• Overlay элементы отображаются поверх основного видео</li>\r\n            <li>• Audio дорожки воспроизводятся вместе с видео</li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoTimelineDemo;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}