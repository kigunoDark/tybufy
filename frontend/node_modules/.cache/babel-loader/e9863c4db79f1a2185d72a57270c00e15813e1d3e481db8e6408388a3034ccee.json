{"ast":null,"code":"var _jsxFileName = \"C:\\\\Scriptify\\\\ai-content-studio\\\\frontend\\\\src\\\\components\\\\Timeline.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useRef, useEffect, useCallback } from \"react\";\nimport { Play, Pause, Square, Volume2, VolumeX, SkipBack, SkipForward, Maximize2, Settings } from \"lucide-react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const VideoPlayer = ({\n  timelineItems,\n  currentTime,\n  videoDuration,\n  isPlaying,\n  setIsPlaying,\n  setCurrentTime,\n  formatTime,\n  seekTo\n}) => {\n  _s();\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const audioRefs = useRef(new Map()); // Для хранения аудио элементов\n  const animationFrameRef = useRef(null);\n  const [volume, setVolume] = useState(1);\n  const [isMuted, setIsMuted] = useState(false);\n  const [isFullscreen, setIsFullscreen] = useState(false);\n\n  // Получаем активные элементы на текущем времени\n  const getActiveItems = useCallback(() => {\n    return timelineItems.filter(item => {\n      const startTime = item.startTime;\n      const endTime = item.startTime + item.duration;\n      return currentTime >= startTime && currentTime < endTime;\n    });\n  }, [timelineItems, currentTime]);\n\n  // Отрисовка кадра\n  const renderFrame = useCallback(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n    const activeItems = getActiveItems();\n\n    // Очищаем canvas\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    // Рисуем черный фон\n    ctx.fillStyle = '#000000';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n    // Сортируем элементы по слоям (main сначала, потом overlay)\n    const sortedItems = activeItems.sort((a, b) => {\n      const layerOrder = {\n        main: 0,\n        overlay: 1,\n        audio: 2\n      };\n      return layerOrder[a.trackType] - layerOrder[b.trackType];\n    });\n    sortedItems.forEach(item => {\n      if (item.type === 'video') {\n        renderVideo(ctx, item, canvas);\n      } else if (item.type === 'image') {\n        renderImage(ctx, item, canvas);\n      }\n      // Аудио обрабатывается отдельно\n    });\n  }, [getActiveItems]);\n\n  // Отрисовка видео\n  const renderVideo = (ctx, item, canvas) => {\n    const video = videoRef.current;\n    if (!video || video.readyState < 2) return;\n    try {\n      // Вычисляем время внутри видео\n      const relativeTime = currentTime - item.startTime;\n      video.currentTime = relativeTime;\n\n      // Рисуем видео на весь canvas\n      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n    } catch (error) {\n      console.error('Ошибка отрисовки видео:', error);\n    }\n  };\n\n  // Отрисовка изображения\n  const renderImage = (ctx, item, canvas) => {\n    const img = new Image();\n    img.onload = () => {\n      try {\n        // Вычисляем размеры для сохранения пропорций\n        const imgAspect = img.width / img.height;\n        const canvasAspect = canvas.width / canvas.height;\n        let drawWidth, drawHeight, drawX, drawY;\n        if (imgAspect > canvasAspect) {\n          // Изображение шире canvas\n          drawWidth = canvas.width;\n          drawHeight = canvas.width / imgAspect;\n          drawX = 0;\n          drawY = (canvas.height - drawHeight) / 2;\n        } else {\n          // Изображение выше canvas\n          drawHeight = canvas.height;\n          drawWidth = canvas.height * imgAspect;\n          drawY = 0;\n          drawX = (canvas.width - drawWidth) / 2;\n        }\n        ctx.drawImage(img, drawX, drawY, drawWidth, drawHeight);\n      } catch (error) {\n        console.error('Ошибка отрисовки изображения:', error);\n      }\n    };\n    img.src = item.url || item.src;\n  };\n\n  // Управление аудио\n  const manageAudio = useCallback(() => {\n    const activeItems = getActiveItems();\n    const audioItems = activeItems.filter(item => item.type === 'audio' || item.type === 'music');\n\n    // Останавливаем все аудио, которые не активны\n    audioRefs.current.forEach((audio, itemId) => {\n      const isActive = audioItems.some(item => item.id === itemId);\n      if (!isActive) {\n        audio.pause();\n        audio.currentTime = 0;\n      }\n    });\n\n    // Управляем активными аудио\n    audioItems.forEach(item => {\n      let audio = audioRefs.current.get(item.id);\n      if (!audio) {\n        // Создаем новый аудио элемент\n        audio = new Audio(item.url || item.src);\n        audio.volume = isMuted ? 0 : volume;\n        audioRefs.current.set(item.id, audio);\n      }\n      const relativeTime = currentTime - item.startTime;\n      if (isPlaying) {\n        if (Math.abs(audio.currentTime - relativeTime) > 0.1) {\n          audio.currentTime = relativeTime;\n        }\n        if (audio.paused) {\n          audio.play().catch(console.error);\n        }\n      } else {\n        audio.pause();\n      }\n      audio.volume = isMuted ? 0 : volume;\n    });\n  }, [getActiveItems, currentTime, isPlaying, volume, isMuted]);\n\n  // Анимационная петля для обновления времени при воспроизведении\n  const updateTime = useCallback(() => {\n    if (isPlaying && currentTime < videoDuration) {\n      setCurrentTime(prev => Math.min(prev + 1 / 60, videoDuration)); // 60 FPS\n      animationFrameRef.current = requestAnimationFrame(updateTime);\n    }\n  }, [isPlaying, currentTime, videoDuration, setCurrentTime]);\n\n  // Управление воспроизведением\n  const togglePlayPause = () => {\n    setIsPlaying(!isPlaying);\n  };\n  const stopPlayback = () => {\n    setIsPlaying(false);\n    setCurrentTime(0);\n  };\n  const skipBackward = () => {\n    seekTo(Math.max(0, currentTime - 10));\n  };\n  const skipForward = () => {\n    seekTo(Math.min(videoDuration, currentTime + 10));\n  };\n  const toggleMute = () => {\n    setIsMuted(!isMuted);\n  };\n  const handleVolumeChange = e => {\n    const newVolume = parseFloat(e.target.value);\n    setVolume(newVolume);\n    setIsMuted(newVolume === 0);\n  };\n  const toggleFullscreen = () => {\n    if (!document.fullscreenElement) {\n      var _canvasRef$current;\n      (_canvasRef$current = canvasRef.current) === null || _canvasRef$current === void 0 ? void 0 : _canvasRef$current.requestFullscreen();\n      setIsFullscreen(true);\n    } else {\n      document.exitFullscreen();\n      setIsFullscreen(false);\n    }\n  };\n\n  // Эффекты\n  useEffect(() => {\n    renderFrame();\n  }, [renderFrame]);\n  useEffect(() => {\n    manageAudio();\n  }, [manageAudio]);\n  useEffect(() => {\n    if (isPlaying) {\n      animationFrameRef.current = requestAnimationFrame(updateTime);\n    } else {\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n    }\n    return () => {\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n    };\n  }, [isPlaying, updateTime]);\n  useEffect(() => {\n    const handleFullscreenChange = () => {\n      setIsFullscreen(!!document.fullscreenElement);\n    };\n    document.addEventListener('fullscreenchange', handleFullscreenChange);\n    return () => {\n      document.removeEventListener('fullscreenchange', handleFullscreenChange);\n    };\n  }, []);\n\n  // Cleanup при размонтировании\n  useEffect(() => {\n    return () => {\n      // Останавливаем все аудио\n      audioRefs.current.forEach(audio => {\n        audio.pause();\n        audio.currentTime = 0;\n      });\n      audioRefs.current.clear();\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n    };\n  }, []);\n  const activeItems = getActiveItems();\n  const hasVideoContent = activeItems.some(item => item.type === 'video' || item.type === 'image');\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-2xl shadow-sm border-2 border-gray-200 overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-50 p-4 border-b border-gray-200\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-gray-800 font-semibold flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(Play, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Video Preview\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 13\n          }, this), activeItems.length > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-blue-600 text-sm\",\n            children: [\"- \\u0410\\u043A\\u0442\\u0438\\u0432\\u043D\\u043E: \", activeItems.length, \" \\u044D\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442(\\u043E\\u0432)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm text-gray-600\",\n            children: [formatTime(currentTime), \" / \", formatTime(videoDuration)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: toggleFullscreen,\n            className: \"p-2 text-gray-600 hover:text-blue-600 transition-colors\",\n            title: \"\\u041F\\u043E\\u043B\\u043D\\u043E\\u044D\\u043A\\u0440\\u0430\\u043D\\u043D\\u044B\\u0439 \\u0440\\u0435\\u0436\\u0438\\u043C\",\n            children: /*#__PURE__*/_jsxDEV(Maximize2, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative bg-black\",\n      style: {\n        aspectRatio: '16/9'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        className: \"hidden\",\n        muted: true,\n        playsInline: true,\n        preload: \"metadata\",\n        onLoadedMetadata: () => {\n          if (videoRef.current) {\n            console.log('Видео загружено:', videoRef.current.duration);\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        className: \"w-full h-full object-contain\",\n        width: 1920,\n        height: 1080\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this), !hasVideoContent && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute inset-0 flex items-center justify-center text-gray-400\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(Play, {\n            size: 48,\n            className: \"mx-auto mb-4 opacity-50\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-lg font-medium\",\n            children: \"\\u041F\\u0435\\u0440\\u0435\\u0442\\u0430\\u0449\\u0438\\u0442\\u0435 \\u0432\\u0438\\u0434\\u0435\\u043E \\u0438\\u043B\\u0438 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F \\u043D\\u0430 \\u0442\\u0430\\u0439\\u043C\\u043B\\u0430\\u0439\\u043D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm\",\n            children: \"\\u0434\\u043B\\u044F \\u043D\\u0430\\u0447\\u0430\\u043B\\u0430 \\u0440\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 11\n      }, this), isPlaying && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute top-4 right-4 bg-red-500 text-white px-3 py-1 rounded-full text-sm font-medium flex items-center space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-2 h-2 bg-white rounded-full animate-pulse\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u0412 \\u042D\\u0424\\u0418\\u0420\\u0415\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-50 p-4 border-t border-gray-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: skipBackward,\n            className: \"p-2 text-gray-600 hover:text-blue-600 transition-colors\",\n            title: \"\\u041D\\u0430\\u0437\\u0430\\u0434 \\u043D\\u0430 10 \\u0441\\u0435\\u043A\",\n            children: /*#__PURE__*/_jsxDEV(SkipBack, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: togglePlayPause,\n            className: `p-3 rounded-full transition-colors ${isPlaying ? 'bg-red-500 text-white hover:bg-red-600' : 'bg-blue-500 text-white hover:bg-blue-600'}`,\n            title: isPlaying ? 'Пауза' : 'Воспроизвести',\n            children: isPlaying ? /*#__PURE__*/_jsxDEV(Pause, {\n              size: 24\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 28\n            }, this) : /*#__PURE__*/_jsxDEV(Play, {\n              size: 24\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 50\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: stopPlayback,\n            className: \"p-2 text-gray-600 hover:text-red-600 transition-colors\",\n            title: \"\\u041E\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C\",\n            children: /*#__PURE__*/_jsxDEV(Square, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: skipForward,\n            className: \"p-2 text-gray-600 hover:text-blue-600 transition-colors\",\n            title: \"\\u0412\\u043F\\u0435\\u0440\\u0435\\u0434 \\u043D\\u0430 10 \\u0441\\u0435\\u043A\",\n            children: /*#__PURE__*/_jsxDEV(SkipForward, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: toggleMute,\n            className: \"p-2 text-gray-600 hover:text-blue-600 transition-colors\",\n            title: isMuted ? 'Включить звук' : 'Выключить звук',\n            children: isMuted ? /*#__PURE__*/_jsxDEV(VolumeX, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 26\n            }, this) : /*#__PURE__*/_jsxDEV(Volume2, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 50\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"range\",\n            min: \"0\",\n            max: \"1\",\n            step: \"0.1\",\n            value: isMuted ? 0 : volume,\n            onChange: handleVolumeChange,\n            className: \"w-20 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer\",\n            title: \"\\u0413\\u0440\\u043E\\u043C\\u043A\\u043E\\u0441\\u0442\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm text-gray-600 min-w-8\",\n            children: [Math.round((isMuted ? 0 : volume) * 100), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative w-full h-2 bg-gray-200 rounded-full overflow-hidden\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute left-0 top-0 h-full bg-blue-500 transition-all duration-150\",\n            style: {\n              width: `${currentTime / videoDuration * 100}%`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"range\",\n            min: \"0\",\n            max: videoDuration,\n            step: \"0.1\",\n            value: currentTime,\n            onChange: e => seekTo(parseFloat(e.target.value)),\n            className: \"absolute inset-0 w-full h-full opacity-0 cursor-pointer\",\n            title: \"\\u041F\\u043E\\u0437\\u0438\\u0446\\u0438\\u044F \\u0432\\u043E\\u0441\\u043F\\u0440\\u043E\\u0438\\u0437\\u0432\\u0435\\u0434\\u0435\\u043D\\u0438\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 9\n      }, this), activeItems.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-3 flex flex-wrap gap-2\",\n        children: activeItems.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `px-2 py-1 rounded-full text-xs font-medium ${item.type === 'video' ? 'bg-blue-100 text-blue-700' : item.type === 'audio' || item.type === 'music' ? 'bg-green-100 text-green-700' : 'bg-purple-100 text-purple-700'}`,\n          children: item.name\n        }, item.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 269,\n    columnNumber: 5\n  }, this);\n};\n_s(VideoPlayer, \"efpuOCpih0udLMMYxXNqM9DubwQ=\");\n_c = VideoPlayer;\nvar _c;\n$RefreshReg$(_c, \"VideoPlayer\");","map":{"version":3,"names":["useState","useRef","useEffect","useCallback","Play","Pause","Square","Volume2","VolumeX","SkipBack","SkipForward","Maximize2","Settings","jsxDEV","_jsxDEV","VideoPlayer","timelineItems","currentTime","videoDuration","isPlaying","setIsPlaying","setCurrentTime","formatTime","seekTo","_s","videoRef","canvasRef","audioRefs","Map","animationFrameRef","volume","setVolume","isMuted","setIsMuted","isFullscreen","setIsFullscreen","getActiveItems","filter","item","startTime","endTime","duration","renderFrame","canvas","current","ctx","getContext","activeItems","clearRect","width","height","fillStyle","fillRect","sortedItems","sort","a","b","layerOrder","main","overlay","audio","trackType","forEach","type","renderVideo","renderImage","video","readyState","relativeTime","drawImage","error","console","img","Image","onload","imgAspect","canvasAspect","drawWidth","drawHeight","drawX","drawY","src","url","manageAudio","audioItems","itemId","isActive","some","id","pause","get","Audio","set","Math","abs","paused","play","catch","updateTime","prev","min","requestAnimationFrame","togglePlayPause","stopPlayback","skipBackward","max","skipForward","toggleMute","handleVolumeChange","e","newVolume","parseFloat","target","value","toggleFullscreen","document","fullscreenElement","_canvasRef$current","requestFullscreen","exitFullscreen","cancelAnimationFrame","handleFullscreenChange","addEventListener","removeEventListener","clear","hasVideoContent","className","children","size","fileName","_jsxFileName","lineNumber","columnNumber","length","onClick","title","style","aspectRatio","ref","muted","playsInline","preload","onLoadedMetadata","log","step","onChange","round","map","name","_c","$RefreshReg$"],"sources":["C:/Scriptify/ai-content-studio/frontend/src/components/Timeline.jsx"],"sourcesContent":["import { useState, useRef, useEffect, useCallback } from \"react\";\r\nimport {\r\n  Play,\r\n  Pause,\r\n  Square,\r\n  Volume2,\r\n  VolumeX,\r\n  SkipBack,\r\n  SkipForward,\r\n  Maximize2,\r\n  Settings,\r\n} from \"lucide-react\";\r\n\r\nexport const VideoPlayer = ({\r\n  timelineItems,\r\n  currentTime,\r\n  videoDuration,\r\n  isPlaying,\r\n  setIsPlaying,\r\n  setCurrentTime,\r\n  formatTime,\r\n  seekTo,\r\n}) => {\r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n  const audioRefs = useRef(new Map()); // Для хранения аудио элементов\r\n  const animationFrameRef = useRef(null);\r\n  \r\n  const [volume, setVolume] = useState(1);\r\n  const [isMuted, setIsMuted] = useState(false);\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n  \r\n  // Получаем активные элементы на текущем времени\r\n  const getActiveItems = useCallback(() => {\r\n    return timelineItems.filter(item => {\r\n      const startTime = item.startTime;\r\n      const endTime = item.startTime + item.duration;\r\n      return currentTime >= startTime && currentTime < endTime;\r\n    });\r\n  }, [timelineItems, currentTime]);\r\n\r\n  // Отрисовка кадра\r\n  const renderFrame = useCallback(() => {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n\r\n    const ctx = canvas.getContext('2d');\r\n    const activeItems = getActiveItems();\r\n    \r\n    // Очищаем canvas\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    \r\n    // Рисуем черный фон\r\n    ctx.fillStyle = '#000000';\r\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n    \r\n    // Сортируем элементы по слоям (main сначала, потом overlay)\r\n    const sortedItems = activeItems.sort((a, b) => {\r\n      const layerOrder = { main: 0, overlay: 1, audio: 2 };\r\n      return layerOrder[a.trackType] - layerOrder[b.trackType];\r\n    });\r\n    \r\n    sortedItems.forEach(item => {\r\n      if (item.type === 'video') {\r\n        renderVideo(ctx, item, canvas);\r\n      } else if (item.type === 'image') {\r\n        renderImage(ctx, item, canvas);\r\n      }\r\n      // Аудио обрабатывается отдельно\r\n    });\r\n  }, [getActiveItems]);\r\n\r\n  // Отрисовка видео\r\n  const renderVideo = (ctx, item, canvas) => {\r\n    const video = videoRef.current;\r\n    if (!video || video.readyState < 2) return;\r\n    \r\n    try {\r\n      // Вычисляем время внутри видео\r\n      const relativeTime = currentTime - item.startTime;\r\n      video.currentTime = relativeTime;\r\n      \r\n      // Рисуем видео на весь canvas\r\n      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n    } catch (error) {\r\n      console.error('Ошибка отрисовки видео:', error);\r\n    }\r\n  };\r\n\r\n  // Отрисовка изображения\r\n  const renderImage = (ctx, item, canvas) => {\r\n    const img = new Image();\r\n    img.onload = () => {\r\n      try {\r\n        // Вычисляем размеры для сохранения пропорций\r\n        const imgAspect = img.width / img.height;\r\n        const canvasAspect = canvas.width / canvas.height;\r\n        \r\n        let drawWidth, drawHeight, drawX, drawY;\r\n        \r\n        if (imgAspect > canvasAspect) {\r\n          // Изображение шире canvas\r\n          drawWidth = canvas.width;\r\n          drawHeight = canvas.width / imgAspect;\r\n          drawX = 0;\r\n          drawY = (canvas.height - drawHeight) / 2;\r\n        } else {\r\n          // Изображение выше canvas\r\n          drawHeight = canvas.height;\r\n          drawWidth = canvas.height * imgAspect;\r\n          drawY = 0;\r\n          drawX = (canvas.width - drawWidth) / 2;\r\n        }\r\n        \r\n        ctx.drawImage(img, drawX, drawY, drawWidth, drawHeight);\r\n      } catch (error) {\r\n        console.error('Ошибка отрисовки изображения:', error);\r\n      }\r\n    };\r\n    img.src = item.url || item.src;\r\n  };\r\n\r\n  // Управление аудио\r\n  const manageAudio = useCallback(() => {\r\n    const activeItems = getActiveItems();\r\n    const audioItems = activeItems.filter(item => \r\n      item.type === 'audio' || item.type === 'music'\r\n    );\r\n    \r\n    // Останавливаем все аудио, которые не активны\r\n    audioRefs.current.forEach((audio, itemId) => {\r\n      const isActive = audioItems.some(item => item.id === itemId);\r\n      if (!isActive) {\r\n        audio.pause();\r\n        audio.currentTime = 0;\r\n      }\r\n    });\r\n    \r\n    // Управляем активными аудио\r\n    audioItems.forEach(item => {\r\n      let audio = audioRefs.current.get(item.id);\r\n      \r\n      if (!audio) {\r\n        // Создаем новый аудио элемент\r\n        audio = new Audio(item.url || item.src);\r\n        audio.volume = isMuted ? 0 : volume;\r\n        audioRefs.current.set(item.id, audio);\r\n      }\r\n      \r\n      const relativeTime = currentTime - item.startTime;\r\n      \r\n      if (isPlaying) {\r\n        if (Math.abs(audio.currentTime - relativeTime) > 0.1) {\r\n          audio.currentTime = relativeTime;\r\n        }\r\n        if (audio.paused) {\r\n          audio.play().catch(console.error);\r\n        }\r\n      } else {\r\n        audio.pause();\r\n      }\r\n      \r\n      audio.volume = isMuted ? 0 : volume;\r\n    });\r\n  }, [getActiveItems, currentTime, isPlaying, volume, isMuted]);\r\n\r\n  // Анимационная петля для обновления времени при воспроизведении\r\n  const updateTime = useCallback(() => {\r\n    if (isPlaying && currentTime < videoDuration) {\r\n      setCurrentTime(prev => Math.min(prev + 1/60, videoDuration)); // 60 FPS\r\n      animationFrameRef.current = requestAnimationFrame(updateTime);\r\n    }\r\n  }, [isPlaying, currentTime, videoDuration, setCurrentTime]);\r\n\r\n  // Управление воспроизведением\r\n  const togglePlayPause = () => {\r\n    setIsPlaying(!isPlaying);\r\n  };\r\n\r\n  const stopPlayback = () => {\r\n    setIsPlaying(false);\r\n    setCurrentTime(0);\r\n  };\r\n\r\n  const skipBackward = () => {\r\n    seekTo(Math.max(0, currentTime - 10));\r\n  };\r\n\r\n  const skipForward = () => {\r\n    seekTo(Math.min(videoDuration, currentTime + 10));\r\n  };\r\n\r\n  const toggleMute = () => {\r\n    setIsMuted(!isMuted);\r\n  };\r\n\r\n  const handleVolumeChange = (e) => {\r\n    const newVolume = parseFloat(e.target.value);\r\n    setVolume(newVolume);\r\n    setIsMuted(newVolume === 0);\r\n  };\r\n\r\n  const toggleFullscreen = () => {\r\n    if (!document.fullscreenElement) {\r\n      canvasRef.current?.requestFullscreen();\r\n      setIsFullscreen(true);\r\n    } else {\r\n      document.exitFullscreen();\r\n      setIsFullscreen(false);\r\n    }\r\n  };\r\n\r\n  // Эффекты\r\n  useEffect(() => {\r\n    renderFrame();\r\n  }, [renderFrame]);\r\n\r\n  useEffect(() => {\r\n    manageAudio();\r\n  }, [manageAudio]);\r\n\r\n  useEffect(() => {\r\n    if (isPlaying) {\r\n      animationFrameRef.current = requestAnimationFrame(updateTime);\r\n    } else {\r\n      if (animationFrameRef.current) {\r\n        cancelAnimationFrame(animationFrameRef.current);\r\n      }\r\n    }\r\n\r\n    return () => {\r\n      if (animationFrameRef.current) {\r\n        cancelAnimationFrame(animationFrameRef.current);\r\n      }\r\n    };\r\n  }, [isPlaying, updateTime]);\r\n\r\n  useEffect(() => {\r\n    const handleFullscreenChange = () => {\r\n      setIsFullscreen(!!document.fullscreenElement);\r\n    };\r\n\r\n    document.addEventListener('fullscreenchange', handleFullscreenChange);\r\n    return () => {\r\n      document.removeEventListener('fullscreenchange', handleFullscreenChange);\r\n    };\r\n  }, []);\r\n\r\n  // Cleanup при размонтировании\r\n  useEffect(() => {\r\n    return () => {\r\n      // Останавливаем все аудио\r\n      audioRefs.current.forEach(audio => {\r\n        audio.pause();\r\n        audio.currentTime = 0;\r\n      });\r\n      audioRefs.current.clear();\r\n      \r\n      if (animationFrameRef.current) {\r\n        cancelAnimationFrame(animationFrameRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const activeItems = getActiveItems();\r\n  const hasVideoContent = activeItems.some(item => item.type === 'video' || item.type === 'image');\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl shadow-sm border-2 border-gray-200 overflow-hidden\">\r\n      {/* Заголовок */}\r\n      <div className=\"bg-gray-50 p-4 border-b border-gray-200\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <h4 className=\"text-gray-800 font-semibold flex items-center space-x-2\">\r\n            <Play size={18} />\r\n            <span>Video Preview</span>\r\n            {activeItems.length > 0 && (\r\n              <span className=\"text-blue-600 text-sm\">\r\n                - Активно: {activeItems.length} элемент(ов)\r\n              </span>\r\n            )}\r\n          </h4>\r\n          \r\n          <div className=\"flex items-center space-x-2\">\r\n            <span className=\"text-sm text-gray-600\">\r\n              {formatTime(currentTime)} / {formatTime(videoDuration)}\r\n            </span>\r\n            <button\r\n              onClick={toggleFullscreen}\r\n              className=\"p-2 text-gray-600 hover:text-blue-600 transition-colors\"\r\n              title=\"Полноэкранный режим\"\r\n            >\r\n              <Maximize2 size={16} />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Область видео */}\r\n      <div className=\"relative bg-black\" style={{ aspectRatio: '16/9' }}>\r\n        {/* Скрытое видео для получения кадров */}\r\n        <video\r\n          ref={videoRef}\r\n          className=\"hidden\"\r\n          muted\r\n          playsInline\r\n          preload=\"metadata\"\r\n          onLoadedMetadata={() => {\r\n            if (videoRef.current) {\r\n              console.log('Видео загружено:', videoRef.current.duration);\r\n            }\r\n          }}\r\n        />\r\n        \r\n        {/* Canvas для отрисовки */}\r\n        <canvas\r\n          ref={canvasRef}\r\n          className=\"w-full h-full object-contain\"\r\n          width={1920}\r\n          height={1080}\r\n        />\r\n        \r\n        {/* Заглушка если нет контента */}\r\n        {!hasVideoContent && (\r\n          <div className=\"absolute inset-0 flex items-center justify-center text-gray-400\">\r\n            <div className=\"text-center\">\r\n              <Play size={48} className=\"mx-auto mb-4 opacity-50\" />\r\n              <p className=\"text-lg font-medium\">Перетащите видео или изображения на таймлайн</p>\r\n              <p className=\"text-sm\">для начала редактирования</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Индикатор воспроизведения */}\r\n        {isPlaying && (\r\n          <div className=\"absolute top-4 right-4 bg-red-500 text-white px-3 py-1 rounded-full text-sm font-medium flex items-center space-x-2\">\r\n            <div className=\"w-2 h-2 bg-white rounded-full animate-pulse\"></div>\r\n            <span>В ЭФИРЕ</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Панель управления */}\r\n      <div className=\"bg-gray-50 p-4 border-t border-gray-200\">\r\n        <div className=\"flex items-center justify-between\">\r\n          {/* Основные кнопки */}\r\n          <div className=\"flex items-center space-x-3\">\r\n            <button\r\n              onClick={skipBackward}\r\n              className=\"p-2 text-gray-600 hover:text-blue-600 transition-colors\"\r\n              title=\"Назад на 10 сек\"\r\n            >\r\n              <SkipBack size={20} />\r\n            </button>\r\n            \r\n            <button\r\n              onClick={togglePlayPause}\r\n              className={`p-3 rounded-full transition-colors ${\r\n                isPlaying \r\n                  ? 'bg-red-500 text-white hover:bg-red-600' \r\n                  : 'bg-blue-500 text-white hover:bg-blue-600'\r\n              }`}\r\n              title={isPlaying ? 'Пауза' : 'Воспроизвести'}\r\n            >\r\n              {isPlaying ? <Pause size={24} /> : <Play size={24} />}\r\n            </button>\r\n            \r\n            <button\r\n              onClick={stopPlayback}\r\n              className=\"p-2 text-gray-600 hover:text-red-600 transition-colors\"\r\n              title=\"Остановить\"\r\n            >\r\n              <Square size={20} />\r\n            </button>\r\n            \r\n            <button\r\n              onClick={skipForward}\r\n              className=\"p-2 text-gray-600 hover:text-blue-600 transition-colors\"\r\n              title=\"Вперед на 10 сек\"\r\n            >\r\n              <SkipForward size={20} />\r\n            </button>\r\n          </div>\r\n\r\n          {/* Громкость */}\r\n          <div className=\"flex items-center space-x-3\">\r\n            <button\r\n              onClick={toggleMute}\r\n              className=\"p-2 text-gray-600 hover:text-blue-600 transition-colors\"\r\n              title={isMuted ? 'Включить звук' : 'Выключить звук'}\r\n            >\r\n              {isMuted ? <VolumeX size={20} /> : <Volume2 size={20} />}\r\n            </button>\r\n            \r\n            <input\r\n              type=\"range\"\r\n              min=\"0\"\r\n              max=\"1\"\r\n              step=\"0.1\"\r\n              value={isMuted ? 0 : volume}\r\n              onChange={handleVolumeChange}\r\n              className=\"w-20 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer\"\r\n              title=\"Громкость\"\r\n            />\r\n            \r\n            <span className=\"text-sm text-gray-600 min-w-8\">\r\n              {Math.round((isMuted ? 0 : volume) * 100)}%\r\n            </span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Прогресс бар */}\r\n        <div className=\"mt-4\">\r\n          <div className=\"relative w-full h-2 bg-gray-200 rounded-full overflow-hidden\">\r\n            <div\r\n              className=\"absolute left-0 top-0 h-full bg-blue-500 transition-all duration-150\"\r\n              style={{ width: `${(currentTime / videoDuration) * 100}%` }}\r\n            />\r\n            <input\r\n              type=\"range\"\r\n              min=\"0\"\r\n              max={videoDuration}\r\n              step=\"0.1\"\r\n              value={currentTime}\r\n              onChange={(e) => seekTo(parseFloat(e.target.value))}\r\n              className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\r\n              title=\"Позиция воспроизведения\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Информация об активных элементах */}\r\n        {activeItems.length > 0 && (\r\n          <div className=\"mt-3 flex flex-wrap gap-2\">\r\n            {activeItems.map(item => (\r\n              <div\r\n                key={item.id}\r\n                className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                  item.type === 'video' ? 'bg-blue-100 text-blue-700' :\r\n                  item.type === 'audio' || item.type === 'music' ? 'bg-green-100 text-green-700' :\r\n                  'bg-purple-100 text-purple-700'\r\n                }`}\r\n              >\r\n                {item.name}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}